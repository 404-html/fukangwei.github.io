<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="暴徒">
<meta property="og:url" content="http://fukangwei.gitee.io/page/27/index.html">
<meta property="og:site_name" content="暴徒">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="暴徒">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/27/">





  <title>暴徒</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">暴徒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/打印和条件分支/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/打印和条件分支/" itemprop="url">打印和条件分支</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T16:31:56+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"I love python!"</span>)  <span class="comment"># 输出“I love python”</span></span><br><span class="line">print(<span class="number">5</span> + <span class="number">3</span>)  <span class="comment"># 输出“8”</span></span><br><span class="line">print(<span class="string">"well water"</span> + <span class="string">" river"</span>)  <span class="comment"># 输出“well water river”</span></span><br><span class="line">print(<span class="string">"I lover python"</span> * <span class="number">8</span>)  <span class="comment"># 输出“I lover python”8次</span></span><br><span class="line">print(<span class="string">"I lover python\n"</span> * <span class="number">8</span>)  <span class="comment"># 输出“I lover python”8次，带换行</span></span><br><span class="line">dec_Dumber = <span class="number">12.3456</span></span><br><span class="line">print(<span class="string">'It is %.2f degrees today.'</span> % dec_Dumber)  <span class="comment"># 输出“It is 12.35 degrees today.”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;猜数字游戏：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">temp = input(<span class="string">"guess the number in my heart: "</span>)</span><br><span class="line">guess = int(temp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> guess == <span class="number">8</span>:</span><br><span class="line">    print(<span class="string">"Yes! you are right!"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"No! you are wrong!"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"The game is over!"</span>)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>print</code>函数具有重定向的功能。对于<code>python 2</code>，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logfile  = open(<span class="string">'/tmp/mylog.log'</span>, <span class="string">'a'</span>)</span><br><span class="line"><span class="keyword">print</span> &gt;&gt; logfile, <span class="string">'writeen by python version 2'</span></span><br><span class="line">logfile.close()</span><br></pre></td></tr></table></figure>
<p>查看文件<code>/tmp/mylog.log</code>，其内容为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writeen by python version <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>对于<code>python 3</code>，<code>print</code>重定向方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'mylog.log'</span>, <span class="string">'w'</span>)</span><br><span class="line">print(<span class="string">'writeen by python version 3'</span>, file=f)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>查看文件<code>mylog.log</code>，其内容为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writeen by python version <span class="number">3</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="条件分支"><a href="#条件分支" class="headerlink" title="条件分支"></a>条件分支</h3><p>&emsp;&emsp;在终端输入<code>1 &lt; 3</code>，则输出<code>True</code>；输入<code>2 &gt; 3</code>，则输出<code>False</code>。<br>&emsp;&emsp;<code>Python</code>的条件分支语句(注意这里的缩进关系)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件:</span><br><span class="line">    条件为真(<span class="keyword">True</span>)执行的操作</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    条件为假(<span class="keyword">False</span>)执行的操作</span><br></pre></td></tr></table></figure>
<p>对小游戏的改进：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">temp = input(<span class="string">"guess the number in my heart: "</span>)</span><br><span class="line">guess = int(temp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> guess == <span class="number">8</span>:</span><br><span class="line">    print(<span class="string">"Yes! you are right!"</span>)</span><br><span class="line">    print(<span class="string">"But, there is not a reward!"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> guess &gt; <span class="number">8</span>:</span><br><span class="line">        print(<span class="string">"The number is bigger!"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"The number is litter!"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"The game is over!"</span>)</span><br></pre></td></tr></table></figure>
<p><code>Python</code>是靠缩进来确定分支关系，不像<code>C</code>语言那样需要大括号来确定关系。<br>&emsp;&emsp;<code>Python</code>的<code>while</code>循环语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件:</span><br><span class="line">    条件为真(<span class="keyword">True</span>)执行的操作</span><br></pre></td></tr></table></figure>
<p>对小游戏的改进：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">temp = input(<span class="string">"guess the number in my heart: "</span>)</span><br><span class="line">guess = int(temp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> guess != <span class="number">8</span>:</span><br><span class="line">    temp = input(<span class="string">"Oh! This is wrong! Please input a number: "</span>)</span><br><span class="line">    guess = int(temp)</span><br><span class="line">    <span class="keyword">if</span> guess == <span class="number">8</span>:</span><br><span class="line">        print(<span class="string">"Yes! you are right!"</span>)</span><br><span class="line">        print(<span class="string">"But, there is not a reward!"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> guess &gt; <span class="number">8</span>:</span><br><span class="line">            print(<span class="string">"The number is bigger!"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"The number is litter!"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"The game is over!"</span>)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>Python</code>的<code>and</code>逻辑操作符可以将任意表达式连接在一起，并得到一个布尔类型的值。在终端输入<code>3&gt;2 and 1&lt;2</code>，则输出<code>True</code>。在终端输入<code>(3&gt;2) and (1&lt;2)</code>，同样输出<code>True</code>，只不过这样更加明确了运算的优先级。<br>&emsp;&emsp;我们希望每次程序产生的答案是随机的，于是需要引入外援<code>random</code>模块。这个<code>random</code>模块里边有一个函数叫做<code>randint</code>，它会返回一个随机的整数。改进程序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">​</span><br><span class="line">secret = random.randint(<span class="number">1</span>, <span class="number">10</span>)  <span class="comment"># 产生一个1到10的随机数</span></span><br><span class="line">​</span><br><span class="line">temp = input(<span class="string">"guess the number in my heart: "</span>)</span><br><span class="line">guess = int(temp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> guess != secret:</span><br><span class="line">    temp = input(<span class="string">"Oh! This is wrong! Please input a number: "</span>)</span><br><span class="line">    guess = int(temp)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> guess == secret:</span><br><span class="line">        print(<span class="string">"Yes! you are right!"</span>)</span><br><span class="line">        print(<span class="string">"But, there is not a reward!"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> guess &gt; secret:</span><br><span class="line">            print(<span class="string">"The number is bigger!"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"The number is litter!"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"The game is over!"</span>)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;判断成绩的程序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">score = int(input(<span class="string">"Please input a number: "</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">100</span> &gt;= score &gt;= <span class="number">90</span>:</span><br><span class="line">    print(<span class="string">'A'</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">90</span> &gt; score &gt;= <span class="number">80</span>:  <span class="comment"># else if</span></span><br><span class="line">    print(<span class="string">'B'</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">80</span> &gt; score &gt;= <span class="number">60</span>:</span><br><span class="line">    print(<span class="string">'C'</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">60</span> &gt; score &gt;= <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">'D'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'输入错误!'</span>)</span><br></pre></td></tr></table></figure>
<p><code>Python</code>可以有效地避免悬挂<code>else</code>，即<code>C</code>语言中的<code>else</code>匹配问题。</p>
<h4 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h4><p>&emsp;&emsp;条件表达式类似于<code>C</code>语言的三元操作符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x, y = <span class="number">4</span>, <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> x &lt; y:</span><br><span class="line">    small = x</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    small = y</span><br></pre></td></tr></table></figure>
<p>可以被改进为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">small = x <span class="keyword">if</span> x &lt; y <span class="keyword">else</span> y</span><br></pre></td></tr></table></figure>
<h4 id="and、or、not"><a href="#and、or、not" class="headerlink" title="and、or、not"></a>and、or、not</h4><ul>
<li><code>and</code>：<code>x and y</code>返回的结果是决定表达式结果的值。如果<code>x</code>为真，则<code>y</code>决定结果，返回<code>y</code>；如果<code>x</code>为假，<code>x</code>决定了结果为假，返回<code>x</code>。</li>
<li><code>or</code>：<code>x or y</code>中其中一个为真，则整个表达式为真。</li>
<li><code>not</code>：返回表达式结果的<code>相反的值</code>。如果表达式结果为真，则返回<code>false</code>；如果表达式结果为假，则返回<code>true</code>。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/bisect模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/bisect模块/" itemprop="url">bisect模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T16:18:36+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;本模块实现已经排序的队列列表插入元素之后保持排序。对于个大量数据的列表来看，插入元素并保持排序，计算量是非常大的。本模块实现了<code>bisect</code>算法，主要基于二分算法来实现。<br>&emsp;&emsp;<code>bisect_left</code>如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bisect.bisect_left(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br></pre></td></tr></table></figure>
<p>对有序列表<code>a</code>里插入元素<code>x</code>，保持有序不变，返回插入的位置。参数<code>lo</code>和<code>hi</code>是表示判断列表的范围，默认是整个范围。如果插入的元素<code>x</code>已经在列表<code>a</code>存在，那就插入在存在元素的左边。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line">l = [<span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line">l.sort()</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect_left(l, <span class="number">0</span>))</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect_left(l, <span class="number">5</span>))</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect_left(l, <span class="number">7</span>))</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">0</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">4</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>bisect_right</code>如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bisect.bisect_right(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br><span class="line">bisect.bisect(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br></pre></td></tr></table></figure>
<p>在有序队列<code>a</code>里查找<code>x</code>可以插入的位置，并保持队列有序。如果插入的值与队列里的值相同，则插入在相同元素的右边，把这个位置的索引值返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line">l = [<span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line">l.sort()</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect_right(l, <span class="number">0</span>))</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect(l, <span class="number">5</span>))</span><br><span class="line">print(l)</span><br><span class="line">print(bisect.bisect(l, <span class="number">7</span>))</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">0</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">2</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="number">4</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>insort_left</code>如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bisect.insort_left(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br></pre></td></tr></table></figure>
<p>插入一个元素<code>x</code>到队列<code>a</code>，并把队列排序，相当于<code>a.insert(bisect.bisect_left(a, x, lo, hi), x)</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line">l = [<span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line">l.sort()</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort_left(l, <span class="number">0</span>)</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort_left(l, <span class="number">5</span>)</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort_left(l, <span class="number">7</span>)</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>insort_right</code>如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bisect.insort_right(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br><span class="line">bisect.insort(a, x, lo=<span class="number">0</span>, hi=len(a))</span><br></pre></td></tr></table></figure>
<p>插入元素<code>x</code>到<code>a</code>队列里，如果发现有相同元素，就插入到相同元素的右边。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line">l = [<span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line">l.sort()</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort_right(l, <span class="number">0</span>)</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort(l, <span class="number">5</span>)</span><br><span class="line">print(l)</span><br><span class="line">bisect.insort(l, <span class="number">7</span>)</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>
<p>对上面的函数进行一些简单地封装：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(a, x)</span>:</span></span><br><span class="line">    <span class="string">'Locate the leftmost value exactly equal to x'</span></span><br><span class="line">    i = bisect.bisect_left(a, x)</span><br><span class="line">    <span class="keyword">if</span> i != len(a) <span class="keyword">and</span> a[i] == x:</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">    <span class="keyword">raise</span> ValueError</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_lt</span><span class="params">(a, x)</span>:</span></span><br><span class="line">    <span class="string">'Find rightmost value less than x'</span></span><br><span class="line">    i = bisect.bisect_left(a, x)</span><br><span class="line">    <span class="keyword">if</span> i:</span><br><span class="line">        <span class="keyword">return</span> a[i - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">raise</span> ValueError</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_le</span><span class="params">(a, x)</span>:</span></span><br><span class="line">    <span class="string">'Find rightmost value less than or equal to x'</span></span><br><span class="line">    i = bisect.bisect_right(a, x)</span><br><span class="line">    <span class="keyword">if</span> i:</span><br><span class="line">        <span class="keyword">return</span> a[i - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">raise</span> ValueError</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_gt</span><span class="params">(a, x)</span>:</span></span><br><span class="line">    <span class="string">'Find leftmost value greater than x'</span></span><br><span class="line">    i = bisect.bisect_right(a, x)</span><br><span class="line">    <span class="keyword">if</span> i != len(a):</span><br><span class="line">        <span class="keyword">return</span> a[i]</span><br><span class="line">    <span class="keyword">raise</span> ValueError</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_ge</span><span class="params">(a, x)</span>:</span></span><br><span class="line">    <span class="string">'Find leftmost item greater than or equal to x'</span></span><br><span class="line">    i = bisect.bisect_left(a, x)</span><br><span class="line">    <span class="keyword">if</span> i != len(a):</span><br><span class="line">        <span class="keyword">return</span> a[i]</span><br><span class="line">    <span class="keyword">raise</span> ValueError</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;对学生成绩转换为<code>ABCDF</code>四个等级：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grade</span><span class="params">(score, breakpoints=[<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>], grades=<span class="string">'FDCBA'</span>)</span>:</span></span><br><span class="line">    i = bisect.bisect(breakpoints, score)</span><br><span class="line">    <span class="keyword">return</span> grades[i]</span><br><span class="line">​</span><br><span class="line">print([<span class="number">33</span>, <span class="number">99</span>, <span class="number">77</span>, <span class="number">70</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">100</span>])</span><br><span class="line">print([grade(score) <span class="keyword">for</span> score <span class="keyword">in</span> [<span class="number">33</span>, <span class="number">99</span>, <span class="number">77</span>, <span class="number">70</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">100</span>]])</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">33</span>, <span class="number">99</span>, <span class="number">77</span>, <span class="number">70</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">100</span>]</span><br><span class="line">[<span class="string">'F'</span>, <span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'C'</span>, <span class="string">'B'</span>, <span class="string">'A'</span>, <span class="string">'A'</span>]</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/time模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/time模块/" itemprop="url">time模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T15:52:45+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>time</code>模块提供各种时间相关的功能。在<code>Python</code>中，与时间处理有关的模块包括：<code>time</code>、<code>datetime</code>以及<code>calendar</code>。虽然这个模块总是可用，但并非所有的功能都适用于各个平台。该模块中定义的大部分函数是调用<code>C</code>平台上的同名函数实现，所以各个平台上实现可能略有不同。一些术语和约定的解释如下：</p>
<ul>
<li>时间戳(<code>timestamp</code>)：通常来说，时间戳表示的是从<code>1970</code>年<code>1</code>月<code>1</code>日<code>00:00:00</code>开始按秒计算的偏移量(<code>time.gmtime(0)</code>)。此模块中的函数无法处理<code>1970</code>纪元年以前的日期和时间或太遥远的未来(处理极限取决于<code>C</code>函数库，对于<code>32</code>位系统来说，是<code>2038</code>年)。</li>
<li><code>UTC</code>(<code>Coordinated Universal Time</code>)：也叫格林威治天文时间，是世界标准时间，在中国为<code>UTC + 8</code>。</li>
<li><code>DST</code>(<code>Daylight Saving Time</code>)：夏令时。</li>
</ul>
<p>一些实时函数的计算精度可能低于它们建议的值或参数，例如在大部分<code>Unix</code>系统，时钟一秒钟滴答<code>50</code>至<code>100</code>次。</p>
<h3 id="time-struct-time"><a href="#time-struct-time" class="headerlink" title="time.struct_time"></a>time.struct_time</h3><p>&emsp;&emsp;<code>gmtime</code>、<code>localtime</code>和<code>strptime</code>以时间元祖(<code>struct_time</code>)的形式返回。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>索引值</th>
<th>属性</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td><code>tm_year</code>(年)</td>
<td>例如<code>2015</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>tm_mon</code>(月)</td>
<td><code>1</code>至<code>12</code></td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>tm_mday</code>(日)</td>
<td><code>1</code>至<code>31</code></td>
</tr>
<tr>
<td><code>3</code></td>
<td><code>tm_hour</code>(时)</td>
<td><code>0</code>至<code>23</code></td>
</tr>
<tr>
<td><code>4</code></td>
<td><code>tm_min</code>(分)</td>
<td><code>0</code>至<code>59</code></td>
</tr>
<tr>
<td><code>5</code></td>
<td><code>tm_sec</code>(秒)</td>
<td><code>0</code>至<code>61</code>(<code>60</code>代表闰秒，<code>61</code>基于历史原因保留)</td>
</tr>
<tr>
<td><code>6</code></td>
<td><code>tm_wday</code>(星期几)</td>
<td><code>0</code>至<code>6</code>(<code>0</code>表示星期一)</td>
</tr>
<tr>
<td><code>7</code></td>
<td><code>tm_yday</code>(一年中的第几天)</td>
<td><code>1</code>至<code>366</code></td>
</tr>
<tr>
<td><code>8</code></td>
<td><code>tm_isdst</code>(是否为夏令时)</td>
<td><code>0</code>、<code>1</code>、<code>-1</code>(<code>-1</code>代表夏令时)</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>time.altzone</code>：返回格林威治西部的夏令时地区的偏移秒数；如果该地区在格林威治东部会返回负值(如西欧，包括英国)；对夏令时启用地区才能使用。</li>
<li><code>time.asctime([t])</code>：接受时间元组并返回一个可读的形式为<code>Tue Dec 11 18:07:14 2015</code>(<code>2015</code>年<code>12</code>月<code>11</code>日周二<code>18</code>时<code>07</code>分<code>14</code>秒)的<code>24</code>个字符的字符串。</li>
<li><code>time.clock</code>：用以浮点数计算的秒数返回当前的<code>CPU</code>时间。用来衡量不同程序的耗时，比<code>time.time</code>更有用。由于该方法依赖操作系统，建议使用<code>perf_counter</code>或<code>process_time</code>代替(一个返回系统运行时间，一个返回进程运行时间，请按照实际需求选择)。</li>
<li><code>time.ctime([secs])</code>：作用相当于<code>asctime(localtime(secs))</code>，未给参数相当于<code>asctime</code>。</li>
<li><code>time.gmtime([secs])</code>：接收时间辍(<code>1970</code>纪元年后经过的浮点秒数)并返回格林威治天文时间下的时间元组<code>t</code>(<code>t.tm_isdst</code>始终为<code>0</code>)。</li>
<li><code>time.daylight</code>：如果夏令时被定义，则该值为非零。</li>
<li><code>time.localtime([secs])</code>：接收时间辍(<code>1970</code>纪元年后经过的浮点秒数)并返回当地时间下的时间元组<code>t</code>(<code>t.tm_isdst</code>可取<code>0</code>或<code>1</code>，取决于当地当时是不是夏令时)。</li>
<li><code>time.mktime(t)</code>：接受时间元组并返回时间辍(<code>1970</code>纪元后经过的浮点秒数)。</li>
<li><code>time.perf_counter</code>：返回计时器的精准时间(系统的运行时间)，包含整个系统的睡眠时间。由于返回值的基准点是未定义的，所以只有连续调用的结果之间的差才是有效的。</li>
<li><code>time.process_time</code>：返回当前进程执行<code>CPU</code>的时间总和，不包含睡眠时间。由于返回值的基准点是未定义的，所以只有连续调用的结果之间的差才是有效的。</li>
<li><code>time.sleep(secs)</code>：推迟调用线程的运行，<code>secs</code>的单位是秒。</li>
<li><code>time.strftime(format[, t])</code>：把一个代表时间的元组或者<code>struct_time</code>(例如由<code>time.localtime</code>和<code>time.gmtime</code>返回)转化为格式化的时间字符串。如果<code>t</code>未指定，将传入<code>time.localtime</code>。如果元组中任何一个元素越界，将会抛出<code>ValueError</code>异常。<code>format</code>格式如下：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>格式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%a</code></td>
<td>本地(<code>locale</code>)简化星期名称</td>
</tr>
<tr>
<td><code>%A</code></td>
<td>本地完整星期名称</td>
</tr>
<tr>
<td><code>%b</code></td>
<td>本地简化月份名称</td>
</tr>
<tr>
<td><code>%B</code></td>
<td>本地完整月份名称</td>
</tr>
<tr>
<td><code>%c</code></td>
<td>本地相应的日期和时间表示</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>一个月中的第几天(<code>01</code>至<code>31</code>)</td>
</tr>
<tr>
<td><code>%H</code></td>
<td>一天中的第几个小时(<code>24</code>小时制，<code>00</code>至<code>23</code>)</td>
</tr>
<tr>
<td><code>%l</code></td>
<td>一天中的第几个小时(<code>12</code>小时制，<code>01</code>至<code>12</code>)</td>
</tr>
<tr>
<td><code>%j</code></td>
<td>一年中的第几天(<code>001</code>至<code>366</code>)</td>
</tr>
<tr>
<td><code>%m</code></td>
<td>月份(<code>01</code>至<code>12</code>)</td>
</tr>
<tr>
<td><code>%M</code></td>
<td>分钟数(<code>00</code>至<code>59</code>)</td>
</tr>
<tr>
<td><code>%p</code></td>
<td>本地<code>am</code>或者<code>pm</code>的相应符</td>
</tr>
<tr>
<td><code>%S</code></td>
<td>秒(<code>01</code>至<code>61</code>)</td>
</tr>
<tr>
<td><code>%U</code></td>
<td>一年中的星期数(<code>00</code>至<code>53</code>，星期天是一个星期的开始)，第一个星期天之前的所有天数都放在第<code>0</code>周</td>
</tr>
<tr>
<td><code>%w</code></td>
<td>一个星期中的第几天(<code>0</code>至<code>6</code>，<code>0</code>是星期天)</td>
</tr>
<tr>
<td><code>%W</code></td>
<td>和<code>%U</code>基本相同，不同的是<code>%W</code>以星期一为一个星期的开始</td>
</tr>
<tr>
<td><code>%x</code></td>
<td>本地相应日期</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>本地相应时间</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>去掉世纪的年份(<code>00</code>至<code>99</code>)</td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>完整的年份</td>
</tr>
<tr>
<td><code>%z</code></td>
<td>用<code>+HHMM</code>或<code>-HHMM</code>表示距离格林威治的时区偏移(<code>H</code>代表十进制的小时数，<code>M</code>代表十进制的分钟数)</td>
</tr>
<tr>
<td><code>%Z</code></td>
<td>时区的名字(如果不存在，则为空字符)</td>
</tr>
<tr>
<td><code>%%</code></td>
<td><code>%</code>号本身</td>
</tr>
</tbody>
</table>
</div>
<p><code>%p</code>只有与<code>%I</code>配合使用才有效果。当使用<code>strptime</code>函数时，只有当在这年中的周数和天数被确定的时候<code>%U</code>和<code>%W</code>才会被计算。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time <span class="keyword">as</span> t</span><br><span class="line">time_str = t.strftime(<span class="string">"a, %d %b %Y %H:%M:%S +0000"</span>, t.gmtime())</span><br><span class="line">print(time_str)  <span class="comment"># 结果为“a, 19 Nov 2015 00:10:32 +0000”</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>time.strptime(string[, format])</code>：把一个格式化时间字符串转化为<code>struct_time</code>，实际上它和<code>strftime</code>是逆操作。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time <span class="keyword">as</span> t</span><br><span class="line">time_str = t.strptime(<span class="string">"30 Nov 14"</span>, <span class="string">"%d %b %y"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果为time.struct_time(tm_year=2014, tm_mon=11, tm_mday=30, tm_hour=0, \</span></span><br><span class="line"><span class="comment">#                        tm_min=0, tm_sec=0, tm_wday=6, tm_yday=334, tm_isdst=-1)</span></span><br><span class="line">print(time_str)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>time.time</code>：返回当前时间的时间戳(<code>1970</code>纪元年后经过的浮点秒数)。</li>
<li><code>time.timezone</code>：<code>time.timezone</code>属性是当地时区(未启动夏令时)距离格林威治的偏移秒数(美洲大于<code>0</code>；大部分欧洲、亚洲、非洲小于等于<code>0</code>)。</li>
<li><code>time.tzname</code>：<code>time.tzname</code>属性是包含两个字符串的元组：第一是当地非夏令时区的名称，第二个是当地的<code>DST</code>时区的名称。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/subprocess模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/subprocess模块/" itemprop="url">subprocess模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T15:30:45+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>subprocess</code>的目的就是启动一个新的进程并且与之通信。<code>subprocess</code>模块中只定义了一个类<code>Popen</code>，可以使用<code>Popen</code>来创建进程，并与进程进行复杂的交互。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">subprocess.Popen(</span><br><span class="line">    args, bufsize=<span class="number">0</span>, executable=<span class="keyword">None</span>, stdin=<span class="keyword">None</span>, stdout=<span class="keyword">None</span>, stderr=<span class="keyword">None</span>,</span><br><span class="line">    preexec_fn=<span class="keyword">None</span>, close_fds=<span class="keyword">False</span>, shell=<span class="keyword">False</span>, cwd=<span class="keyword">None</span>, env=<span class="keyword">None</span>,</span><br><span class="line">    universal_newlines=<span class="keyword">False</span>, startupinfo=<span class="keyword">None</span>, creationflags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>args</code>：可以是字符串或者序列类型，用于指定进程的可执行文件及其参数。如果是序列类型，第一个元素通常是可执行文件的路径。我们也可以显式地使用<code>executeable</code>参数来指定可执行文件的路径。</li>
<li><code>bufsize</code>：指定缓冲区的大小。<code>0</code>表示无缓冲，<code>1</code>表示行缓冲，负值表示系统缓冲(全缓冲)，其他数值表示缓冲区大小</li>
<li><code>stdin</code>、<code>stdout</code>、<code>stderr</code>：分别表示程序的标准输入、输出、错误句柄。它们可以是<code>PIPE</code>、文件描述符或文件对象，也可以设置为<code>None</code>，表示从父进程继承。</li>
<li><code>preexec_fn</code>：只在<code>Unix</code>平台下有效，用于指定一个可执行对象(<code>callable object</code>)，它将在子进程运行之前被调用。</li>
<li><code>close_sfs</code>：在<code>windows</code>平台下，如果<code>close_fds</code>被设置为<code>True</code>，则新创建的子进程将不会继承父进程的输入、输出、错误管道。我们不能将<code>close_fds</code>设置为<code>True</code>的同时，重定向子进程的标准输入、输出与错误(<code>stdin</code>、<code>stdout</code>和<code>stderr</code>)。</li>
<li><code>shell</code>：如果设为<code>true</code>，程序将通过<code>shell</code>来执行。</li>
<li><code>cwd</code>：用于设置子进程的当前目录。</li>
<li><code>env</code>：字典类型，用于指定子进程的环境变量。如果<code>env</code>为<code>None</code>，子进程的环境变量将从父进程中继承。</li>
<li><code>universal_newlines</code>：不同操作系统下，文本的换行符是不一样的。例如<code>Windows</code>下用<code>\r\n</code>表示换，而<code>Linux</code>下用<code>\n</code>。如果将此参数设置为<code>True</code>，<code>Python</code>统一把这些换行符当作<code>\n</code>来处理。</li>
<li><code>startupinfo</code>与<code>createionflags</code>：只在<code>Windows</code>下有效，它们将被传递给底层的<code>CreateProcess</code>函数，用于设置子进程的一些属性，例如主窗口的外观、进程的优先级。</li>
</ul>
<p>&emsp;&emsp;<code>subprocess.PIPE</code>：在创建<code>Popen</code>对象时，<code>subprocess.PIPE</code>可以初始化<code>stdin</code>、<code>stdout</code>或<code>stderr</code>参数，表示与子进程通信的标准流。<br>&emsp;&emsp;<code>subprocess.STDOUT</code>：创建<code>Popen</code>对象时，用于初始化<code>stderr</code>参数，表示将错误通过标准输出流输出。<br>&emsp;&emsp;<code>subprocess.call(*popenargs, **kwargs)</code>：运行命令。该函数将一直等待到子进程运行结束，并返回进程的<code>returncode</code>。如果子进程不需要进行交互，就可以使用该函数来创建。<br>&emsp;&emsp;<code>subprocess.check_call(*popenargs, **kwargs)</code>：与<code>subprocess.call</code>功能一样，只是如果子进程返回的<code>returncode</code>不为<code>0</code>的话，将触发<code>CalledProcessError</code>异常。在异常对象中，包括进程的<code>returncode</code>信息。<br>&emsp;&emsp;<code>Popen</code>的方法如下：</p>
<ul>
<li><code>Popen.poll</code>：用于检查子进程是否已经结束，设置并返回<code>returncode</code>属性。</li>
<li><code>Popen.wait</code>：等待子进程结束，设置并返回<code>returncode</code>属性。</li>
<li><code>Popen.communicate(input=None)</code>：与子进程进行交互。向<code>stdin</code>发送数据，或从<code>stdout</code>和<code>stderr</code>中读取数据。可选参数<code>input</code>指定发送到子进程的参数。<code>communicate</code>返回一个元组，即<code>(stdoutdata, stderrdata)</code>。注意，如果希望通过进程的<code>stdin</code>向其发送数据，在创建<code>Popen</code>对象时，参数<code>stdin</code>必须被设置为<code>PIPE</code>。同样，如果希望从<code>stdout</code>和<code>stderr</code>获取数据，必须将<code>stdout</code>和<code>stderr</code>设置为<code>PIPE</code>。</li>
<li><code>Popen.send_signal(signal)</code>：向子进程发送信号。</li>
<li><code>Popen.terminate</code>：停止(<code>stop</code>)子进程。在<code>Windows</code>平台下，该方法将调用<code>Windows</code>的<code>TerminateProcess</code>来结束子进程。</li>
<li><code>Popen.kill</code>：杀死子进程。</li>
<li><code>Popen.pid</code>：获取子进程的进程<code>ID</code>。</li>
<li><code>Popen.returncode</code>：获取进程的返回值。如果进程还没有结束，返回<code>None</code>。</li>
</ul>
<p>&emsp;&emsp;在程序中运行其他程序或<code>shell</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">subprocess.Popen(<span class="string">'shell脚本'</span>, shell=<span class="keyword">True</span>)</span><br><span class="line">subprocess.call(<span class="string">'shell脚本'</span>, shell=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>两者的区别是前者无阻塞，会和主程序并行运行，后者必须等待命令执行完毕。<br>&emsp;&emsp;有时候我们需要程序的返回结果，可以这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = subprocess.Popen(<span class="string">'ls -l'</span>, shell=<span class="keyword">True</span>, stdout=subprocess.PIPE)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.communicate()</span><br><span class="line">(<span class="string">'\xe6\x80\xbb\xe7\x94\xa8\xe9\x87\x8f 152\n</span></span><br><span class="line"><span class="string">-rw------- 1 limbo limbo   808  7\xe6\x9c\x88  6 17:46 0000-00-00-welcome-to-jekyll.markdown.erb\n</span></span><br><span class="line"><span class="string">drwx------ 2 limbo limbo  4096  8\xe6\x9c\x88 15 18:43 arg\n</span></span><br><span class="line"><span class="string">drwx------ 2 limbo limbo  4096  8\xe6\x9c\x88  7 17:37 argv\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 2 limbo limbo  4096  9\xe6\x9c\x88 10 15:27 c\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 3 limbo limbo  4096  9\xe6\x9c\x88 11 14:35 d3\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 3 limbo limbo  4096  9\xe6\x9n'</span>, <span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<p>它会返回一个元组，即<code>(stdoutdata, stderrdata)</code>。<code>subprocess</code>还有另一种更简单方法，它会返回<code>stdout</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = subprocess.check_output(<span class="string">'ls -l'</span>, shell=<span class="keyword">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'\xe6\x80\xbb\xe7\x94\xa8\xe9\x87\x8f 152\n</span></span><br><span class="line"><span class="string">-rw------- 1 limbo limbo   808  7\xe6\x9c\x88  6 17:46 0000-00-00-welcome-to-jekyll.markdown.erb\n</span></span><br><span class="line"><span class="string">drwx------ 2 limbo limbo  4096  8\xe6\x9c\x88 15 18:43 arg\n</span></span><br><span class="line"><span class="string">drwx------ 2 limbo limbo  4096  8\xe6\x9c\x88  7 17:37 argv\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 2 limbo limbo  4096  9\xe6\x9c\x88 10 15:27 c\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 3 limbo limbo  4096  9\xe6\x9c\x88 11 14:35 d3\n</span></span><br><span class="line"><span class="string">drwxrwxr-x 3 limbo limbo  4096  9\xe6\x9n'</span></span><br></pre></td></tr></table></figure>
<p>但是前者可以实现更多的交互(例如<code>stderr</code>和<code>stdin</code>)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">​</span><br><span class="line">child1 = subprocess.Popen([<span class="string">"ls"</span>, <span class="string">"-l"</span>], stdout=subprocess.PIPE)</span><br><span class="line">child2 = subprocess.Popen([<span class="string">"wc"</span>], stdin=child1.stdout, stdout=subprocess.PIPE)</span><br><span class="line">out = child2.communicate()</span><br><span class="line">print(out)</span><br></pre></td></tr></table></figure>
<p>实际上是这样的过程：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">child1.stdout -&gt; subprocess.PIPE</span><br><span class="line">child2.stdin &lt;- subprocess.PIPE</span><br><span class="line">child2.stdout -&gt; subprocess.PIPE</span><br></pre></td></tr></table></figure>
<p><code>subprocess.PIPE</code>实际上为文本流提供一个缓存区，直到<code>communicate</code>方法从<code>PIPE</code>中读取出数据。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/gzip模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/gzip模块/" itemprop="url">gzip模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T15:04:04+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="gzip-module"><a href="#gzip-module" class="headerlink" title="gzip module"></a>gzip module</h3><p>&emsp;&emsp;This module provides a simple interface to compress and decompress files just like the <code>GNU</code> programs <code>gzip</code> and <code>gunzip</code> would.<br>&emsp;&emsp;The data compression is provided by the <code>zlib</code> module.<br>&emsp;&emsp;The <code>gzip</code> module provides the <code>GzipFile</code> class, as well as the <code>open()</code>, <code>compress()</code> and <code>decompress()</code> convenience functions. The <code>GzipFile</code> class reads and writes <code>gzip-format</code> files, automatically compressing or decompressing the data so that it looks like an ordinary file object.<br>&emsp;&emsp;Note that additional file formats which can be decompressed by the <code>gzip</code> and <code>gunzip</code> programs, such as those produced by compress and pack, are not supported by this module.<br>&emsp;&emsp;The module defines the following items:<br>&emsp;&emsp;<code>gzip.open(filename, mode=&#39;rb&#39;, compresslevel=9, encoding=None, errors=None, newline=None)</code>: Open a <code>gzip-compressed</code> file in binary or text mode, returning a file object. The <code>filename</code> argument can be an actual filename (a str or bytes object), or an existing file object to read from or write to.<br>&emsp;&emsp;The <code>mode</code> argument can be any of <code>r</code>, <code>rb</code>, <code>a</code>, <code>ab</code>, <code>w</code>, <code>wb</code>, <code>x</code> or <code>xb</code> for binary mode, or <code>rt</code>, <code>at</code>, <code>wt</code>, or <code>xt</code> for text mode. The default is <code>rb</code>.<br>&emsp;&emsp;The <code>compresslevel</code> argument is an integer from <code>0</code> to <code>9</code>, as for the <code>GzipFile</code> constructor.<br>&emsp;&emsp;<code>class gzip.GzipFile(filename=None, mode=None, compresslevel=9, fileobj=None, mtime=None)</code>: Constructor for the <code>GzipFile</code> class, which simulates most of the methods of a file object, with the exception of the <code>truncate()</code> method. At least one of fileobj and filename must be given a <code>non-trivial</code> value.<br>&emsp;&emsp;The new class instance is based on fileobj, which can be a regular file, an <code>io.BytesIO</code> object, or any other object which simulates a file. It defaults to None, in which case filename is opened to provide a file object.<br>&emsp;&emsp;When fileobj is not None, the <code>filename</code> argument is only used to be included in the <code>gzip</code> file header, which may include the original filename of the uncompressed file. It defaults to the filename of fileobj, if discernible; otherwise, it defaults to the empty string, and in this case the original filename is not included in the header.<br>&emsp;&emsp;The <code>mode</code> argument can be any of <code>r</code>, <code>rb</code>, <code>a</code>, <code>ab</code>, <code>w</code>, <code>wb</code>, <code>x</code>, or <code>xb</code>, depending on whether the file will be read or written. The default is the mode of fileobj if discernible; otherwise, the default is <code>rb</code>.<br>&emsp;&emsp;Note that the file is always opened in binary mode. To open a compressed file in text mode, use <code>open()</code> (or wrap your <code>GzipFile</code> with an <code>io.TextIOWrapper</code>).<br>&emsp;&emsp;The <code>compresslevel</code> argument is an integer from <code>0</code> to <code>9</code> controlling the level of compression; <code>1</code> is fastest and produces the least compression, and <code>9</code> is slowest and produces the most compression. <code>0</code> is no compression. The default is <code>9</code>.<br>&emsp;&emsp;The <code>mtime</code> argument is an optional numeric timestamp to be written to the last modification time field in the stream when compressing. It should only be provided in compression mode. If omitted or None, the current time is used.<br>&emsp;&emsp;Calling a <code>GzipFile</code> object’s <code>close()</code> method does not close fileobj, since you might wish to append more material after the compressed data. This also allows you to pass an <code>io.BytesIO</code> object opened for writing as fileobj, and retrieve the resulting memory buffer using the <code>io.BytesIO</code> object’s <code>getvalue()</code> method.<br>&emsp;&emsp;<code>GzipFile</code> supports the <code>io.BufferedIOBase</code> interface, including iteration and the with statement. Only the <code>truncate()</code> method isn’t implemented.<br>&emsp;&emsp;<code>GzipFile</code> also provides the following method and attribute:<br>&emsp;&emsp;<code>peek(n)</code>: Read <code>n</code> uncompressed bytes without advancing the file position. At most one single read on the compressed stream is done to satisfy the call. The number of bytes returned may be more or less than requested.<br>&emsp;&emsp;Note While calling <code>peek()</code> does not change the file position of the <code>GzipFile</code>, it may change the position of the underlying file object (e.g. if the <code>GzipFile</code> was constructed with the fileobj parameter).<br>&emsp;&emsp;<code>mtime</code>: When decompressing, the value of the last modification time field in the most recently read header may be read from this attribute, as an integer. The initial value before reading any headers is None.<br>&emsp;&emsp;All <code>gzip</code> compressed streams are required to contain this timestamp field. Some programs, such as <code>gunzip</code>, make use of the timestamp. The format is the same as the return value of <code>time.time()</code> and the <code>st_mtime</code> attribute of the object returned by <code>os.stat()</code>.<br>&emsp;&emsp;<code>gzip.compress(data, compresslevel=9)</code>: Compress the <code>data</code>, returning a bytes object containing the compressed data. <code>compresslevel</code> has the same meaning as in the <code>GzipFile</code> constructor above.<br>&emsp;&emsp;<code>gzip.decompress(data)</code>: Decompress the <code>data</code>, returning a bytes object containing the uncompressed data.</p>
<h3 id="Examples-of-usage"><a href="#Examples-of-usage" class="headerlink" title="Examples of usage"></a>Examples of usage</h3><p>&emsp;&emsp;Example of how to read a compressed file:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line">​</span><br><span class="line"><span class="keyword">with</span> gzip.open(<span class="string">'/home/joe/file.txt.gz'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    file_content = f.read()</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Example of how to create a compressed <code>GZIP</code> file:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line">​</span><br><span class="line">content = <span class="string">b"Lots of content here"</span></span><br><span class="line"><span class="keyword">with</span> gzip.open(<span class="string">'/home/joe/file.txt.gz'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(content)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Example of how to <code>GZIP</code> compress an existing file:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">​</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'/home/joe/file.txt'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    <span class="keyword">with</span> gzip.open(<span class="string">'/home/joe/file.txt.gz'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">        shutil.copyfileobj(f_in, f_out)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Example of how to <code>GZIP</code> compress a binary string:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line">​</span><br><span class="line">s_in = <span class="string">b"Lots of content here"</span></span><br><span class="line">s_out = gzip.compress(s_in)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/Python语法/glob模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/Python语法/glob模块/" itemprop="url">glob模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T14:53:05+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="glob-Unix-style-pathname-pattern-expansion"><a href="#glob-Unix-style-pathname-pattern-expansion" class="headerlink" title="glob: Unix style pathname pattern expansion"></a>glob: Unix style pathname pattern expansion</h3><p>&emsp;&emsp;The <code>glob</code> module finds all the pathnames matching a specified pattern according to the rules used by the <code>Unix shell</code>, although results are returned in arbitrary order. No tilde expansion is done, but <code>*</code>, <code>?</code>, and character ranges expressed with <code>[]</code> will be correctly matched. This is done by using the <code>os.scandir()</code> and <code>fnmatch.fnmatch()</code> functions in concert, and not by actually invoking a subshell. Note that unlike <code>fnmatch.fnmatch()</code>, <code>glob</code> treats filenames beginning with a dot (<code>.</code>) as special cases (For tilde and shell variable expansion, use <code>os.path.expanduser()</code> and <code>os.path.expandvars()</code>).<br>&emsp;&emsp;For a literal match, wrap the <code>meta-characters</code> in brackets. For example, <code>[?]</code> matches the character <code>?</code>.<br>&emsp;&emsp;<code>glob.glob(pathname, *, recursive=False)</code>: Return a <code>possibly-empty</code> list of path names that match pathname, which must be a string containing a path specification. <code>pathname</code> can be either absolute (like <code>/usr/src/Python-1.5/Makefile</code>) or relative (like <code>../../Tools/*/*.gif</code>), and can contain <code>shell-style</code> wildcards. Broken symlinks are included in the results (as in the shell).<br>&emsp;&emsp;If <code>recursive</code> is <code>true</code>, the pattern <code>**</code> will match any files and zero or more directories and subdirectories. If the pattern is followed by an <code>os.sep</code>, only directories and subdirectories match.<br>&emsp;&emsp;Note Using the <code>**</code> pattern in large directory trees may consume an inordinate amount of time.<br>&emsp;&emsp;Changed in <code>version 3.5</code>: Support for recursive globs using <code>**</code>.<br>&emsp;&emsp;<code>glob.iglob(pathname, recursive=False)</code>: Return an iterator which yields the same values as <code>glob()</code> without actually storing them all simultaneously.<br>&emsp;&emsp;<code>glob.escape(pathname)</code>: Escape all special characters (<code>?</code>, <code>*</code> and <code>[</code>). This is useful if you want to match an arbitrary literal string that may have special characters in it. Special characters in <code>drive/UNC</code> sharepoints are not escaped, e.g. on Windows <code>escape(&#39;//?/c:/Quo vadis?.txt&#39;)</code> returns <code>//?/c:/Quo vadis[?].txt</code>.<br>&emsp;&emsp;For example, consider a directory containing the following files: <code>1.gif</code>, <code>2.txt</code>, <code>card.gif</code> and a subdirectory sub which contains only the file <code>3.txt</code>. <code>glob()</code> will produce the following results. Notice how any leading components of the path are preserved.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> glob</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'./[0-9].*'</span>)</span><br><span class="line">[<span class="string">'./1.gif'</span>, <span class="string">'./2.txt'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'*.gif'</span>)</span><br><span class="line">[<span class="string">'1.gif'</span>, <span class="string">'card.gif'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'?.gif'</span>)</span><br><span class="line">[<span class="string">'1.gif'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'**/*.txt'</span>, recursive=<span class="keyword">True</span>)</span><br><span class="line">[<span class="string">'2.txt'</span>, <span class="string">'sub/3.txt'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'./**/'</span>, recursive=<span class="keyword">True</span>)</span><br><span class="line">[<span class="string">'./'</span>, <span class="string">'./sub/'</span>]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;If the directory contains files starting with <code>.</code>, they won’t be matched by default. For example, consider a directory containing <code>card.gif</code> and <code>.card.gif</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> glob</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'*.gif'</span>)</span><br><span class="line">[<span class="string">'card.gif'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glob.glob(<span class="string">'.c*'</span>)</span><br><span class="line">[<span class="string">'.card.gif'</span>]</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/数据结构和算法/计算数字1的个数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/数据结构和算法/计算数字1的个数/" itemprop="url">计算数字1的个数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T13:49:58+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;给定一个十进制整数<code>N</code>，求出从<code>1</code>到<code>N</code>的所有整数中出现<code>1</code>的个数。例如<code>N = 2</code>时，<code>1 2</code>出现了<code>1</code>个<code>1</code>；<code>N = 12</code>时，<code>1 2 3 4 5 6 7 8 9 10 11 12</code>出现了<code>5</code>个<code>1</code>。<br>&emsp;&emsp;我们可以发现一些规律：<code>1</code>至<code>N</code>中<code>1</code>的个数跟最高位有关，那我们换个角度思考，给定一个<code>N</code>，我们分析<code>1</code>至<code>N</code>中的数在每一位上出现<code>1</code>的次数的和，看看每一位上<code>1</code>出现的个数的和由什么决定。<br>&emsp;&emsp;<code>1</code>位数的情况：大于等于<code>1</code>时有<code>1</code>个，小于<code>1</code>时就没有。<br>&emsp;&emsp;<code>2</code>位数的情况：<code>N = 13</code>时，个位数出现的<code>1</code>的次数为<code>2</code>，分别为<code>1</code>和<code>11</code>；十位数出现<code>1</code>的次数为<code>4</code>，分别为<code>10 11 12 13</code>，所以<code>f(N) = 2 + 4</code>。<code>N = 23</code>时，个位数出现的<code>1</code>的次数为<code>3</code>，分别为<code>1 11 21</code>；十位数出现<code>1</code>的次数为<code>10</code>，分别为<code>10</code>至<code>19</code>，所以<code>f(N) = 3 + 10</code>。<br>&emsp;&emsp;由此我们发现，个位数出现<code>1</code>的次数不仅和个位数有关，和十位数也有关。如果个位数大于等于<code>1</code>，则个位数出现<code>1</code>的次数为十位数的数字加<code>1</code>；如果个位数为<code>0</code>，个位数出现<code>1</code>的次数等于十位数数字。而十位数上出现<code>1</code>的次数也不仅和十位数相关，也和个位数相关：如果十位数字等于<code>1</code>，则十位数上出现<code>1</code>的次数为个位数的数字加<code>1</code>，假如十位数大于<code>1</code>，则十位数上出现<code>1</code>的次数为<code>10</code>。<br>&emsp;&emsp;<code>3</code>位数的情况：<code>N = 123</code>时，个位出现<code>1</code>的个数为<code>13</code>：<code>1 11 21 ... 91 101 111 121</code>；十位出现<code>1</code>的个数为<code>20</code>：<code>10</code>至<code>19</code>、<code>110</code>至<code>119</code>；百位出现<code>1</code>的个数为<code>24</code>：<code>100</code>至<code>123</code>。我们可以继续分析<code>4</code>位数，<code>5</code>位数，推导出下面一般的情况：<br>&emsp;&emsp;假设数字为<code>N</code>，我们要计算百位上出现<code>1</code>的次数，将由三部分决定：百位上的数字、百位以上的数字和百位一下的数字。<br>&emsp;&emsp;如果百位上的数字为<code>0</code>，则百位上出现<code>1</code>的次数仅由更高位决定。例如<code>12013</code>，百位出现<code>1</code>的情况为<code>100至199 1100至1199 2100至2199 ... 11100至11199</code>，共<code>1200</code>个，等于更高位数字乘以当前位数，即<code>12 * 100</code>。<br>&emsp;&emsp;如果百位上的数字大于<code>1</code>，则百位上出现<code>1</code>的次数仅由更高位决定。例如<code>12213</code>，百位出现<code>1</code>的情况为<code>100至199 1100至1199 2100至2199 ... 11100至11199 12100至12199</code>，共<code>1300</code>个，等于更高位数字加<code>1</code>乘以当前位数，即<code>(12 + 1) * 100</code>。<br>&emsp;&emsp;如果百位上的数字为<code>1</code>，则百位上出现<code>1</code>的次数不仅受更高位影响，还受低位影响。例如<code>12113</code>，受高位影响出现<code>1</code>的情况：<code>100至199 1100至1199 2100至2199 ... 11100至11199</code>，共<code>1200</code>个；但它还受低位影响，出现<code>1</code>的情况是<code>12100</code>至<code>12113</code>，共<code>114</code>个，等于低位数字<code>113 + 1</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">oneNumber</span> <span class="params">( <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> n )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> current = <span class="number">0</span>, after = <span class="number">0</span>, before = <span class="number">0</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( ( n / i ) != <span class="number">0</span> ) &#123;</span><br><span class="line">        current = ( n / i ) % <span class="number">10</span>;</span><br><span class="line">        before = n / ( i * <span class="number">10</span> );</span><br><span class="line">        after = n - ( n / i ) * i;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( current &gt; <span class="number">1</span> ) &#123;</span><br><span class="line">            count = count + ( before + <span class="number">1</span> ) * i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( current == <span class="number">0</span> ) &#123;</span><br><span class="line">            count = count + before * i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( current == <span class="number">1</span> ) &#123;</span><br><span class="line">            count = count + before * i + after + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        i = i * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> iNumber = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> uliCountNumber = <span class="number">0</span> ;</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"请输入iNumber: "</span> ) ;</span><br><span class="line">    <span class="built_in">scanf</span> ( <span class="string">"%ld"</span> , &amp;iNumber ) ;</span><br><span class="line">    uliCountNumber = oneNumber ( iNumber ) ;</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"1~%d中1的个数为: %d\n"</span> , iNumber , uliCountNumber ) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/数据结构和算法/字符串处理算法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/数据结构和算法/字符串处理算法/" itemprop="url">字符串处理算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T12:47:19+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="atoi函数"><a href="#atoi函数" class="headerlink" title="atoi函数"></a>atoi函数</h3><p>&emsp;&emsp;<code>atoi</code>函数是将字符串转换为相应的整型数。版本1如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">atoi</span> <span class="params">( <span class="keyword">char</span> *str )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ( *str &gt;= <span class="string">'0'</span> &amp;&amp; *str &lt;= <span class="string">'9'</span> ) &#123;</span><br><span class="line">        value *= <span class="number">10</span>;</span><br><span class="line">        value += *str - <span class="string">'0'</span>;</span><br><span class="line">        str++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>版本<code>2</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">atoi</span> <span class="params">( <span class="keyword">char</span> s[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, n, sign;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; <span class="built_in">isspace</span> ( s[i] ); i++ ) <span class="comment">/* skip white space */</span></span><br><span class="line">        ;</span><br><span class="line"></span><br><span class="line">    sign = ( s[i] == <span class="string">'-'</span> ) ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( s[i] == <span class="string">'+'</span> || s[i] == <span class="string">'-'</span> ) &#123; <span class="comment">/* skip sign */</span></span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ( n = <span class="number">0</span>; <span class="built_in">isdigit</span> ( s[i] ); i++ ) &#123;</span><br><span class="line">        n = <span class="number">10</span> * n + ( s[i] - <span class="string">'0'</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sign * n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="squeeze函数"><a href="#squeeze函数" class="headerlink" title="squeeze函数"></a>squeeze函数</h3><p>&emsp;&emsp;<code>squeeze</code>函数是从字符串<code>s</code>中删除<code>c</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">squeeze</span> <span class="params">( <span class="keyword">char</span> s[], <span class="keyword">int</span> c )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ( i = j = <span class="number">0</span>; s[i] != <span class="string">'\0'</span>; i++ )</span><br><span class="line">        <span class="keyword">if</span> ( s[i] != c ) &#123;</span><br><span class="line">            s[j++] = s[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    s[j] = <span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="strcat函数"><a href="#strcat函数" class="headerlink" title="strcat函数"></a>strcat函数</h3><p>&emsp;&emsp;<code>strcat</code>函数是将字符串<code>t</code>连接到字符串<code>s</code>的尾部，注意<code>s</code>必须有足够大的空间：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcat</span> <span class="params">( <span class="keyword">char</span> s[], <span class="keyword">char</span> t[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    i = j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ( s[i] != <span class="string">'\0'</span> ) &#123; <span class="comment">/* 判断是否为字符串s的尾部 */</span></span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ( ( s[i++] = t[j++] ) != <span class="string">'\0'</span> ) <span class="comment">/* 拷贝t */</span></span><br><span class="line">        ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reverse函数"><a href="#reverse函数" class="headerlink" title="reverse函数"></a>reverse函数</h3><p>&emsp;&emsp;<code>reverse</code>函数是倒置字符串<code>s</code>中各个字符的位置：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span> <span class="params">( <span class="keyword">char</span> s[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> c, i, j;</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>, j = <span class="built_in">strlen</span> ( s ) - <span class="number">1</span>; i &lt; j; i++, j-- ) &#123;</span><br><span class="line">        c = s[i];</span><br><span class="line">        s[i] = s[j];</span><br><span class="line">        s[j] = c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="itoa函数"><a href="#itoa函数" class="headerlink" title="itoa函数"></a>itoa函数</h3><p>&emsp;&emsp;<code>itoa</code>函数是将数字转换为字符串并保存到<code>s</code>中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">itoa</span> <span class="params">( <span class="keyword">int</span> n, <span class="keyword">char</span> s[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, sign;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( ( sign = n ) &lt; <span class="number">0</span> ) &#123; <span class="comment">/* record sign */</span></span><br><span class="line">        n = -n; <span class="comment">/* make n positive */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span> &#123; <span class="comment">/* generate digits in reverse order */</span></span><br><span class="line">        s[i++] = n % <span class="number">10</span> + <span class="string">'0'</span>; <span class="comment">/* get next digit */</span></span><br><span class="line">    &#125; <span class="keyword">while</span> ( ( n /= <span class="number">10</span> ) &gt; <span class="number">0</span> ); <span class="comment">/* delete it */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( sign &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        s[i++] = <span class="string">'-'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s[i] = <span class="string">'\0'</span>;</span><br><span class="line">    reverse ( s );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="strlen函数"><a href="#strlen函数" class="headerlink" title="strlen函数"></a>strlen函数</h3><p>&emsp;&emsp;<code>strlen</code>函数返回字符串<code>s</code>的长度：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">strlen</span> <span class="params">( <span class="keyword">char</span> *s )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">for</span> ( n = <span class="number">0</span>; *s != <span class="string">'\0'</span>, s++ ) &#123;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不使用额外变量的方式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mystrlen</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*s++) &#123;</span><br><span class="line">        <span class="keyword">return</span> mystrlen(s) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="strcpy函数"><a href="#strcpy函数" class="headerlink" title="strcpy函数"></a>strcpy函数</h3><p>&emsp;&emsp;<code>strcpy</code>函数将指针<code>t</code>指向的字符串复制到指针<code>s</code>指向的位置：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcpy</span> <span class="params">( <span class="keyword">char</span> *s, <span class="keyword">char</span> *t )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ( ( s[i] = t[i] ) != <span class="string">'\0'</span> ) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="strcmp函数"><a href="#strcmp函数" class="headerlink" title="strcmp函数"></a>strcmp函数</h3><p>&emsp;&emsp;<code>strcmp</code>函数如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">strcmp</span> <span class="params">( <span class="keyword">char</span> *s, <span class="keyword">char</span> *t )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> ( ; *s == *t; s++, t++ )</span><br><span class="line">        <span class="keyword">if</span> ( *s == <span class="string">'\0'</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> *s - *t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="trim函数"><a href="#trim函数" class="headerlink" title="trim函数"></a>trim函数</h3><p>&emsp;&emsp;<code>trim</code>函数删除字符串尾部的空格符、制表符与换行符：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">trim</span> <span class="params">( <span class="keyword">char</span> s[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ( n = <span class="built_in">strlen</span> ( s ) - <span class="number">1</span>; n &gt;= <span class="number">0</span>; n-- )</span><br><span class="line">        <span class="keyword">if</span> ( s[n] != <span class="string">' '</span> &amp;&amp; s[n] != <span class="string">'\t'</span> &amp;&amp; s[n] != <span class="string">'\n'</span> ) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    s[n + <span class="number">1</span>] = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="atof函数"><a href="#atof函数" class="headerlink" title="atof函数"></a>atof函数</h3><p>&emsp;&emsp;<code>atof</code>函数把字符串转换为相应的双精度浮点数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">atof</span> <span class="params">( <span class="keyword">char</span> s[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> val, power;</span><br><span class="line">    <span class="keyword">int</span> i, sign;</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; <span class="built_in">isspace</span> ( s[i] ); i++ ) <span class="comment">/* skip white space */</span></span><br><span class="line">        ;</span><br><span class="line">    sign = ( s[i] == <span class="string">'-'</span> ) ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> ( s[i] == <span class="string">'+'</span> || s[i] == <span class="string">'-'</span> ) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ( val = <span class="number">0.0</span>; <span class="built_in">isdigit</span> ( s[i] ); i++ ) &#123;</span><br><span class="line">        val = <span class="number">10.0</span> * val + ( s[i] - <span class="string">'0'</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ( s[i] == <span class="string">'.'</span> ) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ( power = <span class="number">1.0</span>; <span class="built_in">isdigit</span> ( s[i] ); i++ ) &#123;</span><br><span class="line">        val = <span class="number">10.0</span> * val + ( s[i] - <span class="string">'0'</span> );</span><br><span class="line">        power *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sign * val / power;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="numcmp函数"><a href="#numcmp函数" class="headerlink" title="numcmp函数"></a>numcmp函数</h3><p>&emsp;&emsp;<code>numcmp</code>函数按数值顺序比较字符串<code>s1</code>和<code>s2</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">numcmp</span> <span class="params">( <span class="keyword">char</span> *s1, <span class="keyword">char</span> *s2 )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> v1, v2;</span><br><span class="line">    v1 = atof ( s1 );</span><br><span class="line">    v2 = atof ( s2 );</span><br><span class="line">    <span class="keyword">if</span> ( v1 &lt; v2 ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( v1 &gt; v2 ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SubStr函数"><a href="#SubStr函数" class="headerlink" title="SubStr函数"></a>SubStr函数</h3><p>&emsp;&emsp;在主串中截取给定位置和给定长度的子串：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SubStr</span> <span class="params">( <span class="keyword">char</span> *S, <span class="keyword">char</span> *T, <span class="keyword">int</span> pos, <span class="keyword">int</span> len )</span> </span>&#123; <span class="comment">/* 串T的第pos个字符长度为len的子串为S */</span></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    j = <span class="built_in">strlen</span> ( T );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( pos &lt; <span class="number">1</span> || pos &gt; j ) &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"起始位置错误\n"</span> );</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( len &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"长度错误\n"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    T += ( pos - <span class="number">1</span> );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span>; i &lt;= len &amp;&amp; *T != <span class="string">'\0'</span>; i++ ) &#123;</span><br><span class="line">        *S++ = *T++;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    *S = <span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="StrInsert函数"><a href="#StrInsert函数" class="headerlink" title="StrInsert函数"></a>StrInsert函数</h3><p>&emsp;&emsp;字符串中子串的插入操作：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrInsert</span> <span class="params">( <span class="keyword">char</span> *S, <span class="keyword">int</span> pos, <span class="keyword">char</span> *T )</span> </span>&#123; <span class="comment">/* 在串S的第pos个字符后插入串T */</span></span><br><span class="line">    <span class="keyword">int</span> i,lenT,lenS;</span><br><span class="line">    lenT = <span class="built_in">strlen</span> ( T );</span><br><span class="line">    lenS = <span class="built_in">strlen</span> ( S );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( i = lenS; i &gt;= pos - <span class="number">1</span>; i-- ) &#123;</span><br><span class="line">        <span class="comment">/* 将主串S从pos位置开始的子串从最后的字符开始向前逐个后移，为插入T腾出位置 */</span></span><br><span class="line">        * ( S + i + lenT )  = * ( S + i );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( i = pos ; i &lt;= pos + lenT - <span class="number">1</span>; i++ ) &#123;</span><br><span class="line">        * ( S + i - <span class="number">1</span> ) = *T++; <span class="comment">/* 将串插入到S中空出位置 */</span></span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    * ( S + lenS + lenT ) = <span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="StrDelete函数"><a href="#StrDelete函数" class="headerlink" title="StrDelete函数"></a>StrDelete函数</h3><p>&emsp;&emsp;子串的删除：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrDelete</span> <span class="params">( <span class="keyword">char</span> *S, <span class="keyword">int</span> pos, <span class="keyword">int</span> len )</span> </span>&#123; <span class="comment">/* 从串S中删除第pos个字符串起长度为len的子串 */</span></span><br><span class="line">    <span class="keyword">int</span> i, lenS;</span><br><span class="line">    lenS =  <span class="built_in">strlen</span> ( S );</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* 如果从删除位置开始删除的子串长度大于主串后面的长度，则只保留主串前面字符 */</span></span><br><span class="line">    <span class="keyword">if</span> ( pos + len &gt; lenS ) &#123;</span><br><span class="line">        * ( S + pos - <span class="number">1</span> ) = <span class="string">'\0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">/* 将串S从已删除的子串后面开始逐个前移到pos位置 */</span></span><br><span class="line">        <span class="keyword">for</span> ( i = pos + len - <span class="number">1</span>; i &lt; lenS; i++ ) &#123;</span><br><span class="line">            * ( S + i - len ) = * ( S + i );</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        * ( S + lenS - len ) = <span class="string">'\0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="StrIndex函数"><a href="#StrIndex函数" class="headerlink" title="StrIndex函数"></a>StrIndex函数</h3><p>&emsp;&emsp;子串的定位：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StrIndex</span> <span class="params">( <span class="keyword">char</span> *S, <span class="keyword">char</span> *T, <span class="keyword">int</span> pos )</span> </span>&#123; <span class="comment">/* 返回T在S中第pos个字符后出现的位置；否则函数返回0 */</span></span><br><span class="line">    <span class="keyword">int</span> i = pos - <span class="number">1</span>, j = <span class="number">0</span>, lenS, lenT, b = <span class="number">0</span>;</span><br><span class="line">    lenS = <span class="built_in">strlen</span> ( S );</span><br><span class="line">    lenT = <span class="built_in">strlen</span> ( T );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( i &lt; lenS &amp;&amp; j &lt; lenT ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( * ( S + i ) == * ( T + j ) ) &#123; <span class="comment">/* 当前对应字符相同，继续比较后面的字符 */</span></span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">/* 重新进行新的一趟比较 */</span></span><br><span class="line">            i = i - j + <span class="number">1</span>;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( j == lenT ) &#123;</span><br><span class="line">        <span class="keyword">return</span> ( i - lenT + <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="binary-ascii函数"><a href="#binary-ascii函数" class="headerlink" title="binary_ascii函数"></a>binary_ascii函数</h3><p>&emsp;&emsp;输入一个整数(无符号)，把它转换为字符并打印，前导零被删除：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">binary_ascii</span> <span class="params">( <span class="keyword">unsigned</span> <span class="keyword">int</span> value )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> quotient;</span><br><span class="line">    quotient = value / <span class="number">10</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( quotient != <span class="number">0</span> ) &#123;</span><br><span class="line">        binary_ascii ( quotient );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">putchar</span> ( value % <span class="number">10</span> + <span class="string">'0'</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>递归的思想实质上是数学归纳法。设数字仅由一位(<code>n = 1</code>)，则函数<code>f(n)</code>的功能是输出该数字；假设该数字有<code>k</code>位(<code>n = k</code>)，则<code>f(n)</code>的功能是输出前<code>k - 1</code>位，然后再输出最后一位，即<code>f(k) = f(k - 1) + f(1)</code>。由此得到递归式<code>f(n) = f(n - 1) + f(1)，(n - 1) = (n) / 10</code>。</p>
<h3 id="LoopMove函数"><a href="#LoopMove函数" class="headerlink" title="LoopMove函数"></a>LoopMove函数</h3><p>&emsp;&emsp;把字符串循环右移n位：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pStr是指向以“\0”结尾的字符串的指针，steps是要求移动的n位 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LoopMove</span> <span class="params">( <span class="keyword">char</span> *pStr, <span class="keyword">int</span> steps )</span> </span>&#123; <span class="comment">/* 方法1 */</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span> ( pStr ) - steps;</span><br><span class="line">    <span class="keyword">char</span> tmp[MAX_LEN];</span><br><span class="line">    <span class="built_in">strcpy</span> ( tmp, pStr + n );</span><br><span class="line">    <span class="built_in">strcpy</span> ( tmp + steps, pStr );</span><br><span class="line">    * ( tmp + <span class="built_in">strlen</span> ( pStr ) ) = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="built_in">strcpy</span> ( pStr, tmp );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LoopMove</span> <span class="params">( <span class="keyword">char</span> *pStr, <span class="keyword">int</span> steps )</span> </span>&#123; <span class="comment">/* 方法2 */</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span> ( pStr ) - steps;</span><br><span class="line">    <span class="keyword">char</span> tmp[MAX_LEN];</span><br><span class="line">    <span class="built_in">memcpy</span> ( tmp, pStr + n, steps );</span><br><span class="line">    <span class="built_in">memcpy</span> ( pStr + steps, pStr, n );</span><br><span class="line">    <span class="built_in">memcpy</span> ( pStr, tmp, steps );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断回文字符串"><a href="#判断回文字符串" class="headerlink" title="判断回文字符串"></a>判断回文字符串</h3><p>&emsp;&emsp;判断一个字符串是否为回文字符串：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">100</span>]; <span class="comment">/* 存放输入的字符串 */</span></span><br><span class="line">    <span class="keyword">int</span> i, j, n;</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"输入字符串: "</span> );</span><br><span class="line">    gets ( s );</span><br><span class="line">    n = <span class="built_in">strlen</span> ( s );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>, j = n - <span class="number">1</span>; i &lt; j; i++, j-- )</span><br><span class="line">        <span class="keyword">if</span> ( s[i] != s[j] ) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( i &gt;= j ) &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"是回文串\n"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"不是回文串\n"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="语句翻转"><a href="#语句翻转" class="headerlink" title="语句翻转"></a>语句翻转</h3><p>&emsp;&emsp;将<code>tom is cat</code>进行翻转，即<code>cat is tom</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>  j = <span class="number">0</span>, i = <span class="number">0</span>, begin = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> str[] = <span class="string">"I am a student"</span>;</span><br><span class="line">    <span class="keyword">char</span> temp = <span class="number">0</span>;</span><br><span class="line">    j = <span class="built_in">strlen</span> ( str ) - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"string = %s\n"</span>, str );</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* 第一步是进行全盘反转，将单词变成“tneduts a ma I” */</span></span><br><span class="line">    <span class="keyword">while</span> ( j &gt; i ) &#123;</span><br><span class="line">        temp = str[i];</span><br><span class="line">        str[i] = str[j];</span><br><span class="line">        str[j] = temp;</span><br><span class="line">        j--;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"string = %s\n"</span>, str );</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* 第二步进行部分反转，如果不是空格则开始反转单词 */</span></span><br><span class="line">    <span class="keyword">while</span> ( str[i] ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( str[i] != <span class="string">' '</span> ) &#123;</span><br><span class="line">            begin = i;</span><br><span class="line">​</span><br><span class="line">            <span class="keyword">while</span> ( str[i] &amp;&amp; ( str[i] != <span class="string">' '</span> ) ) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">​</span><br><span class="line">            i = i - <span class="number">1</span>;</span><br><span class="line">            end = i;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">while</span> ( end &gt; begin ) &#123;</span><br><span class="line">            temp = str[begin];</span><br><span class="line">            str[begin] = str[end];</span><br><span class="line">            str[end] = temp;</span><br><span class="line">            end--;</span><br><span class="line">            begin++;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"string = %s\n"</span>, str );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="strrindex函数"><a href="#strrindex函数" class="headerlink" title="strrindex函数"></a>strrindex函数</h3><p>&emsp;&emsp;返回字符串<code>t</code>在<code>s</code>中最右边出现的位置：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">strrindex</span> <span class="params">( <span class="keyword">char</span> s[], <span class="keyword">char</span> t[] )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, k, rindex;</span><br><span class="line">    rindex = <span class="number">-1</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; s[i] != <span class="string">'\0'</span>; i++ ) &#123;</span><br><span class="line">        <span class="comment">/* check if t starts at this index in s */</span></span><br><span class="line">        <span class="keyword">for</span> ( j = i, k = <span class="number">0</span>; t[k] != <span class="string">'\0'</span> &amp;&amp; s[j] == t[k]; j++, k++ );</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( k &gt; <span class="number">0</span> &amp;&amp; t[k] == <span class="string">'\0'</span> ) <span class="comment">/* if it does ...*/</span></span><br><span class="line">            rindex = i; <span class="comment">/* replace rindex with our find */</span></span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> rindex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="只出现一次的字符"><a href="#只出现一次的字符" class="headerlink" title="只出现一次的字符"></a>只出现一次的字符</h3><p>&emsp;&emsp;在一个字符串中找到第一个只出现一次的字符，如输入<code>abaccdeff</code>，则输出<code>b</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">firstSingle</span><span class="params">(<span class="keyword">char</span> *str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">255</span>];</span><br><span class="line">    <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="number">255</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">char</span> *p = str;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="string">'\0'</span>) &#123;</span><br><span class="line">        a[*p]++;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    p = str;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> (*(p++) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[*p] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> *p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'N'</span>; <span class="comment">/* N意思是“NO”，即没有 */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">20</span>] = <span class="string">"aaccdeff"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; firstSingle(str) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="count-of-substr函数"><a href="#count-of-substr函数" class="headerlink" title="count_of_substr函数"></a>count_of_substr函数</h3><p>&emsp;&emsp;返回子字符串的个数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count_of_substr</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str, <span class="keyword">const</span> <span class="keyword">char</span> *sub)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *p = str;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(sub);</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="string">'\0'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strncmp</span>(p, sub, n) == <span class="number">0</span>) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/数据结构和算法/大数取模/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/数据结构和算法/大数取模/" itemprop="url">大数取模</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T12:38:12+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="大数取模"><a href="#大数取模" class="headerlink" title="大数取模"></a>大数取模</h3><p>&emsp;&emsp;代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"string.h"</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">char</span> n[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span> ( <span class="string">"%s %d"</span>, n, &amp;m );</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span> ( n );</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i ) &#123;</span><br><span class="line">        ans = ( <span class="keyword">int</span> ) ( ( ( <span class="keyword">long</span> <span class="keyword">long</span> ) ans * <span class="number">10</span> + n[i] ) % m );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"%d\n"</span>, ans );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="幂取模"><a href="#幂取模" class="headerlink" title="幂取模"></a>幂取模</h3><p>&emsp;&emsp;先从简单的例子入手，即求<code>a ^ b mod c</code>的数值。首先直接地来设计这个算法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b; i++ ) &#123;</span><br><span class="line">    ans = ans * a;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">ans = ans % c;</span><br></pre></td></tr></table></figure>
<p>这个算法的时间复杂度体现在<code>for</code>循环中，为<code>O(n)</code>。这个算法存在着明显的问题，如果<code>a</code>和<code>b</code>过大，很容易就会溢出。<br>&emsp;&emsp;那么先来看看第一个改进方案。在讲这个方案之前，要先有这样一个公式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ^ b mod c = (a mod c) ^ b mod c</span><br></pre></td></tr></table></figure>
<p>可以先让<code>a</code>关于<code>c</code>取余，这样可以大大减少<code>a</code>的大小：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">​</span><br><span class="line">a = a % c;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b; i++ ) &#123;</span><br><span class="line">    ans = ans * a % c;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">ans = ans % c;</span><br></pre></td></tr></table></figure>
<p>这个算法在时间复杂度上没有改进，仍为<code>O(n)</code>，不过已经好了很多。但是在c过大的条件下，还是很有可能超时，所以推出以下的快速幂算法。<br>&emsp;&emsp;该算法基于如下公式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a ^ b mod c = ((a ^ <span class="number">2</span>) ^ (b/<span class="number">2</span>)) mod c，b是偶数</span><br><span class="line">a ^ b mod c = ((a ^ <span class="number">2</span>) ^ (b/<span class="number">2</span>) * a) mod c，b是奇数</span><br></pre></td></tr></table></figure>
<p>有了上述两个公式后，我们可以得出以下结论：</p>
<ul>
<li>如果<code>b</code>是偶数，我们可以记<code>k = a^2 mod c</code>，那么求<code>(k) ^ (b/2) mod c</code>就可以了。</li>
<li>如果<code>b</code>是奇数，我们也可以记<code>k = a^2 mod c</code>，那么求<code>((k) ^ (b/2) mod c * a) mod c = ((k) ^ (b/2) mod c * a) mod c</code>就可以了。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">​</span><br><span class="line">a = a % c;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( b % <span class="number">2</span> == <span class="number">1</span> ) &#123;</span><br><span class="line">    ans = ( ans * a ) mod c; <span class="comment">/* 如果是奇数，要多求一步，可以提前算到ans中 */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">k = ( a * a ) % c; <span class="comment">/* 我们取a的平方，而不是a */</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b / <span class="number">2</span>; i++ ) &#123;</span><br><span class="line">    ans = ( ans * k ) % c;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">ans = ans % c;</span><br></pre></td></tr></table></figure>
<p>我们把时间复杂度变成了<code>O(n/2)</code>，当然这样子治标不治本。但是可以看到，当我们令<code>k = (a * a) mod c</code>时，状态已经发生了变化，所要求的最终结果即为<code>(k) ^ (b/2) mod c</code>，而不是原来的<code>a^b mod c</code>，所以发现这个过程是可以迭代下去的。当然，对于奇数的情形会多出一项<code>a mod c</code>，所以为了完成迭代，当<code>b</code>是奇数时，我们通过<code>ans = (ans * a) % c</code>来弥补多出来的这一项，此时剩余的部分就可以进行迭代了。<br>&emsp;&emsp;形如上式的迭代下去后，当b为0时，所有的因子都已经相乘，算法结束。于是便可以在<code>O(logn)</code>的时间内完成，即快速幂算法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">power1</span> <span class="params">( <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c )</span> </span>&#123; <span class="comment">/* 朴素算法 */</span></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b; i++ ) &#123;</span><br><span class="line">        res = ( res * a ) % c;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">power2</span> <span class="params">( <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c )</span> </span>&#123; <span class="comment">/* 快速幂算法 */</span></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">    a %= c;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( b ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( b &amp; <span class="number">1</span> ) &#123;</span><br><span class="line">            res = ( res * a ) % c;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        a = ( a * a ) % c;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( ~<span class="built_in">scanf</span> ( <span class="string">"%d"</span>, &amp;n ) ) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; power2 ( <span class="number">2</span>, n, <span class="number">9997</span> ) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; power1 ( <span class="number">2</span>, n, <span class="number">9997</span> ) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/09/数据结构和算法/有序链表合成/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/09/数据结构和算法/有序链表合成/" itemprop="url">有序链表合成</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-09T12:32:01+08:00">
                2019-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;写一个函数<code>SortedMerge</code>函数，该函数有两个参数，都是递增的链表。函数的功能就是合并这两个递增的链表为一个递增的链表，<code>SortedMerge</code>的返回值是新的链表。新链表由前两个链表按元素递增顺序合并而成，也就是说它不会创建新的元素。<br>&emsp;&emsp;比如，这里有两个链表分别是：<code>list1：5-&gt;10-&gt;15，list2：2-&gt;3-&gt;20</code>，<code>SortedMerge</code>函数返回一个指向新链表的指针，新链表应该是这样的：<code>2-&gt;3-&gt;5-&gt;10-&gt;15-&gt;20</code>。程序需要考虑如下情况：两个链表(函数参数)都有可能为空，也可能其中一个链表已经遍历完了，另一个链表还有很多元素。</p>
<h3 id="方法1-虚拟节点"><a href="#方法1-虚拟节点" class="headerlink" title="方法1(虚拟节点)"></a>方法1(虚拟节点)</h3><p>&emsp;&emsp;这种方法用一个虚拟节点(<code>dummy node</code>)作为结果链表的起始节点，为了方便在链表尾部插入节点，还需要用一个尾指针指向链表的尾节点。初始时，结果链表为空的时候，尾指针指向的是虚拟节点。因为虚拟节点是一个在栈上分配的临时变量，所以对它的操作都是非常高效的。在循环迭代中，每次从<code>a</code>或<code>b</code>中取一个节点插入到结果链表的尾部，循环结束时，虚拟节点的<code>next</code>域就是结果链表的地址，也就是我们期望的返回值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Link list node */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Function to insert a node at the begining of the linked list */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span> <span class="params">( struct node **head_ref, <span class="keyword">int</span> new_data )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">new_node</span> = ( <span class="title">struct</span> <span class="title">node</span> * ) <span class="title">malloc</span> ( <span class="title">sizeof</span> ( <span class="title">struct</span> <span class="title">node</span> ) );</span> <span class="comment">/* allocate node */</span></span><br><span class="line">    new_node-&gt;data = new_data; <span class="comment">/* put in the data */</span></span><br><span class="line">    new_node-&gt;next = ( *head_ref ); <span class="comment">/* link the old list off the new node */</span></span><br><span class="line">    ( *head_ref ) = new_node; <span class="comment">/* move the head to point to the new node */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Function to print nodes in a given linked list */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printList</span> <span class="params">( struct node *node )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ( node != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"%d "</span>, node-&gt;data );</span><br><span class="line">        node = node-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"\n"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* pull off the front node of the source and put it in dest */</span></span><br><span class="line"><span class="comment">/* MoveNode() function takes the node from the front of the source,</span></span><br><span class="line"><span class="comment">   and move it to the front of the dest.</span></span><br><span class="line"><span class="comment">   It is an error to call this with the source list empty.</span></span><br><span class="line"><span class="comment">​</span></span><br><span class="line"><span class="comment">   Before calling MoveNode():</span></span><br><span class="line"><span class="comment">   source == &#123;1, 2, 3&#125;</span></span><br><span class="line"><span class="comment">   dest == &#123;1, 2, 3&#125;</span></span><br><span class="line"><span class="comment">​</span></span><br><span class="line"><span class="comment">   After calling MoveNode():</span></span><br><span class="line"><span class="comment">   source == &#123;2, 3&#125;</span></span><br><span class="line"><span class="comment">   dest == &#123;1, 1, 2, 3&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MoveNode</span> <span class="params">( struct node **destRef, struct node **sourceRef )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">newNode</span> = *<span class="title">sourceRef</span>;</span> <span class="comment">/* the front source node */</span></span><br><span class="line">    assert ( newNode != <span class="literal">NULL</span> );</span><br><span class="line">    *sourceRef = newNode-&gt;next; <span class="comment">/* Advance the source pointer */</span></span><br><span class="line">    newNode-&gt;next = *destRef; <span class="comment">/* Link th eold dest off the new node */</span></span><br><span class="line">    *destRef = newNode; <span class="comment">/* Move dest to point to the new node */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Takes two lists sorted in creasing order, and splices their nodes together to</span></span><br><span class="line"><span class="comment">   make ont big sorted list which is returned. */</span></span><br><span class="line"><span class="function">struct node *<span class="title">SortedMerge</span> <span class="params">( struct node *a, struct node *b )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">dummy</span>;</span> <span class="comment">/* a dummy first node to hang the result on */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">tail</span> = &amp;<span class="title">dummy</span>;</span> <span class="comment">/* tail points to the last result node */</span></span><br><span class="line">    dummy.next = <span class="literal">NULL</span>; <span class="comment">/* so tail-&gt;next is the places to add new nodes to the result */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( a == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">            tail-&gt;next = b;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( b == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">            tail-&gt;next = a;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( a-&gt;data &lt;= b-&gt;data ) &#123;</span><br><span class="line">            MoveNode ( &amp; ( tail-&gt;next ), &amp;a );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            MoveNode ( &amp; ( tail-&gt;next ), &amp;b );</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        tail = tail-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> ( dummy.next );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Drier program to test above functions */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* start with the empty list */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">res</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">a</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">b</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="comment">/* Let us create two sorted linked lists to test the functions.</span></span><br><span class="line"><span class="comment">       Created lists shall be a:5-&gt;10-&gt;15, b:2-&gt;3-&gt;20 */</span></span><br><span class="line">    push ( &amp;a, <span class="number">15</span> );</span><br><span class="line">    push ( &amp;a, <span class="number">10</span> );</span><br><span class="line">    push ( &amp;a, <span class="number">5</span> );</span><br><span class="line">    push ( &amp;b, <span class="number">20</span> );</span><br><span class="line">    push ( &amp;b, <span class="number">3</span> );</span><br><span class="line">    push ( &amp;b, <span class="number">2</span> );</span><br><span class="line">    res = SortedMerge ( a, b );</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"Merged Linked List is:\n"</span> );</span><br><span class="line">    printList ( res );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法2-局部引用"><a href="#方法2-局部引用" class="headerlink" title="方法2(局部引用)"></a>方法2(局部引用)</h3><p>&emsp;&emsp;这种方法与上一种方法非常相似，该方法避免使用虚拟节点，而是使用一个指向指针的指针<code>struct node** lastPtrRef</code>，这个指针指向结果链表的最后一个节点。在这个方法中，所有由虚拟节点完成的工作都由<code>lastPtrRef</code>完成：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* method2 Using local References */</span></span><br><span class="line"><span class="function">struct node *<span class="title">SortedMerge</span> <span class="params">( struct node *a, struct node *b )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">result</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> **<span class="title">lastPtrRef</span> = &amp;<span class="title">result</span>;</span> <span class="comment">/* point to the last result pointer */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( a == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">            *lastPtrRef = b;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( b == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">            *lastPtrRef = a;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( a-&gt;data &lt;= b-&gt;data ) &#123;</span><br><span class="line">            MoveNode ( lastPtrRef, &amp;a );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            MoveNode ( lastPtrRef, &amp;b );</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">/* tricky: advance to point to the next ".next" field */</span></span><br><span class="line">        lastPtrRef = &amp; ( ( *lastPtrRef )-&gt;next );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> ( result );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法3-递归"><a href="#方法3-递归" class="headerlink" title="方法3(递归)"></a>方法3(递归)</h3><p>&emsp;&emsp;合并操作是非常适合用递归来完成的一类操作，递归实现将会比迭代实现更加清晰且易于理解。尽管如此，你可能也不愿意使用递归来实现这个操作，因为递归方法所使用的栈空间与链表的长度成正比。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Using Recursion */</span></span><br><span class="line"><span class="function">struct node *<span class="title">SortedMerge</span> <span class="params">( struct node *a, struct node *b )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">result</span> = <span class="title">NULL</span>;</span></span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* Base cases */</span></span><br><span class="line">    <span class="keyword">if</span> ( a == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> ( b );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( b == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> ( a );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* Pick either a or b, and recur */</span></span><br><span class="line">    <span class="keyword">if</span> ( a-&gt;data &lt;= b-&gt;data ) &#123;</span><br><span class="line">        result = a;</span><br><span class="line">        result-&gt;next = SortedMerge ( a-&gt;next, b );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        result = b;</span><br><span class="line">        result-&gt;next = SortedMerge ( a, b-&gt;next );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> ( result );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/26/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><span class="page-number current">27</span><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/94/">94</a><a class="extend next" rel="next" href="/page/28/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">934</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
