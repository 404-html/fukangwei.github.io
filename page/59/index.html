<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="泥腿子出身">
<meta property="og:url" content="http://fukangwei.gitee.io/page/59/index.html">
<meta property="og:site_name" content="泥腿子出身">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="泥腿子出身">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/59/">





  <title>泥腿子出身</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">泥腿子出身</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/序列/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/序列/" itemprop="url">序列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T10:16:23+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="关于序列"><a href="#关于序列" class="headerlink" title="关于序列"></a>关于序列</h3><p>&emsp;&emsp;<code>list</code>、<code>tuple</code>和<code>str</code>都可以称之为<code>序列</code>。<code>list([iterable])</code>把可迭代对象<code>iterable</code>转换为列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = list()</span><br><span class="line">a  <span class="comment"># 得到[]</span></span><br><span class="line">b = <span class="string">"hello"</span></span><br><span class="line">b = list(b)</span><br><span class="line">b  <span class="comment"># 得到['h', 'e', 'l', 'l', 'o']</span></span><br><span class="line">c = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>)</span><br><span class="line">c = list(c)</span><br><span class="line">c  <span class="comment"># 得到[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]</span></span><br></pre></td></tr></table></figure>
<p><code>tuple([iterable])</code>把可迭代对象<code>iterable</code>转换为元组；<code>str(obj)</code>把<code>obj</code>对象转换为字符串。</p>
<p>&emsp;&emsp;列表、元组和字符串的共同点：</p>
<ul>
<li>都可以通过索引得到每一个元素。</li>
<li>默认索引值总是从<code>0</code>开始。</li>
<li>可以通过分片的方法得到一个范围内的元素的集合。</li>
<li>有很多共同的操作符：</li>
</ul>
<p>&emsp;&emsp;1. <code>max</code>返回序列或者参数集合中的最大值，<code>min</code>则返回最小值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">max(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)  <span class="comment"># 结果为“5”</span></span><br><span class="line">b = [<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>]</span><br><span class="line">max(b)  <span class="comment"># 结果为“o”</span></span><br><span class="line">member = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">max(member)  <span class="comment"># 结果为“5”</span></span><br><span class="line">min(member)  <span class="comment"># 结果为“1”</span></span><br><span class="line">chars = <span class="string">"1234567890"</span></span><br><span class="line">min(chars)  <span class="comment"># 结果为“0”</span></span><br><span class="line">tuple1 = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">max(tuple1)  <span class="comment"># 结果为“4”</span></span><br><span class="line">member.append(<span class="string">'a'</span>)</span><br><span class="line">member  <span class="comment"># 结果为“[1, 2, 3, 4, 5, 'a']”</span></span><br><span class="line">max(member)  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;2. 在序列中遍历时，索引位置和对应值可以使用<code>enumerate</code>函数同时得到。<br>&emsp;&emsp;3. <code>sum(iterable[, start=0])</code>返回序列<code>iterable</code>和可选参数<code>start</code>的总和(该方法适用于<code>list</code>和<code>tuple</code>，对于<code>str</code>会出错)：<br>&emsp;&emsp;4. 使用<code>sorted</code>函数对序列进行排序，使用<code>reversed</code>对序列进行翻转：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tuple1 = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">sum(tuple1)  <span class="comment"># 结果为“10”</span></span><br><span class="line">tuple2 = (<span class="number">1.2</span>, <span class="number">2.4</span>, <span class="number">3.6</span>)</span><br><span class="line">sum(tuple2)  <span class="comment"># 结果为“7.199999999999999”</span></span><br><span class="line">tuple2 = (<span class="number">1.5</span>, <span class="number">1.6</span>, <span class="number">1.7</span>)</span><br><span class="line">sum(tuple2)  <span class="comment"># 结果为“4.8”</span></span><br><span class="line">sum(tuple2, <span class="number">1</span>)  <span class="comment"># 结果为“5.8”</span></span><br><span class="line">chars = <span class="string">"hello"</span></span><br><span class="line">sum(chars)  <span class="comment"># 结果为“出错”</span></span><br><span class="line">sorted(tuple2)  <span class="comment"># 结果为“[1.5, 1.6, 1.7]”</span></span><br><span class="line">reversed(tuple2)  <span class="comment"># 结果为“&lt;reversed object at 0x0265D9F0&gt;”</span></span><br><span class="line">list(reversed(tuple2))  <span class="comment"># 结果为“[1.7, 1.6, 1.5]”</span></span><br><span class="line">enumerate(tuple2)  <span class="comment"># 结果为“&lt;enumerate object at 0x02670238&gt;”</span></span><br><span class="line">list(enumerate(tuple2))  <span class="comment"># 结果为“[(0, 1.5), (1, 1.6), (2, 1.7)]”</span></span><br></pre></td></tr></table></figure>
<h3 id="同时遍历"><a href="#同时遍历" class="headerlink" title="同时遍历"></a>同时遍历</h3><p>&emsp;&emsp;同时遍历两个或更多的序列，可以使用<code>zip</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">questions = [<span class="string">'name'</span>, <span class="string">'quest'</span>, <span class="string">'favorite color'</span>]</span><br><span class="line">answers = [<span class="string">'qinshihuang'</span>, <span class="string">'the holy'</span>, <span class="string">'blue'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> q, a <span class="keyword">in</span> zip(questions, answers):</span><br><span class="line">    print(<span class="string">'what is your %s? it is %s'</span> % (q, a))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">what is your name? it is qinshihuang</span><br><span class="line">what is your quest? it is the holy</span><br><span class="line">what is your favorite color? it is blue</span><br></pre></td></tr></table></figure>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>&emsp;&emsp;切片的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list[start:end:step]</span><br></pre></td></tr></table></figure>
<p><code>list</code>表示需要取子集的列表变量，<code>[start:end:step]</code>表示从第<code>start</code>个索引位置开始到第<code>end</code>个索引之间(但不包括第<code>end</code>个索引)截取子集，截取的步长是<code>step</code>(默认为<code>1</code>)。注意<code>step</code>的符号：</p>
<ul>
<li><code>step &gt; 0</code>：序列是从<code>start</code>开始由左向右看。</li>
<li><code>step &lt; 0</code>：序列是从<code>start</code>开始由右向左看。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">print(a[<span class="number">1</span>:<span class="number">3</span>])  <span class="comment"># 输出“[1, 2]”</span></span><br><span class="line">print(a[<span class="number">1</span>::<span class="number">2</span>])  <span class="comment"># 输出“[1, 3, 5, 7, 9]”</span></span><br><span class="line">print(a[:<span class="number">9</span>:<span class="number">2</span>])  <span class="comment"># 输出“[0, 2, 4, 6, 8]”</span></span><br><span class="line">print(a[:<span class="number">5</span>:<span class="number">-1</span>])  <span class="comment"># 输出“[9, 8, 7, 6]”</span></span><br><span class="line">print(a[<span class="number">0</span>:<span class="number">5</span>:<span class="number">-1</span>])  <span class="comment"># 输出“[]”</span></span><br><span class="line">print(a[<span class="number">1</span>::<span class="number">-1</span>])  <span class="comment"># 输出“[1, 0]”</span></span><br><span class="line">print(a[:<span class="number">-1</span>])  <span class="comment"># 输出“[0, 1, 2, 3, 4, 5, 6, 7, 8]”</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/python基础语法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/python基础语法/" itemprop="url">python基础语法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T08:54:28+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p>&emsp;&emsp;默认情况下，<code>Python 3</code>源码文件以<code>UTF-8</code>编码保存，所有的字符串都是<code>unicode</code>字符串。当然你也可以为源码文件指定不同的编码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: cp-1252 -*-</span></span><br></pre></td></tr></table></figure>
<h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><ul>
<li>第一个字符必须是英文字母表中的<code>字母</code>或<code>_</code>。</li>
<li>标识符的其他的部分可以是<code>字母</code>、<code>数字</code>或<code>_</code>。</li>
<li>标识符对大小写敏感。</li>
<li>在<code>Python 3</code>中，非<code>ASCII</code>标识符也是允许的。</li>
</ul>
<h3 id="python保留字"><a href="#python保留字" class="headerlink" title="python保留字"></a>python保留字</h3><p>&emsp;&emsp;保留字即关键字，我们不能把它们用作任何标识符名称。<code>Python</code>的标准库提供了<code>keyword</code>模块，可以输出当前版本的所有关键字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> keyword</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keyword.kwlist</span><br><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>,</span><br><span class="line"><span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>,</span><br><span class="line"><span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>&emsp;&emsp;<code>Python</code>中单行注释以<code>#</code>开头：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line">print(<span class="string">"Hello, Python!"</span>)  <span class="comment"># 第二个注释</span></span><br></pre></td></tr></table></figure>
<p>多行注释可以用多个<code>#</code>号：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line"><span class="comment"># 第二个注释</span></span><br><span class="line">print(<span class="string">"Hello, Python!"</span>)</span><br></pre></td></tr></table></figure>
<p>关于注释，也可以使用<code>&#39;&#39;&#39; &#39;&#39;&#39;</code>(或<code>&quot;&quot;&quot; &quot;&quot;&quot;</code>)的格式在三引号之间书写较长的注释。该方法还可以用于在函数首部，对函数进行一个说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">example</span><span class="params">(anything)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    形参为任意类型的对象，这个示例函数会将其原样返回</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> anything</span><br></pre></td></tr></table></figure>
<h3 id="行与缩进"><a href="#行与缩进" class="headerlink" title="行与缩进"></a>行与缩进</h3><p>&emsp;&emsp;<code>python</code>的特色就是使用缩进来表示代码块，不需要使用大括号<code>{}</code>。缩进的空格数是可变的，但是属于同一个代码块的语句必须使用相同的缩进空格数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure>
<p>以下代码最后一行语句缩进数的空格数不一致，会导致运行错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    print(<span class="string">"Answer"</span>)</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"Answer"</span>)</span><br><span class="line">  print(<span class="string">"False"</span>)  <span class="comment"># 缩进不一致，会导致运行错误</span></span><br></pre></td></tr></table></figure>
<h3 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h3><p>&emsp;&emsp;<code>Python</code>通常是一行写完一条语句，但如果语句很长，我们可以使用反斜杠<code>\</code>来实现多行语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">total = item_one + \</span><br><span class="line">        item_two + \</span><br><span class="line">        item_three</span><br></pre></td></tr></table></figure>
<p>在<code>[]</code>、<code>{}</code>或<code>()</code>中的多行语句，不需要使用反斜杠<code>\</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">total = [<span class="string">'item_one'</span>, <span class="string">'item_two'</span>, <span class="string">'item_three'</span>,</span><br><span class="line">        <span class="string">'item_four'</span>, <span class="string">'item_five'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><p>&emsp;&emsp;函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。<br>&emsp;&emsp;空行与代码缩进不同，空行并不是<code>Python</code>语法的一部分。书写时不插入空行，<code>Python</code>解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。记住，空行也是程序代码的一部分。</p>
<h3 id="等待用户输入"><a href="#等待用户输入" class="headerlink" title="等待用户输入"></a>等待用户输入</h3><p>&emsp;&emsp;执行下面的程序，显示<code>按下enter键后退出</code>后会等待用户输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">input(<span class="string">"按下enter键后退出"</span>)</span><br></pre></td></tr></table></figure>
<p>一旦用户按下回车键，程序将退出。</p>
<h3 id="同一行显示多条语句"><a href="#同一行显示多条语句" class="headerlink" title="同一行显示多条语句"></a>同一行显示多条语句</h3><p>&emsp;&emsp;<code>Python</code>可以在同一行中使用多条语句，语句之间使用分号<code>;</code>分割：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys; x = <span class="string">'runoob'</span>; sys.stdout.write(x + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="多个语句构成代码组"><a href="#多个语句构成代码组" class="headerlink" title="多个语句构成代码组"></a>多个语句构成代码组</h3><p>&emsp;&emsp;缩进相同的一组语句构成一个代码块，我们称之为<code>代码组</code>。像<code>if</code>、<code>while</code>、<code>def</code>和<code>class</code>这样的复合语句，首行以关键字开始，以冒号<code>:</code>结束，该行之后的一行或多行代码构成代码组。我们将首行以及后面的代码组称为一个<code>子句</code>(<code>clause</code>)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression:</span><br><span class="line">    suite</span><br><span class="line"><span class="keyword">elif</span> expression:</span><br><span class="line">    suite</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    suite</span><br></pre></td></tr></table></figure>
<h3 id="Print输出"><a href="#Print输出" class="headerlink" title="Print输出"></a>Print输出</h3><p>&emsp;&emsp;print默认输出是换行的，如果要实现不换行，需要在<code>print</code>中加上<code>end=&quot; &quot;</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">"a"</span></span><br><span class="line">y = <span class="string">"b"</span></span><br><span class="line"><span class="comment"># 换行输出</span></span><br><span class="line">print(x)</span><br><span class="line">print(y)</span><br><span class="line">print(<span class="string">'---------'</span>)</span><br><span class="line"><span class="comment"># 不换行输出</span></span><br><span class="line">print(x, end=<span class="string">" "</span>)</span><br><span class="line">print(y, end=<span class="string">" "</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">b</span><br><span class="line">---------</span><br><span class="line">a b</span><br></pre></td></tr></table></figure>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>&emsp;&emsp;<code>python</code>的变量不需要声明变量类型，变量的类型由赋予它的值来决定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>  <span class="comment"># 整型</span></span><br><span class="line">a = <span class="number">1.001</span>  <span class="comment"># 浮点数</span></span><br><span class="line">a = <span class="string">"python"</span>  <span class="comment"># 字符串</span></span><br><span class="line">print(a)  <span class="comment"># 结果为“python”。print输出时只保留了最后一次的赋值</span></span><br></pre></td></tr></table></figure>
<h3 id="import与“from…import”"><a href="#import与“from…import”" class="headerlink" title="import与“from…import”"></a>import与“from…import”</h3><p>&emsp;&emsp;<code>python</code>用<code>import</code>或<code>from...import</code>来导入相应的模块。</p>
<ul>
<li>将整个模块(<code>somemodule</code>)导入，格式为<code>import somemodule</code>。</li>
<li>从某个模块中导入某个函数，格式为<code>from somemodule import somefunction</code>。</li>
<li>从某个模块中导入多个函数，格式为<code>from somemodule import firstfunc, secondfunc, thirdfunc</code>。</li>
<li>将某个模块中的全部函数导入，格式为<code>from somemodule import *</code>。</li>
</ul>
<p>&emsp;&emsp;导入<code>sys</code>模块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">​</span><br><span class="line">print(<span class="string">'命令行参数为:'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> sys.argv:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'\npython路径为'</span>, sys.path)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;导入<code>sys</code>模块的<code>argv</code>和<code>path</code>函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv, path  <span class="comment"># 导入特定的成员</span></span><br><span class="line">​</span><br><span class="line">print(<span class="string">'path:'</span>, path)  <span class="comment"># 因为已经导入path成员，所以此处引用时不需要加“sys.path”</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/字符串/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/字符串/" itemprop="url">字符串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T20:29:46+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;字符串有如下特性：</p>
<ul>
<li><code>python</code>中单引号和双引号使用完全相同。</li>
<li>使用三引号(<code>&#39;&#39;&#39;</code>或<code>&quot;&quot;&quot;</code>)可以指定一个多行字符串。</li>
<li>转义符是<code>\</code>。</li>
<li>自然字符串是通过在字符串前加<code>r</code>或<code>R</code>，例如<code>r&quot;this is a line with\n&quot;</code>，则<code>\n</code>会显示，并不是换行。</li>
<li><code>python</code>可以处理<code>unicode</code>字符串，需要加上前缀<code>u</code>或<code>U</code>，例如<code>u&quot;this is an unicode string&quot;</code>。</li>
<li>字符串是不可变的。</li>
<li>按字面意义级联字符串，例如<code>&quot;this &quot; &quot;is &quot; &quot;string&quot;</code>会被自动转换为<code>this is string</code>。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">'字符串'</span></span><br><span class="line">sentence = <span class="string">"这是一个句子"</span></span><br><span class="line">paragraph = <span class="string">"""这是一个段落，</span></span><br><span class="line"><span class="string">可以由多行组成"""</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串的截取的语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量[头下标:尾下标]</span><br></pre></td></tr></table></figure>
<p>索引值以<code>0</code>为开始值，<code>-1</code>为从末尾的开始位置，<code>str[0:-1]</code>表示第一个到倒数第二个的所有字符。加号<code>+</code>是字符串的连接符，星号<code>*</code>表示复制当前字符串，紧跟的数字为复制的次数。<br>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">"Good morning"</span></span><br><span class="line">str1 * <span class="number">2</span>  <span class="comment"># 结果为“Good morningGood morning”</span></span><br><span class="line">str1[:<span class="number">6</span>]  <span class="comment"># 结果为“Good m”</span></span><br><span class="line">str1[<span class="number">6</span>]  <span class="comment"># 结果为“o”</span></span><br><span class="line">str1[:<span class="number">6</span>] + <span class="string">"Happy"</span> + str1[<span class="number">6</span>:]  <span class="comment"># 结果为“Good mHappyorning”</span></span><br><span class="line">str1  <span class="comment"># 结果为“Good morning”，str1并未改变</span></span><br><span class="line">str1 = str1[:<span class="number">6</span>] + <span class="string">"Happy"</span> + str1[<span class="number">6</span>:]</span><br><span class="line">str1  <span class="comment"># 结果为“Good mHappyorning”，str1已经被改变</span></span><br></pre></td></tr></table></figure>
<p>常见的字符串方法：</p>
<ul>
<li><code>capitalize</code>：把字符串的第一个字符改为大写。</li>
<li><code>casefold</code>：把整个字符串的所有字符改为小写。</li>
<li><code>center(width)</code>：将字符串居中，并使用空格填充至长度<code>width</code>的新字符串。</li>
<li><code>count(sub[, start[, end]])</code>：返回<code>sub</code>在字符串里边出现的次数，<code>start</code>和<code>end</code>是可选的，表示范围。</li>
<li><code>encode(encoding=&#39;utf-8&#39;, errors=&#39;strict&#39;)</code>：<code>以encoding</code>指定的编码格式对字符串进行编码。</li>
<li><code>endswith(sub[, start[, end]])</code>：检查字符串是否以<code>sub</code>子字符串结束，如果是返回<code>True</code>，否则返回<code>False</code>。start和end是可选的，表示范围。</li>
<li><code>expandtabs([tabsize=8])</code>：把字符串中的<code>tab</code>符号转换为空格，如果不指定参数，默认的空格数是<code>tabsize = 8</code>。</li>
<li><code>find(sub[, start[, end]])</code>：检测<code>sub</code>是否包含在字符串中，如果有则返回索引值，否则返回<code>-1</code>。<code>start</code>和<code>end</code>是可选的，表示范围。</li>
<li><code>index(sub[, start[, end]])</code>：和<code>find</code>方法一样，但如果<code>sub</code>不在<code>string</code>中，则会产生一个异常。</li>
<li><code>isalnum</code>：如果字符串至少有一个字符，并且所有字符都是字母或数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isalpha</code>：如果字符串至少有一个字符，并且所有字符都是字母，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isdecimal</code>：如果字符串只包含十进制数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isdigit</code>：如果字符串只包含数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>islower</code>：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是小写，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isnumeric</code>：如果字符串中只包含数字字符，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isspace</code>：如果字符串中只包含空格，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>istitle</code>：如果字符串是标题化(所有的单词都是以大写开始，其余字母均小写)，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isupper</code>：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是大写，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>join(sub)</code>：以字符串作为分隔符，插入到<code>sub</code>中所有的字符之间。</li>
<li><code>ljust(width)</code>：返回一个左对齐的字符串，并使用空格填充至长度为<code>width</code>的新字符串。</li>
<li><code>lower</code>：转换字符串中所有大写字符为小写。</li>
<li><code>lstrip</code>：去掉字符串左边的所有空格。</li>
<li><code>partition(sub)</code>：找到子字符串<code>sub</code>，把字符串分成一个<code>3</code>元组<code>(pre_sub, sub, fol_sub)</code>，如果字符串中不包含<code>sub</code>则返回<code>(&#39;原字符串&#39;, &#39;&#39;, &#39;&#39;)</code>。</li>
<li><code>replace(old, new[, count])</code>：把字符串中的<code>old</code>子字符串替换成<code>new</code>子字符串，如果<code>count</code>指定，则替换不超过<code>count</code>次。</li>
<li><code>rfind(sub[, start[, end]])</code>：类似于<code>find</code>方法，不过是从右边开始查找。</li>
<li><code>rindex(sub[, start[, end]])</code>：类似于<code>index</code>方法，不过是从右边开始。</li>
<li><code>rjust(width)</code>：返回一个右对齐的字符串，并使用空格填充至长度为<code>width</code>的新字符串。</li>
<li><code>rpartition(sub)</code>：类似于<code>partition</code>方法，不过是从右边开始查找。</li>
<li><code>rstrip</code>：删除字符串末尾的空格或换行符。</li>
<li><code>split(sep=None, maxsplit=-1)</code>：不带参数默认是以空格为分隔符切片字符串，如果<code>maxsplit</code>参数有设置，则仅分隔<code>maxsplit</code>个子字符串，返回切片后的子字符串拼接的列表。</li>
<li><code>splitlines(([keepends]))</code>：按照<code>\n</code>分隔，返回一个包含各行作为元素的列表，如果<code>keepends</code>参数指定，则返回前<code>keepends</code>行。</li>
<li><code>startswith(prefix[, start[, end]])</code>：检查字符串是否以<code>prefix</code>开头，是则返回<code>True</code>，否则返回<code>False</code>。<code>start</code>和<code>end</code>是可选的，指定检查范围。</li>
<li><code>strip([chars])</code>：删除字符串前边和后边所有的空格，<code>chars</code>参数可以定制删除的字符。</li>
<li><code>swapcase</code>：翻转字符串中的大小写。</li>
<li><code>title</code>：返回标题化(所有的单词都是以大写开始，其余字母均小写)的字符串。</li>
<li><code>translate(table)</code>：根据<code>table</code>的规则(可以由<code>str.maketrans(&#39;a&#39;, &#39;b&#39;)</code>定制)转换字符串中的字符。</li>
<li><code>upper</code>：转换字符串中的所有小写字符为大写。</li>
<li><code>zfill(width)</code>：返回长度为<code>width</code>的字符串，原字符串右对齐，前边用<code>0</code>填充。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str2 = <span class="string">"xiaoxie"</span></span><br><span class="line">str2.capitalize()  <span class="comment"># 结果为“Xiaoxie”</span></span><br><span class="line">str2  <span class="comment"># 结果为“xiaoxie”，注意这些方法并不改变字符串</span></span><br><span class="line">str2.count(<span class="string">"xi"</span>)  <span class="comment"># 结果为“2”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串格式化符号含义：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%c</code></td>
<td>格式化字符及其<code>ASCII</code>码</td>
</tr>
<tr>
<td><code>%s</code></td>
<td>格式化字符串</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>格式化整数</td>
</tr>
<tr>
<td><code>%o</code></td>
<td>格式化无符号八进制数</td>
</tr>
<tr>
<td><code>%x</code></td>
<td>格式化无符号十六进制数</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>格式化无符号十六进制数(大写)</td>
</tr>
<tr>
<td><code>%f</code></td>
<td>格式化定点数，可指定小数点后的精度</td>
</tr>
<tr>
<td><code>%e</code></td>
<td>用科学计数法格式化定点数</td>
</tr>
<tr>
<td><code>%E</code></td>
<td>作用同<code>%e</code>，用科学计数法格式化定点数</td>
</tr>
<tr>
<td><code>%g</code></td>
<td>根据值的大小决定使用<code>%f</code>或<code>%e</code></td>
</tr>
<tr>
<td><code>%G</code></td>
<td>作用同<code>%g</code>，根据值的大小决定使用<code>%f</code>或者<code>%E</code></td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;格式化操作符辅助指令：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>m.n</code></td>
<td><code>m</code>是显示的最小总宽度，<code>n</code>是小数点后的位数</td>
</tr>
<tr>
<td><code>-</code></td>
<td>用于左对齐</td>
</tr>
<tr>
<td><code>+</code></td>
<td>在正数前面显示加号<code>+</code></td>
</tr>
<tr>
<td><code>#</code></td>
<td>在八进制数前面显示<code>0o</code>，在十六进制数前面显示<code>0x</code>或<code>0X</code></td>
</tr>
<tr>
<td><code>0</code></td>
<td>显示的数字前面填充<code>0</code>取代空格</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;字符串转义字符含义：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\&#39;</code></td>
<td>单引号</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号</td>
</tr>
<tr>
<td><code>\a</code></td>
<td>发出系统响铃声</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>退格符</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行符</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>横向制表符(<code>TAB</code>)</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>纵向制表符</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车符</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>换页符</td>
</tr>
<tr>
<td><code>\o</code></td>
<td>八进制数代表的字符</td>
</tr>
<tr>
<td><code>\x</code></td>
<td>十六进制数代表的字符</td>
</tr>
<tr>
<td><code>\0</code></td>
<td>表示一个空字符</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜杠</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'\ta'</span>  <span class="comment"># 结果为“\ta”</span></span><br><span class="line">print(<span class="string">'\ta'</span>)  <span class="comment"># 结果为“    a”</span></span><br><span class="line">print(<span class="string">'\\'</span>)  <span class="comment"># 结果为“\”</span></span><br><span class="line"><span class="string">"&#123;&#123;0&#125;&#125;"</span>.format(<span class="string">"不打印"</span>)  <span class="comment"># 结果为“&#123;0&#125;”</span></span><br><span class="line"><span class="string">"&#123;0:.1f&#125;&#123;1&#125;"</span>.format(<span class="number">27.658</span>, <span class="string">"GB"</span>)  <span class="comment"># 结果为“27.7GB”</span></span><br><span class="line"><span class="string">"%c"</span> % <span class="number">97</span>  <span class="comment"># 结果为“a”</span></span><br><span class="line"><span class="string">"%c %c %c"</span> % (<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>)  <span class="comment"># 结果为“a b c”</span></span><br><span class="line"><span class="string">"%s"</span> % <span class="string">"I love you"</span>  <span class="comment"># 结果为“I love you”</span></span><br><span class="line"><span class="string">"%d + %d = %d"</span> % (<span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span> + <span class="number">5</span>)  <span class="comment"># 结果为“4 + 5 = 9”</span></span><br><span class="line"><span class="string">"%o"</span> % <span class="number">10</span>  <span class="comment"># 结果为“12”</span></span><br><span class="line"><span class="string">"%x"</span> % <span class="number">10</span>  <span class="comment"># 结果为“a”</span></span><br><span class="line"><span class="string">"%X"</span> % <span class="number">10</span>  <span class="comment"># 结果为“A”</span></span><br><span class="line"><span class="string">"%f"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“27.658000”</span></span><br><span class="line"><span class="string">"%e"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.765800e+01”</span></span><br><span class="line"><span class="string">"%E"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.765800E+01”</span></span><br><span class="line"><span class="string">"%g"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“27.658”</span></span><br><span class="line"><span class="string">"%5.1f"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“ 27.7”</span></span><br><span class="line"><span class="string">"%.2e"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.77e+01”</span></span><br><span class="line"><span class="string">"%10d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“         5”</span></span><br><span class="line"><span class="string">"%-10d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“5         ”</span></span><br><span class="line"><span class="string">"%+d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“+5”</span></span><br><span class="line"><span class="string">"%#o"</span> % <span class="number">10</span>  <span class="comment"># 结果为“0o12”</span></span><br><span class="line"><span class="string">"%#X"</span> % <span class="number">10</span>  <span class="comment"># 结果为“0XA”</span></span><br><span class="line"><span class="string">"%+d"</span> % <span class="number">-5</span>  <span class="comment"># 结果为“-5”</span></span><br><span class="line"><span class="string">"%#d"</span> % <span class="number">10</span>  <span class="comment"># 结果为“10”</span></span><br><span class="line"><span class="string">"%010d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“0000000005”</span></span><br><span class="line"><span class="string">"%-010d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“5         ”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>format</code>格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;&#125; love &#123;&#125; &#123;&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 得到“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;0&#125; love &#123;1&#125; &#123;2&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 得到“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 结果为“出错”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"you"</span>, c=<span class="string">"xinzi"</span>)  <span class="comment"># 结果为“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;0&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(<span class="string">"I"</span>, b=<span class="string">"you"</span>, c=<span class="string">"xinzi"</span>)  <span class="comment"># 结果为“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;0&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;分割字符串如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'a,b,c,d'</span></span><br><span class="line">strlist = str.split(<span class="string">','</span>)  <span class="comment"># 用逗号分割str字符串，并保存到列表</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> strlist:  <span class="comment"># 循环输出列表值</span></span><br><span class="line">    print(value, end=<span class="string">" "</span>)  <span class="comment"># 输出“a b c d”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>join</code>方法用于将序列中的元素以指定的字符连接生成一个新的字符串：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.join(sequence)</span><br></pre></td></tr></table></figure>
<p>参数<code>sequence</code>是要连接的元素序列。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">"-"</span></span><br><span class="line">s2 = <span class="string">""</span></span><br><span class="line">seq = (<span class="string">"r"</span>, <span class="string">"u"</span>, <span class="string">"n"</span>, <span class="string">"o"</span>, <span class="string">"o"</span>, <span class="string">"b"</span>)  <span class="comment"># 字符串序列</span></span><br><span class="line">print(s1.join(seq))  <span class="comment"># 输出“r-u-n-o-o-b”</span></span><br><span class="line">print(s2.join(seq))  <span class="comment"># 输出“runoob”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>maketrans</code>方法用于给<code>translate</code>方法创建字符映射转换表。一般情况下，<code>maketrans</code>方法需要配合<code>translate</code>方法一起使用。<br>&emsp;&emsp;该方法可以只接受一个参数，此时这个参数是个字典类型；对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串，表示转换的目标，两个字符串的长度必须相同，为一一对应的关系；在<code>Python 3</code>中可以有第三个参数，表示要删除的字符，也是字符串。<br>&emsp;&emsp;<code>Python 3.4</code>以后已经不需要从外部<code>string</code>模块中来调用<code>maketrans</code>方法了，取而代之的是内建函数，即<code>bytearray.maketrans</code>、<code>bytes.maketrans</code>和<code>str.maketrans</code>。<br>&emsp;&emsp;<code>Python 3</code>中的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.maketrans(intab, outtab[, delchars])</span><br></pre></td></tr></table></figure>
<p><code>Python 2</code>中的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line">string.maketrans(intab, outtab)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>intab</code>：需要转换的字符组成的字符串。</li>
<li><code>outtab</code>：转换的目标字符组成的字符串。</li>
<li><code>delchars</code>：可选参数，表示要删除的字符组成的字符串。</li>
</ul>
<p>该方法返回一个字符映射转换表，以供<code>translate</code>方法调用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">intab = <span class="string">"aeiou"</span></span><br><span class="line">outtab = <span class="string">"12345"</span></span><br><span class="line">deltab = <span class="string">"thw"</span></span><br><span class="line">​</span><br><span class="line">trantab1 = str.maketrans(intab, outtab)  <span class="comment"># 创建字符映射转换表</span></span><br><span class="line">trantab2 = str.maketrans(intab, outtab, deltab)  <span class="comment"># 创建字符映射转换表，并删除指定字符</span></span><br><span class="line">test = <span class="string">"this is string example....wow!!!"</span></span><br><span class="line">print(test.translate(trantab1))</span><br><span class="line">print(test.translate(trantab2))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">th3s <span class="number">3</span>s str3ng <span class="number">2</span>x1mpl2....w4w!!!</span><br><span class="line"><span class="number">3</span>s <span class="number">3</span>s sr3ng <span class="number">2</span>x1mpl2...<span class="number">.4</span>!!!</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串反转函数如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> s[::<span class="number">-1</span>]</span><br><span class="line">​</span><br><span class="line">print(reverse(<span class="string">"hello"</span>))  <span class="comment"># 输出“olleh”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;关于字符串的比较：先比较两个对象的第<code>0</code>个元素，大小关系即为对象的大小关系。如果相等则继续比较后续元素，先终止迭代的则认为是小的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/Python运算符/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/Python运算符/" itemprop="url">Python运算符</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T18:33:38+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Python算术运算符"><a href="#Python算术运算符" class="headerlink" title="Python算术运算符"></a>Python算术运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>21</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加</td>
<td><code>a + b</code>结果为<code>31</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>减</td>
<td><code>a - b</code>结果为<code>-11</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘</td>
<td><code>a * b</code>结果为<code>210</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除</td>
<td><code>b / a</code>结果为<code>2.1</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td>取模</td>
<td><code>b % a</code>结果为<code>1</code></td>
</tr>
<tr>
<td><code>**</code></td>
<td>幂</td>
<td><code>a ** b</code>结果为<code>10</code>的<code>21</code>次方</td>
</tr>
<tr>
<td><code>//</code></td>
<td>取整除</td>
<td><code>9//2</code>结果为<code>4</code>，<code>9.0//2.0</code>结果为<code>4.0</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python比较运算符"><a href="#Python比较运算符" class="headerlink" title="Python比较运算符"></a>Python比较运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>==</code></td>
<td>等于</td>
<td><code>a == b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
<td><code>a != b</code>返回<code>True</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
<td><code>a &gt; b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
<td><code>a &lt; b</code>返回<code>True</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于</td>
<td><code>a &gt;= b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于等于</td>
<td><code>a &lt;= b</code>返回<code>True</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python赋值运算符"><a href="#Python赋值运算符" class="headerlink" title="Python赋值运算符"></a>Python赋值运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>简单的赋值</td>
<td><code>c = a + b</code>将<code>a + b</code>的运算结果赋值为<code>c</code></td>
</tr>
<tr>
<td><code>+=</code></td>
<td>加法赋值</td>
<td><code>c += a</code>等效于<code>c = c + a</code></td>
</tr>
<tr>
<td><code>-=</code></td>
<td>减法赋值</td>
<td><code>c -= a</code>等效于<code>c = c - a</code></td>
</tr>
<tr>
<td><code>*=</code></td>
<td>乘法赋值</td>
<td><code>c *= a</code>等效于<code>c = c * a</code></td>
</tr>
<tr>
<td><code>/=</code></td>
<td>除法赋值</td>
<td><code>c /= a</code>等效于<code>c = c / a</code></td>
</tr>
<tr>
<td><code>%=</code></td>
<td>取模赋值</td>
<td><code>c %= a</code>等效于<code>c = c % a</code></td>
</tr>
<tr>
<td><code>**=</code></td>
<td>幂赋值</td>
<td><code>c **= a</code>等效于<code>c = c ** a</code></td>
</tr>
<tr>
<td><code>//=</code></td>
<td>取整除赋值</td>
<td><code>c //= a</code>等效于<code>c = c // a</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python位运算符"><a href="#Python位运算符" class="headerlink" title="Python位运算符"></a>Python位运算符</h3><p>&emsp;&emsp;按位运算符是把数字看作二进制来进行计算的。<code>Python</code>中的按位运算法则如下(假设<code>a</code>为<code>60</code>，<code>b</code>为<code>13</code>)：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;</code></td>
<td>按位与</td>
<td><code>a &amp; b</code>结果为<code>12</code>，二进制为<code>0000 1100</code></td>
</tr>
<tr>
<td><code>&#124;</code></td>
<td>按位或</td>
<td><code>a &#124; b</code>结果为<code>61</code>，二进制为<code>0011 1101</code></td>
</tr>
<tr>
<td><code>^</code></td>
<td>按位异或</td>
<td><code>a ^ b</code>结果为<code>49</code>，二进制为<code>0011 0001</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>按位取反</td>
<td><code>~x</code>类似于<code>-x - 1</code>，<code>~a</code>结果为<code>-61</code>，二进制为<code>1100 0011</code></td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左移</td>
<td><code>a &lt;&lt; 2</code>结果为<code>240</code>，二进制为<code>1111 0000</code></td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右移</td>
<td><code>a &gt;&gt; 2</code>结果为<code>15</code>，二进制为<code>0000 1111</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python逻辑运算符"><a href="#Python逻辑运算符" class="headerlink" title="Python逻辑运算符"></a>Python逻辑运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>逻辑表达式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>and</code></td>
<td><code>x and y</code></td>
<td>如果<code>x</code>为<code>False</code>，<code>x and y</code>返回<code>False</code>，否则它返回<code>y</code>的计算值</td>
<td><code>a and b</code>返回<code>20</code></td>
</tr>
<tr>
<td><code>or</code></td>
<td><code>x or y</code></td>
<td>如果<code>x</code>是<code>True</code>，它返回<code>x</code>的值，否则它返回<code>y</code>的计算值</td>
<td><code>a or b</code>返回<code>10</code></td>
</tr>
<tr>
<td><code>not</code></td>
<td><code>not x</code></td>
<td>如果<code>x</code>为<code>True</code>，返回<code>False</code>；如果<code>x</code>为<code>False</code>，它返回<code>True</code></td>
<td><code>not(a and b)</code>返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python成员运算符"><a href="#Python成员运算符" class="headerlink" title="Python成员运算符"></a>Python成员运算符</h3><p>&emsp;&emsp;除了以上的一些运算符之外，<code>Python</code>还支持成员运算符，测试实例中包含了一系列的成员，包括字符串、列表或元组。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in</code></td>
<td>如果在指定的序列中找到值，返回<code>True</code>，否则返回<code>False</code></td>
</tr>
<tr>
<td><code>not in</code></td>
<td>如果在指定的序列中没有找到值，返回<code>True</code>，否则返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"1 - 变量a在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"1 - 变量a不在给定的列表中list中"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( b <span class="keyword">not</span> <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"2 - 变量b不在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"2 - 变量b在给定的列表中list中"</span>)</span><br><span class="line">​</span><br><span class="line">a = <span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"3 - 变量a在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"3 - 变量a不在给定的列表中list中"</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> - 变量a不在给定的列表中list中</span><br><span class="line"><span class="number">2</span> - 变量b不在给定的列表中list中</span><br><span class="line"><span class="number">3</span> - 变量a在给定的列表中list中</span><br></pre></td></tr></table></figure>
<h3 id="Python身份运算符"><a href="#Python身份运算符" class="headerlink" title="Python身份运算符"></a>Python身份运算符</h3><p>&emsp;&emsp;身份运算符用于比较两个对象的存储单元。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is</code></td>
<td><code>x is y</code>类似于<code>id(x) == id(y)</code>。如果引用的是同一个对象，则返回<code>True</code>，否则返回<code>False</code></td>
</tr>
<tr>
<td><code>is not</code></td>
<td><code>x is not y</code>类似于<code>id(a) != id(b)</code>。如果引用的不是同一个对象，则返回结果<code>True</code>，否则返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<p><code>id</code>函数用于获取对象内存地址：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">20</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</span><br><span class="line">    print(<span class="string">"1 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"1 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( id(a) == id(b) ):</span><br><span class="line">    print(<span class="string">"2 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"2 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line">b = <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</span><br><span class="line">    print(<span class="string">"3 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"3 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> <span class="keyword">not</span> b ):</span><br><span class="line">    print(<span class="string">"4 - a和b没有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"4 - a和b有相同的标识"</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> - a和b有相同的标识</span><br><span class="line"><span class="number">2</span> - a和b有相同的标识</span><br><span class="line"><span class="number">3</span> - a和b没有相同的标识</span><br><span class="line"><span class="number">4</span> - a和b没有相同的标识</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>is</code>与<code>==</code>的区别：<code>is</code>用于判断两个变量引用对象是否为同一个，<code>==</code>用于判断引用变量的值是否相等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = a</span><br><span class="line">b <span class="keyword">is</span> a  <span class="comment"># 结果为True</span></span><br><span class="line">b == a  <span class="comment"># 结果为True</span></span><br><span class="line">b = a[:]</span><br><span class="line">b <span class="keyword">is</span> a  <span class="comment"># 结果为False</span></span><br><span class="line">b == a  <span class="comment"># 结果为True</span></span><br></pre></td></tr></table></figure>
<h3 id="Python运算符优先级"><a href="#Python运算符优先级" class="headerlink" title="Python运算符优先级"></a>Python运算符优先级</h3><p>&emsp;&emsp;以下表格列出了从最高到最低优先级的所有运算符：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>**</code></td>
<td>指数(最高优先级)</td>
</tr>
<tr>
<td><code>~ + -</code></td>
<td>按位翻转、一元加号和减号(最后两个的方法名为<code>+@</code>和<code>-@</code>)</td>
</tr>
<tr>
<td><code>* / % //</code></td>
<td>乘、除、取模和取整除</td>
</tr>
<tr>
<td><code>+ -</code></td>
<td>加法、减法</td>
</tr>
<tr>
<td><code>&gt;&gt; &lt;&lt;</code></td>
<td>右移、左移</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>按位与</td>
</tr>
<tr>
<td><code>^ &#124;</code></td>
<td>按位异或、按位或</td>
</tr>
<tr>
<td><code>&lt;= &lt; &gt; &gt;=</code></td>
<td>比较运算符</td>
</tr>
<tr>
<td><code>== !=</code></td>
<td>等于运算符</td>
</tr>
<tr>
<td><code>= %= /= //= -= += *= **=</code></td>
<td>赋值运算符</td>
</tr>
<tr>
<td><code>is</code>、<code>is not</code></td>
<td>身份运算符</td>
</tr>
<tr>
<td><code>in</code>、<code>not in</code></td>
<td>成员运算符</td>
</tr>
<tr>
<td><code>not or and</code></td>
<td>逻辑运算符</td>
</tr>
</tbody>
</table>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/深度学习/Pytorch模型可视化/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/深度学习/Pytorch模型可视化/" itemprop="url">Pytorch模型可视化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T17:04:20+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>torchsummary</code>可以用于模型的可视化，它会输出模型各层的详细参数以及输出尺寸。其安装方法如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install torchsummary</span><br></pre></td></tr></table></figure>
<p>使用<code>torchsummary</code>直接调用<code>summary</code>即可，参数分别为<code>model</code>和输入<code>tensor</code>的尺寸：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">summary(your_model, input_size=(channels, H, W))</span><br></pre></td></tr></table></figure>
<p>简单的例子如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line"><span class="keyword">from</span> torchvision.models <span class="keyword">import</span> vgg11</span><br><span class="line">​</span><br><span class="line">model = vgg11(pretrained=<span class="keyword">False</span>)</span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    model = model.cuda()</span><br><span class="line">​</span><br><span class="line">summary(model, (<span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">224</span>, <span class="number">224</span>]           <span class="number">1</span>,<span class="number">792</span></span><br><span class="line">              ReLU<span class="number">-2</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">224</span>, <span class="number">224</span>]               <span class="number">0</span></span><br><span class="line">         MaxPool2d<span class="number">-3</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">112</span>, <span class="number">112</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-4</span>        [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">112</span>, <span class="number">112</span>]          <span class="number">73</span>,<span class="number">856</span></span><br><span class="line">              ReLU<span class="number">-5</span>        [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">112</span>, <span class="number">112</span>]               <span class="number">0</span></span><br><span class="line">         MaxPool2d<span class="number">-6</span>          [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-7</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]         <span class="number">295</span>,<span class="number">168</span></span><br><span class="line">              ReLU<span class="number">-8</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-9</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]         <span class="number">590</span>,<span class="number">080</span></span><br><span class="line">             ReLU<span class="number">-10</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-11</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-12</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]       <span class="number">1</span>,<span class="number">180</span>,<span class="number">160</span></span><br><span class="line">             ReLU<span class="number">-13</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-14</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-15</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-16</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-17</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-18</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-19</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-20</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-21</span>            [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">7</span>, <span class="number">7</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-22</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]     <span class="number">102</span>,<span class="number">764</span>,<span class="number">544</span></span><br><span class="line">             ReLU<span class="number">-23</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">          Dropout<span class="number">-24</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-25</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]      <span class="number">16</span>,<span class="number">781</span>,<span class="number">312</span></span><br><span class="line">             ReLU<span class="number">-26</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">          Dropout<span class="number">-27</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-28</span>                 [<span class="number">-1</span>, <span class="number">1000</span>]       <span class="number">4</span>,<span class="number">097</span>,<span class="number">000</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">132</span>,<span class="number">863</span>,<span class="number">336</span></span><br><span class="line">Trainable params: <span class="number">132</span>,<span class="number">863</span>,<span class="number">336</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.57</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">125.18</span></span><br><span class="line">Params size (MB): <span class="number">506.83</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">632.59</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;代码实例二如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">1</span>, <span class="number">10</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">10</span>, <span class="number">20</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.conv2_drop = nn.Dropout2d()</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">320</span>, <span class="number">50</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">50</span>, <span class="number">10</span>)</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = F.relu(F.max_pool2d(self.conv1(x), <span class="number">2</span>))</span><br><span class="line">        x = F.relu(F.max_pool2d(self.conv2_drop(self.conv2(x)), <span class="number">2</span>))</span><br><span class="line">        x = x.view(<span class="number">-1</span>, <span class="number">320</span>)</span><br><span class="line">        x = F.relu(self.fc1(x))</span><br><span class="line">        x = F.dropout(x, training=self.training)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        <span class="keyword">return</span> F.log_softmax(x, dim=<span class="number">1</span>)</span><br><span class="line">​</span><br><span class="line">model = Net()</span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    model = model.cuda()</span><br><span class="line">​</span><br><span class="line">summary(model, (<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>           [<span class="number">-1</span>, <span class="number">10</span>, <span class="number">24</span>, <span class="number">24</span>]             <span class="number">260</span></span><br><span class="line">            Conv2d<span class="number">-2</span>             [<span class="number">-1</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">8</span>]           <span class="number">5</span>,<span class="number">020</span></span><br><span class="line">         Dropout2d<span class="number">-3</span>             [<span class="number">-1</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">8</span>]               <span class="number">0</span></span><br><span class="line">            Linear<span class="number">-4</span>                   [<span class="number">-1</span>, <span class="number">50</span>]          <span class="number">16</span>,<span class="number">050</span></span><br><span class="line">            Linear<span class="number">-5</span>                   [<span class="number">-1</span>, <span class="number">10</span>]             <span class="number">510</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">21</span>,<span class="number">840</span></span><br><span class="line">Trainable params: <span class="number">21</span>,<span class="number">840</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.00</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">0.06</span></span><br><span class="line">Params size (MB): <span class="number">0.08</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">0.15</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;多输入代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleConv</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(SimpleConv, self).__init__()</span><br><span class="line">        self.features = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        x1 = self.features(x)</span><br><span class="line">        x2 = self.features(y)</span><br><span class="line">        <span class="keyword">return</span> x1, x2</span><br><span class="line">​</span><br><span class="line">device = torch.device(<span class="string">"cuda"</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">"cpu"</span>)</span><br><span class="line">model = SimpleConv().to(device)</span><br><span class="line">summary(model, [(<span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>), (<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)])</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>]              <span class="number">10</span></span><br><span class="line">              ReLU<span class="number">-2</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-3</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>]              <span class="number">10</span></span><br><span class="line">              ReLU<span class="number">-4</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">20</span></span><br><span class="line">Trainable params: <span class="number">20</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.77</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">0.02</span></span><br><span class="line">Params size (MB): <span class="number">0.00</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">0.78</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/元组/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/元组/" itemprop="url">元组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T16:36:59+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>Python</code>的元组与列表类似，不同之处在于元组的元素不能修改。元组使用<code>小括号</code>，列表使用<code>方括号</code>。<br>&emsp;&emsp;元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">tup2 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">tup3 = <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span></span><br></pre></td></tr></table></figure>
<p>创建空元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tup1 = ()</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;元组中只包含一个元素时，需要在元素后面添加逗号，否则括号会被当作运算符使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">50</span>)</span><br><span class="line">type(tup1)  <span class="comment"># 结果为&lt;class 'int'&gt;，不加逗号，类型为整型</span></span><br><span class="line">tup1 = (<span class="number">50</span>,)</span><br><span class="line">type(tup1)  <span class="comment"># 结果为&lt;class 'tuple'&gt;，加上逗号，类型为元组</span></span><br></pre></td></tr></table></figure>
<p>元组与字符串类似，下标索引从<code>0</code>开始，可以进行截取、组合等。</p>
<h3 id="访问元组"><a href="#访问元组" class="headerlink" title="访问元组"></a>访问元组</h3><p>&emsp;&emsp;元组可以使用下标索引来访问元组中的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">tup2 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">print(<span class="string">"tup1[0]:"</span>, tup1[<span class="number">0</span>])</span><br><span class="line">print(<span class="string">"tup2[1:5]:"</span>, tup2[<span class="number">1</span>:<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup1[<span class="number">0</span>]: Google</span><br><span class="line">tup2[<span class="number">1</span>:<span class="number">5</span>]: (<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h3 id="修改元组"><a href="#修改元组" class="headerlink" title="修改元组"></a>修改元组</h3><p>&emsp;&emsp;元组中的元素值是不允许修改的，但我们可以对元组进行连接组合：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">12</span>, <span class="number">34.56</span>)</span><br><span class="line">tup2 = (<span class="string">'abc'</span>, <span class="string">'xyz'</span>)</span><br><span class="line"><span class="comment"># tup1[0] = 100  # 修改元组元素是非法的</span></span><br><span class="line">tup3 = tup1 + tup2  <span class="comment"># 创建一个新的元组</span></span><br><span class="line">print(tup3)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">12</span>, <span class="number">34.56</span>, <span class="string">'abc'</span>, <span class="string">'xyz'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="删除元组"><a href="#删除元组" class="headerlink" title="删除元组"></a>删除元组</h3><p>&emsp;&emsp;元组中的元素值是不允许删除的，但我们可以使用<code>del</code>语句来删除整个元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">print(tup)</span><br><span class="line"><span class="keyword">del</span> tup</span><br><span class="line">print(<span class="string">"删除后的元组tup: "</span>)</span><br><span class="line">print(tup)</span><br></pre></td></tr></table></figure>
<p>以上实例元组被删除后，输出变量会有异常信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">删除后的元组tup:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"test.py"</span>, line <span class="number">8</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">print</span> (tup)</span><br><span class="line">NameError: name <span class="string">'tup'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>
<h3 id="元组运算符"><a href="#元组运算符" class="headerlink" title="元组运算符"></a>元组运算符</h3><p>&emsp;&emsp;与字符串一样，元组之间可以使用<code>+</code>号和<code>*</code>号进行运算，这就意味着它们可以组合和复制，运算后会生成一个新的元组。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Python表达式</th>
<th>结果</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>len((1, 2, 3))</code></td>
<td><code>3</code></td>
<td>计算元素个数</td>
</tr>
<tr>
<td><code>(1, 2, 3) + (4, 5, 6)</code></td>
<td><code>(1, 2, 3, 4, 5, 6)</code></td>
<td>连接</td>
</tr>
<tr>
<td><code>(&#39;Hi!&#39;,) * 4</code></td>
<td><code>(&#39;Hi!&#39;, &#39;Hi!&#39;, &#39;Hi!&#39;, &#39;Hi!&#39;)</code></td>
<td>复制</td>
</tr>
<tr>
<td><code>3 in (1, 2, 3)</code></td>
<td><code>True</code></td>
<td>元素是否存在</td>
</tr>
<tr>
<td><code>for x in (1, 2, 3): print(x, end=&quot; &quot;)</code></td>
<td><code>1 2 3</code></td>
<td>迭代</td>
</tr>
</tbody>
</table>
</div>
<h3 id="元组索引、截取"><a href="#元组索引、截取" class="headerlink" title="元组索引、截取"></a>元组索引、截取</h3><p>&emsp;&emsp;因为元组也是一个序列，所以我们可以访问元组中的指定位置的元素，也可以截取索引中的一段元素。假设元祖为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = (<span class="string">'Google'</span>, <span class="string">'Taobao'</span>, <span class="string">'Runoob'</span>)</span><br></pre></td></tr></table></figure>
<p>相应的操作为：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Python表达式</th>
<th>结果</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>L[2]</code></td>
<td><code>&#39;Runoob!&#39;</code></td>
<td>读取第三个元素</td>
</tr>
<tr>
<td><code>L[-2]</code></td>
<td><code>&#39;Taobao&#39;</code></td>
<td>反向读取，读取倒数第二个元素</td>
</tr>
<tr>
<td><code>L[1:]</code></td>
<td><code>(&#39;Taobao&#39;, &#39;Runoob!&#39;)</code></td>
<td>截取元素，从第二个开始后的所有元素</td>
</tr>
</tbody>
</table>
</div>
<h3 id="元组内置函数"><a href="#元组内置函数" class="headerlink" title="元组内置函数"></a>元组内置函数</h3><p>&emsp;&emsp;<code>Python</code>元组包含了以下内置函数：</p>
<ul>
<li><code>len(tuple)</code>：计算元组元素个数。</li>
<li><code>max(tuple)</code>：返回元组中元素最大值。</li>
<li><code>min(tuple)</code>：返回元组中元素最小值。</li>
<li><code>tuple(seq)</code>：将列表转换为元组。</li>
</ul>
<h3 id="二维元祖的遍历"><a href="#二维元祖的遍历" class="headerlink" title="二维元祖的遍历"></a>二维元祖的遍历</h3><p>&emsp;&emsp;代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tuple4 = ((<span class="string">"apple"</span>, <span class="string">"banana"</span>), (<span class="string">"grape"</span>, <span class="string">"orange"</span>), (<span class="string">"watermelon"</span>,), (<span class="string">"grapefulit"</span>,))</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(tuple4)):</span><br><span class="line">    print(<span class="string">"tuple[%d]:"</span> % i, end=<span class="string">" "</span>)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(len(tuple4[i])):</span><br><span class="line">        print(tuple4[i][j], end=<span class="string">" "</span>)</span><br><span class="line">    print(end=<span class="string">"\n"</span>)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/collections模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/collections模块/" itemprop="url">collections模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T14:04:31+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>collections</code>是<code>Python</code>内建的一个集合模块，提供了许多有用的集合类。</p>
<h3 id="namedtuple"><a href="#namedtuple" class="headerlink" title="namedtuple"></a>namedtuple</h3><p>&emsp;&emsp;<code>namedtuple</code>是一个函数，它用来创建一个自定义的元组对象，并且规定了元组元素的个数，并可以用属性而不是索引来引用元组的某个元素。可以通过<code>namedtuple</code>来定义一种数据类型，它具备元组的不变性，又可以根据属性来引用，十分方便。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namedtuple(typename, filed_name, verbose=<span class="keyword">False</span>, rename=<span class="keyword">False</span>);</span><br></pre></td></tr></table></figure>
<p>参数<code>typename</code>是该元组的名字，<code>field_name</code>是该元组成员的名字，<code>verbose</code>指示是否输出构造的源码，<code>rename</code>指示是否在<code>field_name</code>非法时进行重命名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">​</span><br><span class="line">Mytuple = namedtuple(<span class="string">'Mytuple'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line">n = Mytuple(<span class="number">11</span>, <span class="number">22</span>)</span><br><span class="line">print(<span class="string">"n.x ="</span>, n.x)</span><br><span class="line">print(<span class="string">"n.y ="</span>, n.y)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n.x = <span class="number">11</span></span><br><span class="line">n.y = <span class="number">22</span></span><br></pre></td></tr></table></figure>
<h3 id="deque"><a href="#deque" class="headerlink" title="deque"></a>deque</h3><p>&emsp;&emsp;使用<code>list</code>存储数据时，按照索引访问元素很快，但是插入和删除元素就很慢了，因为<code>list</code>是线性存储，数据量大的时候，插入和删除效率很低。<code>deque</code>是为了高效实现插入和删除操作的双向列表，适合用于队列和栈。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">​</span><br><span class="line">q = deque([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">q.append(<span class="string">'x'</span>)  <span class="comment"># 默认添加到列表最后一项</span></span><br><span class="line">q.appendleft(<span class="string">'y'</span>)  <span class="comment"># 添加到列表第一项</span></span><br><span class="line">print(q)</span><br><span class="line">print(q.pop())  <span class="comment"># 默认删除列表最后一个元素</span></span><br><span class="line">print(q.popleft())  <span class="comment"># 删除列表的第一个元素</span></span><br><span class="line">print(q)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deque([<span class="string">'y'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'x'</span>])</span><br><span class="line">x</span><br><span class="line">y</span><br><span class="line">deque([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br></pre></td></tr></table></figure>
<h3 id="defaultdict"><a href="#defaultdict" class="headerlink" title="defaultdict"></a>defaultdict</h3><p>&emsp;&emsp;使用字典时，如果引用的<code>Key</code>不存在，就会抛出<code>KeyError</code>。如果希望<code>key</code>不存在时，返回一个默认值，就可以用<code>defaultdict</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">​</span><br><span class="line">Mydict = defaultdict(<span class="keyword">lambda</span>: <span class="string">'N/A'</span>)</span><br><span class="line">Mydict[<span class="string">'key1'</span>] = <span class="string">'abc'</span></span><br><span class="line">print(Mydict[<span class="string">'key1'</span>])  <span class="comment"># 字典的key1存在</span></span><br><span class="line">print(Mydict[<span class="string">'key2'</span>])  <span class="comment"># 字典的key2不存在，返回默认值为“N/A”</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">abc</span><br><span class="line">N/A</span><br></pre></td></tr></table></figure>
<p>注意默认值是调用函数返回的，而函数在创建<code>defaultdict</code>对象时传入。除了<code>key</code>不存在而返回默认值，其他功能与普通字典无异。</p>
<h3 id="OrderedDict"><a href="#OrderedDict" class="headerlink" title="OrderedDict"></a>OrderedDict</h3><p>&emsp;&emsp;它是有序字典的应用。<code>OrderedDict</code>的有序性是按照插入的顺序，而不是<code>key</code>的顺序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">​</span><br><span class="line">d = dict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'c'</span>, <span class="number">3</span>), (<span class="string">'b'</span>, <span class="number">2</span>)])</span><br><span class="line">print(d)  <span class="comment"># dict的Key是无序的</span></span><br><span class="line">od = OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line">print(od)  <span class="comment"># OrderedDict的Key是有序的</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line">OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br></pre></td></tr></table></figure>
<p>通过<code>OrderedDict</code>可以实现一个<code>FIFO</code>的字典，当容量超出限制后，先删除最早添加的<code>key</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LastUpdatedOrderedDict</span><span class="params">(OrderedDict)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, capacity)</span>:</span></span><br><span class="line">        super(LastUpdatedOrderedDict, self).__init__()</span><br><span class="line">        self._capacity = capacity</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        containsKey = <span class="number">1</span> <span class="keyword">if</span> key <span class="keyword">in</span> self <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(self) - containsKey &gt;= self._capacity:</span><br><span class="line">            last = self.popitem(last=<span class="keyword">False</span>)</span><br><span class="line">            print(<span class="string">'remove:'</span>, last)</span><br><span class="line">        <span class="keyword">if</span> containsKey:</span><br><span class="line">            <span class="keyword">del</span> self[key]</span><br><span class="line">            print(<span class="string">'set:'</span>, (key, value))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'add:'</span>, (key, value))</span><br><span class="line">        OrderedDict.__setitem__(self, key, value)</span><br></pre></td></tr></table></figure>
<h3 id="Counter"><a href="#Counter" class="headerlink" title="Counter"></a>Counter</h3><p>&emsp;&emsp;简单的计数器，例如统计字符出现的个数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">​</span><br><span class="line">c = Counter()</span><br><span class="line"><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="string">'programming'</span>:</span><br><span class="line">    c[ch] = c[ch] + <span class="number">1</span></span><br><span class="line">​</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Counter(&#123;<span class="string">'r'</span>: <span class="number">2</span>, <span class="string">'g'</span>: <span class="number">2</span>, <span class="string">'m'</span>: <span class="number">2</span>, <span class="string">'p'</span>: <span class="number">1</span>, <span class="string">'o'</span>: <span class="number">1</span>, <span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'i'</span>: <span class="number">1</span>, <span class="string">'n'</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="collections-defaultdict"><a href="#collections-defaultdict" class="headerlink" title="collections.defaultdict"></a>collections.defaultdict</h3><p>&emsp;&emsp;有没有一种字典本身提供了默认值的功能呢？答案是肯定的，那就是<code>collections.defaultdict</code>。<code>defaultdict</code>类与<code>dict</code>相似，但它是使用一个类型来初始化的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">​</span><br><span class="line">dd = defaultdict(list)</span><br><span class="line">print(dd)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaultdict(&lt;class 'list'&gt;, &#123;&#125;)</span><br></pre></td></tr></table></figure>
<p><code>defaultdict</code>类的初始化函数接受一个类型作为参数，当所访问的键不存在的时候，可以实例化一个值作为默认值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">​</span><br><span class="line">dd = defaultdict(list)</span><br><span class="line">print(dd[<span class="string">'foo'</span>])</span><br><span class="line">print(dd)</span><br><span class="line">dd[<span class="string">'bar'</span>].append(<span class="string">'quux'</span>)</span><br><span class="line">print(dd)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[]</span><br><span class="line">defaultdict(&lt;class 'list'&gt;, &#123;'foo': []&#125;)</span><br><span class="line">defaultdict(&lt;class 'list'&gt;, &#123;'foo': [], 'bar': ['quux']&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/集合/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/集合/" itemprop="url">集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T10:42:15+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;集合在<code>Python</code>中的作用是<code>唯一</code>，基本功能是进行成员关系测试和删除重复元素。在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num = &#123;&#125;</span><br><span class="line">type(num)  <span class="comment"># 得到&lt;class 'dict'&gt;</span></span><br><span class="line">num2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">type(num2)  <span class="comment"># 得到&lt;class 'set'&gt;</span></span><br><span class="line">num2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>&#125;</span><br><span class="line">num2  <span class="comment"># 得到&#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line">num2[<span class="number">2</span>]  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>注意，集合的元素不能随意地索引！注意，创建一个空集合必须用<code>set</code>而不是<code>{}</code>，因为<code>{}</code>是用来创建一个空字典。创建一个集合的方法如下：</p>
<ul>
<li>把一堆元素用花括号括起来。</li>
<li>使用set工厂函数：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set1 = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">set1  <span class="comment"># 得到&#123;1, 2, 3, 4, 5&#125;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;去掉列表中重复的元素<code>[0, 1, 2, 3, 4, 5, 5, 3, 1]</code>，非集合解法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">temp = []</span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> num1:  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="keyword">if</span> each <span class="keyword">not</span> <span class="keyword">in</span> temp:</span><br><span class="line">        temp.append(each)</span><br><span class="line">​</span><br><span class="line">temp  <span class="comment"># 结果为[0, 1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>集合解法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num1 = list(set(num1))</span><br><span class="line">num1  <span class="comment"># 结果为[0, 1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;使用如下方法访问集合中的值：</p>
<ul>
<li>可以使用<code>for</code>把集合中的数据一个个取出来。</li>
<li>可以通过<code>in</code>和<code>not in</code>判断一个元素是否已经存在于一个集合中。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num2  <span class="comment"># 结果为&#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line"><span class="string">"1"</span> <span class="keyword">in</span> num2  <span class="comment"># 结果为False</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> num2  <span class="comment"># 结果为True</span></span><br><span class="line">num2.add(<span class="number">6</span>)</span><br><span class="line">num2  <span class="comment"># 结果为&#123;1, 2, 3, 4, 5, 6&#125;</span></span><br><span class="line">num2.remove(<span class="number">5</span>)</span><br><span class="line">num2  <span class="comment"># 结果为&#123;1, 2, 3, 4, 6&#125;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;不可变集合使用关键字<code>frozen</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num3 = frozenset([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">num3.add(<span class="number">0</span>)  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>set</code>可以进行集合运算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = set(<span class="string">'abracadabra'</span>)</span><br><span class="line">b = set(<span class="string">'alacazam'</span>)</span><br><span class="line">​</span><br><span class="line">print(a)  <span class="comment"># 输出“&#123;'c', 'b', 'a', 'd', 'r'&#125;”</span></span><br><span class="line">print(b)  <span class="comment"># 输出“&#123;'l', 'a', 'z', 'c', 'm'&#125;”</span></span><br><span class="line">print(a - b)  <span class="comment"># a和b的差集，输出“&#123;'d', 'r', 'b'&#125;”</span></span><br><span class="line">print(a | b)  <span class="comment"># a和b的并集，输出“&#123;'m', 'c', 'z', 'a', 'b', 'l', 'd', 'r'&#125;”</span></span><br><span class="line">print(a &amp; b)  <span class="comment"># a和b的交集，输出“&#123;'a', 'c'&#125;”</span></span><br><span class="line">print(a ^ b)  <span class="comment"># a和b中不同时存在的元素，输出“&#123;'m', 'l', 'd', 'z', 'r', 'b'&#125;”</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><p>&emsp;&emsp;<code>add</code>方法用于给集合添加元素，如果添加的元素在集合中已存在，则不执行任何操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.add(elmnt)</span><br></pre></td></tr></table></figure>
<p>参数<code>elmnt</code>是要添加的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">fruits.add(<span class="string">"orange"</span>)</span><br><span class="line">print(fruits)  <span class="comment"># 输出“&#123;'orange', 'banana', 'cherry', 'apple'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="difference"><a href="#difference" class="headerlink" title="difference"></a>difference</h3><p>&emsp;&emsp;<code>difference</code>方法用于返回集合的差集，即返回的集合元素包含在第一个集合中，但不包含在第二个集合(方法的参数)中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.difference(set)</span><br></pre></td></tr></table></figure>
<p>参数<code>set</code>是用于计算差集的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"microsoft"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">z = x.difference(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“&#123;'banana', 'cherry'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="discard"><a href="#discard" class="headerlink" title="discard"></a>discard</h3><p>&emsp;&emsp;<code>discard</code>用于移除指定的集合元素。<code>remove</code>在移除一个不存在的元素时会发生错误，而<code>discard</code>不会：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.discard(value)</span><br></pre></td></tr></table></figure>
<p>参数<code>value</code>是要移除的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">fruits.discard(<span class="string">"banana"</span>)</span><br><span class="line">print(fruits)  <span class="comment"># 输出“&#123;'apple', 'cherry'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="intersection"><a href="#intersection" class="headerlink" title="intersection"></a>intersection</h3><p>&emsp;&emsp;<code>intersection</code>方法用于返回两个或更多集合中都包含的元素(即<code>交集</code>)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.intersection(set1, set2, ..., etc)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">z = x.intersection(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“&#123;'apple'&#125;”</span></span><br></pre></td></tr></table></figure>
<p>计算多个集合的并集：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>&#125;</span><br><span class="line">z = &#123;<span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">result = x.intersection(y, z)</span><br><span class="line">print(result)  <span class="comment"># 输出“&#123;'c'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="intersection-update"><a href="#intersection-update" class="headerlink" title="intersection_update"></a>intersection_update</h3><p>&emsp;&emsp;<code>intersection_update</code>方法用于移除两个或更多集合中都不重叠的元素，即计算<code>交集</code>。<code>intersection</code>方法是返回一个新的集合，而<code>intersection_update</code>方法是在原始的集合上移除不重叠的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.intersection_update(set1, set2 ... etc)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">x.intersection_update(y)</span><br><span class="line">print(x)  <span class="comment"># 输出“&#123;'apple'&#125;”</span></span><br></pre></td></tr></table></figure>
<p>计算多个集合的并集：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>&#125;</span><br><span class="line">z = &#123;<span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">x.intersection_update(y, z)</span><br><span class="line">print(x)  <span class="comment"># 输出“&#123;'c'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="isdisjoint"><a href="#isdisjoint" class="headerlink" title="isdisjoint"></a>isdisjoint</h3><p>&emsp;&emsp;<code>isdisjoint</code>方法用于判断两个集合是否包含相同的元素，如果没有则返回<code>True</code>，否则返回<code>False</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.isdisjoint(set)</span><br></pre></td></tr></table></figure>
<p>参数<code>set</code>是要比较的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"facebook"</span>&#125;</span><br><span class="line">z = x.isdisjoint(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“True”</span></span><br></pre></td></tr></table></figure>
<h3 id="issubset"><a href="#issubset" class="headerlink" title="issubset"></a>issubset</h3><p>&emsp;&emsp;<code>issubset</code>方法用于判断集合的所有元素是否都包含在指定集合中，如果是则返回<code>True</code>，否则返回<code>False</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.issubset(set)</span><br></pre></td></tr></table></figure>
<p>参数<code>set</code>是要查找的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"f"</span>, <span class="string">"e"</span>, <span class="string">"d"</span>, <span class="string">"c"</span>, <span class="string">"b"</span>, <span class="string">"a"</span>&#125;</span><br><span class="line">z = x.issubset(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“True”</span></span><br></pre></td></tr></table></figure>
<h3 id="issuperset"><a href="#issuperset" class="headerlink" title="issuperset"></a>issuperset</h3><p>&emsp;&emsp;<code>issuperset</code>方法用于判断指定集合的所有元素是否都包含在原始的集合中，如果是则返回<code>True</code>，否则返回<code>False</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.issuperset(set)</span><br></pre></td></tr></table></figure>
<p>参数set是要查找的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"f"</span>, <span class="string">"e"</span>, <span class="string">"d"</span>, <span class="string">"c"</span>, <span class="string">"b"</span>, <span class="string">"a"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;</span><br><span class="line">z = x.issuperset(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“True”</span></span><br></pre></td></tr></table></figure>
<h3 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h3><p>&emsp;&emsp;<code>pop</code>方法用于随机移除一个元素，该方法返回移除的数组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.pop()</span><br></pre></td></tr></table></figure>
<p>实例如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">x = fruits.pop()</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>
<h3 id="symmetric-difference"><a href="#symmetric-difference" class="headerlink" title="symmetric_difference"></a>symmetric_difference</h3><p>&emsp;&emsp;<code>symmetric_difference</code>方法返回两个集合中不重复的元素集合，即会移除两个集合中都存在的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.symmetric_difference(set)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">z = x.symmetric_difference(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“&#123;'google', 'cherry', 'runoob', 'banana'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="symmetric-difference-update"><a href="#symmetric-difference-update" class="headerlink" title="symmetric_difference_update"></a>symmetric_difference_update</h3><p>&emsp;&emsp;<code>symmetric_difference_update</code>方法移除当前集合中在另外一个指定集合相同的元素，并将另外一个指定集合中不同的元素插入到当前集合中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.symmetric_difference_update(set)</span><br></pre></td></tr></table></figure>
<p>参数set是要检测的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">x.symmetric_difference_update(y)</span><br><span class="line">print(x)  <span class="comment"># 输出“&#123;'runoob', 'google', 'cherry', 'banana'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><p>&emsp;&emsp;<code>union</code>方法返回两个集合的并集，即包含了所有集合的元素，重复的元素只会出现一次。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.union(set1, set2...)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">z = x.union(y)</span><br><span class="line">print(z)  <span class="comment"># 输出“&#123;'apple', 'google', 'banana', 'cherry', 'runoob'&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p>&emsp;&emsp;<code>update</code>方法用于修改当前集合，可以添加新的元素或集合到当前集合中，如果添加的元素在集合中已存在，则该元素只会出现一次，重复的会忽略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set.update(set)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;</span><br><span class="line">y = &#123;<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"apple"</span>&#125;</span><br><span class="line">x.update(y)</span><br><span class="line">print(x)  <span class="comment"># 输出“&#123;'runoob', 'apple', 'google', 'cherry', 'banana'&#125;”</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/functools模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/functools模块/" itemprop="url">functools模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T09:57:39+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>Python</code>的<code>functools</code>模块可以说主要是为函数式编程而设计，用于增强函数功能。</p>
<h3 id="functools-partial"><a href="#functools-partial" class="headerlink" title="functools.partial"></a>functools.partial</h3><p>&emsp;&emsp;用于创建一个偏函数，它用一些默认参数包装一个可调用对象，返回结果是可调用对象，并且可以像原始对象一样对待，这样可以简化函数调用。实际上<code>partial</code>相当于一个高阶函数，其大致的实现如下(实际在标准库中它是用<code>C</code>实现的)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partial</span><span class="params">(func, *args, **keywords)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">newfunc</span><span class="params">(*fargs, **fkeywords)</span>:</span></span><br><span class="line">        newkeywords = keywords.copy()</span><br><span class="line">        newkeywords.update(fkeywords)</span><br><span class="line">        <span class="keyword">return</span> func(*(args + fargs), **newkeywords)</span><br><span class="line">    newfunc.func = func</span><br><span class="line">    newfunc.args = args</span><br><span class="line">    newfunc.keywords = keywords</span><br><span class="line">    <span class="keyword">return</span> newfunc</span><br></pre></td></tr></table></figure>
<p>声明如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">urlunquote = functools.partial(urlunquote, encoding=<span class="string">'latin1'</span>)</span><br></pre></td></tr></table></figure>
<p>调用<code>urlunquote(args, *kargs)</code>时相，当于调用<code>urlunquote(args, *kargs, encoding=&#39;latin1&#39;)</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">​</span><br><span class="line">plus3 = partial(add, <span class="number">3</span>)</span><br><span class="line">plus5 = partial(add, <span class="number">5</span>)</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"add(4,2) ="</span>, add(<span class="number">4</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">"plus3(4) ="</span>, plus3(<span class="number">4</span>))</span><br><span class="line">print(<span class="string">"plus3(7) ="</span>, plus3(<span class="number">7</span>))</span><br><span class="line">print(<span class="string">"plus5(10) ="</span>, plus5(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">4</span>,<span class="number">2</span>) = <span class="number">6</span></span><br><span class="line">plus3(<span class="number">4</span>) = <span class="number">7</span></span><br><span class="line">plus3(<span class="number">7</span>) = <span class="number">10</span></span><br><span class="line">plus5(<span class="number">10</span>) = <span class="number">15</span></span><br></pre></td></tr></table></figure>
<h3 id="functool-update-wrapper"><a href="#functool-update-wrapper" class="headerlink" title="functool.update_wrapper"></a>functool.update_wrapper</h3><p>&emsp;&emsp;用<code>partial</code>包装的函数是没有<code>__name__</code>和<code>__doc__</code>，这使得依赖于这些属性的代码可能无法正常工作。<code>update_wrapper</code>可以拷贝被包装函数的<code>__name__</code>、<code>__module__</code>、<code>__doc__</code>和<code>__dict__</code>属性到新的封装函数中去，其实现也非常简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WRAPPER_ASSIGNMENTS = (<span class="string">'__module__'</span>, <span class="string">'__name__'</span>, <span class="string">'__doc__'</span>)</span><br><span class="line">WRAPPER_UPDATES = (<span class="string">'__dict__'</span>,)</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_wrapper</span><span class="params">(wrapper, wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> attr <span class="keyword">in</span> assigned:</span><br><span class="line">        setattr(wrapper, attr, getattr(wrapped, attr))</span><br><span class="line">    <span class="keyword">for</span> attr <span class="keyword">in</span> updated:</span><br><span class="line">        getattr(wrapper, attr).update(getattr(wrapped, attr, &#123;&#125;))</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>
<p><code>update_wrapper</code>主要用在装饰器函数中，以确保被装饰的函数保留原来的属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> update_wrapper</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wrap</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call_it</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="string">""" wrap func: call_it """</span></span><br><span class="line">        print(<span class="string">'before call'</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> call_it</span><br><span class="line">​</span><br><span class="line"><span class="meta">@wrap</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">""" say hello """</span></span><br><span class="line">    print(<span class="string">'hello world'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wrap2</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call_it</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="string">""" wrap func: call_it2 """</span></span><br><span class="line">        print(<span class="string">'before call'</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> update_wrapper(call_it, func)</span><br><span class="line">​</span><br><span class="line"><span class="meta">@wrap2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">""" test hello """</span></span><br><span class="line">    print(<span class="string">'hello world2'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    hello()</span><br><span class="line">    print(hello.__name__)</span><br><span class="line">    print(hello.__doc__)</span><br><span class="line">    hello2()</span><br><span class="line">    print(hello2.__name__)</span><br><span class="line">    print(hello2.__doc__)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">before call</span><br><span class="line">hello world</span><br><span class="line">call_it</span><br><span class="line">wrap func: call_it</span><br><span class="line">before call</span><br><span class="line">hello world2</span><br><span class="line">hello2</span><br><span class="line">test hello</span><br></pre></td></tr></table></figure>
<h3 id="functool-wraps"><a href="#functool-wraps" class="headerlink" title="functool.wraps"></a>functool.wraps</h3><p>&emsp;&emsp;<code>wraps</code>函数是为了在装饰器中方便地拷贝被装饰函数的签名，而对<code>update_wrapper</code>做的一个包装，其实现如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wraps</span><span class="params">(wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> partial(update_wrapper, wrapped=wrapped, assigned=assigned, updated=updated)</span><br></pre></td></tr></table></figure>
<p>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wrap3</span><span class="params">(func)</span>:</span></span><br><span class="line">    @wraps(func)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call_it</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">"calling"</span>, func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> call_it</span><br><span class="line">​</span><br><span class="line"><span class="meta">@wrap3</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello3</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"I am hello3"</span>)</span><br><span class="line">​</span><br><span class="line">hello3()</span><br><span class="line">print(hello3.__name__)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">calling hello3</span><br><span class="line">I am hello3</span><br><span class="line">hello3</span><br></pre></td></tr></table></figure>
<h3 id="functools-reduce"><a href="#functools-reduce" class="headerlink" title="functools.reduce"></a>functools.reduce</h3><p>&emsp;&emsp;在<code>Python 2</code>中等同于内建函数<code>reduce</code>，但是<code>Python 3</code>将<code>reduce</code>函数移除，只能使用<code>functools.reduce</code>。该函数的作用是将一个序列归纳为一个输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(function, sequence, startValue)</span><br></pre></td></tr></table></figure>
<p>使用示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">​</span><br><span class="line">result = range(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(reduce(foo, result))  <span class="comment"># 结果为45</span></span><br><span class="line">print(reduce(foo, result, <span class="number">10</span>))  <span class="comment"># 结果为55</span></span><br></pre></td></tr></table></figure>
<h3 id="functools-cmp-to-key"><a href="#functools-cmp-to-key" class="headerlink" title="functools.cmp_to_key"></a>functools.cmp_to_key</h3><p>&emsp;&emsp;在<code>list.sort</code>和内建函数<code>sorted</code>中都有一个<code>key</code>参数，该参数用来指定元素的某种属性进行比较。例如按字符串元素的长度进行比较：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">'hello'</span>, <span class="string">'abc'</span>, <span class="string">'iplaypython.com'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort(key=len)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">[<span class="string">'abc'</span>, <span class="string">'hello'</span>, <span class="string">'iplaypython.com'</span>]</span><br></pre></td></tr></table></figure>
<p>也就是说排序时会先对每个元素调用<code>key</code>所指定的函数，然后再排序。同时，<code>sorted</code>和<code>list.sort</code>还提供了<code>cmp</code>参数来指定如何比较两个元素，但是<code>Python 3</code>移除了该参数。<code>cmp_to_key</code>函数就是用来将老式的比较函数转化为<code>key</code>函数。用到<code>key</code>参数的函数还有<code>sorted</code>、<code>min</code>、<code>max</code>、<code>heapq.nlargest</code>、<code>itertools.groupby</code>等。</p>
<h3 id="functools-total-ordering"><a href="#functools-total-ordering" class="headerlink" title="functools.total_ordering"></a>functools.total_ordering</h3><p>&emsp;&emsp;这个一个类装饰器，如果一个类实现了<code>__lt__</code>、<code>__le__</code>、<code>__gt__</code>、<code>__ge__</code>这些方法中的至少一个，该装饰器会自动实现其他几个方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> total_ordering</span><br><span class="line">​</span><br><span class="line"><span class="meta">@total_ordering</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, firstname, lastname)</span>:</span></span><br><span class="line">        self.firstname = firstname</span><br><span class="line">        self.lastname = lastname</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> ((self.lastname.lower(), self.firstname.lower())</span><br><span class="line">                 == (other.lastname.lower(), other.firstname.lower()))</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> ((self.lastname.lower(), self.firstname.lower())</span><br><span class="line">                 &lt; (other.lastname.lower(), other.firstname.lower()))</span><br><span class="line">​</span><br><span class="line">print(dir(Student))</span><br><span class="line">​</span><br><span class="line">stu = Student(<span class="string">"Huoty"</span>, <span class="string">"Kong"</span>)</span><br><span class="line">stu2 = Student(<span class="string">"Huoty"</span>, <span class="string">"Kong"</span>)</span><br><span class="line">stu3 = Student(<span class="string">"Qing"</span>, <span class="string">"Lu"</span>)</span><br><span class="line">​</span><br><span class="line">print(stu == stu2)</span><br><span class="line">print(stu &gt; stu3)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'__class__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dict__'</span>,</span><br><span class="line"><span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>,</span><br><span class="line"><span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>,</span><br><span class="line"><span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__le__'</span>, <span class="string">'__lt__'</span>,</span><br><span class="line"><span class="string">'__module__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>,</span><br><span class="line"><span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__setattr__'</span>,</span><br><span class="line"><span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'__weakref__'</span>]</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h3 id="functools-lru-cache"><a href="#functools-lru-cache" class="headerlink" title="functools.lru_cache"></a>functools.lru_cache</h3><p>&emsp;&emsp;该装饰器用于缓存函数的调用结果，对于需要多次调用的函数，而且每次调用参数都相同，则可以用该装饰器缓存调用结果，从而加快程序运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line">​</span><br><span class="line"><span class="meta">@lru_cache(None)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    print(<span class="string">"calculating: %s + %s"</span> % (x, y))</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">​</span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>))  <span class="comment"># 直接返回缓存信息</span></span><br><span class="line">print(add(<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">calculating: <span class="number">1</span> + <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">calculating: <span class="number">2</span> + <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/08/Python语法/函数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/Python语法/函数/" itemprop="url">函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T21:02:34+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyFirstFunction</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"I am here"</span>)</span><br><span class="line">    print(<span class="string">"I love you"</span>)</span><br><span class="line">​</span><br><span class="line">MyFirstFunction()  <span class="comment"># 调用函数</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">I am here</span><br><span class="line">I love you</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MySecondFunction()  <span class="comment"># 未定义函数体，结果为“出错”</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MySecondFunction</span><span class="params">(name)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"I love "</span> + name)</span><br><span class="line">​</span><br><span class="line">MySecondFunction(<span class="string">"xinzi"</span>)  <span class="comment"># 调用函数，结果为“I love xinzi”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add1</span><span class="params">(num1, num2)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    result = num1 + num2</span><br><span class="line">    print(result)</span><br><span class="line">​</span><br><span class="line">add1(<span class="number">1</span>, <span class="number">3</span>)  <span class="comment"># 调用函数，结果为4</span></span><br><span class="line"><span class="comment"># -----------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add2</span><span class="params">(num1, num2)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="keyword">return</span> (num1 + num2)</span><br><span class="line">​</span><br><span class="line">print(add2(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 结果为5</span></span><br></pre></td></tr></table></figure>
<h3 id="函数文档"><a href="#函数文档" class="headerlink" title="函数文档"></a>函数文档</h3><p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyFirstFunction</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="string">"hello, This is my first function"</span></span><br><span class="line">    print(<span class="string">"First Function"</span>)</span><br><span class="line">​</span><br><span class="line">MyFirstFunction()  <span class="comment"># 调用函数，结果为“First Function”</span></span><br><span class="line"><span class="comment"># 输出函数文档，结果为“hello, This is my first function”</span></span><br><span class="line">MyFirstFunction.__doc__</span><br><span class="line">help(MyFirstFunction)  <span class="comment"># 输出MyFirstFunction的函数文档</span></span><br></pre></td></tr></table></figure>
<p>最后一行的输出结果为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Help on function MyFirstFunction <span class="keyword">in</span> module __main__:</span><br><span class="line">​</span><br><span class="line">MyFirstFunction()</span><br><span class="line">    hello, This <span class="keyword">is</span> my first function</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>print</code>函数文档为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span>.__doc__  <span class="comment"># 输出print的函数文档</span></span><br><span class="line">help(<span class="keyword">print</span>)  <span class="comment"># 输出print的函数文档</span></span><br></pre></td></tr></table></figure>
<h3 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h3><p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyLove</span><span class="params">(me, you)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(me + <span class="string">' love '</span> + you)</span><br><span class="line">​</span><br><span class="line">MyLove(<span class="string">"I"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 调用函数，结果为“I love xinzi”</span></span><br><span class="line">MyLove(<span class="string">"xinzi"</span>, <span class="string">"I"</span>)  <span class="comment"># 调用函数，结果为“xinzi love”</span></span><br><span class="line"><span class="comment"># 调用函数，结果为“I love xinzi”，使用关键字参数可以防止参数顺序的颠倒 I</span></span><br><span class="line">MyLove(you=<span class="string">"xinzi"</span>, me=<span class="string">"I"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyLove</span><span class="params">(me=<span class="string">"I"</span>, you=<span class="string">"XinZi"</span>)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(me + <span class="string">' love '</span> + you)</span><br><span class="line">​</span><br><span class="line">MyLove()  <span class="comment"># 调用函数，结果为“I love XinZi”</span></span><br><span class="line">MyLove(<span class="string">"you"</span>)  <span class="comment"># 调用函数，结果为“you love XinZi”</span></span><br><span class="line">MyLove(<span class="string">"We"</span>, <span class="string">"You"</span>)  <span class="comment"># 调用函数，结果为“We love You”</span></span><br></pre></td></tr></table></figure>
<p>默认参数必须放在最后面，否则会报出如下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SyntaxError: non-default argument follows default argument</span><br></pre></td></tr></table></figure>
<h3 id="收集参数"><a href="#收集参数" class="headerlink" title="收集参数"></a>收集参数</h3><p>&emsp;&emsp;收集参数类似于<code>C</code>语言的不定参数函数。基本语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">([formal_args, ] * var_args_tuple)</span>:</span></span><br><span class="line">    <span class="string">"函数_文档字符串"</span></span><br><span class="line">    function_suite</span><br><span class="line">    <span class="keyword">return</span> [expression]</span><br></pre></td></tr></table></figure>
<p>加了星号<code>*</code>的变量名会存放所有未命名的变量参数。如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(arg1, *vartuple)</span>:</span></span><br><span class="line">    <span class="string">"打印任何传入的参数"</span></span><br><span class="line">    print(<span class="string">"输出: "</span>)</span><br><span class="line">    print(arg1)</span><br><span class="line">    print(<span class="string">"--------"</span>)</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</span><br><span class="line">        print(var)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">​</span><br><span class="line">printinfo(<span class="number">10</span>)</span><br><span class="line">printinfo(<span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">输出:</span><br><span class="line"><span class="number">10</span></span><br><span class="line">--------</span><br><span class="line">输出:</span><br><span class="line"><span class="number">70</span></span><br><span class="line">--------</span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="number">50</span></span><br></pre></td></tr></table></figure>
<p>在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyLove</span><span class="params">(*params)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"参数的长度是："</span>, len(params))</span><br><span class="line">    print(<span class="string">"第二个参数是："</span>, params[<span class="number">1</span>])</span><br><span class="line">​</span><br><span class="line">MyLove(<span class="number">1</span>, <span class="string">"hello"</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)  <span class="comment"># 调用函数</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参数的长度是：<span class="number">7</span></span><br><span class="line">第二个参数是：hello</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyLove</span><span class="params">(*params, exp)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"参数的长度是："</span>, len(params), exp)</span><br><span class="line">    print(<span class="string">"第二个参数是："</span>, params[<span class="number">1</span>])</span><br><span class="line">​</span><br><span class="line">MyLove(<span class="number">1</span>, <span class="string">"hello"</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, exp=<span class="number">8</span>)  <span class="comment"># 调用函数</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参数的长度是：<span class="number">7</span> <span class="number">8</span></span><br><span class="line">第二个参数是：hello</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>Python</code>还提供另一种标识符<code>**</code>，在形式参数前添加参数<code>1</code>、<code>2</code>、<code>3</code>成为<code>args</code>元祖的元素。实际参数的赋值表达式生成字典。例如，下面的这段代码实现了在一个字典中匹配元祖的元素。定义函数时，设计两个参数：一个是待匹配的元祖，表示为<code>*t</code>；另一个是字典，表示为<code>**d</code>。函数调用时，实际参数分成两个部分：一部分参数是若干个数字或字符串，另一部分参数是赋值表达式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(*t, **d)</span>:</span></span><br><span class="line">    keys = d.keys()</span><br><span class="line">    values = d.values()</span><br><span class="line">    print(keys)</span><br><span class="line">    print(values)</span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> t:</span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> keys:</span><br><span class="line">            <span class="keyword">if</span> arg == key:</span><br><span class="line">                print(<span class="string">"find:"</span>, d[key])</span><br><span class="line">​</span><br><span class="line">search(<span class="string">"one"</span>, <span class="string">"three"</span>, one=<span class="string">"1"</span>, two=<span class="string">"2"</span>, three=<span class="string">"3"</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict_keys([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>])</span><br><span class="line">dict_values([<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>])</span><br><span class="line">find: <span class="number">1</span></span><br><span class="line">find: <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><code>search</code>参数<code>&quot;one&quot;,&quot;three&quot;</code>对应于<code>*t</code>，参数<code>one=&quot;1&quot;, two=&quot;2&quot;, three=&quot;3&quot;</code>对应于<code>**d</code>。更简单的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(country, province, **kwargs)</span>:</span></span><br><span class="line">    print(country, province, kwargs)</span><br><span class="line">​</span><br><span class="line"><span class="comment"># 输出“China Sichuan &#123;'city': 'Chengdu', 'section': 'JingJiang'&#125;”</span></span><br><span class="line">func(<span class="string">"China"</span>, <span class="string">"Sichuan"</span>, city=<span class="string">"Chengdu"</span>, section=<span class="string">"JingJiang"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><p>&emsp;&emsp;过程是简单的、特殊的并且没有返回值的函数。在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"hello"</span>)</span><br><span class="line">​</span><br><span class="line">temp = hello()  <span class="comment"># 结果为hello</span></span><br><span class="line">temp  <span class="comment"># 没有任何结果</span></span><br><span class="line">print(temp)  <span class="comment"># 结果为None</span></span><br><span class="line">type(temp)  <span class="comment"># 结果为&lt;class 'NoneType'&gt;</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>, <span class="string">"hello"</span>, <span class="number">2</span>]</span><br><span class="line">​</span><br><span class="line">hello()  <span class="comment"># 结果为[1, 'hello', 2]</span></span><br></pre></td></tr></table></figure>
<h3 id="局部变量和全局变量"><a href="#局部变量和全局变量" class="headerlink" title="局部变量和全局变量"></a>局部变量和全局变量</h3><p>&emsp;&emsp;下面是计算打折物品价格的程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price, rate)</span>:</span></span><br><span class="line">    final_price = price * rate</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line">​</span><br><span class="line">old_price = float(input(<span class="string">"请输入原价："</span>))</span><br><span class="line">rate = float(input(<span class="string">"请输入折扣率："</span>))</span><br><span class="line">new_price = discounts(old_price, rate)</span><br><span class="line">print(<span class="string">"打折后的价格是："</span>, new_price)</span><br></pre></td></tr></table></figure>
<p>如下程序运用局部变量出现错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price, rate)</span>:</span></span><br><span class="line">    final_price = price * rate</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line">​</span><br><span class="line">old_price = float(input(<span class="string">"请输入原价："</span>))</span><br><span class="line">rate = float(input(<span class="string">"请输入折扣率："</span>))</span><br><span class="line">new_price = discounts(old_price, rate)</span><br><span class="line">print(<span class="string">"打折后的价格是："</span>, new_price)</span><br><span class="line">print(<span class="string">"final_price is:"</span>, final_price)  <span class="comment"># 注意，final_price是局部变量！</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;全局变量的范围很广，函数会访问全局变量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price, rate)</span>:</span></span><br><span class="line">    final_price = price * rate</span><br><span class="line">    print(<span class="string">"这里试图打印全局变量old_price的值："</span>, old_price)</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line">​</span><br><span class="line">old_price = float(input(<span class="string">"请输入原价："</span>))</span><br><span class="line">rate = float(input(<span class="string">"请输入折扣率："</span>))</span><br><span class="line">new_price = discounts(old_price, rate)</span><br><span class="line">print(<span class="string">"打折后的价格是："</span>, new_price)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请输入原价：<span class="number">100</span></span><br><span class="line">请输入折扣率：<span class="number">0.5</span></span><br><span class="line">这里试图打印全局变量old_price的值：<span class="number">100.0</span></span><br><span class="line">打折后的价格是：<span class="number">50.0</span></span><br></pre></td></tr></table></figure>
<p>但是函数不能轻易地修改全局变量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price, rate)</span>:</span></span><br><span class="line">    final_price = price * rate</span><br><span class="line">    old_price = <span class="number">50</span></span><br><span class="line">    print(<span class="string">"修改后的old_price值1："</span>, old_price)</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line">​</span><br><span class="line">old_price = float(input(<span class="string">"请输入原价："</span>))</span><br><span class="line">rate = float(input(<span class="string">"请输入折扣率："</span>))</span><br><span class="line">new_price = discounts(old_price, rate)</span><br><span class="line">print(<span class="string">"修改后的old_price值2："</span>, old_price)</span><br><span class="line">print(<span class="string">"打折后的价格是："</span>, new_price)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">请输入原价：<span class="number">100</span></span><br><span class="line">请输入折扣率：<span class="number">0.8</span></span><br><span class="line">修改后的old_price值<span class="number">1</span>：<span class="number">50</span></span><br><span class="line">修改后的old_price值<span class="number">2</span>：<span class="number">100.0</span></span><br><span class="line">打折后的价格是：<span class="number">80.0</span></span><br></pre></td></tr></table></figure>
<p>如果函数试图修改全局变量，则<code>Python</code>会在函数内产生一个与全局变量同名的局部变量，两者互不影响。另外有一种特殊情况，假设下面这段代码被运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    a = a + <span class="number">1</span></span><br><span class="line">    print(a)</span><br><span class="line">​</span><br><span class="line">test()</span><br></pre></td></tr></table></figure>
<p>以上程序将会报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"test.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    test()</span><br><span class="line">  File <span class="string">"test.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> test</span><br><span class="line">    a = a + <span class="number">1</span></span><br><span class="line">UnboundLocalError: local variable <span class="string">'a'</span> referenced before assignment</span><br></pre></td></tr></table></figure>
<p>错误信息为局部作用域引用错误，因为<code>test</code>函数中的<code>a</code>是局部变量，并且是未定义的。<br>&emsp;&emsp;如果想修改全局变量，则需要<code>global</code>关键字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">5</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyFun</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    count = <span class="number">10</span></span><br><span class="line">    print(count)</span><br><span class="line">​</span><br><span class="line">MyFun()  <span class="comment"># 结果为10</span></span><br><span class="line">count  <span class="comment"># 结果为5，全局变量并未改变</span></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyFun</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="keyword">global</span> count</span><br><span class="line">    count = <span class="number">10</span></span><br><span class="line">    print(count)</span><br><span class="line">​</span><br><span class="line">MyFun()  <span class="comment"># 结果为10</span></span><br><span class="line">print(count)  <span class="comment"># 结果为10，全局变量被改变</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果要修改嵌套作用域(外层非全局作用域，参考内嵌函数)中的变量，则需要<code>nonlocal</code>关键字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    num = <span class="number">10</span></span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> num  <span class="comment"># nonlocal关键字声明</span></span><br><span class="line">        num = <span class="number">100</span></span><br><span class="line">        print(num)  <span class="comment"># 结果为100</span></span><br><span class="line">​</span><br><span class="line">    inner()</span><br><span class="line">    print(num)  <span class="comment"># 结果为100</span></span><br><span class="line">​</span><br><span class="line">outer()</span><br></pre></td></tr></table></figure>
<h3 id="内嵌函数"><a href="#内嵌函数" class="headerlink" title="内嵌函数"></a>内嵌函数</h3><p>&emsp;&emsp;<code>Python</code>可以在函数内部产生函数，即内嵌函数。内嵌函数的作用域仅限它的父函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"func1正在被调用"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"func2正在被调用"</span>)</span><br><span class="line">​</span><br><span class="line">fun1()  <span class="comment"># 结果为“func1正在被调用”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    print(<span class="string">"func1正在被调用"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"func2正在被调用"</span>)</span><br><span class="line">    fun2()</span><br><span class="line">​</span><br><span class="line">fun1()  <span class="comment"># 调用函数</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func1正在被调用</span><br><span class="line">func2正在被调用</span><br></pre></td></tr></table></figure>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>&emsp;&emsp;<code>Python</code>的闭包机制：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">FunX</span><span class="params">(x)</span>:</span>  <span class="comment"># 定义函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FunY</span><span class="params">(y)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x * y</span><br><span class="line">    <span class="keyword">return</span> FunY</span><br><span class="line">​</span><br><span class="line">i = FunX(<span class="number">8</span>)</span><br><span class="line">i  <span class="comment"># 结果为&lt;function FunX.&lt;locals&gt;.FunY at 0x024AB198&gt;</span></span><br><span class="line">type(i)  <span class="comment"># 结果为&lt;class 'function'&gt;</span></span><br><span class="line">i(<span class="number">5</span>)  <span class="comment"># 结果为40</span></span><br><span class="line">FunX(<span class="number">8</span>)(<span class="number">5</span>)  <span class="comment"># 结果为40</span></span><br></pre></td></tr></table></figure>
<p>注意闭包机制的合理运用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></span><br><span class="line">    x = <span class="number">5</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">        x *= x</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> fun2()</span><br><span class="line"></span><br><span class="line">fun1()  <span class="comment"># 结果为“出错”，fun1中的x类似于全局变量，Python对它有屏蔽机制</span></span><br><span class="line"><span class="comment">#-------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></span><br><span class="line">    x = [<span class="number">5</span>]</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">        x[<span class="number">0</span>] *= x[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> x[<span class="number">0</span>]</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> fun2()</span><br><span class="line">​</span><br><span class="line">fun1()  <span class="comment"># 结果为25</span></span><br><span class="line"><span class="comment">#-------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></span><br><span class="line">    x = <span class="number">5</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> x  <span class="comment"># nonlocal关键字解除Python对x的屏蔽机制</span></span><br><span class="line">        x *= x</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> fun2()</span><br><span class="line">​</span><br><span class="line">fun1()  <span class="comment"># 结果为25</span></span><br></pre></td></tr></table></figure>
<h3 id="可更改-mutable-与不可更改-immutable-对象"><a href="#可更改-mutable-与不可更改-immutable-对象" class="headerlink" title="可更改(mutable)与不可更改(immutable)对象"></a>可更改(mutable)与不可更改(immutable)对象</h3><p>&emsp;&emsp;在<code>python</code>中，<code>strings</code>、<code>tuples</code>和<code>numbers</code>是不可更改的对象，而<code>list</code>、<code>dict</code>等则是可以修改的对象。</p>
<ul>
<li><code>不可变类型</code>：变量赋值<code>a = 5</code>后再赋值<code>a = 10</code>，这里实际是新生成一个<code>int</code>值对象<code>10</code>，再让<code>a</code>指向它，而<code>5</code>被丢弃，不是改变<code>a</code>的值，相当于新生成了<code>a</code>。</li>
<li><code>可变类型</code>：变量赋值<code>la = [1, 2, 3, 4]</code>后再赋值<code>la[2] = 5</code>，则是将<code>list la</code>的第<code>3</code>个元素值进行更改，<code>la</code>本身没有动，只是其内部的一部分值被修改了。</li>
</ul>
<p>&emsp;&emsp;<code>python</code>函数的参数传递：</p>
<ul>
<li><code>不可变类型</code>：类似<code>C++</code>的值传递，适用于<code>整数</code>、<code>字符串</code>、<code>元组</code>。例如<code>fun(a)</code>，传递的只是<code>a</code>的值，没有影响<code>a</code>对象本身。在<code>fun(a)</code>内部修改<code>a</code>的值，只是修改另一个复制的对象，不会影响<code>a</code>本身。</li>
<li><code>可变类型</code>：类似<code>C++</code>的引用传递，适用于<code>列表</code>、<code>字典</code>。例如<code>fun(la)</code>将<code>la</code>真正地传过去，对其修改后，<code>fun</code>外部的<code>la</code>也会受影响。</li>
</ul>
<p>&emsp;&emsp;<code>python</code>中的一切都是对象，严格意义我们不能说值传递还是引用传递，应该说传不可变对象和传可变对象。<br>&emsp;&emsp;<code>python</code>传不可变对象实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChangeInt</span><span class="params">(a)</span>:</span></span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line">​</span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">ChangeInt(b)</span><br><span class="line">print(b)  <span class="comment"># 结果是“2”</span></span><br></pre></td></tr></table></figure>
<p>实例中有<code>int</code>对象<code>2</code>，指向它的变量是<code>b</code>，在传递给<code>ChangeInt</code>函数时，按传值的方式复制了变量<code>b</code>，<code>a</code>和<code>b</code>都指向了同一个<code>int</code>对象。在<code>a = 10</code>时，新生成一个<code>int</code>值对象<code>10</code>，并让<code>a</code>指向它。<br>&emsp;&emsp;传可变对象实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span><span class="params">(mylist)</span>:</span></span><br><span class="line">    <span class="string">"修改传入的列表"</span></span><br><span class="line">    mylist.append([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">    print(<span class="string">"函数内取值:"</span>, mylist)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">​</span><br><span class="line">mylist = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line">changeme(mylist)</span><br><span class="line">print(<span class="string">"函数外取值:"</span>, mylist)</span><br></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用，因此执行结果为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">函数内取值: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">函数外取值: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Python函数返回不定数量的值"><a href="#Python函数返回不定数量的值" class="headerlink" title="Python函数返回不定数量的值"></a>Python函数返回不定数量的值</h3><p>&emsp;&emsp;<code>Python</code>的函数可以<code>return</code>多个值，但其本质上还是返回单个值，只是利用了<code>tuple</code>的自动打包，将多个值打包成单个<code>tuple</code>返回：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    temp = func_a()</span><br><span class="line">    print(type(temp))  <span class="comment"># 输出“&lt;class 'tuple'&gt;”</span></span><br></pre></td></tr></table></figure>
<p>稍微修改代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a, b, c, d = func_a()</span><br><span class="line">    print(a, b, c, d)  <span class="comment"># 输出“1 2 3 4”</span></span><br></pre></td></tr></table></figure>
<p>代码利用了<code>tuple</code>的自动解包，将<code>tuple</code>的值分别赋值给了<code>a</code>、<code>b</code>、<code>c</code>和<code>d</code>四个变量，实现返回多个值。<br>&emsp;&emsp;既然知道<code>Python</code>返回多个值的本质是返回<code>tuple</code>，再自动解包赋值给<code>N</code>个变量，那么要实现返回任意多个值，只要手动返回一个<code>tuple</code>就可以了，<code>tuple</code>内元素的数量可以自定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tuple(arg * <span class="number">2</span> <span class="keyword">for</span> arg <span class="keyword">in</span> args)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a, b, c, d = func_a(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    print(a, b, c, d)  <span class="comment"># 输出“2 4 6 8”</span></span><br></pre></td></tr></table></figure>
<p>上述代码中，将传入的参数值乘以<code>2</code>后，转换成<code>tuple</code>返回，再利用<code>tuple</code>的自动解包赋值给多个变量，从而实现函数返回不定数量的值。</p>
<hr>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>&emsp;&emsp;要合理地运用递归，否则有许多副作用！如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> hello()</span><br></pre></td></tr></table></figure>
<p>这个递归会产生一个死循环。<br>&emsp;&emsp;设置递归的层数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.setrecursionlimit(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;非递归求阶乘：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">    result = n</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">        result *= i</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">​</span><br><span class="line">number = int(input(<span class="string">"please input a number: "</span>))</span><br><span class="line">result = factorial(number)</span><br><span class="line">print(<span class="string">"%d 的阶乘是 %d"</span> % (number, result))</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;递归求阶乘：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>)</span><br><span class="line">​</span><br><span class="line">number = int(input(<span class="string">"please input a number: "</span>))</span><br><span class="line">result = factorial(number)</span><br><span class="line">print(<span class="string">"%d 的阶乘是 %d"</span> % (number, result))</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;斐波那契数的非递归实现(效率高)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(n)</span>:</span></span><br><span class="line">    n1 = <span class="number">1</span></span><br><span class="line">    n2 = <span class="number">1</span></span><br><span class="line">    n3 = <span class="number">1</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">"输入出错！"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> (n - <span class="number">2</span>) &gt; <span class="number">0</span>:</span><br><span class="line">        n3 = n2 + n1</span><br><span class="line">        n1 = n2</span><br><span class="line">        n2 = n3</span><br><span class="line">        n -= <span class="number">1</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> n3</span><br><span class="line">​</span><br><span class="line">result = fab(<span class="number">20</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">    print(<span class="string">"总共有%d小兔崽子诞生"</span> % result)</span><br></pre></td></tr></table></figure>
<p>斐波那契数的递归实现(效率低)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">"输入有误"</span>)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">or</span> (n == <span class="number">2</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fab(n - <span class="number">1</span>) + fab(n - <span class="number">2</span>)</span><br><span class="line">​</span><br><span class="line">result = fab(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">    print(<span class="string">"总共有%d小兔崽子诞生"</span> % result)</span><br></pre></td></tr></table></figure>
<p>递归运用的是分治思想！但是递归的效率很低，要注意！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/58/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/58/">58</a><span class="page-number current">59</span><a class="page-number" href="/page/60/">60</a><span class="space">&hellip;</span><a class="page-number" href="/page/94/">94</a><a class="extend next" rel="next" href="/page/60/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">939</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
