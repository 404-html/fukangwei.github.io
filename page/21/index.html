<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="泥腿子出身">
<meta property="og:url" content="http://fukangwei.gitee.io/page/21/index.html">
<meta property="og:site_name" content="泥腿子出身">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="泥腿子出身">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/21/">





  <title>泥腿子出身</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">泥腿子出身</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QToolButton/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QToolButton/" itemprop="url">Qt之QToolButton</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T19:29:18+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QToolButton</code>类提供了用于命令或选项可以快速访问的按钮，通常可以用在<code>QToolBar</code>里面。工具按钮和普通的命令按钮不同，通常不显示文本，而显示图标。</p>
<h3 id="详细描述"><a href="#详细描述" class="headerlink" title="详细描述"></a>详细描述</h3><p>&emsp;&emsp;当使用<code>QToolBar::addAction</code>添加一个新的(或已存在的)<code>QAction</code>至工具栏时，工具按钮通常被创建。也可以用同样的方式构建工具按钮和其它部件，并设置它们的布局。<br>&emsp;&emsp;<code>QToolButton</code>支持自动浮起，在自动浮起模式中，只有在鼠标指向它的时候才绘制三维框架。当按钮被用在<code>QToolBar</code>里时，这个特征会被自动启用，可以使用<code>setAutoRaise</code>来改变。<br>&emsp;&emsp;按钮的外观和尺寸可通过<code>setToolButtonStyle</code>和<code>setIconSize</code>来调节。当在<code>QMainWindow</code>的<code>QToolBar</code>里使用时，按钮会自动地调节来适合<code>QMainWindow</code>的设置(参考<code>QMainWindow::setToolButtonStyle</code>和<code>QMainWindow::setIconSize</code>)。<br>&emsp;&emsp;工具按钮可以提供一个弹出菜单，使用<code>setMenu</code>来进行设置。通过<code>setPopupMode</code>来设置菜单的弹出模式，缺省模式是<code>DelayedPopupMode</code>，这个特征有时对于网页浏览器中的<code>后退</code>按钮有用，在按下按钮一段时间后，会弹出一个显示所有可以后退浏览的可能页面的菜单列表，默认延迟<code>600</code>毫秒，可以用<code>setPopupDelay</code>进行调整。</p>
<h3 id="常用接口"><a href="#常用接口" class="headerlink" title="常用接口"></a>常用接口</h3><ul>
<li><code>void setMenu(QMenu * menu)</code>：设置按钮的弹出菜单，和<code>QPushButton</code>用法类似。</li>
<li><code>void setPopupMode(ToolButtonPopupMode mode)</code>：设置弹出菜单的方式，默认情况下，设置为<code>DelayedPopup</code>(延迟弹出)。枚举<code>QToolButton::ToolButtonPopupMode</code>如下：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>常量</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QToolButton::DelayedPopup</code></td>
<td><code>0</code></td>
<td>按下按钮一定时间后(超时风格依赖，参考<code>QStyle::SH_ToolButton_PopupDelay</code>)，显示菜单</td>
</tr>
<tr>
<td><code>QToolButton::MenuButtonPopup</code></td>
<td><code>1</code></td>
<td>这种模式下，工具按钮显示一个特殊的箭头以指示菜单是否存在，按下按钮的箭头部分时显示菜单</td>
</tr>
<tr>
<td><code>QToolButton::InstantPopup</code></td>
<td><code>2</code></td>
<td>按下工具按钮时菜单显示，无延迟。这种模式下，按钮自身的动作不触发</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>void setToolButtonStyle(Qt::ToolButtonStyle style)</code>：设置按钮风格，只显示一个图标，文本或文本位于图标旁边、下方。默认值是<code>Qt::ToolButtonIconOnly</code>。枚举<code>Qt::ToolButtonStyle</code>如下：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>常量</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Qt::ToolButtonIconOnly</code></td>
<td><code>0</code></td>
<td>只显示图标</td>
</tr>
<tr>
<td><code>Qt::ToolButtonTextOnly</code></td>
<td><code>1</code></td>
<td>只显示文本</td>
</tr>
<tr>
<td><code>Qt::ToolButtonTextBesideIcon</code></td>
<td><code>2</code></td>
<td>文本显示在图标旁边</td>
</tr>
<tr>
<td><code>Qt::ToolButtonTextUnderIcon</code></td>
<td><code>3</code></td>
<td>文本显示在图标下边</td>
</tr>
<tr>
<td><code>Qt::ToolButtonFollowStyle</code></td>
<td><code>4</code></td>
<td>遵循<code>QStyle::StyleHint</code></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>void setArrowType(Qt::ArrowType type)</code>：设置按钮是否显示一个箭头，而不是一个正常的图标。这将显示一个箭头作为<code>QToolButton</code>的图标。默认情况下，这个属性被设置为<code>Qt::NoArrow</code>。枚举<code>Qt::ArrowType</code>如下：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>常量</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Qt::NoArrow</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>Qt::UpArrow</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>Qt::DownArrow</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>Qt::LeftArrow</code></td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>Qt::RightArrow</code></td>
<td><code>4</code></td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;效果如下：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QToolButton/1.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QToolButton *pButton = <span class="keyword">new</span> QToolButton ( <span class="keyword">this</span> );</span><br><span class="line">pButton-&gt;setArrowType ( Qt::LeftArrow );</span><br><span class="line">pButton-&gt;setText ( <span class="string">"Left Arrow"</span> );</span><br><span class="line"><span class="comment">/* 文本位于图标之下 */</span></span><br><span class="line">pButton-&gt;setToolButtonStyle ( Qt::ToolButtonTextUnderIcon );</span><br><span class="line">pButton-&gt;setStyleSheet ( <span class="string">"QToolButton&#123;border: none; background: rgb(68, 69, 73); color: rgb(0, 160, 230);&#125;"</span> );</span><br></pre></td></tr></table></figure>
<p>这里可以通过样式表<code>color</code>来设置图标的颜色及文本色。</p>
<ul>
<li><code>void setDefaultAction(QAction * action)</code>：设置<code>QAction</code>，该<code>action</code>则会定义<code>QToolButton</code>的文本、图标、<code>TooTip</code>等按钮的属性。</li>
</ul>
<p>&emsp;&emsp;效果如下：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QToolButton/2.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QAction *pAction = <span class="keyword">new</span> QAction ( <span class="keyword">this</span> );</span><br><span class="line">pAction-&gt;setText ( QString::fromLocal8Bit ( <span class="string">"一去丶二三里"</span> ) );</span><br><span class="line">pAction-&gt;setIcon ( QIcon ( <span class="string">":/Images/logo"</span> ) );</span><br><span class="line">pButton-&gt;setIconSize ( QSize ( <span class="number">48</span>, <span class="number">48</span> ) );</span><br><span class="line">pAction-&gt;setToolTip ( QString::fromLocal8Bit ( <span class="string">"青春不老，奋斗不止！"</span> ) );</span><br><span class="line">pButton-&gt;setDefaultAction ( pAction );</span><br><span class="line">pButton-&gt;setToolButtonStyle ( Qt::ToolButtonTextUnderIcon );</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之pushButton/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之pushButton/" itemprop="url">Qt之pushButton</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T19:16:34+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><code>setEnabled(true/false)</code>：设置按键使能与否的函数(即可不可以被按下)。</li>
<li><code>boolisEnabled() const</code>：判断按键是否使能，使能返回<code>true</code>，否则为<code>false</code>。</li>
<li><code>setText(string)</code>：设置按钮显示的内容。</li>
<li><code>setIcon(QIcon(图片路径))</code>：使按钮显示为一个图片。</li>
<li><code>setFont(font)</code>：设置按钮上的字体。</li>
</ul>
<hr>
<h3 id="单击导致信号与槽连接"><a href="#单击导致信号与槽连接" class="headerlink" title="单击导致信号与槽连接"></a>单击导致信号与槽连接</h3><p>&emsp;&emsp;代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    QPushButton *button = <span class="keyword">new</span> QPushButton ( <span class="string">"Quit"</span> );</span><br><span class="line">    QObject::connect ( button, SIGNAL ( clicked() ), &amp;app, SLOT ( quit() ) );</span><br><span class="line">    button-&gt;show();</span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/18/Qt语法详解/Qt之pushButton/1.png"></p>
<hr>
<h3 id="QPushButton设置响应按钮为回车键"><a href="#QPushButton设置响应按钮为回车键" class="headerlink" title="QPushButton设置响应按钮为回车键"></a>QPushButton设置响应按钮为回车键</h3><p>&emsp;&emsp;代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;pushButton-&gt;setFocus(); <span class="comment">/* 设置默认焦点 */</span></span><br><span class="line">ui-&gt;pushButton-&gt;setShortcut ( QKeySequence::InsertParagraphSeparator ); <span class="comment">/* 设置快捷键为键盘的“回车”键 */</span></span><br><span class="line">ui-&gt;pushButton-&gt;setShortcut ( Qt::Key_Enter ); <span class="comment">/* 设置快捷键为enter键 */</span></span><br><span class="line">ui-&gt;pushButton-&gt;setShortcut ( Qt::Key_Return ); <span class="comment">/* 设置快捷键为小键盘上的enter键 */</span></span><br></pre></td></tr></table></figure>
<p>或者如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;pushButton-&gt;setFocus(); <span class="comment">/* 设置默认焦点 */</span></span><br><span class="line">ui-&gt;pushButton-&gt;setDefault ( <span class="literal">true</span> ); <span class="comment">/* 设置默认按钮，设置了这个属性，当用户按下回车的时候，就会按下该按钮 */</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="QPushbutton用于发送toggled-bool-的checkable属性"><a href="#QPushbutton用于发送toggled-bool-的checkable属性" class="headerlink" title="QPushbutton用于发送toggled(bool)的checkable属性"></a>QPushbutton用于发送toggled(bool)的checkable属性</h3><p>&emsp;&emsp;默认情况下<code>checkable</code>是不选中的，<code>Button</code>默认为触发按钮(<code>trigger button</code>)，按下去马上弹起来。选中<code>checkable</code>后，<code>Button</code>变成切换按钮(<code>toggle button</code>)，可以有两种状态，即按下和弹起。此时该按钮可以发射<code>toggled(bool)</code>信号，与槽函数<code>setVisible(bool)</code>结合，即可用于控件交替显示。<br>&emsp;&emsp;下图中两个<code>more</code>按钮，上边是弹起状态，下边是按下状态：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之pushButton/2.png"></p>
<p>&emsp;&emsp;问题：I have the follwing code where moreButton is a <code>QPushButton</code>. When I toggle the button, nothing happens. Shouldn’t it show or hide <code>secondaryGroupBox</code> and <code>tertiaryGroupBox</code>?</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QObject::connect ( moreButton, SIGNAL ( toggled ( <span class="keyword">bool</span> ) ), secondaryGroupBox, SLOT ( setVisible ( <span class="keyword">bool</span> ) ) );</span><br><span class="line">QObject::connect ( moreButton, SIGNAL ( toggled ( <span class="keyword">bool</span> ) ), tertiaryGroupBox, SLOT ( setVisible ( <span class="keyword">bool</span> ) ) );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;回答：Most likely, your pushbutton is not checkable. Try <code>moreButton-&gt;setCheckable(true)</code>, a <code>non-checkable</code> button never emits the <code>toggled(bool)</code> signal.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QSlider/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QSlider/" itemprop="url">Qt之QSlider</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T19:01:21+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QSlider</code>部件提供了一个垂直或水平滑动条。它允许用户沿水平或垂直方向移动滑块，并将滑块所在的位置转换成一个合法范围内的值。</p>
<h3 id="详细描述"><a href="#详细描述" class="headerlink" title="详细描述"></a>详细描述</h3><p>&emsp;&emsp;<code>QSlider</code>很少有自己的函数，大部分功能在<code>QAbstractSlider</code>中。最有用的函数是<code>setValue</code>，用来设置滑块的当前值；<code>triggerAction</code>来模拟点击的效果(对快捷键有用)，<code>setSingleStep</code>和<code>setPageStep</code>用来设置步长，<code>setMinimum</code>和<code>setMaximum</code>用于定义滚动条的范围。<br>&emsp;&emsp;<code>QSlider</code>提供了一些方法来控制刻度标记，可以使用<code>setTickPosition</code>来表示刻度标记的位置，使用<code>setTickInterval</code>来指定刻度的间隔；当前设置的刻度位置和间隔可以分别使用<code>tickPosition</code>和<code>tickInterval</code>函数来查询。<br>&emsp;&emsp;<code>QSlider</code>继承了一组全面的信号：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>信号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>valueChanged</code></td>
<td>当滑块的值发生了改变，发射此信号。<code>tracking</code>确定在用户交互时，是否发出此信号</td>
</tr>
<tr>
<td><code>sliderPressed</code></td>
<td>当用户按下滑块，发射此信号</td>
</tr>
<tr>
<td><code>sliderMoved</code></td>
<td>当用户拖动滑块，发射此信号</td>
</tr>
<tr>
<td><code>sliderReleased</code></td>
<td>当用户释放滑块，发射此信号</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;<code>QSlider</code>只提供整数范围。滑块接受<code>Tab</code>键的焦点，并同时提供了一个鼠标滚轮和键盘接口。键盘接口如下：</p>
<ul>
<li><code>Left/Right</code>：移动水平滑块一个步长。</li>
<li><code>Up/Down</code>：移动垂直滑块一个步长。</li>
<li><code>PageUp</code>：上移一页。</li>
<li><code>PageDown</code>：下移一页。</li>
<li><code>Home</code>：移动至起始位置(最小值)。</li>
<li><code>End</code>：移动至结束位置(最大值)。</li>
</ul>
<h3 id="刻度位置"><a href="#刻度位置" class="headerlink" title="刻度位置"></a>刻度位置</h3><p>&emsp;&emsp;枚举量为<code>QSlider::TickPosition</code>，这个枚举指定刻度线相对于滑块和用户操作的位置。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>常量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QSlider::NoTicks</code></td>
<td>不绘制任何刻度线</td>
</tr>
<tr>
<td><code>QSlider::TicksBothSides</code></td>
<td>在滑块的两侧绘制刻度线</td>
</tr>
<tr>
<td><code>QSlider::TicksAbove</code></td>
<td>在(水平)滑块上方绘制刻度线</td>
</tr>
<tr>
<td><code>QSlider::TicksBelow</code></td>
<td>在(水平)滑块下方绘制刻度线</td>
</tr>
<tr>
<td><code>QSlider::TicksLeft</code></td>
<td>在(垂直)滑块左侧绘制刻度线</td>
</tr>
<tr>
<td><code>QSlider::TicksRight</code></td>
<td>在(垂直)滑块右侧绘制刻度线</td>
</tr>
</tbody>
</table>
</div>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>&emsp;&emsp;下面来看一个示例，结合<code>QSlider</code>与<code>QSpinBox</code>，让它们彼此之间相互更新：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QSlider/1.png" height="130" width="196"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> nMin = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> nMax = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> nSingleStep = <span class="number">10</span>;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 微调框 */</span></span><br><span class="line">QSpinBox *pSpinBox = <span class="keyword">new</span> QSpinBox ( <span class="keyword">this</span> );</span><br><span class="line">pSpinBox-&gt;setMinimum ( nMin ); <span class="comment">/* 最小值 */</span></span><br><span class="line">pSpinBox-&gt;setMaximum ( nMax ); <span class="comment">/* 最大值 */</span></span><br><span class="line">pSpinBox-&gt;setSingleStep ( nSingleStep ); <span class="comment">/* 步长 */</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 滑动条 */</span></span><br><span class="line">QSlider *pSlider = <span class="keyword">new</span> QSlider ( <span class="keyword">this</span> );</span><br><span class="line">pSlider-&gt;setOrientation ( Qt::Horizontal ); <span class="comment">/* 水平方向 */</span></span><br><span class="line">pSlider-&gt;setMinimum ( nMin ); <span class="comment">/* 最小值 */</span></span><br><span class="line">pSlider-&gt;setMaximum ( nMax ); <span class="comment">/* 最大值 */</span></span><br><span class="line">pSlider-&gt;setSingleStep ( nSingleStep ); <span class="comment">/* 步长 */</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 连接信号槽(相互改变) */</span></span><br><span class="line">connect ( pSpinBox, SIGNAL ( valueChanged ( <span class="keyword">int</span> ) ), pSlider, SLOT ( setValue ( <span class="keyword">int</span> ) ) );</span><br><span class="line">connect ( pSlider, SIGNAL ( valueChanged ( <span class="keyword">int</span> ) ), pSpinBox, SLOT ( setValue ( <span class="keyword">int</span> ) ) );</span><br><span class="line">​</span><br><span class="line">pSpinBox-&gt;setValue ( <span class="number">10</span> );</span><br></pre></td></tr></table></figure>
<p>通过<code>setMinimum</code>与<code>setMaximum</code>函数，将进度条固定到一个合适的范围(<code>0</code>至<code>200</code>)。连接信号槽后，当<code>QSpinBox</code>的值发生改变时，<code>QSlider</code>的值也会发生相应变化；反之亦然。最后使用<code>setValue</code>将<code>QSpinBox</code>的值设置为<code>10</code>，由于信号槽已经连接，所以这时<code>QSlider</code>的值也会发生改变。</p>
<h3 id="刻度位置及间隔"><a href="#刻度位置及间隔" class="headerlink" title="刻度位置及间隔"></a>刻度位置及间隔</h3><p>&emsp;&emsp;源码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QSlider *pSlider = <span class="keyword">new</span> QSlider ( <span class="keyword">this</span> );</span><br><span class="line">pSlider-&gt;setOrientation ( Qt::Horizontal ); <span class="comment">/* 水平方向 */</span></span><br><span class="line">pSlider-&gt;setMinimum ( nMin ); <span class="comment">/* 最小值 */</span></span><br><span class="line">pSlider-&gt;setMaximum ( nMax ); <span class="comment">/* 最大值 */</span></span><br><span class="line">pSlider-&gt;setSingleStep ( nSingleStep ); <span class="comment">/* 步长 */</span></span><br><span class="line"><span class="comment">// pSlider-&gt;setTickInterval(40); /* 设置刻度间隔 */</span></span><br><span class="line">pSlider-&gt;setTickPosition ( QSlider::TicksAbove ); <span class="comment">/* 刻度在上方 */</span></span><br></pre></td></tr></table></figure>
<p>当使用<code>setTickInterval(40)</code>设置刻度间隔后，在绘制刻度时，就会有<code>6</code>个刻度点(从<code>0</code>开始，每隔步长<code>40</code>绘制一个点，到<code>200</code>处结束)。也就是说，刻度点的个数等于<code>最大值 / 刻度间隔 + 1</code>。</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QSlider/2.png" height="130" width="198"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QMapIterator/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QMapIterator/" itemprop="url">Qt之QMapIterator</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T18:27:49+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QMapIterator</code> class provides a <code>Java-style</code> const iterator for <code>QMap</code> and <code>QMultiMap</code>. The header file is <code>QMapIterator</code>.</p>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QMapIterator(const QMap&lt;Key, T&gt; &amp; map)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>findNext(const T &amp; value)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>findPrevious(const T &amp; value)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>hasNext() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>hasPrevious() const</code></td>
</tr>
<tr>
<td><code>const Key &amp;</code></td>
<td><code>key() const</code></td>
</tr>
<tr>
<td><code>Item</code></td>
<td><code>next()</code></td>
</tr>
<tr>
<td><code>Item</code></td>
<td><code>peekNext() const</code></td>
</tr>
<tr>
<td><code>Item</code></td>
<td><code>peekPrevious() const</code></td>
</tr>
<tr>
<td><code>Item</code></td>
<td><code>previous()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>toBack()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>toFront()</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>value() const</code></td>
</tr>
<tr>
<td><code>QMapIterator &amp;</code></td>
<td><code>operator=(const QMap&lt;Key, T&gt; &amp; map)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QMapIterator</code> class provides a <code>Java-style</code> const iterator for <code>QMap</code> and <code>QMultiMap</code>.<br>&emsp;&emsp;<code>QMap</code> has both <code>Java-style</code> iterators and <code>STL-style</code> iterators. The <code>Java-style</code> iterators are more <code>high-level</code> and easier to use than the <code>STL-style</code> iterators; on the other hand, they are slightly less efficient.<br>&emsp;&emsp;<code>QMapIterator&lt;Key, T&gt;</code> allows you to iterate over a <code>QMap</code> (or a <code>QMultiMap</code>). If you want to modify the map as you iterate over it, use <code>QMutableMapIterator</code> instead.<br>&emsp;&emsp;The <code>QMapIterator</code> constructor takes a <code>QMap</code> as argument. After construction, the iterator is located at the very beginning of the map (before the first item). Here’s how to iterate over all the elements sequentially:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">QMap&lt;<span class="keyword">int</span>, QWidget *&gt; <span class="built_in">map</span>;</span><br><span class="line">​</span><br><span class="line">QMapIterator&lt;<span class="keyword">int</span>, QWidget *&gt; i ( <span class="built_in">map</span> );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( i.hasNext() ) &#123;</span><br><span class="line">    i.next();</span><br><span class="line">    qDebug() &lt;&lt; i.key() &lt;&lt; <span class="string">": "</span> &lt;&lt; i.value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;The <code>next()</code> function returns the next item in the map and advances the iterator. The <code>key()</code> and <code>value()</code> functions return the key and value of the last item that was jumped over.<br>&emsp;&emsp;Unlike <code>STL-style</code> iterators, <code>Java-style</code> iterators point between items rather than directly at items. The first call to <code>next()</code> advances the iterator to the position between the first and second item, and returns the first item; the second call to <code>next()</code> advances the iterator to the position between the second and third item; and so on.</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QMapIterator/1.png"></p>
<p>&emsp;&emsp;Here’s how to iterate over the elements in reverse order:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QMapIterator&lt;<span class="keyword">int</span>, QWidget *&gt; i ( <span class="built_in">map</span> );</span><br><span class="line">i.toBack();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( i.hasPrevious() ) &#123;</span><br><span class="line">    i.previous();</span><br><span class="line">    qDebug() &lt;&lt; i.key() &lt;&lt; <span class="string">": "</span> &lt;&lt; i.value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;If you want to find all occurrences of a particular value, use <code>findNext()</code> or <code>findPrevious()</code> in a loop. For example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QMapIterator&lt;<span class="keyword">int</span>, QWidget *&gt; i ( <span class="built_in">map</span> );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( i.findNext ( widget ) ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"Found widget "</span> &lt;&lt; widget &lt;&lt; <span class="string">" under key "</span></span><br><span class="line">             &lt;&lt; i.key();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Multiple iterators can be used on the same map. If the map is modified while a <code>QMapIterator</code> is active, the <code>QMapIterator</code> will continue iterating over the original map, ignoring the modified copy.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QMapIterator::QMapIterator(const QMap&lt;Key, T&gt; &amp; map)</code>：Constructs an iterator for traversing <code>map</code>. The iterator is set to be at the front of the <code>map</code> (before the first item).</li>
<li><code>bool QMapIterator::findNext(const T &amp; value)</code>：Searches for <code>value</code> starting from the current iterator position forward. Returns <code>true</code> if a <code>(key, value)</code> pair with <code>value</code> is found; otherwise returns <code>false</code>. After the call, if <code>value</code> was found, the iterator is positioned just after the matching item; otherwise, the iterator is positioned at the back of the container.</li>
<li><code>bool QMapIterator::findPrevious(const T &amp; value)</code>：Searches for <code>value</code> starting from the current iterator position backward. Returns <code>true</code> if a <code>(key, value)</code> pair with <code>value</code> is found; otherwise returns <code>false</code>. After the call, if <code>value</code> was found, the iterator is positioned just before the matching item; otherwise, the iterator is positioned at the front of the container.</li>
<li><code>bool QMapIterator::hasNext() const</code>：Returns <code>true</code> if there is at least one item ahead of the iterator, i.e. the iterator is not at the back of the container; otherwise returns <code>false</code>.</li>
<li><code>bool QMapIterator::hasPrevious() const</code>：Returns <code>true</code> if there is at least one item behind the iterator, i.e. the iterator is not at the front of the container; otherwise returns <code>false</code>.</li>
<li><code>const Key &amp; QMapIterator::key() const</code>：Returns the key of the last item that was jumped over using one of the traversal functions (<code>next()</code>, <code>previous()</code>, <code>findNext()</code>, <code>findPrevious()</code>). After a call to <code>next()</code> or <code>findNext()</code>, <code>key()</code> is equivalent to <code>peekPrevious().key()</code>. After a call to <code>previous()</code> or <code>findPrevious()</code>, <code>key()</code> is equivalent to <code>peekNext().key()</code>.</li>
<li><code>Item QMapIterator::next()</code>：Returns the next item and advances the iterator by one position. Call <code>key()</code> on the return value to obtain the item’s key, and <code>value()</code> to obtain the value. Calling this function on an iterator located at the back of the container leads to undefined results.</li>
<li><code>Item QMapIterator::peekNext() const</code>：Returns the next item without moving the iterator. Call <code>key()</code> on the return value to obtain the item’s key, and <code>value()</code> to obtain the value. Calling this function on an iterator located at the back of the container leads to undefined results.</li>
<li><code>Item QMapIterator::peekPrevious() const</code>：Returns the previous item without moving the iterator. Call <code>key()</code> on the return value to obtain the item’s key, and <code>value()</code> to obtain the value. Calling this function on an iterator located at the front of the container leads to undefined results.</li>
<li><code>Item QMapIterator::previous()</code>：Returns the previous item and moves the iterator back by one position. Call <code>key()</code> on the return value to obtain the item’s key, and <code>value()</code> to obtain the value. Calling this function on an iterator located at the front of the container leads to undefined results.</li>
<li><code>void QMapIterator::toBack()</code>：Moves the iterator to the back of the container (after the last item).</li>
<li><code>void QMapIterator::toFront()</code>：Moves the iterator to the front of the container (before the first item).</li>
<li><code>const T &amp; QMapIterator::value() const</code>：Returns the value of the last item that was jumped over using one of the traversal functions (<code>next()</code>, <code>previous()</code>, <code>findNext()</code>, <code>findPrevious()</code>). After a call to <code>next()</code> or <code>findNext()</code>, <code>value()</code> is equivalent to <code>peekPrevious().value()</code>. After a call to <code>previous()</code> or <code>findPrevious()</code>, <code>value()</code> is equivalent to <code>peekNext().value()</code>.</li>
<li><code>QMapIterator &amp; QMapIterator::operator=(const QMap&lt;Key, T&gt; &amp; map)</code>：Makes the iterator operate on <code>map</code>. The iterator is set to be at the front of the <code>map</code> (before the first item).</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QFrame/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QFrame/" itemprop="url">Qt之QFrame</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T15:53:34+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QFrame</code>类是有框架的窗口部件的基类，其头文件是<code>qframe.h</code>。</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul>
<li><code>QRect contentsRect</code>：框架内的矩形。</li>
<li><code>QRect frameRect</code>：框架矩形。</li>
<li><code>Shadow frameShadow</code>：来自框架风格的框架阴影值。</li>
<li><code>Shape frameShape</code>：来自框架风格的框架外形值。</li>
<li><code>int frameWidth</code>：被绘制的框架的宽度。</li>
<li><code>int lineWidth</code>：线宽。</li>
<li><code>int margin</code>：边白的宽度。</li>
<li><code>int midLineWidth</code>：中间的线的宽度。</li>
</ul>
<h3 id="保护成员"><a href="#保护成员" class="headerlink" title="保护成员"></a>保护成员</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paintEvent</span> <span class="params">( QPaintEvent *event )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">resizeEvent</span> <span class="params">( QResizeEvent *e )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">drawFrame</span> <span class="params">( QPainter *p )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">drawContents</span> <span class="params">( QPainter * )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">frameChanged</span> <span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="详细描述"><a href="#详细描述" class="headerlink" title="详细描述"></a>详细描述</h3><p>&emsp;&emsp;<code>QFrame</code>类是有框架的窗口部件的基类。它绘制框架，并且调用一个虚函数<code>drawContents</code>来填充这个框架，这个函数是被子类重新实现的。这里至少还有两个有用的函数：<code>drawFrame</code>和<code>frameChanged</code>。<br>&emsp;&emsp;<code>QPopupMenu</code>用于把菜单<code>升高</code>，高于周围屏幕；<code>QProgressBar</code>有<code>凹陷</code>的外观；<code>QLabel</code>有平坦的外观。这些有框架的窗口部件可以被改变：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QLabel <span class="title">label</span> <span class="params">( ... )</span></span>;</span><br><span class="line">label.setFrameStyle ( QFrame::Panel | QFrame::Raised );</span><br><span class="line">label.setLineWidth ( <span class="number">2</span> );</span><br><span class="line">​</span><br><span class="line"><span class="function">QProgressBar <span class="title">pbar</span> <span class="params">( ... )</span></span>;</span><br><span class="line">label.setFrameStyle ( QFrame::NoFrame );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>QFrame</code>类也能够直接被用来创建没有任何内容的简单框架，通常情况下你要用到<code>QHBox</code>或<code>QVBox</code>，因为它们可以自动地布置你放到框架中的窗口部件。<br>&emsp;&emsp;框架窗口部件有四个属性：<code>frameStyle</code>、<code>lineWidth</code>、<code>midLineWidth</code>和<code>margin</code>。框架风格由框架外形和阴影风格决定，框架外形有<code>NoFrame</code>、<code>Box</code>、<code>Panel</code>、<code>StyledPanel</code>、<code>PopupPanel</code>、<code>WinPanel</code>、<code>ToolBarPanel</code>、<code>MenuBarPanel</code>、<code>HLine</code>和<code>VLine</code>，阴影风格有<code>Plain</code>、<code>Raised</code>和<code>Sunken</code>。<br>&emsp;&emsp;线宽就是框架边界的宽度。中间线宽指定的是在框架中间的另外一条线的宽度，它使用第三种颜色来得到一个三维的效果。注意，中间线只有在<code>Box</code>、<code>HLine</code>和<code>VLine</code>这些凸起和凹陷的框架中才被绘制。边白就是框架和框架内容之间的间隙。下面的表格显示的是风格和宽度的绝大多数有用的组合：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QFrame/1.png" height="276" width="342"></p>
<h3 id="成员类型文档"><a href="#成员类型文档" class="headerlink" title="成员类型文档"></a>成员类型文档</h3><p>&emsp;&emsp;<code>QFrame::Shadow</code>这个枚举类型定义了<code>QFrame</code>的框架所使用的三维效果。当前定义的效果有：</p>
<ul>
<li><code>QFrame::Plain</code>：框架和内容看来和周围一样高。</li>
<li><code>QFrame::Raised</code>：框架和内容看起来凸起。</li>
<li><code>QFrame::Sunken</code>：框架和内容看起来凹陷。</li>
<li><code>QFrame::MShadow</code>：内部的，对于阴影的掩码。</li>
</ul>
<p>&emsp;&emsp;<code>Shadow</code>和<code>QFrame::Shape</code>、<code>lineWidth</code>和<code>midLineWidth</code>相互作用。类文档中的框架的图片描绘的比这些词语更好。<br>&emsp;&emsp;<code>QFrame::Shape</code>这个枚举类型定义了<code>QFrame</code>的框架所使用的外形。当前定义的效果有：</p>
<ul>
<li><code>NoFrame</code>：<code>QFrame</code>不画任何东西。</li>
<li><code>Box</code>：<code>QFrame</code>在它的内容周围画一个框。</li>
<li><code>Panel</code>：<code>QFrame</code>画一个平板使内容看起来凸起或者凹陷。</li>
<li><code>WinPanel</code>：类似于<code>Panel</code>，但<code>QFrame</code>绘制三维效果的方式和<code>Microsoft Windows 95</code>的一样。</li>
<li><code>ToolBarPanel</code>：<code>QFrame</code>调用<code>QStyle::drawToolBarPanel</code>。</li>
<li><code>MenuBarPanel</code>：<code>QFrame</code>调用<code>QStyle::drawMenuBarPanel</code>。</li>
<li><code>HLine</code>：<code>QFrame</code>绘制一个水平线，但没有框任何东西(作为分隔是有用的)。</li>
<li><code>VLine</code>：<code>QFrame</code>绘制一个竖直线，但没有框任何东西(作为分隔是有用的)。</li>
<li><code>StyledPanel</code>：<code>QFrame</code>调用<code>QStyle::drawPanel</code>。</li>
<li><code>PopupPanel</code>：<code>QFrame</code>调用<code>QStyle::drawPopupPanel</code>。</li>
</ul>
<p>&emsp;&emsp;当它不调用<code>QStyle</code>时，<code>Shape</code>和<code>QFrame::Shadow</code>、<code>lineWidth</code>和<code>midLineWidth</code>相互作用来创建整个结果。</p>
<h3 id="成员函数文档"><a href="#成员函数文档" class="headerlink" title="成员函数文档"></a>成员函数文档</h3><ul>
<li><code>QFrame::QFrame ( QWidget * parent = 0, const char * name = 0, WFlags f = 0 )</code>：构造一个框架风格为<code>NoFrame</code>并且<code>1</code>像素框架宽度的框架窗口部件。<code>parent</code>、<code>name</code>和<code>f</code>参数被传递给<code>QWidget</code>的构造函数。</li>
<li><code>QRect QFrame::contentsRect () const</code>：返回框架内的矩形。</li>
<li><code>void QFrame::drawContents ( QPainter * ) [虚 保护]</code>：绘制框架内容的虚函数。当你得到<code>QPainter</code>时，它已经被打开，并且在你离开时，它也必须是打开的。绘制工具的转换在真个过程中是被关闭的。如果你转换绘制工具，记得考虑框架并且在返回前重置转换。这个函数在子类中被重新实现用来绘制框架中的一些东西。它只能在<code>contentsRect</code>内绘制，默认函数什么都不做。</li>
<li><code>void QFrame::drawFrame ( QPainter * p ) [虚 保护]</code>：使用绘制工具<code>p</code>和当前框架属性和颜色组绘制框架。框架内的矩形不受影响。这个函数是虚函数，但通常情况下你不需要重新实现它。如果你要做，注意<code>QPainter</code>已经被打开并且必须保持打开的状态。</li>
<li><code>void QFrame::frameChanged () [虚 保护]</code>：当框架风格、线宽和中间线宽发生改变时，这个虚函数被调用。这个函数在子类中可以被重新实现，它需要知道什么时候框架属性发生变化。默认实现是调用<code>update</code>。</li>
<li><code>QRect QFrame::frameRect () const</code>：返回框架矩形。</li>
<li><code>Shadow QFrame::frameShadow () const</code>：返回来自框架风格的框架阴影值。</li>
<li><code>Shape QFrame::frameShape () const</code>：返回来自框架风格的框架外形值。</li>
<li><code>int QFrame::frameStyle () const</code>：返回框架风格，默认值是<code>QFrame::NoFrame</code>。</li>
<li><code>int QFrame::frameWidth () const</code>：返回所绘制的框架的宽度。</li>
<li><code>int QFrame::lineWidth () const</code>：返回线宽。</li>
<li><code>int QFrame::margin () const</code>：返回边白的宽度。</li>
<li><code>int QFrame::midLineWidth () const</code>：返回中间线的宽度。</li>
<li><code>void QFrame::paintEvent ( QPaintEvent * event ) [虚、保护]</code>：处理绘制事件<code>event</code>，绘制框架和内容。打开框架上的绘制工具并且调用<code>drawFrame</code>，然后是<code>drawContents</code>。</li>
<li><code>void QFrame::resizeEvent ( QResizeEvent * e ) [虚、保护]</code>：处理重定义大小事件<code>e</code>。对于被重新定义大小的窗口部件，调整框架矩形。框架矩形是弹性的，并且周围的区域是固定的。结果框架矩形也许是零或者无效，你可以使用<code>setMinimumSize</code>来避免这种可能。如果框架矩形已经是一个零矩形，那么将不会做任何事。</li>
<li><code>void QFrame::setFrameRect ( const QRect &amp; ) [虚]</code>：设置框架矩形。</li>
<li><code>void QFrame::setFrameShadow ( Shadow )</code>：设置来自框架风格的框架阴影值。</li>
<li><code>void QFrame::setFrameShape ( Shape )</code>：设置来自框架风格的框架外形值。</li>
<li><code>void QFrame::setFrameStyle ( int style ) [虚]</code>：设置框架风格为<code>style</code>。<code>style</code>是框架外形和框架阴影风格的位或操作：</li>
</ul>
<ol>
<li><code>NoFrame</code>：不绘制任何东西。</li>
<li><code>Box</code>：绘制矩形框。内容看起来和周围的屏幕一样高，但是边界本身也许凸起或凹陷。</li>
<li><code>Panel</code>：绘制矩形凸起或凹陷的平板。</li>
<li><code>StyledPanel</code>：绘制一个依赖于当前<code>GUI</code>风格的矩形平板。它可能是凸起的，也可能是凹陷的。</li>
<li><code>PopupPanel</code>：绘制用于弹出窗口的框架。它的外观也依赖于当前<code>GUI</code>风格，通常和<code>StyledPanel</code>一样。</li>
<li><code>ToolBarPanel</code>：绘制用于工具条的框架。它的外观也依赖于当前<code>GUI</code>风格。</li>
<li><code>MenuBarPanel</code>：绘制用于菜单条的框架。它的外观也依赖于当前<code>GUI</code>风格。</li>
<li><code>LineEditPanel</code>：绘制用于行编辑的框架。它的外观也依赖于当前<code>GUI</code>风格。</li>
<li><code>TabWidgetPanel</code>：绘制用于<code>Tab</code>窗口部件的框架。它的外观也依赖于当前<code>GUI</code>风格。</li>
<li><code>WinPanel</code>：绘制一个和<code>Windows 95</code>一样的凸起或凹陷的矩形平板。指定这个外形设置线宽为<code>2</code>像素。<code>WinPanel</code>的提供是为了兼容性。为了使<code>GUI</code>风格独立，我们建议使用<code>StyledPanel</code>替换它。</li>
<li><code>HLine</code>：绘制一条水平线(垂直中央)。</li>
<li><code>VLine</code>：绘制一条垂直线(水平中央)。</li>
</ol>
<p>&emsp;&emsp;阴影风格有：</p>
<ol>
<li><code>Plain</code>：使用调色板的前景颜色绘制(没有任何三维效果)。</li>
<li><code>Raised</code>：使用当前颜色组的亮和暗颜色绘制三维的凸起线。</li>
<li><code>Sunken</code>：使用当前颜色组的亮和暗颜色绘制三维的凹陷线。</li>
</ol>
<p>如果被指定的中间线宽大于<code>0</code>，在<code>Raised</code>或<code>Sunken</code>、<code>HLine</code>和<code>VLine</code>框架中会被绘制一条另外的线。当前颜色组的中间颜色被用于绘制中间线。</p>
<ul>
<li><code>void QFrame::setLineWidth ( int ) [虚]</code>：设置线宽。</li>
<li><code>void QFrame::setMargin ( int ) [虚]</code>：设置边白的宽度。</li>
<li><code>void QFrame::setMidLineWidth ( int ) [虚]</code>：设置中间线的宽度。</li>
</ul>
<h3 id="属性文档"><a href="#属性文档" class="headerlink" title="属性文档"></a>属性文档</h3><ul>
<li><code>QRect contentsRect</code>：这个属性保存的是框架内的矩形。使用<code>contentsRect</code>来得到这个属性值。</li>
<li><code>QRect frameRect</code>：这个属性保存的是框架矩形，框架矩形是被画的框架所在的矩形，默认情况下是整个窗口部件。设置这个属性不会导致窗口部件更新。如果这个属性被设置为零矩形(比如<code>QRect(0, 0, 0, 0)</code>)，那么框架矩形将会等于窗口部件矩形。使用<code>setFrameRect</code>来设置这个属性值，并且使用<code>frameRect</code>来得到这个属性值。</li>
<li><code>Shadow frameShadow</code>：这个属性保存的是来自框架风格的框架阴影值。使用<code>setFrameShadow</code>来设置这个属性值，并且使用<code>frameShadow</code>来得到这个属性值。</li>
<li><code>Shape frameShape</code>：这个属性用来操存的是来自框架风格的框架外形值。使用<code>setFrameShape</code>来设置这个属性值，并且使用<code>frameShape</code>来得到这个属性值。</li>
<li><code>int frameWidth</code>：这个属性保存的是被绘制的框架的宽度。注意框架宽度依赖于框架风格、线宽和中间线宽。比如在<code>NoFrame</code>风格下，框架宽度为<code>0</code>；而在<code>Panel</code>风格下，框架宽度和线宽相同。框架宽度也包括边白。使用<code>frameWidth</code>来得到这个属性值。</li>
<li><code>int lineWidth</code>：这个属性保存的是线宽。注意<code>HLine</code>和<code>VLine</code>的总线宽由<code>frameWidth</code>给定，而不是<code>lineWidth</code>，默认值为<code>1</code>。使用<code>setLineWidth</code>来设置这个属性值并且使用<code>lineWidth</code>来得到这个属性值。</li>
<li><code>int margin</code>：这个属性保存的是边白的宽度。边白是框架最里面的像素和<code>contentsRect</code>最外面的像素之间的区域。它被包含在<code>frameWidth</code>中。边白是根据<code>backgroundMode</code>被填充的，默认值为<code>0</code>。使用<code>setMargin</code>来设置这个属性值，并且使用<code>margin</code>来得到这个属性值。</li>
<li><code>int midLineWidth</code>：这个属性保存的是中间线的宽度，默认值为<code>0</code>。使用<code>setMidLineWidth</code>来设置这个属性值，并且使用<code>midLineWidth</code>来得到这个属性值。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QListIterator/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QListIterator/" itemprop="url">Qt之QListIterator</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T15:24:17+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QListIterator</code> class provides a <code>Java-style</code> const iterator for <code>QList</code> and <code>QQueue</code>. The header file is <code>QListIterator</code>.</p>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QListIterator(const QList&lt;T&gt; &amp; list)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>findNext(const T &amp; value)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>findPrevious(const T &amp; value)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>hasNext() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>hasPrevious() const</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>next()</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>peekNext() const</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>peekPrevious() const</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>previous()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>toBack()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>toFront()</code></td>
</tr>
<tr>
<td><code>QListIterator &amp;</code></td>
<td><code>operator=(const QList&lt;T&gt; &amp; list)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QListIterator</code> class provides a <code>Java-style</code> const iterator for <code>QList</code> and <code>QQueue</code>.<br>&emsp;&emsp;<code>QList</code> has both <code>Java-style</code> iterators and <code>STL-style</code> iterators. The <code>Java-style</code> iterators are more <code>high-level</code> and easier to use than the <code>STL-style</code> iterators; on the other hand, they are slightly less efficient.<br>&emsp;&emsp;An alternative to using iterators is to use index positions. Most <code>QList</code> member functions take an index as their first parameter, making it possible to access, modify, and remove items without using iterators.<br>&emsp;&emsp;<code>QListIterator&lt;T&gt;</code> allows you to iterate over a <code>QList&lt;T&gt;</code> (or a <code>QQueue&lt;T&gt;</code>). If you want to modify the list as you iterate over it, use <code>QMutableListIterator&lt;T&gt;</code> instead.<br>&emsp;&emsp;The <code>QListIterator</code> constructor takes a <code>QList</code> as argument. After construction, the iterator is located at the very beginning of the list (before the first item). Here’s how to iterate over all the elements sequentially:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QList&lt;<span class="keyword">float</span>&gt; <span class="built_in">list</span>;</span><br><span class="line">​</span><br><span class="line">QListIterator&lt;<span class="keyword">float</span>&gt; i ( <span class="built_in">list</span> );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( i.hasNext() ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; i.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;The <code>next()</code> function returns the next item in the list and advances the iterator. Unlike <code>STL-style</code> iterators, <code>Java-style</code> iterators point between items rather than directly at items. The first call to <code>next()</code> advances the iterator to the position between the first and second item, and returns the first item; the second call to <code>next()</code> advances the iterator to the position between the second and third item, and returns the second item; and so on.</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QListIterator/1.png"></p>
<p>&emsp;&emsp;Here’s how to iterate over the elements in reverse order:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QListIterator&lt;<span class="keyword">float</span>&gt; i ( <span class="built_in">list</span> );</span><br><span class="line">i.toBack();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( i.hasPrevious() ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; i.previous();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;If you want to find all occurrences of a particular value, use <code>findNext()</code> or <code>findPrevious()</code> in a loop.<br>&emsp;&emsp;Multiple iterators can be used on the same list. If the list is modified while a <code>QListIterator</code> is active, the <code>QListIterator</code> will continue iterating over the original list, ignoring the modified copy.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QListIterator::QListIterator(const QList&lt;T&gt; &amp; list)</code>: Constructs an iterator for traversing <code>list</code>. The iterator is set to be at the front of the <code>list</code> (before the first item).</li>
<li><code>bool QListIterator::findNext(const T &amp; value)</code>: Searches for <code>value</code> starting from the current iterator position forward. Returns <code>true</code> if <code>value</code> is found; otherwise returns <code>false</code>. After the call, if <code>value</code> was found, the iterator is positioned just after the matching item; otherwise, the iterator is positioned at the back of the container.</li>
<li><code>bool QListIterator::findPrevious(const T &amp; value)</code>: Searches for <code>value</code> starting from the current iterator position backward. Returns <code>true</code> if <code>value</code> is found; otherwise returns <code>false</code>. After the call, if <code>value</code> was found, the iterator is positioned just before the matching item; otherwise, the iterator is positioned at the front of the container.</li>
<li><code>bool QListIterator::hasNext() const</code>: Returns <code>true</code> if there is at least one item ahead of the iterator, i.e. the iterator is not at the back of the container; otherwise returns <code>false</code>.</li>
<li><code>bool QListIterator::hasPrevious() const</code>: Returns <code>true</code> if there is at least one item behind the iterator, i.e. the iterator is not at the front of the container; otherwise returns <code>false</code>.</li>
<li><code>const T &amp; QListIterator::next()</code>: Returns the next item and advances the iterator by one position. Calling this function on an iterator located at the back of the container leads to undefined results.</li>
<li><code>const T &amp; QListIterator::peekNext() const</code>: Returns the next item without moving the iterator. Calling this function on an iterator located at the back of the container leads to undefined results.</li>
<li><code>const T &amp; QListIterator::peekPrevious() const</code>: Returns the previous item without moving the iterator. Calling this function on an iterator located at the front of the container leads to undefined results.</li>
<li><code>const T &amp; QListIterator::previous()</code>: Returns the previous item and moves the iterator back by one position. Calling this function on an iterator located at the front of the container leads to undefined results.</li>
<li><code>void QListIterator::toBack()</code>: Moves the iterator to the back of the container (after the last item).</li>
<li><code>void QListIterator::toFront()</code>: Moves the iterator to the front of the container (before the first item).</li>
<li><code>QListIterator &amp; QListIterator::operator=(const QList&lt;T&gt; &amp; list)</code>: Makes the iterator operate on <code>list</code>. The iterator is set to be at the front of the <code>list</code> (before the first item).</li>
</ul>
<p>&emsp;&emsp;<strong>补充说明</strong>：<code>JAVA</code>风格的迭代器是指向项目之间的，而不是直接指向项目。迭代器或者指向容器的最前面，或者指向两个项目之间，或者指向容器的最后面。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QPrinter/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QPrinter/" itemprop="url">Qt之QPrinter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T11:15:19+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QPrinter</code> class is a paint device that paints on a printer.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter</code></td>
<td><code>QPaintDevice</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: All functions in this class are reentrant.</p>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QPrinter(PrinterMode mode = ScreenResolution)</code></td>
</tr>
<tr>
<td></td>
<td><code>QPrinter(const QPrinterInfo &amp; printer, PrinterMode mode = ScreenResolution)</code></td>
</tr>
<tr>
<td></td>
<td><code>~QPrinter()</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>abort()</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>collateCopies() const</code></td>
</tr>
<tr>
<td><code>ColorMode</code></td>
<td><code>colorMode() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>copyCount() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>creator() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>docName() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>doubleSidedPrinting() const</code></td>
</tr>
<tr>
<td><code>DuplexMode</code></td>
<td><code>duplex() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>fontEmbeddingEnabled() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>fromPage() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>fullPage() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>getPageMargins(qreal * left, qreal * top, qreal * right, qreal * bottom, Unit unit) const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>isValid() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>newPage()</code></td>
</tr>
<tr>
<td><code>Orientation</code></td>
<td><code>orientation() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>outputFileName() const</code></td>
</tr>
<tr>
<td><code>OutputFormat</code></td>
<td><code>outputFormat() const</code></td>
</tr>
<tr>
<td><code>PageOrder</code></td>
<td><code>pageOrder() const</code></td>
</tr>
<tr>
<td><code>QRect</code></td>
<td><code>pageRect() const</code></td>
</tr>
<tr>
<td><code>QRectF</code></td>
<td><code>pageRect(Unit unit) const</code></td>
</tr>
<tr>
<td><code>QRect</code></td>
<td><code>paperRect() const</code></td>
</tr>
<tr>
<td><code>QRectF</code></td>
<td><code>paperRect(Unit unit) const</code></td>
</tr>
<tr>
<td><code>PaperSize</code></td>
<td><code>paperSize() const</code></td>
</tr>
<tr>
<td><code>QSizeF</code></td>
<td><code>paperSize(Unit unit) const</code></td>
</tr>
<tr>
<td><code>PaperSource</code></td>
<td><code>paperSource() const</code></td>
</tr>
<tr>
<td><code>QPrintEngine *</code></td>
<td><code>printEngine() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>printProgram() const</code></td>
</tr>
<tr>
<td><code>PrintRange</code></td>
<td><code>printRange() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>printerName() const</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>printerSelectionOption() const</code></td>
</tr>
<tr>
<td><code>PrinterState</code></td>
<td><code>printerState() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>resolution() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCollateCopies(bool collate)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setColorMode(ColorMode newColorMode)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCopyCount(int count)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCreator(const QString &amp; creator)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setDocName(const QString &amp; name)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setDoubleSidedPrinting(bool doubleSided)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setDuplex(DuplexMode duplex)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setFontEmbeddingEnabled(bool enable)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setFromTo(int from, int to)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setFullPage(bool fp)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setOrientation(Orientation orientation)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setOutputFileName(const QString &amp; fileName)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setOutputFormat(OutputFormat format)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPageMargins(qreal left, qreal top, qreal right, qreal bottom, Unit unit)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPageOrder(PageOrder pageOrder)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPaperSize(PaperSize newPaperSize)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPaperSize(const QSizeF &amp; paperSize, Unit unit)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPaperSource(PaperSource source)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPrintProgram(const QString &amp; printProg)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPrintRange(PrintRange range)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPrinterName(const QString &amp; name)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPrinterSelectionOption(const QString &amp; option)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setResolution(int dpi)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setWinPageSize(int pageSize)</code></td>
</tr>
<tr>
<td><code>QList&lt;PaperSource&gt;</code></td>
<td><code>supportedPaperSources() const</code></td>
</tr>
<tr>
<td><code>QList&lt;int&gt;</code></td>
<td><code>supportedResolutions() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>supportsMultipleCopies() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>toPage() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>winPageSize() const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Reimplemented-Public-Functions"><a href="#Reimplemented-Public-Functions" class="headerlink" title="Reimplemented Public Functions"></a>Reimplemented Public Functions</h3><ul>
<li><code>virtual QPaintEngine * paintEngine() const;</code></li>
</ul>
<h3 id="Protected-Functions"><a href="#Protected-Functions" class="headerlink" title="Protected Functions"></a>Protected Functions</h3><ul>
<li><code>void setEngines(QPrintEngine * printEngine, QPaintEngine * paintEngine);</code></li>
</ul>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QPrinter</code> class is a paint device that paints on a printer.<br>&emsp;&emsp;This device represents a series of pages of printed output, and is used in almost exactly the same way as other paint devices such as <code>QWidget</code> and <code>QPixmap</code>. A set of additional functions are provided to manage <code>device-specific</code> features, such as orientation and resolution, and to step through the pages in a document as it is generated.<br>&emsp;&emsp;When printing directly to a printer on <code>Windows</code> or <code>Mac OS X</code>, <code>QPrinter</code> uses the <code>built-in</code> printer drivers. On <code>X11</code>, <code>QPrinter</code> uses the <code>Common Unix Printing System</code> (<code>CUPS</code>) or the standard <code>Unix</code> lpr utility to send <code>PostScript</code> or <code>PDF</code> output to the printer. As an alternative, the <code>printProgram()</code> function can be used to specify the command or utility to use instead of the system default.<br>&emsp;&emsp;Note that setting parameters like paper size and resolution on an invalid printer is undefined. You can use <code>QPrinter::isValid()</code> to verify this before changing any parameters.<br>&emsp;&emsp;<code>QPrinter</code> supports a number of parameters, most of which can be changed by the end user through a print dialog. In general, <code>QPrinter</code> passes these functions onto the underlying <code>QPrintEngine</code>.<br>&emsp;&emsp;The most important parameters are:</p>
<ul>
<li><code>setOrientation()</code> tells <code>QPrinter</code> which page orientation to use.</li>
<li><code>setPaperSize()</code> tells <code>QPrinter</code> what paper size to expect from the printer.</li>
<li><code>setResolution()</code> tells <code>QPrinter</code> what resolution you wish the printer to provide, in dots per inch (<code>DPI</code>).</li>
<li><code>setFullPage()</code> tells <code>QPrinter</code> whether you want to deal with the full page or just with the part the printer can draw on.</li>
<li><code>setCopyCount()</code> tells <code>QPrinter</code> how many copies of the document it should print.</li>
</ul>
<p>&emsp;&emsp;Many of these functions can only be called before the actual printing begins (i.e., before <code>QPainter::begin()</code> is called). This usually makes sense because, for example, it’s not possible to change the number of copies when you are halfway through printing. There are also some settings that the user sets (through the printer dialog) and that applications are expected to obey.<br>&emsp;&emsp;When <code>QPainter::begin()</code> is called, the <code>QPrinter</code> it operates on is prepared for a new page, enabling the <code>QPainter</code> to be used immediately to paint the first page in a document. Once the first page has been painted, <code>newPage()</code> can be called to request a new blank page to paint on, or <code>QPainter::end()</code> can be called to finish printing. The second page and all following pages are prepared using a call to <code>newPage()</code> before they are painted.<br>&emsp;&emsp;The first page in a document does not need to be preceded by a call to <code>newPage()</code>. You only need to calling <code>newPage()</code> after <code>QPainter::begin()</code> if you need to insert a blank page at the beginning of a printed document. Similarly, calling <code>newPage()</code> after the last page in a document is painted will result in a trailing blank page appended to the end of the printed document.<br>&emsp;&emsp;If you want to abort the print job, <code>abort()</code> will try its best to stop printing. It may cancel the entire job or just part of it.<br>&emsp;&emsp;Since <code>QPrinter</code> can print to any <code>QPrintEngine</code> subclass, it is possible to extend printing support to cover new types of printing subsystem by subclassing <code>QPrintEngine</code> and reimplementing its interface.</p>
<h3 id="Member-Type-Documentation"><a href="#Member-Type-Documentation" class="headerlink" title="Member Type Documentation"></a>Member Type Documentation</h3><ul>
<li>enum <code>QPrinter::ColorMode</code>: This enum type is used to indicate whether <code>QPrinter</code> should print in color or not.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::Color</code></td>
<td><code>1</code></td>
<td>print in color if available, otherwise in grayscale.</td>
</tr>
<tr>
<td><code>QPrinter::GrayScale</code></td>
<td><code>0</code></td>
<td>print in grayscale, even on color printers.</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::DuplexMode</code>: This enum is used to indicate whether printing will occur on one or both sides of each sheet of paper (simplex or duplex printing).</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::DuplexNone</code></td>
<td><code>0</code></td>
<td>Single sided (simplex) printing only.</td>
</tr>
<tr>
<td><code>QPrinter::DuplexAuto</code></td>
<td><code>1</code></td>
<td>The printer’s default setting is used to determine whether duplex printing is used.</td>
</tr>
<tr>
<td><code>QPrinter::DuplexLongSide</code></td>
<td><code>2</code></td>
<td>Both sides of each sheet of paper are used for printing. The paper is turned over its longest edge before the second side is printed</td>
</tr>
<tr>
<td><code>QPrinter::DuplexShortSide</code></td>
<td><code>3</code></td>
<td>Both sides of each sheet of paper are used for printing. The paper is turned over its shortest edge before the second side is printed</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::Orientation</code>: This enum type (not to be confused with <code>Orientation</code>) is used to specify each page’s orientation.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::Portrait</code></td>
<td><code>0</code></td>
<td>the page’s height is greater than its width.</td>
</tr>
<tr>
<td><code>QPrinter::Landscape</code></td>
<td><code>1</code></td>
<td>the page’s width is greater than its height.</td>
</tr>
</tbody>
</table>
</div>
<p>This type interacts with <code>QPrinter::PaperSize</code> and <code>QPrinter::setFullPage()</code> to determine the final size of the page available to the application.</p>
<ul>
<li>enum <code>QPrinter::OutputFormat</code>: The <code>OutputFormat</code> enum is used to describe the format <code>QPrinter</code> should use for printing.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::NativeFormat</code></td>
<td><code>0</code></td>
<td><code>QPrinter</code> will print output using a method defined by the platform it is running on. This mode is the default when printing directly to a printer.</td>
</tr>
<tr>
<td><code>QPrinter::PdfFormat</code></td>
<td><code>1</code></td>
<td><code>QPrinter</code> will generate its output as a searchable <code>PDF</code> file. This mode is the default when printing to a file.</td>
</tr>
<tr>
<td><code>QPrinter::PostScriptFormat</code></td>
<td><code>2</code></td>
<td><code>QPrinter</code> will generate its output as in the <code>PostScript</code> format.</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::PageOrder</code>: This enum type is used by <code>QPrinter</code> to tell the application program how to print.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::FirstPageFirst</code></td>
<td><code>0</code></td>
<td>the <code>lowest-numbered</code> page should be printed first.</td>
</tr>
<tr>
<td><code>QPrinter::LastPageFirst</code></td>
<td><code>1</code></td>
<td>the <code>highest-numbered</code> page should be printed first.</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::PaperSize</code>: This enum type specifies what paper size <code>QPrinter</code> should use. <code>QPrinter</code> does not check that the paper size is available; it just uses this information, together with <code>QPrinter::Orientation</code> and <code>QPrinter::setFullPage()</code>, to determine the printable area.</li>
</ul>
<p>&emsp;&emsp;The defined sizes (with <code>setFullPage(true)</code>) are:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::A0</code></td>
<td><code>5</code></td>
<td><code>841 x 1189</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A1</code></td>
<td><code>6</code></td>
<td><code>594 x 841</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A2</code></td>
<td><code>7</code></td>
<td><code>420 x 594</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A3</code></td>
<td><code>8</code></td>
<td><code>297 x 420</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A4</code></td>
<td><code>0</code></td>
<td><code>210 x 297</code> mm, <code>8.26 x 11.69</code> inches</td>
</tr>
<tr>
<td><code>QPrinter::A5</code></td>
<td><code>9</code></td>
<td><code>148 x 210</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A6</code></td>
<td><code>10</code></td>
<td><code>105 x 148</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A7</code></td>
<td><code>11</code></td>
<td><code>74 x 105</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A8</code></td>
<td><code>12</code></td>
<td><code>52 x 74</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::A9</code></td>
<td><code>13</code></td>
<td><code>37 x 52</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B0</code></td>
<td><code>14</code></td>
<td><code>1000 x 1414</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B1</code></td>
<td><code>15</code></td>
<td><code>707 x 1000</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B2</code></td>
<td><code>17</code></td>
<td><code>500 x 707</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B3</code></td>
<td><code>18</code></td>
<td><code>353 x 500</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B4</code></td>
<td><code>19</code></td>
<td><code>250 x 353</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B5</code></td>
<td><code>1</code></td>
<td><code>176 x 250</code> mm, <code>6.93 x 9.84</code> inches</td>
</tr>
<tr>
<td><code>QPrinter::B6</code></td>
<td><code>20</code></td>
<td><code>125 x 176</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B7</code></td>
<td><code>21</code></td>
<td><code>88 x 125</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B8</code></td>
<td><code>22</code></td>
<td><code>62 x 88</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B9</code></td>
<td><code>23</code></td>
<td><code>33 x 62</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::B10</code></td>
<td><code>16</code></td>
<td><code>31 x 44</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::C5E</code></td>
<td><code>24</code></td>
<td><code>163 x 229</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Comm10E</code></td>
<td><code>25</code></td>
<td><code>105 x 241</code> mm, U.S. Common <code>10</code> Envelope</td>
</tr>
<tr>
<td><code>QPrinter::DLE</code></td>
<td><code>26</code></td>
<td><code>110 x 220</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Executive</code></td>
<td><code>4</code></td>
<td><code>7.5 x 10</code> inches, <code>190.5 x 254</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Folio</code></td>
<td><code>27</code></td>
<td><code>210 x 330</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Ledger</code></td>
<td><code>28</code></td>
<td><code>431.8 x 279.4</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Legal</code></td>
<td><code>3</code></td>
<td><code>8.5 x 14</code> inches, <code>215.9 x 355.6</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Letter</code></td>
<td><code>2</code></td>
<td><code>8.5 x 11</code> inches, <code>215.9 x 279.4</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Tabloid</code></td>
<td><code>29</code></td>
<td><code>279.4 x 431.8</code> mm</td>
</tr>
<tr>
<td><code>QPrinter::Custom</code></td>
<td><code>30</code></td>
<td>Unknown, or a user defined size.</td>
</tr>
</tbody>
</table>
</div>
<p>With <code>setFullPage(false)</code> (the default), the metrics will be a bit smaller; how much depends on the printer in use.</p>
<ul>
<li>enum <code>QPrinter::PaperSource</code>: This enum type specifies what paper source <code>QPrinter</code> is to use. <code>QPrinter</code> does not check that the paper source is available; it just uses this information to try and set the paper source. Whether it will set the paper source depends on whether the printer has that particular source. <strong>Warning</strong>: This is currently only implemented for <code>Windows</code>.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::Auto</code></td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>QPrinter::Cassette</code></td>
<td><code>11</code></td>
</tr>
<tr>
<td><code>QPrinter::Envelope</code></td>
<td><code>4</code></td>
</tr>
<tr>
<td><code>QPrinter::EnvelopeManual</code></td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>QPrinter::FormSource</code></td>
<td><code>12</code></td>
</tr>
<tr>
<td><code>QPrinter::LargeCapacity</code></td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>QPrinter::LargeFormat</code></td>
<td><code>9</code></td>
</tr>
<tr>
<td><code>QPrinter::Lower</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>QPrinter::MaxPageSource</code></td>
<td><code>13</code></td>
</tr>
<tr>
<td><code>QPrinter::Middle</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>QPrinter::Manual</code></td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>QPrinter::OnlyOne</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>QPrinter::Tractor</code></td>
<td><code>7</code></td>
</tr>
<tr>
<td><code>QPrinter::SmallFormat</code></td>
<td><code>8</code></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::PrintRange</code>: Used to specify the print range selection option.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::AllPages</code></td>
<td><code>0</code></td>
<td>All pages should be printed.</td>
</tr>
<tr>
<td><code>QPrinter::Selection</code></td>
<td><code>1</code></td>
<td>Only the selection should be printed.</td>
</tr>
<tr>
<td><code>QPrinter::PageRange</code></td>
<td><code>2</code></td>
<td>The specified page range should be printed.</td>
</tr>
<tr>
<td><code>QPrinter::CurrentPage</code></td>
<td><code>3</code></td>
<td>Only the current page should be printed.</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::PrinterMode</code>: This enum describes the mode the printer should work in. It basically presets a certain resolution and working mode.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::ScreenResolution</code></td>
<td><code>0</code></td>
<td>Sets the resolution of the print device to the screen resolution. This has the big advantage that the results obtained when painting on the printer will match more or less exactly the visible output on the screen. It is the easiest to use, as font metrics on the screen and on the printer are the same. This is the default value. <code>ScreenResolution</code> will produce a lower quality output than <code>HighResolution</code> and should only be used for drafts.</td>
</tr>
<tr>
<td><code>QPrinter::PrinterResolution</code></td>
<td><code>1</code></td>
<td>This value is deprecated. Is is equivalent to <code>ScreenResolution</code> on <code>Unix</code> and <code>HighResolution</code> on <code>Windows</code> and <code>Mac</code>. Due do the difference between <code>ScreenResolution</code> and <code>HighResolution</code>, use of this value may lead to <code>non-portable</code> printer code.</td>
</tr>
<tr>
<td><code>QPrinter::HighResolution</code></td>
<td><code>2</code></td>
<td>On <code>Windows</code>, sets the printer resolution to that defined for the printer in use. For <code>PostScript</code> printing, sets the resolution of the <code>PostScript</code> driver to <code>1200</code> dpi.</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: When rendering text on a <code>QPrinter</code> device, it is important to realize that the size of text, when specified in points, is independent of the resolution specified for the device itself. Therefore, it may be useful to specify the font size in pixels when combining text with graphics to ensure that their relative sizes are what you expect.</p>
<ul>
<li>enum <code>QPrinter::PrinterState</code>:</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::Idle</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>QPrinter::Active</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>QPrinter::Aborted</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>QPrinter::Error</code></td>
<td><code>3</code></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>enum <code>QPrinter::Unit</code>: This enum type is used to specify the measurement unit for page and paper sizes.</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPrinter::Millimeter</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>QPrinter::Point</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>QPrinter::Inch</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>QPrinter::Pica</code></td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>QPrinter::Didot</code></td>
<td><code>4</code></td>
</tr>
<tr>
<td><code>QPrinter::Cicero</code></td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>QPrinter::DevicePixel</code></td>
<td><code>6</code></td>
</tr>
</tbody>
</table>
</div>
<p>Note the difference between <code>Point</code> and <code>DevicePixel</code>. The <code>Point</code> unit is defined to be <code>1/72th</code> of an inch, while the <code>DevicePixel</code> unit is resolution dependant and is based on the actual pixels, or dots, on the printer.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QPrinter::QPrinter(PrinterMode mode = ScreenResolution)</code>: Creates a new printer object with the given <code>mode</code>.</li>
<li><code>QPrinter::QPrinter(const QPrinterInfo &amp; printer, PrinterMode mode = ScreenResolution)</code>: Creates a new printer object with the given <code>printer</code> and <code>mode</code>.</li>
<li><code>QPrinter::~QPrinter()</code>: Destroys the printer object and frees any allocated resources. If the printer is destroyed while a print job is in progress this may or may not affect the print job.</li>
<li><code>bool QPrinter::abort()</code>: Aborts the current print run. Returns <code>true</code> if the print run was successfully aborted and <code>printerState()</code> will return <code>QPrinter::Aborted</code>; otherwise returns <code>false</code>. It is not always possible to abort a print job. For example, all the data has gone to the printer but the printer cannot or will not cancel the job when asked to.</li>
<li><code>bool QPrinter::collateCopies() const</code>: Returns <code>true</code> if collation is turned on when multiple copies is selected. Returns <code>false</code> if it is turned off when multiple copies is selected. When collating is turned off the printing of each individual page will be repeated the <code>numCopies()</code> amount before the next page is started. With collating turned on all pages are printed before the next copy of those pages is started.</li>
<li><code>ColorMode QPrinter::colorMode() const</code>: Returns the current color mode.</li>
<li>int <code>QPrinter::copyCount() const</code>: Returns the number of copies that will be printed. The default value is <code>1</code>.</li>
<li><code>QString QPrinter::creator() const</code>: Returns the name of the application that created the document.</li>
<li><code>QString QPrinter::docName() const</code>: Returns the document name.</li>
<li><code>bool QPrinter::doubleSidedPrinting() const</code>: Returns <code>true</code> if double side printing is enabled. Currently this option is only supported on <code>X11</code>.</li>
<li><code>DuplexMode QPrinter::duplex() const</code>: Returns the current duplex mode. Currently this option is only supported on <code>X11</code>.</li>
<li><code>bool QPrinter::fontEmbeddingEnabled() const</code>: Returns <code>true</code> if font embedding is enabled. Currently this option is only supported on <code>X11</code>.</li>
<li><code>int QPrinter::fromPage() const</code>: Returns the number of the first page in a range of pages to be printed (the <code>from page</code> setting). Pages in a document are numbered according to the convention that the first page is page <code>1</code>. By default, this function returns a special value of <code>0</code>, meaning that the <code>from page</code> setting is unset. <strong>Note</strong>: If <code>fromPage()</code> and <code>toPage()</code> both return <code>0</code>, this indicates that the whole document will be printed.</li>
<li><code>bool QPrinter::fullPage() const</code>: Returns <code>true</code> if the origin of the printer’s coordinate system is at the corner of the page and <code>false</code> if it is at the edge of the printable area.</li>
<li><code>void QPrinter::getPageMargins(qreal * left, qreal * top, qreal * right, qreal * bottom, Unit unit) const</code>: Returns the page margins for this printer in <code>left</code>, <code>top</code>, <code>right</code>, <code>bottom</code>. The <code>unit</code> of the returned margins are specified with the <code>unit</code> parameter.</li>
<li><code>bool QPrinter::isValid() const</code>: Returns <code>true</code> if the printer currently selected is a valid printer in the system, or a pure <code>PDF/PostScript</code> printer; otherwise returns <code>false</code>. To detect other failures check the output of <code>QPainter::begin()</code> or <code>QPrinter::newPage()</code>.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">QPrinter printer;</span><br><span class="line">printer.setOutputFormat ( QPrinter::PdfFormat );</span><br><span class="line">printer.setOutputFileName ( <span class="string">"/foobar/nonwritable.pdf"</span> );</span><br><span class="line">QPainter painter;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ! painter.begin ( &amp;printer ) ) &#123; <span class="comment">/* failed to open file */</span></span><br><span class="line">    qWarning ( <span class="string">"failed to open file, is it writable?"</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">painter.drawText ( <span class="number">10</span>, <span class="number">10</span>, <span class="string">"Test"</span> );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ! printer.newPage() ) &#123;</span><br><span class="line">    qWarning ( <span class="string">"failed in flushing page to disk, disk full?"</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">painter.drawText ( <span class="number">10</span>, <span class="number">10</span>, <span class="string">"Test 2"</span> );</span><br><span class="line">painter.end();</span><br></pre></td></tr></table></figure>
<ul>
<li><code>bool QPrinter::newPage()</code>: Tells the printer to eject the current page and to continue printing on a new page. Returns <code>true</code> if this was successful; otherwise returns <code>false</code>. Calling <code>newPage()</code> on an inactive <code>QPrinter</code> object will always fail.</li>
<li><code>Orientation QPrinter::orientation() const</code>: Returns the orientation setting. This is <code>driver-dependent</code>, but is usually <code>QPrinter::Portrait</code>.</li>
<li><code>QString QPrinter::outputFileName() const</code>: Returns the name of the output file. By default, this is an empty string (indicating that the printer shouldn’t print to file).</li>
<li><code>OutputFormat QPrinter::outputFormat() const</code>: Returns the output format for this printer.</li>
<li><code>PageOrder QPrinter::pageOrder() const</code>: Returns the current page order. The default page order is <code>FirstPageFirst</code>.</li>
<li><code>QRect QPrinter::pageRect() const</code>: Returns the page’s rectangle; this is usually smaller than the <code>paperRect()</code> since the page normally has margins between its borders and the paper. The unit of the returned rectangle is <code>DevicePixel</code>.</li>
<li><code>QRectF QPrinter::pageRect(Unit unit) const</code>: Returns the page’s rectangle in <code>unit</code>; this is usually smaller than the <code>paperRect()</code> since the page normally has margins between its borders and the paper.</li>
<li><code>QPaintEngine * QPrinter::paintEngine() const [virtual]</code>: Reimplemented from <code>QPaintDevice::paintEngine()</code>. Returns the paint engine used by the printer.</li>
<li><code>QRect QPrinter::paperRect() const</code>: Returns the paper’s rectangle; this is usually larger than the <code>pageRect()</code>. The unit of the returned rectangle is <code>DevicePixel</code>.</li>
<li><code>QRectF QPrinter::paperRect(Unit unit) const</code>: Returns the paper’s rectangle in <code>unit</code>; this is usually larger than the <code>pageRect()</code>.</li>
<li><code>PaperSize QPrinter::paperSize() const</code>: Returns the printer paper size. The default value is <code>driver-dependent</code>.</li>
<li><code>QSizeF QPrinter::paperSize(Unit unit) const</code>: Returns the paper size in <code>unit</code>.</li>
<li><code>PaperSource QPrinter::paperSource() const</code>: Returns the printer’s paper source. This is <code>Manual</code> or a printer tray or paper cassette.</li>
<li><code>QPrintEngine * QPrinter::printEngine() const</code>: Returns the print engine used by the printer.</li>
<li><code>QString QPrinter::printProgram() const</code>: Returns the name of the program that sends the print output to the printer. The default is to return an empty string; meaning that <code>QPrinter</code> will try to be smart in a <code>system-dependent</code> way. On <code>X11</code> only, you can set it to something different to use a specific print program. On the other platforms, this returns an empty string.</li>
<li><code>PrintRange QPrinter::printRange() const</code>: Returns the page range of the <code>QPrinter</code>. After the print setup dialog has been opened, this function returns the value selected by the user.</li>
<li><code>QString QPrinter::printerName() const</code>: Returns the printer name. This value is initially set to the name of the default printer.</li>
<li><code>QString QPrinter::printerSelectionOption() const</code>: Returns the printer options selection string. This is useful only if the print command has been explicitly set. The default value (an empty string) implies that the printer should be selected in a <code>system-dependent</code> manner. Any other value implies that the given value should be used. <strong>Warning</strong>: This function is not available on <code>Windows</code>.</li>
<li><code>PrinterState QPrinter::printerState() const</code>: Returns the current state of the printer. This may not always be accurate (for example if the printer doesn’t have the capability of reporting its state to the operating system).</li>
<li><code>int QPrinter::resolution() const</code>: Returns the current assumed resolution of the printer, as set by <code>setResolution()</code> or by the printer driver.</li>
<li><code>void QPrinter::setCollateCopies(bool collate)</code>: Sets the default value for collation checkbox when the print dialog appears. If <code>collate</code> is <code>true</code>, it will enable <code>setCollateCopiesEnabled()</code>. The default value is <code>false</code>. This value will be changed by what the user presses in the print dialog.</li>
<li><code>void QPrinter::setColorMode(ColorMode newColorMode)</code>: Sets the printer’s color mode to <code>newColorMode</code>, which can be either <code>Color</code> or <code>GrayScale</code>.</li>
<li><code>void QPrinter::setCopyCount(int count)</code>: Sets the number of copies to be printed to <code>count</code>. The printer driver reads this setting and prints the specified number of copies.</li>
<li><code>void QPrinter::setCreator(const QString &amp; creator)</code>: Sets the name of the application that created the document to <code>creator</code>. This function is only applicable to the <code>X11</code> version of <code>Qt</code>. If no <code>creator</code> name is specified, the <code>creator</code> will be set to <code>Qt</code> followed by some version number.</li>
<li><code>void QPrinter::setDocName(const QString &amp; name)</code>: Sets the document name to <code>name</code>. On <code>X11</code>, the document name is for example used as the default output filename in <code>QPrintDialog</code>. Note that the document name does not affect the file name if the printer is printing to a file. Use the <code>setOutputFile()</code> function for this.</li>
<li><code>void QPrinter::setDoubleSidedPrinting(bool doubleSided)</code>: Enables double sided printing if <code>doubleSided</code> is <code>true</code>; otherwise disables it. Currently this option is only supported on <code>X11</code>.</li>
<li><code>void QPrinter::setDuplex(DuplexMode duplex)</code>: Enables double sided printing based on the <code>duplex</code> mode. Currently this option is only supported on <code>X11</code>.</li>
<li><code>void QPrinter::setEngines(QPrintEngine * printEngine, QPaintEngine * paintEngine) [protected]</code>: This function is used by subclasses of <code>QPrinter</code> to specify custom print and paint engines (<code>printEngine</code> and <code>paintEngine</code>, respectively). <code>QPrinter</code> does not take ownership of the engines, so you need to manage these engine instances yourself. Note that changing the engines will reset the printer state and all its properties.</li>
<li><code>void QPrinter::setFontEmbeddingEnabled(bool enable)</code>: Enabled or disables font embedding depending on <code>enable</code>. Currently this option is only supported on <code>X11</code>.</li>
<li><code>void QPrinter::setFromTo(int from, int to)</code>: Sets the range of pages to be printed to cover the pages with numbers specified by <code>from</code> and <code>to</code>, where <code>from</code> corresponds to the first page in the range and <code>to</code> corresponds to the last. <strong>Note</strong>: Pages in a document are numbered according to the convention that the first page is page <code>1</code>. However, if <code>from</code> and <code>to</code> are both set to <code>0</code>, the whole document will be printed. This function is mostly used to set a default value that the user can override in the print dialog when you call <code>setup()</code>.</li>
<li><code>void QPrinter::setFullPage(bool fp)</code>: If <code>fp</code> is <code>true</code>, enables support for painting over the entire page; otherwise restricts painting to the printable area reported by the device. By default, full page printing is disabled. In this case, the origin of the <code>QPrinter&#39;s</code> coordinate system coincides with the <code>top-left</code> corner of the printable area. If full page printing is enabled, the origin of the <code>QPrinter&#39;s</code> coordinate system coincides with the <code>top-left</code> corner of the paper itself. In this case, the device metrics will report the exact same dimensions as indicated by <code>PaperSize</code>. It may not be possible to print on the entire physical page because of the printer’s margins, so the application must account for the margins itself.</li>
<li><code>void QPrinter::setOrientation(Orientation orientation)</code>: Sets the print orientation to <code>orientation</code>. The <code>orientation</code> can be either <code>QPrinter::Portrait</code> or <code>QPrinter::Landscape</code>. The printer driver reads this setting and prints using the specified orientation. On <code>Windows</code>, this option can be changed while printing and will take effect from the next call to <code>newPage()</code>. On <code>Mac OS X</code>, changing the orientation during a print job has no effect.</li>
<li><code>void QPrinter::setOutputFileName(const QString &amp; fileName)</code>: Sets the name of the output file to <code>fileName</code>. Setting a null or empty name (<code>0</code> or <code>&quot;&quot;</code>) disables printing to a file. Setting a <code>non-empty</code> name enables printing to a file. This can change the value of <code>outputFormat()</code>. If the file name has the suffix <code>.ps</code> then <code>PostScript</code> is automatically selected as output format. If the file name has the <code>.pdf</code> suffix <code>PDF</code> is generated. If the file name has a suffix other than <code>.ps</code> and <code>.pdf</code>, the output format used is the one set with <code>setOutputFormat()</code>. <code>QPrinter</code> uses <code>Qt&#39;s</code> <code>cross-platform</code> <code>PostScript</code> or <code>PDF</code> print engines respectively. If you can produce this format natively, for example <code>Mac OS X</code> can generate <code>PDF&#39;s</code> from its print engine, set the output format back to <code>NativeFormat</code>.</li>
<li><code>void QPrinter::setOutputFormat(OutputFormat format)</code>: Sets the output format for this printer to <code>format</code>.</li>
<li><code>void QPrinter::setPageMargins(qreal left, qreal top, qreal right, qreal bottom, Unit unit)</code>: This function sets the <code>left</code>, <code>top</code>, <code>right</code> and <code>bottom</code> page margins for this printer. The unit of the margins are specified with the <code>unit</code> parameter.</li>
<li><code>void QPrinter::setPageOrder(PageOrder pageOrder)</code>: Sets the page order to <code>pageOrder</code>. The page order can be <code>QPrinter::FirstPageFirst</code> or <code>QPrinter::LastPageFirst</code>. The application is responsible for reading the page order and printing accordingly. This function is mostly useful for setting a default value that the user can override in the print dialog. This function is only supported under <code>X11</code>.</li>
<li><code>void QPrinter::setPaperSize(PaperSize newPaperSize)</code>: Sets the printer paper size to <code>newPaperSize</code> if that size is supported. The result is undefined if <code>newPaperSize</code> is not supported. The default paper size is <code>driver-dependent</code>. This function is useful mostly for setting a default value that the user can override in the print dialog.</li>
<li><code>void QPrinter::setPaperSize(const QSizeF &amp; paperSize, Unit unit)</code>: Sets the paper size based on <code>paperSize</code> in <code>unit</code>.</li>
<li><code>void QPrinter::setPaperSource(PaperSource source)</code>: Sets the paper source setting to <code>source</code>. <code>Windows</code> only: This option can be changed while printing and will take effect from the next call to <code>newPage()</code>.</li>
<li><code>void QPrinter::setPrintProgram(const QString &amp; printProg)</code>: Sets the name of the program that should do the print job to <code>printProg</code>. On <code>X11</code>, this function sets the program to call with the <code>PostScript</code> output. On other platforms, it has no effect.</li>
<li><code>void QPrinter::setPrintRange(PrintRange range)</code>: Sets the print range option in to be <code>range</code>.</li>
<li><code>void QPrinter::setPrinterName(const QString &amp; name)</code>: Sets the printer name to <code>name</code>.</li>
<li><code>void QPrinter::setPrinterSelectionOption(const QString &amp; option)</code>: Sets the printer to use <code>option</code> to select the printer. <code>option</code> is null by default (which implies that <code>Qt</code> should be smart enough to guess correctly), but it can be set to other values to use a specific printer selection option. If the printer selection option is changed while the printer is active, the current print job may or may not be affected. Warning: This function is not available on <code>Windows</code>.</li>
<li><code>void QPrinter::setResolution(int dpi)</code>: Requests that the printer prints at <code>dpi</code> or as near to <code>dpi</code> as possible. This setting affects the coordinate system as returned by, for example <code>QPainter::viewport()</code>. This function must be called before <code>QPainter::begin()</code> to have an effect on all platforms.</li>
<li><code>void QPrinter::setWinPageSize(int pageSize)</code>: Sets the page size to be used by the printer under Windows to <code>pageSize</code>. <strong>Warning</strong>: This function is not portable so you may prefer to use <code>setPaperSize()</code> instead.</li>
<li><code>QList&lt;PaperSource&gt; QPrinter::supportedPaperSources() const</code>: Returns the supported paper sizes for this printer. The values will be either a value that matches an entry in the <code>QPrinter::PaperSource</code> enum or a driver spesific value. The driver spesific values are greater than the constant <code>DMBIN_USER</code> declared in <code>wingdi.h</code>. <strong>Warning</strong>: This function is only available in <code>Windows</code>.</li>
<li><code>QList&lt;int&gt; QPrinter::supportedResolutions() const</code>: Returns a list of the resolutions (a list of <code>dots-per-inch</code> integers) that the printer says it supports. For <code>X11</code> where all printing is directly to postscript, this function will always return a one item list containing only the postscript resolution.</li>
<li><code>bool QPrinter::supportsMultipleCopies() const</code>: Returns <code>true</code> if the printer supports printing multiple copies of the same document in one job; otherwise <code>false</code> is returned. On most systems this function will return <code>true</code>. However, on <code>X11</code> systems that do not support <code>CUPS</code>, this function will return <code>false</code>. That means the application has to handle the number of copies by printing the same document the required number of times.</li>
<li><code>int QPrinter::toPage() const</code>: Returns the number of the last page in a range of pages to be printed (the <code>to page</code> setting). Pages in a document are numbered according to the convention that the first page is page <code>1</code>. By default, this function returns a special value of <code>0</code>, meaning that the <code>to page</code> setting is unset. <strong>Note</strong>: If <code>fromPage()</code> and <code>toPage()</code> both return <code>0</code>, this indicates that the whole document will be printed. The programmer is responsible for reading this setting and printing accordingly.</li>
<li><code>int QPrinter::winPageSize() const</code>: Returns the page size used by the printer under <code>Windows</code>. <strong>Warning</strong>: This function is not portable so you may prefer to use <code>paperSize()</code> instead.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QErrorMessage/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QErrorMessage/" itemprop="url">Qt之QErrorMessage</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T11:03:47+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QErrorMessage</code>类提供了错误消息显示对话框，其头文件为<code>qerrormessage.h</code>，它继承了<code>QDialog</code>。所有成员函数的列表如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 公有成员 */</span></span><br><span class="line">QErrorMessage ( QWidget *parent, <span class="keyword">const</span> <span class="keyword">char</span> *name = <span class="number">0</span> );</span><br><span class="line">~QErrorMessage ();</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">message</span> <span class="params">( <span class="keyword">const</span> QString &amp;m )</span></span>; <span class="comment">/* 公有槽 */</span></span><br><span class="line"><span class="function">QErrorMessage * <span class="title">qtHandler</span> <span class="params">()</span></span>; <span class="comment">/* 静态公有成员 */</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;成员函数详解如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 构造并安装一个错误处理器窗口。父对象parent和名称name都被传递给QDialog的构造函数 */</span></span><br><span class="line">QErrorMessage::QErrorMessage ( QWidget *parent, <span class="keyword">const</span> <span class="keyword">char</span> *name = <span class="number">0</span> );</span><br><span class="line"><span class="comment">/* 销毁这个对象并且释放任何已经分配的资源。特别地，“do not show again”消息列表也被删除 */</span></span><br><span class="line">QErrorMessage::~QErrorMessage ();</span><br><span class="line"><span class="comment">/* 显示消息m并且立即返回。如果用户要求m不被显示，这个函数将什么都不做。</span></span><br><span class="line"><span class="comment">   通常m会被立即显示，但是如果存在未处理的消息，m将被排到队列中，稍后会显示 */</span></span><br><span class="line"><span class="keyword">void</span> QErrorMessage::message ( <span class="keyword">const</span> QString &amp;m ); [槽]</span><br><span class="line"><span class="comment">/* 返回输出默认Qt消息的QErrorMessage对象的指针。如果没有这样的对象存在，这个函数创建一个这样的对象 */</span></span><br><span class="line">QErrorMessage * QErrorMessage::qtHandler (); [静态]</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/18/Qt语法详解/Qt之QErrorMessage/1.png"></p>
<p>&emsp;&emsp;使用示例如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QErrorMessage *dialog = <span class="keyword">new</span> QErrorMessage ( <span class="keyword">this</span> );</span><br><span class="line">dialog-&gt;setWindowTitle ( tr ( <span class="string">"错误信息对话框"</span> ) );</span><br><span class="line">dialog-&gt;showMessage ( tr ( <span class="string">"这里是出错信息！"</span> ) );</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Qt语法详解/Qt之QCheckBox/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Qt语法详解/Qt之QCheckBox/" itemprop="url">Qt之QCheckBox</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T10:45:00+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>&emsp;&emsp;<code>QCheckBox</code>继承自<code>QAbstractButton</code>，它提供了一个带文本标签的复选框。<code>QCheckBox</code>(复选框)和<code>QRadioButton</code>(单选框)都是选项按钮，这是因为它们都可以在开(选中)或者关(未选中)之间切换。区别是对用户选择的限制：单选框定义了<code>多选一</code>的选择，而复选框提供的是<code>多选多</code>的选择。尽管在技术上可以通过复选框来实现单选框的行为，反之亦然，但还是强烈建议使用众所周知的约定。</p>
<h3 id="详细描述"><a href="#详细描述" class="headerlink" title="详细描述"></a>详细描述</h3><p>&emsp;&emsp;<code>QButtonGroup</code>可以用来在视觉上把许多复选框组织在一起。只要复选框被选中或者清除，都会发射一个<code>stateChanged</code>信号。如果想在复选框状态改变的时候触发一个行为，请连接这个信号，可以使用<code>isChecked</code>来查询复选框是否被选中。除了常用的选中和未选中两个状态，<code>QCheckBox</code>还可选地提供了第三种状态(半选)来表明<code>没有变化</code>。当需要给用户一个选中或者未选中复选框的选择时，这是很有用的。如果需要第三种状态，可以通过<code>setTristate</code>来使它生效，并使用<code>checkState</code>来查询当前的切换状态。<br>&emsp;&emsp;和<code>QPushButton</code>一样，复选框可以显示文本或者图标。文本可以通过构造函数或者<code>setText</code>来设置，图标可以通过<code>setIcon</code>来设置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox *checkbox = <span class="keyword">new</span> QCheckBox ( <span class="string">"C&amp;ase sensitive"</span>, <span class="keyword">this</span> );</span><br></pre></td></tr></table></figure>
<p>这个例子中，快捷键为<code>Alt + a</code>。要显示一个实际的符号<code>&amp;</code>，使用<code>&amp;&amp;</code>。</p>
<h3 id="公有函数"><a href="#公有函数" class="headerlink" title="公有函数"></a>公有函数</h3><p>&emsp;&emsp;公有函数如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 返回复选框的选中状态。如果不需要三态的支持，可以使用QAbstractButton::isChecked，它返回一个布尔值 */</span></span><br><span class="line">Qt::<span class="function">CheckState <span class="title">checkState</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="comment">/* 复选框是否为一个三态复选框。默认的是false，也就是说复选框只有两个状态 */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isTristate</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="comment">/* 设置复选框的选中状态。如果不需要三态的支持，可以使用QAbstractButton:setChecked，它接受一个布尔值 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCheckState</span><span class="params">(Qt::CheckState state)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setTristate</span><span class="params">(<span class="keyword">bool</span> y = <span class="literal">true</span>)</span> <span class="comment">/* 设置复选框为一个三态复选框 */</span></span></span><br></pre></td></tr></table></figure>
<h3 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h3><p>&emsp;&emsp;信号如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 当复选框状态发生改变，这个信号就会被发射，即用户选中或者取消选中 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stateChanged</span><span class="params">(<span class="keyword">int</span> state)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="三态复选框"><a href="#三态复选框" class="headerlink" title="三态复选框"></a>三态复选框</h3><p>&emsp;&emsp;下面实现一个三态复选框，并监听状态变化：</p>
<p><img src="/2019/02/18/Qt语法详解/Qt之QCheckBox/1.png" height="103" width="178"></p>
<p>&emsp;&emsp;构造一个复选框<code>QCheckBox</code>，然后使用<code>setTristate</code>开启三态模式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox *pCheckBox = <span class="keyword">new</span> QCheckBox ( <span class="keyword">this</span> );</span><br><span class="line">m_pLabel = <span class="keyword">new</span> QLabel ( <span class="keyword">this</span> );</span><br><span class="line">m_pLabel-&gt;setText ( <span class="string">"Click CheckBox..."</span> );</span><br><span class="line">pCheckBox-&gt;setText ( QString::fromLocal8Bit ( <span class="string">"三态复选框"</span> ) );</span><br><span class="line">pCheckBox-&gt;setTristate(); <span class="comment">/* 开启三态模式 */</span></span><br><span class="line"><span class="comment">/* 连接信号槽 */</span></span><br><span class="line">connect ( pCheckBox, SIGNAL ( stateChanged ( <span class="keyword">int</span> ) ), <span class="keyword">this</span>, SLOT ( onStateChanged ( <span class="keyword">int</span> ) ) );</span><br></pre></td></tr></table></figure>
<p>槽函数是用来判断当前复选框状态，其中包括选中(<code>Qt::Checked</code>)、半选(<code>Qt::PartiallyChecked</code>)、未选中(<code>Qt::Unchecked</code>)：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MainWindow::onStateChanged ( <span class="keyword">int</span> state ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( state == Qt::Checked ) &#123; <span class="comment">/* 选中 */</span></span><br><span class="line">        m_pLabel-&gt;setText ( <span class="string">"Checked"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( state == Qt::PartiallyChecked ) &#123; <span class="comment">/* 半选 */</span></span><br><span class="line">        m_pLabel-&gt;setText ( <span class="string">"PartiallyChecked"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">/* 未选中，即Qt::Unchecked */</span></span><br><span class="line">        m_pLabel-&gt;setText ( <span class="string">"Unchecked"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>连接<code>stateChanged</code>信号和槽函数，当用户点击复选框时，状态发生改变就会调用槽函数。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/02/18/Linux驱动程序/蜂鸣器驱动_字符设备/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/Linux驱动程序/蜂鸣器驱动_字符设备/" itemprop="url">蜂鸣器驱动_字符设备</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-18T10:29:25+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;电路图如下：</p>
<p><img src="/2019/02/18/Linux驱动程序/蜂鸣器驱动_字符设备/1.jpg" height="162" width="251"></p>
<p>&emsp;&emsp;<code>Linux-2.6.32.2</code>内核重要头文件目录如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/mach-s3c2410/include/mach/regs-gpio.h</span><br><span class="line">linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/mach-s3c2410/include/mach/gpio-nrs.h</span><br><span class="line">linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/plat-s3c24xx/gpio.c</span><br><span class="line">linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/include/linux/<span class="keyword">asm</span>-generic/io.h</span><br><span class="line">linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/include/linux/wait.h</span><br></pre></td></tr></table></figure>
<p>注意链接关系，例如出现<code>asm</code>，则链接之后的内容为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">asm</span>  -&gt; linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/include/linux/<span class="keyword">asm</span>-generic</span><br><span class="line">mach -&gt; linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/mach-s3c2410/include/mach</span><br><span class="line">plat -&gt; linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/plat-s3c24xx/include/plat</span><br><span class="line">        linux<span class="number">-2.6</span><span class="number">.32</span><span class="number">.2</span>/arch/arm/plat-s3c/include/plat</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>beep_drv.c</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/slab.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/input.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/init.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/serio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/delay.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/clk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/miscdevice.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/gpio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;asm/io.h&gt; /* 平台相关的文件 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;asm/irq.h&gt; /* 出现asm，它会连接到“linux-2.6.32.2/include/linux/asm-generic” */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;asm/uaccess.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mach/regs-clock.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;plat/regs-timer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 该文件在“linux-2.6.32.2/arch/arm/mach-s3c2410/include/mach/regs-gpio.h”中 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mach/regs-gpio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/cdev.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> beep_major = <span class="number">0</span>; <span class="comment">/* 全局主设备号 */</span></span><br><span class="line">module_param ( beep_major, <span class="keyword">int</span>, <span class="number">0</span> );</span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_MAGIC <span class="meta-string">'k'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_START_CMD _IO (BEEP_MAGIC, 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_STOP_CMD  _IO (BEEP_MAGIC, 2) <span class="comment">/* “_IO(type，nr)”用于构造无参数的命令编号 */</span></span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Open the device; in fact, there's nothing to do here */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">beep_open</span> <span class="params">( struct inode *inode, struct file *filp )</span> </span>&#123; <span class="comment">/* 没有用到，但必须保持完整性 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">ssize_t</span> beep_read ( struct file *file, <span class="keyword">char</span> __user *buff, <span class="keyword">size_t</span> count, <span class="keyword">loff_t</span> *offp ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">ssize_t</span> beep_write ( struct file *file, <span class="keyword">const</span> <span class="keyword">char</span> __user *buff, <span class="keyword">size_t</span> count, <span class="keyword">loff_t</span> *offp ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">beep_stop</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    s3c2410_gpio_cfgpin ( S3C2410_GPB ( <span class="number">0</span> ), S3C2410_GPIO_OUTPUT );</span><br><span class="line">    s3c2410_gpio_setpin ( S3C2410_GPB ( <span class="number">0</span> ), <span class="number">0</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">beep_start</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    s3c2410_gpio_pullup ( S3C2410_GPB ( <span class="number">0</span> ), <span class="number">1</span> ); <span class="comment">/* 上拉电阻 */</span></span><br><span class="line">    s3c2410_gpio_cfgpin ( S3C2410_GPB ( <span class="number">0</span> ), S3C2410_GPIO_OUTPUT ); <span class="comment">/* 配置 */</span></span><br><span class="line">    s3c2410_gpio_setpin ( S3C2410_GPB ( <span class="number">0</span> ), <span class="number">1</span> ); <span class="comment">/* 置位 */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">beep_ioctl</span> <span class="params">( struct inode *inode, struct file *file, <span class="keyword">unsigned</span> <span class="keyword">int</span> cmd, <span class="keyword">unsigned</span> <span class="keyword">long</span> arg )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> ( cmd ) &#123;</span><br><span class="line">        <span class="keyword">case</span> BEEP_START_CMD: &#123;</span><br><span class="line">            beep_start();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">case</span> BEEP_STOP_CMD: &#123;</span><br><span class="line">            beep_stop();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">default</span>: &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">beep_release</span> <span class="params">( struct inode *node, struct file *file )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Set up the cdev structure for a device */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beep_setup_cdev</span> <span class="params">( struct cdev *dev, <span class="keyword">int</span> minor, struct file_operations *fops )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> err, devno = MKDEV ( beep_major, minor ); <span class="comment">/* 由主次设备号生成设备号 */</span></span><br><span class="line">    cdev_init ( dev, fops ); <span class="comment">/* 初始化cdev */</span></span><br><span class="line">    dev-&gt;owner = THIS_MODULE;</span><br><span class="line">    dev-&gt;ops = fops;</span><br><span class="line">    err = cdev_add ( dev, devno, <span class="number">1</span> ); <span class="comment">/* 注册设备 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( err ) &#123; <span class="comment">/* Fail gracefully if need be */</span></span><br><span class="line">        printk ( KERN_NOTICE <span class="string">"Error %d adding beep%d"</span>, err, minor );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Our various sub-devices */</span></span><br><span class="line"><span class="comment">/* Device 0 uses remap_pfn_range */</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> <span class="title">beep_remap_ops</span> = &#123;</span> <span class="comment">/* file_operations的对象beep_remap_ops，并对其赋值 */</span></span><br><span class="line">    .owner   = THIS_MODULE, <span class="comment">/* 指向模块本身 */</span></span><br><span class="line">    .open    = beep_open, <span class="comment">/* 把open和beep_open函数关联起来 */</span></span><br><span class="line">    .release = beep_release,</span><br><span class="line">    .read    = beep_read,</span><br><span class="line">    .write   = beep_write,</span><br><span class="line">    .ioctl   = beep_ioctl,</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* There's no need for us to maintain any special housekeeping info, so we just deal with raw cdevs */</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">cdev</span> <span class="title">BeepDevs</span>;</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* Module housekeeping */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">beep_init</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123; <span class="comment">/* 模块加载时调用beep_init函数进行加载 */</span></span><br><span class="line">    <span class="keyword">int</span> result;</span><br><span class="line">    <span class="keyword">dev_t</span> dev = MKDEV ( beep_major, <span class="number">0</span> );</span><br><span class="line">    <span class="keyword">char</span> dev_name[] = <span class="string">"beep"</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* Figure out our device number */</span></span><br><span class="line">    <span class="keyword">if</span> ( beep_major ) &#123; <span class="comment">/* 设备号的分配 */</span></span><br><span class="line">        result = register_chrdev_region ( dev, <span class="number">1</span>, dev_name ); <span class="comment">/* 手工分配 */</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">/* 系统分配一个设备号，“0”表示第一个次设备号，“1”表示一个设备 */</span></span><br><span class="line">        result = alloc_chrdev_region ( &amp;dev, <span class="number">0</span>, <span class="number">1</span>, dev_name );</span><br><span class="line">        beep_major = MAJOR ( dev ); <span class="comment">/* 取得主设备号 */</span></span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( result &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        printk ( KERN_WARNING <span class="string">"beep: unable to get major %d\n"</span>, beep_major );</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( beep_major == <span class="number">0</span> ) &#123;</span><br><span class="line">        beep_major = result;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* Now set up cdev */</span></span><br><span class="line">    beep_setup_cdev ( &amp;BeepDevs, <span class="number">0</span>, &amp;beep_remap_ops );</span><br><span class="line">    printk ( <span class="string">"beep device installed, with major %d\n"</span>, beep_major );</span><br><span class="line">    printk ( <span class="string">"The device name is: %s\n"</span>, dev_name );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beep_cleanup</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123; <span class="comment">/* 模块卸载时调用beep_cleanup函数进行清除 */</span></span><br><span class="line">    cdev_del ( &amp;BeepDevs ); <span class="comment">/* 注销设备 */</span></span><br><span class="line">    unregister_chrdev_region ( MKDEV ( beep_major, <span class="number">0</span> ), <span class="number">1</span> ); <span class="comment">/* 释放占用的设备号 */</span></span><br><span class="line">    printk ( <span class="string">"beep device uninstalled\n"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">module_init ( beep_init ); <span class="comment">/* 模块加载时调用beep_init函数进行加载 */</span></span><br><span class="line">module_exit ( beep_cleanup ); <span class="comment">/* 模块卸载时调用beep_cleanup函数进行清除 */</span></span><br><span class="line">EXPORT_SYMBOL ( beep_major );</span><br><span class="line">MODULE_LICENSE ( <span class="string">"Dual BSD/GPL"</span> );</span><br></pre></td></tr></table></figure>
<p>相应的<code>Makefile</code>文件如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CROSS_COMPILE := arm-linux-</span><br><span class="line">CC :=<span class="variable">$(CROSS_COMPILE)</span>gcc</span><br><span class="line">KERNEL_DIR := /home/linux-2.6.32.2</span><br><span class="line"></span><br><span class="line">obj-m := beep_drv.o</span><br><span class="line"></span><br><span class="line">PWD := <span class="variable">$(<span class="built_in">shell</span> pwd)</span></span><br><span class="line"><span class="section">all:</span></span><br><span class="line">    make -C <span class="variable">$(KERNEL_DIR)</span> M=<span class="variable">$(PWD)</span> modules</span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -fr *.o *.ko *.mod.o *.mod.c .*.cmd *.order *.*s *~ .tmp*</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;创建设备节点的命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mknod /dev/node_name c major minor  <span class="comment"># 这里的node_name为beep</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;测试程序如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/ioctl.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_MAGIC <span class="meta-string">'k'</span> <span class="comment">/* 宏是和驱动里一样的 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_START_CMD _IO (BEEP_MAGIC, 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BEEP_STOP_CMD  _IO (BEEP_MAGIC, 2)</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> dev_fd;</span><br><span class="line">    <span class="comment">/* 打开设备文件可读可写、非阻塞 */</span></span><br><span class="line">    dev_fd = open ( <span class="string">"/dev/beep"</span>, O_RDWR | O_NONBLOCK );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( dev_fd == <span class="number">-1</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span> ( <span class="string">"Cann't open file /dev/beep\n"</span> );</span><br><span class="line">        <span class="built_in">exit</span> ( <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"Start beep\n"</span> );</span><br><span class="line">    ioctl ( dev_fd, BEEP_START_CMD, <span class="number">0</span> );</span><br><span class="line">    getchar();</span><br><span class="line">    ioctl ( dev_fd, BEEP_STOP_CMD, <span class="number">0</span> );</span><br><span class="line">    <span class="built_in">printf</span> ( <span class="string">"Stop beep and Close device\n"</span> );</span><br><span class="line">    close ( dev_fd ); <span class="comment">/* 关闭设备文件 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编写其<code>Makefile</code>文件：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">KERNELKDIR ?= /opt/linux-2.6.32.2/<span class="keyword">include</span></span><br><span class="line">​</span><br><span class="line"><span class="section">all: test</span></span><br><span class="line"><span class="section">test: test.c</span></span><br><span class="line">    arm-linux-gcc -I <span class="variable">$(KERNELDIR)</span> -o S@ S^  <span class="comment"># “-I $(KERNELDIR)”表示包含头文件</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -rf test</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/18/Linux驱动程序/蜂鸣器驱动_字符设备/2.jpg" height="255" width="304"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/20/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/96/">96</a><a class="extend next" rel="next" href="/page/22/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">955</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
