<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="泥腿子出身">
<meta property="og:url" content="http://fukangwei.gitee.io/page/51/index.html">
<meta property="og:site_name" content="泥腿子出身">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="泥腿子出身">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/51/">





  <title>泥腿子出身</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">泥腿子出身</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/23/Qt语法详解/Qt之QTcpServer/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/23/Qt语法详解/Qt之QTcpServer/" itemprop="url">Qt之QTcpServer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-23T13:09:25+08:00">
                2019-01-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QTcpServer</code> class provides a <code>TCP-based</code> server.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QTcpServer</code></td>
<td><code>QObject</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: All functions in this class are reentrant.</p>
<p>Public Functions</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QTcpServer(QObject * parent = 0)</code></td>
</tr>
<tr>
<td><code>virtual</code></td>
<td><code>~QTcpServer()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>close()</code></td>
</tr>
<tr>
<td><code>QString</code></td>
<td><code>errorString() const</code></td>
</tr>
<tr>
<td><code>virtual bool</code></td>
<td><code>hasPendingConnections() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>isListening() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>listen(const QHostAddress &amp; address = QHostAddress::Any, quint16 port = 0)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>maxPendingConnections() const</code></td>
</tr>
<tr>
<td><code>virtual QTcpSocket *</code></td>
<td><code>nextPendingConnection()</code></td>
</tr>
<tr>
<td><code>QNetworkProxy</code></td>
<td><code>proxy() const</code></td>
</tr>
<tr>
<td><code>QHostAddress</code></td>
<td><code>serverAddress() const</code></td>
</tr>
<tr>
<td><code>QAbstractSocket::SocketError</code></td>
<td><code>serverError() const</code></td>
</tr>
<tr>
<td><code>quint16</code></td>
<td><code>serverPort() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setMaxPendingConnections(int numConnections)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setProxy(const QNetworkProxy &amp; networkProxy)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>setSocketDescriptor(int socketDescriptor)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>socketDescriptor() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>waitForNewConnection(int msec = 0, bool * timedOut = 0)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h3><ul>
<li><code>void newConnection()</code></li>
</ul>
<h3 id="Protected-Functions"><a href="#Protected-Functions" class="headerlink" title="Protected Functions"></a>Protected Functions</h3><ul>
<li><code>void addPendingConnection(QTcpSocket * socket)</code></li>
<li><code>virtual void incomingConnection(int socketDescriptor)</code></li>
</ul>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QTcpServer</code> class provides a <code>TCP-based</code> server.<br>&emsp;&emsp;This class makes it possible to accept incoming <code>TCP</code> connections. You can specify the port or have <code>QTcpServer</code> pick one automatically. You can listen on a specific address or on all the machine’s addresses.<br>&emsp;&emsp;Call <code>listen()</code> to have the server listen for incoming connections. The <code>newConnection()</code> signal is then emitted each time a client connects to the server.<br>&emsp;&emsp;Call <code>nextPendingConnection()</code> to accept the pending connection as a connected <code>QTcpSocket</code>. The function returns a pointer to a <code>QTcpSocket</code> in <code>QAbstractSocket::ConnectedState</code> that you can use for communicating with the client.<br>&emsp;&emsp;If an error occurs, <code>serverError()</code> returns the type of error, and <code>errorString()</code> can be called to get a human readable description of what happened.<br>&emsp;&emsp;When listening for connections, the address and port on which the server is listening are available as <code>serverAddress()</code> and <code>serverPort()</code>.<br>&emsp;&emsp;Calling <code>close()</code> makes <code>QTcpServer</code> stop listening for incoming connections.<br>&emsp;&emsp;Although <code>QTcpServer</code> is mostly designed for use with an event loop, it’s possible to use it without one. In that case, you must use <code>waitForNewConnection()</code>, which blocks until either a connection is available or a timeout expires.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QTcpServer::QTcpServer(QObject * parent = 0)</code>: Constructs a <code>QTcpServer</code> object. parent is passed to the <code>QObject</code> constructor.</li>
<li><code>QTcpServer::~QTcpServer() [virtual]</code>: Destroys the <code>QTcpServer</code> object. If the server is listening for connections, the socket is automatically closed. Any client <code>QTcpSockets</code> that are still connected must either disconnect or be reparented before the server is deleted.</li>
<li><code>void QTcpServer::addPendingConnection(QTcpSocket * socket) [protected]</code>: This function is called by <code>QTcpServer::incomingConnection()</code> to add the <code>socket</code> to the list of pending incoming connections. <strong>Note</strong>: Don’t forget to call this member from reimplemented <code>incomingConnection()</code> if you do not want to break the Pending Connections mechanism.</li>
<li><code>void QTcpServer::close()</code>: Closes the server. The server will no longer listen for incoming connections.</li>
<li><code>QString QTcpServer::errorString() const</code>: Returns a human readable description of the last error that occurred.</li>
<li><code>bool QTcpServer::hasPendingConnections() const [virtual]</code>: Returns <code>true</code> if the server has a pending connection; otherwise returns <code>false</code>.</li>
<li><code>void QTcpServer::incomingConnection(int socketDescriptor) [virtual protected]</code>: This virtual function is called by <code>QTcpServer</code> when a new connection is available. The <code>socketDescriptor</code> argument is the native socket descriptor for the accepted connection. The base implementation creates a <code>QTcpSocket</code>, sets the socket descriptor and then stores the <code>QTcpSocket</code> in an internal list of pending connections. Finally <code>newConnection()</code> is emitted. Reimplement this function to alter the server’s behavior when a connection is available. If this server is using <code>QNetworkProxy</code> then the <code>socketDescriptor</code> may not be usable with native socket functions, and should only be used with <code>QTcpSocket::setSocketDescriptor()</code>. <strong>Note</strong>: If you want to handle an incoming connection as a new <code>QTcpSocket</code> object in another thread you have to pass the <code>socketDescriptor</code> to the other thread and create the <code>QTcpSocket</code> object there and use its <code>setSocketDescriptor()</code> method.</li>
<li><code>bool QTcpServer::isListening() const</code>: Returns <code>true</code> if the server is currently listening for incoming connections; otherwise returns <code>false</code>.</li>
<li><code>bool QTcpServer::listen(const QHostAddress &amp; address = QHostAddress::Any, quint16 port = 0)</code>: Tells the server to listen for incoming connections on <code>address</code> and <code>port</code>. If <code>port</code> is <code>0</code>, a <code>port</code> is chosen automatically. If <code>address</code> is <code>QHostAddress::Any</code>, the server will listen on all network interfaces. Returns <code>true</code> on success; otherwise returns <code>false</code>.</li>
<li><code>int QTcpServer::maxPendingConnections() const</code>: Returns the maximum number of pending accepted connections. The default is <code>30</code>.</li>
<li><code>void QTcpServer::newConnection() [signal]</code>: This <code>signal</code> is emitted every time a new connection is available.</li>
<li><code>QTcpSocket * QTcpServer::nextPendingConnection() [virtual]</code>: Returns the next pending connection as a connected <code>QTcpSocket</code> object. The socket is created as a child of the server, which means that it is automatically deleted when the <code>QTcpServer</code> object is destroyed. It is still a good idea to delete the object explicitly when you are done with it, to avoid wasting memory. <code>0</code> is returned if this function is called when there are no pending connections. <strong>Note</strong>: The returned <code>QTcpSocket</code> object cannot be used from another thread. If you want to use an incoming connection from another thread, you need to override <code>incomingConnection()</code>.</li>
<li><code>QNetworkProxy QTcpServer::proxy() const</code>: Returns the network proxy for this socket. By default <code>QNetworkProxy::DefaultProxy</code> is used.</li>
<li><code>QHostAddress QTcpServer::serverAddress() const</code>: Returns the server’s address if the server is listening for connections; otherwise returns <code>QHostAddress::Null</code>.</li>
<li><code>QAbstractSocket::SocketError QTcpServer::serverError() const</code>: Returns an error code for the last error that occurred.</li>
<li><code>quint16 QTcpServer::serverPort() const</code>: Returns the server’s port if the server is listening for connections; otherwise returns <code>0</code>.</li>
<li><code>void QTcpServer::setMaxPendingConnections(int numConnections)</code>: Sets the maximum number of pending accepted connections to <code>numConnections</code>. <code>QTcpServer</code> will accept no more than <code>numConnections</code> incoming connections before <code>nextPendingConnection()</code> is called. By default, the limit is <code>30</code> pending connections. Clients may still able to connect after the server has reached its maximum number of pending connections (i.e., <code>QTcpSocket</code> can still emit the <code>connected()</code> signal). <code>QTcpServer</code> will stop accepting the new connections, but the operating system may still keep them in queue.</li>
<li><code>void QTcpServer::setProxy(const QNetworkProxy &amp; networkProxy)</code>: Sets the explicit network proxy for this socket to <code>networkProxy</code>. To disable the use of a proxy for this socket, use the <code>QNetworkProxy::NoProxy</code> proxy type:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server-&gt;setProxy ( QNetworkProxy::NoProxy );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>bool QTcpServer::setSocketDescriptor(int socketDescriptor)</code>: Sets the socket descriptor this server should use when listening for incoming connections to <code>socketDescriptor</code>. Returns <code>true</code> if the socket is set successfully; otherwise returns <code>false</code>. The socket is assumed to be in listening state.</li>
<li><code>int QTcpServer::socketDescriptor() const</code>: Returns the native socket descriptor the server uses to listen for incoming instructions, or <code>-1</code> if the server is not listening. If the server is using <code>QNetworkProxy</code>, the returned descriptor may not be usable with native socket functions.</li>
<li><code>bool QTcpServer::waitForNewConnection(int msec = 0, bool * timedOut = 0)</code>: Waits for at most <code>msec</code> milliseconds or until an incoming connection is available. Returns <code>true</code> if a connection is available; otherwise returns <code>false</code>. If the operation timed out and <code>timedOut</code> is not <code>0</code>, <code>*timedOut</code> will be set to <code>true</code>. This is a blocking function call. Its use is disadvised in a <code>single-threaded</code> <code>GUI</code> application, since the whole application will stop responding until the function returns. <code>waitForNewConnection()</code> is mostly useful when there is no event loop available. The <code>non-blocking</code> alternative is to connect to the <code>newConnection()</code> signal. If <code>msec</code> is <code>-1</code>, this function will not time out.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/23/Qt语法详解/Qt之QTextBlockFormat/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/23/Qt语法详解/Qt之QTextBlockFormat/" itemprop="url">Qt之QTextBlockFormat</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-23T10:19:56+08:00">
                2019-01-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QTextBlockFormat</code> class provides formatting information for blocks of text in a <code>QTextDocument</code>.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QTextBlockFormat</code></td>
<td><code>QTextFormat</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: All functions in this class are reentrant.</p>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QTextBlockFormat()</code></td>
</tr>
<tr>
<td><code>Qt::Alignment</code></td>
<td><code>alignment() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>bottomMargin() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>indent() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>isValid() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>leftMargin() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>lineHeight(qreal scriptLineHeight, qreal scaling) const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>lineHeight() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>lineHeightType() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>nonBreakableLines() const</code></td>
</tr>
<tr>
<td><code>PageBreakFlags</code></td>
<td><code>pageBreakPolicy() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>rightMargin() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setAlignment(Qt::Alignment alignment)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setBottomMargin(qreal margin)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setIndent(int indentation)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setLeftMargin(qreal margin)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setLineHeight(qreal height, int heightType)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setNonBreakableLines(bool b)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPageBreakPolicy(PageBreakFlags policy)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setRightMargin(qreal margin)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setTabPositions(const QList&lt;QTextOption::Tab&gt; &amp; tabs)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setTextIndent(qreal indent)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setTopMargin(qreal margin)</code></td>
</tr>
<tr>
<td><code>QList&lt;QTextOption::Tab&gt;</code></td>
<td><code>tabPositions() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>textIndent() const</code></td>
</tr>
<tr>
<td><code>qreal</code></td>
<td><code>topMargin() const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QTextBlockFormat</code> class provides formatting information for blocks of text in a <code>QTextDocument</code>.<br>&emsp;&emsp;A document is composed of a list of blocks, represented by <code>QTextBlock</code> objects. Each block can contain an item of some kind, such as a paragraph of text, a table, a list, or an image. Every block has an associated <code>QTextBlockFormat</code> that specifies its characteristics.<br>&emsp;&emsp;To cater for <code>left-to-right</code> and <code>right-to-left</code> languages you can set a block’s direction with <code>setDirection()</code>. Paragraph alignment is set with <code>setAlignment()</code>. Margins are controlled by <code>setTopMargin()</code>, <code>setBottomMargin()</code>, <code>setLeftMargin()</code>, <code>setRightMargin()</code>. Overall indentation is set with <code>setIndent()</code>, the indentation of the first line with <code>setTextIndent()</code>.<br>&emsp;&emsp;Line spacing is set with <code>setLineHeight()</code> and retrieved via <code>lineHeight()</code> and <code>lineHeightType()</code>. The types of line spacing available are in the <code>LineHeightTypes</code> enum.<br>&emsp;&emsp;Line breaking can be enabled and disabled with <code>setNonBreakableLines()</code>.<br>&emsp;&emsp;The brush used to paint the paragraph’s background is set with <code>setBackground()</code>, and other aspects of the text’s appearance can be customized by using the <code>setProperty()</code> function with the <code>OutlinePen</code>, <code>ForegroundBrush</code>, and <code>BackgroundBrush</code> <code>QTextFormat::Property</code> values.<br>&emsp;&emsp;If a text block is part of a list, it can also have a list format that is accessible with the <code>listFormat()</code> function.</p>
<h3 id="Member-Type-Documentation"><a href="#Member-Type-Documentation" class="headerlink" title="Member Type Documentation"></a>Member Type Documentation</h3><p>&emsp;&emsp;enum <code>QTextBlockFormat::LineHeightTypes</code>: This enum describes the various types of line spacing support paragraphs can have.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QTextBlockFormat::SingleHeight</code></td>
<td><code>0</code></td>
<td>This is the default line height: single spacing.</td>
</tr>
<tr>
<td><code>QTextBlockFormat::ProportionalHeight</code></td>
<td><code>1</code></td>
<td>This sets the spacing proportional to the line (in percentage). For example, set to <code>200</code> for double spacing.</td>
</tr>
<tr>
<td><code>QTextBlockFormat::FixedHeight</code></td>
<td><code>2</code></td>
<td>This sets the line height to a fixed line height (in pixels).</td>
</tr>
<tr>
<td><code>QTextBlockFormat::MinimumHeight</code></td>
<td><code>3</code></td>
<td>This sets the minimum line height (in pixels).</td>
</tr>
<tr>
<td><code>QTextBlockFormat::LineDistanceHeight</code></td>
<td><code>4</code></td>
<td>This adds the specified height between lines (in pixels).</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QTextBlockFormat::QTextBlockFormat()</code>: Constructs a new <code>QTextBlockFormat</code>.</li>
<li><code>Qt::Alignment QTextBlockFormat::alignment() const</code>: Returns the paragraph’s alignment.</li>
<li><code>qreal QTextBlockFormat::bottomMargin() const</code>: Returns the paragraph’s bottom margin.</li>
<li><code>int QTextBlockFormat::indent() const</code>: Returns the paragraph’s indent.</li>
<li><code>bool QTextBlockFormat::isValid() const</code>: Returns <code>true</code> if this block format is valid; otherwise returns <code>false</code>.</li>
<li><code>qreal QTextBlockFormat::leftMargin() const</code>: Returns the paragraph’s left margin.</li>
<li><code>qreal QTextBlockFormat::lineHeight(qreal scriptLineHeight, qreal scaling) const</code>: Returns the height of the lines in the paragraph based on the height of the script line given by <code>scriptLineHeight</code> and the specified <code>scaling</code> factor. The value that is returned is also dependent on the given <code>LineHeightType</code> of the paragraph as well as the <code>LineHeight</code> setting that has been set for the paragraph. The scaling is needed for heights that include a fixed number of pixels, to scale them appropriately for printing.</li>
<li><code>qreal QTextBlockFormat::lineHeight() const</code>: This returns the <code>LineHeight</code> property for the paragraph.</li>
<li><code>int QTextBlockFormat::lineHeightType() const</code>: This returns the <code>LineHeightType</code> property of the paragraph.</li>
<li><code>bool QTextBlockFormat::nonBreakableLines() const</code>: Returns <code>true</code> if the lines in the paragraph are <code>non-breakable</code>; otherwise returns <code>false</code>.</li>
<li><code>PageBreakFlags QTextBlockFormat::pageBreakPolicy() const</code>: Returns the currently set page break policy for the paragraph. The default is <code>QTextFormat::PageBreak_Auto</code>.</li>
<li><code>qreal QTextBlockFormat::rightMargin() const</code>: Returns the paragraph’s right margin.</li>
<li><code>void QTextBlockFormat::setAlignment(Qt::Alignment alignment)</code>: Sets the paragraph’s <code>alignment</code>.</li>
<li><code>void QTextBlockFormat::setBottomMargin(qreal margin)</code>: Sets the paragraph’s bottom <code>margin</code>.</li>
<li><code>void QTextBlockFormat::setIndent(int indentation)</code>: Sets the paragraph’s <code>indentation</code>. Margins are set independently of <code>indentation</code> with <code>setLeftMargin()</code> and <code>setTextIndent()</code>. The <code>indentation</code> is an integer that is multiplied with the <code>document-wide</code> standard indent, resulting in the actual indent of the paragraph.</li>
<li><code>void QTextBlockFormat::setLeftMargin(qreal margin)</code>: Sets the paragraph’s left <code>margin</code>. Indentation can be applied separately with <code>setIndent()</code>.</li>
<li><code>void QTextBlockFormat::setLineHeight(qreal height, int heightType)</code>: Sets the line <code>height</code> for the paragraph to the value given by <code>height</code> which is dependent on <code>heightType</code> in the way described by the <code>LineHeightTypes</code> enum.</li>
<li><code>void QTextBlockFormat::setNonBreakableLines(bool b)</code>: If <code>b</code> is <code>true</code>, the lines in the paragraph are treated as <code>non-breakable</code>; otherwise they are breakable.</li>
<li><code>void QTextBlockFormat::setPageBreakPolicy(PageBreakFlags policy)</code> — Sets the page break <code>policy</code> for the paragraph to <code>policy</code>.</li>
<li><code>void QTextBlockFormat::setRightMargin(qreal margin)</code>: Sets the paragraph’s right <code>margin</code>.</li>
<li><code>void QTextBlockFormat::setTabPositions(const QList&lt;QTextOption::Tab&gt; &amp; tabs)</code>: Sets the tab positions for the text block to those specified by <code>tabs</code>.</li>
<li><code>void QTextBlockFormat::setTextIndent(qreal indent)</code>: Sets the <code>indent</code> for the first line in the block. This allows the first line of a paragraph to be indented differently to the other lines, enhancing the readability of the text.</li>
<li><code>void QTextBlockFormat::setTopMargin(qreal margin)</code>: Sets the paragraph’s top <code>margin</code>.</li>
<li><code>QList&lt;QTextOption::Tab&gt; QTextBlockFormat::tabPositions() const</code>: Returns a list of tab positions defined for the text block.</li>
<li><code>qreal QTextBlockFormat::textIndent() const</code>: Returns the paragraph’s text indent.</li>
<li><code>qreal QTextBlockFormat::topMargin() const</code>: Returns the paragraph’s top margin.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Qt语法详解/Qt之QDrag/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Qt语法详解/Qt之QDrag/" itemprop="url">Qt之QDrag</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T18:17:51+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QDrag</code> class provides support for <code>MIME-based</code> drag and drop data transfer.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QDrag</code></td>
<td><code>QObject</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QDrag(QWidget * dragSource)</code></td>
</tr>
<tr>
<td></td>
<td><code>~QDrag()</code></td>
</tr>
<tr>
<td><code>Qt::DropAction</code></td>
<td><code>exec(Qt::DropActions supportedActions = Qt::MoveAction)</code></td>
</tr>
<tr>
<td><code>Qt::DropAction</code></td>
<td><code>exec(Qt::DropActions supportedActions, Qt::DropAction defaultDropAction)</code></td>
</tr>
<tr>
<td><code>QPoint</code></td>
<td><code>hotSpot() const</code></td>
</tr>
<tr>
<td><code>QMimeData *</code></td>
<td><code>mimeData() const</code></td>
</tr>
<tr>
<td><code>QPixmap</code></td>
<td><code>pixmap() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setDragCursor(const QPixmap &amp; cursor, Qt::DropAction action)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setHotSpot(const QPoint &amp; hotspot)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setMimeData(QMimeData * data)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setPixmap(const QPixmap &amp; pixmap)</code></td>
</tr>
<tr>
<td><code>QWidget *</code></td>
<td><code>source() const</code></td>
</tr>
<tr>
<td><code>QWidget *</code></td>
<td><code>target() const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h3><ul>
<li><code>void actionChanged(Qt::DropAction action)</code></li>
<li><code>void targetChanged(QWidget * newTarget)</code></li>
</ul>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QDrag</code> class provides support for <code>MIME-based</code> drag and drop data transfer.<br>&emsp;&emsp;<code>Drag</code> and drop is an intuitive way for users to copy or move data around in an application, and is used in many desktop environments as a mechanism for copying data between applications. <code>Drag</code> and drop support in <code>Qt</code> is centered around the <code>QDrag</code> class that handles most of the details of a drag and drop operation.<br>&emsp;&emsp;The data to be transferred by the drag and drop operation is contained in a <code>QMimeData</code> object. This is specified with the <code>setMimeData()</code> function in the following way:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QDrag *drag = <span class="keyword">new</span> QDrag ( <span class="keyword">this</span> );</span><br><span class="line">QMimeData *mimeData = <span class="keyword">new</span> QMimeData;</span><br><span class="line">​</span><br><span class="line">mimeData-&gt;setText ( commentEdit-&gt;toPlainText() );</span><br><span class="line">drag-&gt;setMimeData ( mimeData );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Note that <code>setMimeData()</code> assigns ownership of the <code>QMimeData</code> object to the <code>QDrag</code> object. The <code>QDrag</code> must be constructed on the heap with a parent <code>QWidget</code> to ensure that <code>Qt</code> can clean up after the drag and drop operation has been completed.<br>&emsp;&emsp;A pixmap can be used to represent the data while the drag is in progress, and will move with the cursor to the drop target. This pixmap typically shows an icon that represents the <code>MIME</code> type of the data being transferred, but any pixmap can be set with <code>setPixmap()</code>. The cursor’s hot spot can be given a position relative to the <code>top-left</code> corner of the pixmap with the <code>setHotSpot()</code> function. The following code positions the pixmap so that the cursor’s hot spot points to the center of its bottom edge:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drag-&gt;setHotSpot ( QPoint ( drag-&gt;pixmap().width() / <span class="number">2</span>, drag-&gt;pixmap().height() ) );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<strong>Note</strong>: On <code>X11</code>, the pixmap may not be able to keep up with the mouse movements if the hot spot causes the pixmap to be displayed directly under the cursor.<br>&emsp;&emsp;The source and target widgets can be found with <code>source()</code> and <code>target()</code>. These functions are often used to determine whether drag and drop operations started and finished at the same widget, so that special behavior can be implemented.<br>&emsp;&emsp;<code>QDrag</code> only deals with the drag and drop operation itself. It is up to the developer to decide when a drag operation begins, and how a <code>QDrag</code> object should be constructed and used. For a given widget, it is often necessary to reimplement <code>mousePressEvent()</code> to determine whether the user has pressed a mouse button, and reimplement <code>mouseMoveEvent()</code> to check whether a <code>QDrag</code> is required.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QDrag::QDrag(QWidget * dragSource)</code>: Constructs a new drag object for the widget specified by <code>dragSource</code>.</li>
<li><code>QDrag::~QDrag()</code>: Destroys the drag object.</li>
<li><code>void QDrag::actionChanged(Qt::DropAction action) [signal]</code>: This <code>signal</code> is emitted when the <code>action</code> associated with the drag changes.</li>
<li><code>Qt::DropAction QDrag::exec(Qt::DropActions supportedActions = Qt::MoveAction)</code>: Starts the drag and drop operation and returns a value indicating the requested drop action when it is completed. The drop actions that the user can choose from are specified in <code>supportedActions</code>. The default proposed action will be selected among the allowed actions in the following order: <code>Move</code>, <code>Copy</code> and <code>Link</code>. <strong>Note</strong>: On <code>Linux</code> and <code>Mac OS X</code>, the drag and drop operation can take some time, but this function does not block the event loop. Other events are still delivered to the application while the operation is performed. On <code>Windows</code>, the <code>Qt</code> event loop is blocked while during the operation.</li>
<li><code>Qt::DropAction QDrag::exec(Qt::DropActions supportedActions, Qt::DropAction defaultDropAction)</code>: Starts the drag and drop operation and returns a value indicating the requested drop action when it is completed. The drop actions that the user can choose from are specified in <code>supportedActions</code>. The <code>defaultDropAction</code> determines which action will be proposed when the user performs a drag without using modifier keys. <strong>Note</strong>: On <code>Linux</code> and <code>Mac OS X</code>, the drag and drop operation can take some time, but this function does not block the event loop. Other events are still delivered to the application while the operation is performed. On <code>Windows</code>, the <code>Qt</code> event loop is blocked during the operation. However, <code>QDrag::exec()</code> on <code>Windows</code> causes <code>processEvents()</code> to be called frequently to keep the <code>GUI</code> responsive. If any loops or operations are called while a drag operation is active, it will block the drag operation.</li>
<li><code>QPoint QDrag::hotSpot() const</code>: Returns the position of the hot spot relative to the <code>top-left</code> corner of the cursor.</li>
<li><code>QMimeData * QDrag::mimeData() const</code>: Returns the <code>MIME</code> data that is encapsulated by the drag object.</li>
<li><code>QPixmap QDrag::pixmap() const</code>: Returns the pixmap used to represent the data in a drag and drop operation.</li>
<li><code>void QDrag::setDragCursor(const QPixmap &amp; cursor, Qt::DropAction action)</code>: Sets the drag <code>cursor</code> for the <code>action</code>. This allows you to override the default native cursors. To revert to using the native <code>cursor</code> for <code>action</code> pass in a null <code>QPixmap</code> as <code>cursor</code>. The <code>action</code> can only be <code>CopyAction</code>, <code>MoveAction</code> or <code>LinkAction</code>. All other values of <code>DropAction</code> are ignored.</li>
<li><code>void QDrag::setHotSpot(const QPoint &amp; hotspot)</code>: Sets the position of the hot spot relative to the <code>top-left</code> corner of the pixmap used to the point specified by <code>hotspot</code>. <strong>Note</strong>: on <code>X11</code>, the pixmap may not be able to keep up with the mouse movements if the hot spot causes the pixmap to be displayed directly under the cursor.</li>
<li><code>void QDrag::setMimeData(QMimeData * data)</code>: Sets the <code>data</code> to be sent to the given <code>MIME</code> data. Ownership of the data is transferred to the <code>QDrag</code> object.</li>
<li><code>void QDrag::setPixmap(const QPixmap &amp; pixmap)</code>: Sets <code>pixmap</code> as the <code>pixmap</code> used to represent the data in a drag and drop operation. You can only set a <code>pixmap</code> before the drag is started.</li>
<li><code>QWidget * QDrag::source() const</code>: Returns the source of the drag object. This is the widget where the drag and drop operation originated.</li>
<li><code>QWidget * QDrag::target() const</code>: Returns the target of the drag and drop operation. This is the widget where the drag object was dropped.</li>
<li><code>void QDrag::targetChanged(QWidget * newTarget) [signal]</code>: This <code>signal</code> is emitted when the target of the drag and drop operation changes, with <code>newTarget</code> the new target.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Qt语法详解/Qt之QButtonGroup/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Qt语法详解/Qt之QButtonGroup/" itemprop="url">Qt之QButtonGroup</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T17:30:34+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QButtonGroup</code> class provides a container to organize groups of button widgets.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QButtonGroup</code></td>
<td><code>QObject</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QButtonGroup(QObject * parent = 0)</code></td>
</tr>
<tr>
<td></td>
<td><code>~QButtonGroup()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>addButton(QAbstractButton * button)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>addButton(QAbstractButton * button, int id)</code></td>
</tr>
<tr>
<td><code>QAbstractButton *</code></td>
<td><code>button(int id) const</code></td>
</tr>
<tr>
<td><code>QList&lt;QAbstractButton *&gt;</code></td>
<td><code>buttons() const</code></td>
</tr>
<tr>
<td><code>QAbstractButton *</code></td>
<td><code>checkedButton() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>checkedId() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>exclusive() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>id(QAbstractButton * button) const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>removeButton(QAbstractButton * button)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setExclusive(bool)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setId(QAbstractButton * button, int id)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h3><ul>
<li><code>void buttonClicked ( QAbstractButton *button );</code></li>
<li><code>void buttonClicked ( int id );</code></li>
<li><code>void buttonPressed ( QAbstractButton *button );</code></li>
<li><code>void buttonPressed ( int id );</code></li>
<li><code>void buttonReleased ( QAbstractButton *button );</code></li>
<li><code>void buttonReleased ( int id );</code></li>
</ul>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QButtonGroup</code> class provides a container to organize groups of button widgets.<br>&emsp;&emsp;<code>QButtonGroup</code> provides an abstract container into which button widgets can be placed. It does not provide a visual representation of this container (see <code>QGroupBox</code> for a container widget), but instead manages the states of each of the buttons in the group.<br>&emsp;&emsp;An exclusive button group switches off all checkable (toggle) buttons except the one that was clicked. By default, a button group is exclusive. The buttons in a button group are usually checkable <code>QPushButton&#39;s</code>, <code>QCheckBoxes</code> (normally for <code>non-exclusive</code> button groups), or <code>QRadioButtons</code>. If you create an exclusive button group, you should ensure that one of the buttons in the group is initially checked; otherwise, the group will initially be in a state where no buttons are checked.<br>&emsp;&emsp;A button is added to the group with <code>addButton()</code>. It can be removed from the group with <code>removeButton()</code>. If the group is exclusive, the currently checked button is available as <code>checkedButton()</code>. If a button is clicked the <code>buttonClicked()</code> signal is emitted. For a checkable button in an exclusive group this means that the button was checked. The list of buttons in the group is returned by <code>buttons()</code>.<br>&emsp;&emsp;In addition, <code>QButtonGroup</code> can map between integers and buttons. You can assign an integer id to a button with <code>setId()</code>, and retrieve it with <code>id()</code>. The id of the currently checked button is available with <code>checkedId()</code>, and there is an overloaded signal <code>buttonClicked()</code> which emits the id of the button. The id <code>-1</code> is reserved by <code>QButtonGroup</code> to mean <code>no such button</code>. The purpose of the mapping mechanism is to simplify the representation of enum values in a user interface.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QButtonGroup::QButtonGroup(QObject * parent = 0)</code>: Constructs a new, empty button group with the given <code>parent</code>.</li>
<li><code>QButtonGroup::~QButtonGroup()</code>: Destroys the button group.</li>
<li><code>void QButtonGroup::addButton(QAbstractButton * button)</code>: Adds the given <code>button</code> to the end of the group’s internal list of buttons. An id will be assigned to the <code>button</code> by this QButtonGroup. Automatically assigned ids are guaranteed to be negative, starting with <code>-2</code>. If you are also assigning your own ids, use positive values to avoid conflicts.</li>
<li><code>void QButtonGroup::addButton(QAbstractButton * button, int id)</code>: Adds the given <code>button</code> to the <code>button</code> group, with the given <code>id</code>. It is recommended to assign only positive ids.</li>
<li><code>QAbstractButton * QButtonGroup::button(int id) const</code>: Returns the button with the specified <code>id</code>, or <code>0</code> if no such button exists.</li>
<li><code>void QButtonGroup::buttonClicked(QAbstractButton * button) [signal]</code>: This <code>signal</code> is emitted when the given <code>button</code> is clicked. A <code>button</code> is clicked when it is first pressed and then released, when its shortcut key is typed, or programmatically when <code>QAbstractButton::click()</code> or <code>QAbstractButton::animateClick()</code> is called. <strong>Note</strong>: <code>Signal</code> buttonClicked is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( QAbstractButton * ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonClicked ), [ = ] ( QAbstractButton *button ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QButtonGroup::buttonClicked(int id) [signal]</code>: This <code>signal</code> is emitted when a button with the given <code>id</code> is clicked. <strong>Note</strong>: <code>Signal</code> buttonClicked is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( <span class="keyword">int</span> ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonClicked ), [ = ] ( <span class="keyword">int</span> id ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QButtonGroup::buttonPressed(QAbstractButton * button) [signal]</code>: This <code>signal</code> is emitted when the given <code>button</code> is pressed down. <strong>Note</strong>: <code>Signal</code> buttonPressed is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( QAbstractButton * ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonPressed ), [ = ] ( QAbstractButton *button ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QButtonGroup::buttonPressed(int id) [signal]</code>: This <code>signal</code> is emitted when a <code>button</code> with the given <code>id</code> is pressed down. <strong>Note</strong>: <code>Signal</code> buttonPressed is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( <span class="keyword">int</span> ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonPressed ), [ = ] ( <span class="keyword">int</span> id ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QButtonGroup::buttonReleased(QAbstractButton * button) [signal]</code>: This <code>signal</code> is emitted when the given <code>button</code> is released. <strong>Note</strong>: <code>Signal</code> buttonReleased is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( QAbstractButton * ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonReleased ), [ = ] ( QAbstractButton *button ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QButtonGroup::buttonReleased(int id) [signal]</code>: This <code>signal</code> is emitted when a button with the given <code>id</code> is released. <strong>Note</strong>: <code>Signal</code> buttonReleased is overloaded in this class. To connect to this one using the function pointer syntax, you must specify the <code>signal</code> type in a static cast, as shown in this example:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect ( buttonGroup, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QButtonGroup::* ) ( <span class="keyword">int</span> ) &gt; \</span><br><span class="line">        ( &amp;QButtonGroup::buttonReleased ), [ = ] ( <span class="keyword">int</span> id ) &#123; <span class="comment">/* ... */</span> &#125; );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>QList&lt;QAbstractButton *&gt; QButtonGroup::buttons() const</code>: Returns the list of this groups’s buttons. This may be empty.</li>
<li><code>QAbstractButton * QButtonGroup::checkedButton() const</code>: Returns the button group’s checked button, or <code>0</code> if no buttons are checked.</li>
<li><code>int QButtonGroup::checkedId() const</code>: Returns the id of the <code>checkedButton()</code>, or <code>-1</code> if no button is checked.</li>
<li><code>int QButtonGroup::id(QAbstractButton * button) const</code>: Returns the id for the specified <code>button</code>, or <code>-1</code> if no such <code>button</code> exists.</li>
<li><code>void QButtonGroup::removeButton(QAbstractButton * button)</code>: Removes the given <code>button</code> from the <code>button</code> group.</li>
<li><code>void QButtonGroup::setId(QAbstractButton * button, int id)</code>: Sets the <code>id</code> for the specified <code>button</code>. Note that <code>id</code> can not be <code>-1</code>.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Qt语法详解/Qt之const_iterator/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Qt语法详解/Qt之const_iterator/" itemprop="url">Qt之const_iterator</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T15:41:04+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;The <code>QList::const_iterator</code> class provides an <code>STL-style</code> const iterator for <code>QList</code> and <code>QQueue</code>. The header file is <code>const_iterator</code>.</p>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>const_iterator()</code></td>
</tr>
<tr>
<td></td>
<td><code>const_iterator(const const_iterator &amp; other)</code></td>
</tr>
<tr>
<td></td>
<td><code>const_iterator(const iterator &amp; other)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator!=(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>operator*() const</code></td>
</tr>
<tr>
<td><code>const_iterator</code></td>
<td><code>operator+(int j) const</code></td>
</tr>
<tr>
<td><code>const_iterator &amp;</code></td>
<td><code>operator++()</code></td>
</tr>
<tr>
<td><code>const_iterator</code></td>
<td><code>operator++(int)</code></td>
</tr>
<tr>
<td><code>const_iterator &amp;</code></td>
<td><code>operator+=(int j)</code></td>
</tr>
<tr>
<td><code>const_iterator</code></td>
<td><code>operator-(int j) const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>operator-(const_iterator other) const</code></td>
</tr>
<tr>
<td><code>const_iterator &amp;</code></td>
<td><code>operator--()</code></td>
</tr>
<tr>
<td><code>const_iterator</code></td>
<td><code>operator--(int)</code></td>
</tr>
<tr>
<td><code>const_iterator &amp;</code></td>
<td><code>operator-=(int j)</code></td>
</tr>
<tr>
<td><code>const T *</code></td>
<td><code>operator-&gt;() const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator&lt;(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator&lt;=(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator==(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator&gt;(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>operator&gt;=(const const_iterator &amp; other) const</code></td>
</tr>
<tr>
<td><code>const T &amp;</code></td>
<td><code>operator[](int j) const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QList::const_iterator</code> class provides an <code>STL-style</code> const iterator for <code>QList</code> and <code>QQueue</code>.<br>&emsp;&emsp;<code>QList</code> provides both <code>STL-style</code> iterators and <code>Java-style</code> iterators. The <code>STL-style</code> iterators are more <code>low-level</code> and more cumbersome to use; on the other hand, they are slightly faster and, for developers who already know <code>STL</code>, have the advantage of familiarity.<br>&emsp;&emsp;<code>QList&lt;T&gt;::const_iterator</code> allows you to iterate over a <code>QList&lt;T&gt;</code> (or a <code>QQueue&lt;T&gt;</code>). If you want to modify the <code>QList</code> as you iterate over it, use <code>QList::iterator</code> instead. It is generally good practice to use <code>QList::const_iterator</code> on a <code>non-const QList</code> as well, unless you need to change the <code>QList</code> through the iterator. Const iterators are slightly faster, and can improve code readability.<br>&emsp;&emsp;The default <code>QList::const_iterator</code> constructor creates an uninitialized iterator. You must initialize it using a <code>QList</code> function like <code>QList::constBegin()</code>, <code>QList::constEnd()</code>, or <code>QList::insert()</code> before you can start iterating. Here’s a typical loop that prints all the items stored in a list:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QList&lt;QString&gt; <span class="built_in">list</span>;</span><br><span class="line"><span class="built_in">list</span>.append ( <span class="string">"January"</span> );</span><br><span class="line"><span class="built_in">list</span>.append ( <span class="string">"February"</span> );</span><br><span class="line"><span class="built_in">list</span>.append ( <span class="string">"December"</span> );</span><br><span class="line">​</span><br><span class="line">QList&lt;QString&gt;::const_iterator i;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( i = <span class="built_in">list</span>.constBegin(); i != <span class="built_in">list</span>.constEnd(); ++i ) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Most <code>QList</code> functions accept an integer index rather than an iterator. For that reason, iterators are rarely useful in connection with <code>QList</code>. One place where <code>STL-style</code> iterators do make sense is as arguments to generic algorithms.<br>&emsp;&emsp;For example, here’s how to delete all the widgets stored in a <code>QList&lt;QWidget *&gt;</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QList&lt;QWidget *&gt; <span class="built_in">list</span>;​</span><br><span class="line">qDeleteAll ( <span class="built_in">list</span>.constBegin(), <span class="built_in">list</span>.constEnd() );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;Multiple iterators can be used on the same list. However, be aware that any <code>non-const</code> function call performed on the <code>QList</code> will render all existing iterators undefined. If you need to keep iterators over a long period of time, we recommend that you use <code>QLinkedList</code> rather than <code>QList</code>.</p>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>const_iterator::const_iterator()</code>: Constructs an uninitialized iterator. Functions like <code>operator*()</code> and <code>operator++()</code> should not be called on an uninitialized iterator. Use <code>operator=()</code> to assign a value to it before using it.</li>
<li><code>const_iterator::const_iterator(const const_iterator &amp; other)</code>: Constructs a copy of <code>other</code>.</li>
<li><code>const_iterator::const_iterator(const iterator &amp; other)</code>: Constructs a copy of <code>other</code>.</li>
<li><code>bool const_iterator::operator!=(const const_iterator &amp; other) const</code>: Returns <code>true</code> if <code>other</code> points to a different item than this iterator; otherwise returns false.</li>
<li><code>const T &amp; const_iterator::operator*() const</code>: Returns the current item.</li>
<li><code>const_iterator const_iterator::operator+(int j) const</code>: Returns an iterator to the item at <code>j</code> positions forward from this iterator (If <code>j</code> is negative, the iterator goes backward).</li>
<li><code>const_iterator &amp; const_iterator::operator++()</code>: The prefix <code>++</code> operator (<code>++it</code>) advances the iterator to the next item in the list and returns an iterator to the new current item. Calling this function on <code>QList::end()</code> leads to undefined results.</li>
<li><code>const_iterator const_iterator::operator++(int)</code>: This is an overloaded function. The postfix <code>++</code> operator (<code>it++</code>) advances the iterator to the next item in the list and returns an iterator to the previously current item.</li>
<li><code>const_iterator &amp; const_iterator::operator+=(int j)</code>: Advances the iterator by <code>j</code> items (If <code>j</code> is negative, the iterator goes backward).</li>
<li><code>const_iterator const_iterator::operator-(int j) const</code>: Returns an iterator to the item at <code>j</code> positions backward from this iterator (If <code>j</code> is negative, the iterator goes forward).</li>
<li><code>int const_iterator::operator-(const_iterator other) const</code>: Returns the number of items between the item pointed to by <code>other</code> and the item pointed to by this iterator.</li>
<li><code>const_iterator &amp; const_iterator::operator--()</code>: The prefix <code>--</code> operator (<code>--it</code>) makes the preceding item current and returns an iterator to the new current item. Calling this function on <code>QList::begin()</code> leads to undefined results.</li>
<li><code>const_iterator const_iterator::operator--(int)</code>: This is an overloaded function. The postfix <code>--</code> operator (<code>it--</code>) makes the preceding item current and returns an iterator to the previously current item.</li>
<li><code>const_iterator &amp; const_iterator::operator-=(int j)</code>: Makes the iterator go back by <code>j</code> items (If <code>j</code> is negative, the iterator goes forward).</li>
<li><code>const T * const_iterator::operator-&gt;() const</code>: Returns a pointer to the current item.</li>
<li><code>bool const_iterator::operator&lt;(const const_iterator &amp; other) const</code>: Returns <code>true</code> if the item pointed to by this iterator is less than the item pointed to by the <code>other</code> iterator.</li>
<li><code>bool const_iterator::operator&lt;=(const const_iterator &amp; other) const</code>: Returns <code>true</code> if the item pointed to by this iterator is less than or equal to the item pointed to by the <code>other</code> iterator.</li>
<li><code>bool const_iterator::operator==(const const_iterator &amp; other) const</code>: Returns <code>true</code> if <code>other</code> points to the same item as this iterator; otherwise returns false.</li>
<li><code>bool const_iterator::operator&gt;(const const_iterator &amp; other) const</code>: Returns <code>true</code> if the item pointed to by this iterator is greater than the item pointed to by the <code>other</code> iterator.</li>
<li><code>bool const_iterator::operator&gt;=(const const_iterator &amp; other) const</code>: Returns <code>true</code> if the item pointed to by this iterator is greater than or equal to the item pointed to by the <code>other</code> iterator.</li>
<li><code>const T &amp; const_iterator::operator[](int j) const</code>: Returns the item at position <code>*this + j</code>. This function is provided to make <code>QList</code> iterators behave like <code>C++</code> pointers.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Qt语法详解/Qt之QTableView/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Qt语法详解/Qt之QTableView/" itemprop="url">Qt之QTableView</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T15:15:18+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QTableView</code>常用于实现数据的表格显示。<br>&emsp;&emsp;1. 添加表头：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 准备数据模型 */</span></span><br><span class="line">QStandardItemModel *student_model = <span class="keyword">new</span> QStandardItemModel();</span><br><span class="line">student_model-&gt;setHorizontalHeaderItem ( <span class="number">0</span>, <span class="keyword">new</span> QStandardItem ( QObject::tr ( <span class="string">"Name"</span> ) ) );</span><br><span class="line">student_model-&gt;setHorizontalHeaderItem ( <span class="number">1</span>, <span class="keyword">new</span> QStandardItem ( QObject::tr ( <span class="string">"NO."</span> ) ) );</span><br><span class="line">student_model-&gt;setHorizontalHeaderItem ( <span class="number">2</span>, <span class="keyword">new</span> QStandardItem ( QObject::tr ( <span class="string">"Sex"</span> ) ) );</span><br><span class="line">student_model-&gt;setHorizontalHeaderItem ( <span class="number">3</span>, <span class="keyword">new</span> QStandardItem ( QObject::tr ( <span class="string">"Age"</span> ) ) );</span><br><span class="line">student_model-&gt;setHorizontalHeaderItem ( <span class="number">4</span>, <span class="keyword">new</span> QStandardItem ( QObject::tr ( <span class="string">"College"</span> ) ) );</span><br><span class="line"><span class="comment">/* 利用setModel方法将数据模型与QTableView绑定 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;setModel ( student_model );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;2. 设置表格属性：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 设置列宽不可变动，即不能通过鼠标拖动增加列宽 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;horizontalHeader()-&gt;setResizeMode ( <span class="number">0</span>, QHeaderView::Fixed );</span><br><span class="line">ui-&gt;student_tableview-&gt;horizontalHeader()-&gt;setResizeMode ( <span class="number">1</span>, QHeaderView::Fixed );</span><br><span class="line">ui-&gt;student_tableview-&gt;horizontalHeader()-&gt;setResizeMode ( <span class="number">2</span>, QHeaderView::Fixed );</span><br><span class="line">ui-&gt;student_tableview-&gt;horizontalHeader()-&gt;setResizeMode ( <span class="number">3</span>, QHeaderView::Fixed );</span><br><span class="line">ui-&gt;student_tableview-&gt;horizontalHeader()-&gt;setResizeMode ( <span class="number">4</span>, QHeaderView::Fixed );</span><br><span class="line"><span class="comment">/* 设置表格的各列的宽度值 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;setColumnWidth ( <span class="number">0</span>, <span class="number">100</span> );</span><br><span class="line">ui-&gt;student_tableview-&gt;setColumnWidth ( <span class="number">1</span>, <span class="number">100</span> );</span><br><span class="line">ui-&gt;student_tableview-&gt;setColumnWidth ( <span class="number">2</span>, <span class="number">100</span> );</span><br><span class="line">ui-&gt;student_tableview-&gt;setColumnWidth ( <span class="number">3</span>, <span class="number">100</span> );</span><br><span class="line">ui-&gt;student_tableview-&gt;setColumnWidth ( <span class="number">4</span>, <span class="number">100</span> );</span><br><span class="line"><span class="comment">/* 默认显示行头，如果你觉得不美观的话，我们可以将隐藏 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;verticalHeader()-&gt;hide();</span><br><span class="line"><span class="comment">/* 设置选中时为整行选中 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;setSelectionBehavior ( QAbstractItemView::SelectRows );</span><br><span class="line"><span class="comment">/* 设置表格的单元为只读属性，即不能编辑 */</span></span><br><span class="line">ui-&gt;student_tableview-&gt;setEditTriggers ( QAbstractItemView::NoEditTriggers );</span><br><span class="line"><span class="comment">/* 如果你用在QTableView中使用右键菜单，需启用该属性 */</span></span><br><span class="line">ui-&gt;tstudent_tableview-&gt;setContextMenuPolicy ( Qt::CustomContextMenu );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;3. 动态添加行：在表格中添加行时，我们只需要在<code>model</code>中插入数据即可，一旦<code>model</code>中的数据发生变化，<code>QTabelView</code>显示就会做相应的变动：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 在第一行添加学生张三的个人信息(setItem函数的第一个参数</span></span><br><span class="line"><span class="comment">   表示行号，第二个表示列号，第三个为要显示的数据) */</span></span><br><span class="line">student_model-&gt;setItem ( <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">new</span> QStandardItem ( <span class="string">"张三"</span> ) );</span><br><span class="line">student_model-&gt;setItem ( <span class="number">0</span>, <span class="number">1</span>, <span class="keyword">new</span> QStandardItem ( <span class="string">"20120202"</span> ) );</span><br><span class="line">student_model-&gt;setItem ( <span class="number">0</span>, <span class="number">2</span>, <span class="keyword">new</span> QStandardItem ( <span class="string">"男"</span> ) );</span><br><span class="line">student_model-&gt;setItem ( <span class="number">0</span>, <span class="number">3</span>, <span class="keyword">new</span> QStandardItem ( <span class="string">"18"</span> ) );</span><br><span class="line">student_model-&gt;setItem ( <span class="number">0</span>, <span class="number">4</span>, <span class="keyword">new</span> QStandardItem ( <span class="string">"土木学院"</span> ) );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;4. 设置数据显示的样式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 设置单元格文本居中，张三的数据设置为居中显示 */</span></span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">0</span> )-&gt;setTextAlignment ( Qt::AlignCenter );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">1</span> )-&gt;setTextAlignment ( Qt::AlignCenter );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">2</span> )-&gt;setTextAlignment ( Qt::AlignCenter );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">3</span> )-&gt;setTextAlignment ( Qt::AlignCenter );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">4</span> )-&gt;setTextAlignment ( Qt::AlignCenter );</span><br><span class="line"><span class="comment">/* 设置单元格文本颜色，张三的数据设置为红色 */</span></span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">0</span> )-&gt;setForeground ( QBrush ( QColor ( <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span> ) ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">1</span> )-&gt;setForeground ( QBrush ( QColor ( <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span> ) ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">2</span> )-&gt;setForeground ( QBrush ( QColor ( <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span> ) ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">3</span> )-&gt;setForeground ( QBrush ( QColor ( <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span> ) ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">4</span> )-&gt;setForeground ( QBrush ( QColor ( <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span> ) ) );</span><br><span class="line"><span class="comment">/* 将字体加粗 */</span></span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">0</span> )-&gt;setFont ( QFont ( <span class="string">"Times"</span>, <span class="number">10</span>, QFont::Black ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">1</span> )-&gt;setFont ( QFont ( <span class="string">"Times"</span>, <span class="number">10</span>, QFont::Black ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">2</span> )-&gt;setFont ( QFont ( <span class="string">"Times"</span>, <span class="number">10</span>, QFont::Black ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">3</span> )-&gt;setFont ( QFont ( <span class="string">"Times"</span>, <span class="number">10</span>, QFont::Black ) );</span><br><span class="line">student_model-&gt;item ( <span class="number">0</span>, <span class="number">4</span> )-&gt;setFont ( QFont ( <span class="string">"Times"</span>, <span class="number">10</span>, QFont::Black ) );</span><br><span class="line"><span class="comment">/* 设置排序方式，按年龄降序显示 */</span></span><br><span class="line">student_model-&gt;sort ( <span class="number">3</span>, Qt::DescendingOrder );</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Shell编程/Linux基本文本处理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Shell编程/Linux基本文本处理/" itemprop="url">Linux基本文本处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T08:41:35+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="fold命令"><a href="#fold命令" class="headerlink" title="fold命令"></a>fold命令</h3><p>&emsp;&emsp;<code>fold</code>指令会从指定的文件里读取内容，将超过限定列宽的列加入增列字符后，输出到标准输出设备。若不指定任何文件名称，或是所给予的文件名为<code>-</code>，则<code>fold</code>指令会从标准输入设备读取数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fold [-bs] [-w &lt;每行列数&gt;] [--<span class="built_in">help</span>] [--version] [文件...]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-b</code>或<code>--bytes</code>：以<code>Byte</code>为单位计算列宽，而非采用列数编号为单位。</li>
<li><code>-s</code>或<code>--spaces</code>：以空格字符作为换列点。</li>
<li><code>-w &lt;每行列数&gt;</code>或<code>--width &lt;每行列数&gt;</code>：设置每行的最大列数。</li>
<li><code>--help</code>：在线帮助。</li>
<li><code>--version</code>：显示版本信息。</li>
</ul>
<p>&emsp;&emsp;将一个名为<code>testfile</code>的文件的行折叠成宽度为<code>30</code>，可使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fold -w 30 testfile</span><br></pre></td></tr></table></figure>
<p>为了对比，先将<code>testfile</code>文件输出如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile  <span class="comment"># 查看testfile中的内容</span></span><br><span class="line">Linux networks are becoming more and more common, but</span><br><span class="line">security is often an overlooked</span><br><span class="line">issue. Unfortunately, <span class="keyword">in</span> today’s environment all networks</span><br><span class="line">are potential hacker targets,</span><br><span class="line">from top-secret military research networks to small home LANs.</span><br><span class="line">Linux Network Security focuses on securing Linux <span class="keyword">in</span> a</span><br><span class="line">networked environment, <span class="built_in">where</span> the</span><br><span class="line">security of the entire network needs to be considered</span><br><span class="line">rather than just isolated machines.</span><br><span class="line">It uses a mix of theory and practical techniques to</span><br><span class="line">teach administrators how to install and</span><br><span class="line">use security applications, as well as how the</span><br><span class="line">applications work and why they are necessary.</span><br></pre></td></tr></table></figure>
<p>然后使用<code>fold</code>命令折叠显示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ fold -w 30 testfile  <span class="comment"># 行折叠成宽度为30，显示testfile文件</span></span><br><span class="line">Linux networks are becoming mo</span><br><span class="line">re and more common, but securi</span><br><span class="line">ty is often an overlooked issu</span><br><span class="line">e. Unfortunately, <span class="keyword">in</span> today’s</span><br><span class="line">environment all networks are</span><br><span class="line">potential hacker targets, from</span><br><span class="line">top-secret military research</span><br><span class="line">networks to small home LANs.</span><br><span class="line">Linux Network Security focuses</span><br><span class="line">on securing Linux <span class="keyword">in</span> a networ</span><br><span class="line">ked environment, <span class="built_in">where</span> the sec</span><br><span class="line">urity of the entire network ne</span><br><span class="line">eds to be considered rather th</span><br><span class="line">an just isolated machines. It</span><br><span class="line">uses a mix of theory and pract</span><br><span class="line">ical techniques to teach admin</span><br><span class="line">istrators how to install and u</span><br><span class="line">se security applications, as w</span><br><span class="line">ell as how the applications wo</span><br><span class="line">rk and why they are necessary</span><br></pre></td></tr></table></figure>
<h3 id="fmt命令"><a href="#fmt命令" class="headerlink" title="fmt命令"></a>fmt命令</h3><p>&emsp;&emsp;<code>fmt</code>指令会从指定的文件里读取内容，将其依照指定格式重新编排后，输出到标准输出设备。若指定的文件名为<code>-</code>，则<code>fmt</code>指令会从标准输入设备读取数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt [-cstu] [-w &lt;每行字符数&gt;] [--<span class="built_in">help</span>] [--version] [文件...]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-c</code>或<code>--crown-margin</code>：每段前两列缩排。</li>
<li><code>-s</code>或<code>--split-only</code>：只拆开字数超出每列字符数的行，但不合并字数不足每列字符数的行。</li>
<li><code>-t</code>或<code>--tagged-paragraph</code>：每列前两列缩排，但第<code>1</code>列和第<code>2</code>列的缩排格式不同。</li>
<li><code>-u</code>或<code>--uniform-spacing</code>：每个字符之间都以一个空格字符间隔，每个句子之间则两个空格字符分隔。</li>
<li><code>-w &lt;每行字符数&gt;</code>：设置每行的最大字符数。</li>
<li><code>--help</code>：在线帮助。</li>
<li><code>--version</code>：显示版本信息。</li>
</ul>
<p>&emsp;&emsp;先使用<code>cat</code>命令查看文件内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile  <span class="comment"># 查看testfile文件的内容</span></span><br><span class="line">hello Linux!</span><br><span class="line">Linux is a free Unix-type operating system.</span><br><span class="line">This is a Linux testfile!</span><br><span class="line">Linux</span><br><span class="line">Linux</span><br></pre></td></tr></table></figure>
<p>使用<code>fmt</code>命令重排之后，输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ fmt -w 85 testfile  <span class="comment"># 指定重排宽度为85个字符</span></span><br><span class="line">hello Linux! Linux is a free Unix-type operating system. This is a Linux testfile!</span><br><span class="line">Linux Linux</span><br></pre></td></tr></table></figure>
<h3 id="rev命令"><a href="#rev命令" class="headerlink" title="rev命令"></a>rev命令</h3><p>&emsp;&emsp;<code>rev</code>命令将文件中的每行内容以字符为单位反序输出，即第一个字符最后输出，最后一个字符最先输出，依次类推。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rev [参数]</span><br></pre></td></tr></table></figure>
<p>参数为指定要反序显示内容的文件。</p>
<h3 id="pr命令"><a href="#pr命令" class="headerlink" title="pr命令"></a>pr命令</h3><p>&emsp;&emsp;将文本文件内容转换成适合打印的格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pr [选项] [文件]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>+首页[:末页]</code>、<code>--pages=首页[:末页]</code>：在指定的<code>首页/末页</code>处<code>开始/停止</code>打印。</li>
<li><code>-列数</code>、<code>--columns=列数</code>：输出指定的列数。如果指定了<code>-a</code>选项，则从上到下列印。程序会自动在每一页均衡每列占用的行数。</li>
<li><code>-a</code>、<code>--across</code>：设置每列从上到下输出，配合<code>-列数</code>选项一起使用。</li>
<li><code>-c</code>、<code>--show-control-chars</code>：使用头标<code>^G</code>和八进制反斜杠标记。</li>
<li><code>-d</code>、<code>--double-space</code>：加倍输出空白区域。</li>
<li><code>-D</code>、<code>--date-format=格式</code>：使用遵循指定格式的页眉日期。</li>
<li><code>-e[字符[宽度]]</code>、<code>--expand-tabs[=字符[宽度]]</code>：扩展输入的字符(<code>TAB</code>)到制表符宽度(<code>8</code>)。</li>
<li><code>-F</code>、<code>-f</code>、<code>--form-feed</code>：使用出纸页页标代替新行作为页面间的分隔符(使用<code>-F</code>选项时报头为<code>3</code>行，不使用时为<code>5</code>行)。</li>
<li><code>-h</code>、<code>--header=页眉</code>：在页眉中使用居中的指定字符代替文件名，<code>-h &quot;&quot;</code>输出一个空行，不要使用<code>-h&quot;&quot;</code>。</li>
<li><code>-i[字符[宽度]]</code>、<code>--output-tabs[=字符[宽度]]</code>：使用指定字符(或<code>TAB</code>)代替空格不足到指定制表符宽度(默认<code>8</code>)。</li>
<li><code>-J</code>、<code>--join-lines</code>：合并整个行，关闭<code>-W</code>选项的行截断，不使用栏调整，使用<code>--sep-string[=字符串]</code>设置分隔符。</li>
<li><code>-l</code>、<code>--length=页长</code>：使用指定页长的行数(默认<code>66</code>)(默认文本行数为<code>56</code>，当启用<code>-F</code>时为<code>63</code>)。</li>
<li><code>-m</code>、<code>--merge</code>：在同一行显示所有文件，每个文件占用一栏，分割行，但是当使用<code>-J</code>时将行合并到完整长度。</li>
<li><code>-n[分隔符[位数]]</code>、<code>--number-lines[=分隔符[位数]]</code>：显示行号，使用指定(默认<code>5</code>)位数，后接分隔符(默认<code>TAB</code>)，默认从输入文件的第一行开始计数。</li>
<li><code>-N</code>、<code>--first-line-number=数字</code>：从首页的首行以指定数字开始计数。</li>
<li><code>-o</code>、<code>--indent=缩进量</code>：将每行缩进(默认<code>0</code>)个空格，不影响<code>-w</code>或<code>-W</code>参数，缩进量的值将被加入页面宽度。</li>
<li><code>-r</code>、<code>--no-file-warnings</code>：当文件无法打开时忽略警告。</li>
<li><code>-s[CHAR]</code>、<code>--separator[=CHAR]</code>：由单个字符分隔各列，未附加<code>-w</code>时默认为制表符，否则为空。另外除非<code>-w</code>选项被指定，否则<code>-s[CHAR]</code>会屏蔽三个列相关的截行选项(<code>-COLUMN|-a -COLUMN|-m</code>)。</li>
<li><code>-S字符串</code>、<code>--sep-string[=字符串]</code>：使用指定的字符串分栏，不使用<code>-S</code>则使用默认的制表符<code>TAB</code>作为分隔符，与<code>-J</code>和空格一起使用(等于<code>-S&quot; &quot;</code>)对分栏选项无影响。</li>
<li><code>-t</code>、<code>--omit-header</code>：忽略页眉和页脚。</li>
<li><code>-T</code>、<code>--omit-pagination</code>：按照输入文件中的设置忽略页眉和页脚并除去所有分页记号。</li>
<li><code>-v</code>、<code>--show-nonprinting</code>：使用八进制反斜杠标记。</li>
<li><code>-w</code>、<code>--width=页面宽度</code>：为多栏页面输出将设置为指定的字符数(默认<code>72</code>)，仅当<code>-s[char]</code>选项不启用时有效(即保持默认值<code>72</code>)。</li>
<li><code>-W</code>、<code>--page-width=页宽</code>：总是将页宽设置为指定的(默认<code>72</code>)字符数，除非<code>-J</code>选项启用总是截断行，此参数与<code>-S</code>或<code>-s</code>冲突。</li>
<li><code>--help</code>：显示此帮助信息并退出。</li>
<li><code>--version</code>：显示版本信息并退出。</li>
</ul>
<p>如果页长小于等于<code>10</code>，则使用<code>-t</code>选项。如果<code>FILE</code>没有定义或者<code>FILE</code>是<code>-</code>，则从标准输入读入。</p>
<h3 id="sort命令"><a href="#sort命令" class="headerlink" title="sort命令"></a>sort命令</h3><p>&emsp;&emsp;<code>sort</code>命令是依据不同的数据类型进行排序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort [-bcfMnrtk] [源文件] [-o 输出文件]</span><br></pre></td></tr></table></figure>
<p><code>sort</code>可针对文本文件的内容以行为单位来排序。</p>
<ul>
<li><code>-b</code>：忽略每行前面开始出的空格字符。</li>
<li><code>-c</code>：检查文件是否已经按照顺序排序。</li>
<li><code>-f</code>：排序时，忽略大小写字母。</li>
<li><code>-M</code>：将前面<code>3</code>个字母依照月份的缩写进行排序。</li>
<li><code>-n</code>：依照数值的大小排序。</li>
<li><code>-o &lt;输出文件&gt;</code>：将排序后的结果存入指定的文件。</li>
<li><code>-r</code>：以相反的顺序来排序。</li>
<li><code>-t &lt;分隔字符&gt;</code>：指定排序时所用的栏位分隔字符。</li>
<li><code>-k</code>：选择以哪个区间进行排序。</li>
</ul>
<p>&emsp;&emsp;下面通过几个例子来讲述<code>sort</code>的使用：<br>&emsp;&emsp;1. <code>sort</code>将文件的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按<code>ASCII</code>码值进行比较，最后将它们按升序输出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ cat seq.txt</span><br><span class="line">banana</span><br><span class="line">apple</span><br><span class="line">pear</span><br><span class="line">orange</span><br><span class="line">$ sort seq.txt</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line">pear</span><br></pre></td></tr></table></figure>
<p>用户可以保存排序后的文件内容，或把排序后的文件内容输出至打印机。下例中用户把排序后的文件内容保存到名为<code>result</code>的文件中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort seq.txt &gt; result</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;2. <code>sort</code>的<code>-u</code>选项作用很简单，就是在输出中去除重复行。<br>&emsp;&emsp;3. <code>sort</code>默认的排序方式是升序，如果想改成降序，就加个<code>-r</code>就搞定了。<br>&emsp;&emsp;4. <code>sort</code>默认是把结果输出到标准输出，所以需要用重定向才能将结果写入文件，例如<code>sort filename &gt; newfile</code>。但如果你想把排序结果输出到原文件中，用重定向可就不行了，而<code>-o</code>选项就是为了解决这一问题。<br>&emsp;&emsp;5. <code>-n</code>选项告诉<code>sort</code>要以数值来排序。<br>&emsp;&emsp;6. <code>sort</code>的<code>-t</code>和<code>-k</code>选项：如果有一个文件的内容是这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">banana:30:5.5</span><br><span class="line">apple:10:2.5</span><br><span class="line">pear:90:2.3</span><br><span class="line">orange:20:3.4</span><br></pre></td></tr></table></figure>
<p>这个文件有三列，列与列之间用冒号隔开。第一列表示水果类型，第二列表示水果数量，第三列表示水果价格。那么我想以水果数量来排序，也就是以第二列来排序，如何利用<code>sort</code>实现？幸好，<code>sort</code>提供了<code>-t</code>选项，后面可以设定间隔符。指定了间隔符之后，就可以用<code>-k</code>来指定列数了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -k 2,2 -t <span class="string">':'</span> file</span><br><span class="line">apple:10:2.5</span><br><span class="line">orange:20:3.4</span><br><span class="line">banana:30:5.5</span><br><span class="line">pear:90:2.3</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;7. 其他的<code>sort</code>常用选项：</p>
<ul>
<li><code>-i</code>：仅仅比较可打印字符。</li>
<li><code>-R</code>：根据哈希值随机排序。</li>
<li><code>-m</code>：仅仅合并已经排序好的文件，不执行排序操作。</li>
</ul>
<p>&emsp;&emsp;<strong>补充说明</strong>：<br>&emsp;&emsp;1. 在<code>sort</code>命令中，一个文本行最多包含<code>10</code>列。<br>&emsp;&emsp;2. <code>-k</code>选项的语法为<code>-k pos1[, pos2]</code>，<code>pos1</code>表示开始列，<code>pos2</code>表示结束列；<code>-k pos</code>表示从<code>pos</code>列开始一直到文本列的结束；<code>-k pos,pos</code>表示在第<code>pos</code>列。<br>&emsp;&emsp;3. <code>-r</code>选项是对所有的关键字进行降序排序，而<code>-k pos1(r)[,pos2(r)]</code>是对特定的关键字进行降序排序。<code>-n</code>和<code>-r</code>具有类似的属性。<br>&emsp;&emsp;4. <code>-k</code>选项能够使用多个修饰符，例如<code>-k pos1(nr)[,pos2(nr)]</code>。</p>
<h3 id="wc命令"><a href="#wc命令" class="headerlink" title="wc命令"></a>wc命令</h3><p>&emsp;&emsp;利用<code>wc</code>命令我们可以计算文件的<code>Byte</code>数、字数、或是列数。若不指定文件名称、或是所给予的文件名为<code>-</code>，则<code>wc</code>命令会从标准输入设备读取数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc [-clw] [--<span class="built_in">help</span>] [--version] [文件...]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-c</code>、<code>--bytes</code>或<code>--chars</code>：只显示<code>Bytes</code>数。</li>
<li><code>-l</code>或<code>--lines</code>：只显示列数。</li>
<li><code>-w</code>或<code>--words</code>：只显示字数。</li>
<li><code>--help</code>：在线帮助。</li>
<li><code>--version</code>：显示版本信息。</li>
</ul>
<p>&emsp;&emsp;先查看<code>testfile</code>文件的内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile</span><br><span class="line">Linux networks are becoming more and more common, but scurity is often an overlooked</span><br><span class="line">issue. Unfortunately, <span class="keyword">in</span> today’s environment all networks are potential hacker targets,</span><br><span class="line">fro0m tp-secret military research networks to small home LANs.</span><br><span class="line">Linux Network Securty focuses on securing Linux <span class="keyword">in</span> a networked environment, <span class="built_in">where</span> the</span><br><span class="line">security of the entire network needs to be considered rather than just isolated machines.</span><br><span class="line">It uses a mix of theory and practicl techniques to teach administrators how to install and</span><br><span class="line">use security applications, as well as how the applcations work and why they are necesary.</span><br></pre></td></tr></table></figure>
<p>使用<code>wc</code>统计：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile  <span class="comment"># testfile文件的统计信息</span></span><br><span class="line">3 92 598 testfile  <span class="comment"># testfile文件的行数为3、单词数92、字节数598</span></span><br></pre></td></tr></table></figure>
<h3 id="cut命令"><a href="#cut命令" class="headerlink" title="cut命令"></a>cut命令</h3><p>&emsp;&emsp;<code>cut</code>是一个选取命令，就是将一段数据经过分析，取出我们想要的。一般来说，选取信息通常是针对<code>行</code>来进行分析的，并不是整篇信息分析的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cut [-bn] [file]</span><br><span class="line">cut [-c] [file]</span><br><span class="line">cut [-df] [file]</span><br></pre></td></tr></table></figure>
<p><code>cut</code>命令从文件的每一行剪切字节、字符和字段并将这些内容写至标准输出。如果不指定<code>File</code>参数，<code>cut</code>命令将读取标准输入。</p>
<ul>
<li><code>-b</code>：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了<code>-n</code>标志。</li>
<li><code>-c</code>：以字符为单位进行分割。</li>
<li><code>-d</code>：自定义分隔符，默认为制表符。</li>
<li><code>-f</code>：与<code>-d</code>一起使用，指定显示哪个区域。</li>
<li><code>-n</code>：取消分割多字节字符，仅和<code>-b</code>标志一起使用。</li>
<li><code>-s</code>：不输出不包含列分隔符的行。</li>
</ul>
<p>&emsp;&emsp;<code>cut</code>命令主要是接受三个定位方法：字节(<code>bytes</code>)用选项<code>-b</code>，字符(<code>characters</code>)用选项<code>-c</code>，域(<code>fields</code>)用选项<code>-f</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cut -b 3  <span class="comment"># 如果想提取每一行的第3个字节</span></span><br><span class="line">cut -b 3-5,8  <span class="comment"># 如果想提取第3、第4、第5和第8个字节，注意顺序不能颠倒</span></span><br><span class="line">cut -b -3  <span class="comment"># 表示从第一个字节到第三个字节</span></span><br><span class="line">cut -b 3-  <span class="comment"># 表示从第三个字节到行尾</span></span><br></pre></td></tr></table></figure>
<p>当遇到多字节字符时，可以使用<code>-n</code>选项，<code>-n</code>用于告诉<code>cut</code>不要将多字节字符拆开。<br>&emsp;&emsp;为什么会有<code>域</code>的提取呢？因为刚才提到的<code>-b</code>和<code>-c</code>只能在固定格式的文档中提取信息，而对于非固定格式的信息则束手无策，这时候<code>域</code>就派上用场了。如果你观察过<code>/etc/passwd</code>文件就会发现，它并不像<code>who</code>的输出信息那样具有固定格式，而是比较零散的排放。但是冒号在这个文件的每一行中都起到了非常重要的作用，冒号用来隔开每一个项。<br>&emsp;&emsp;<code>cut</code>命令提供了这样的提取方式，具体的说就是设置<code>间隔符</code>，再设置<code>提取第几个域</code>就<code>OK</code>了。以<code>/etc/passwd</code>的前五行内容为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/passwd | head -n 5</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">$ cat /etc/passwd | head -n 5 | cut -d : -f 1</span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br></pre></td></tr></table></figure>
<p>用<code>-d</code>来设置间隔符为冒号，然后用<code>-f</code>来设置要取的是第一个域，于是所有的用户名就都列出来了！当然，在设定<code>-f</code>时也可以使用例如<code>3-5</code>或者<code>4-</code>类似的格式。</p>
<h3 id="paste命令"><a href="#paste命令" class="headerlink" title="paste命令"></a>paste命令</h3><p>&emsp;&emsp;<code>paste</code>命令会把每个文件以列对列的方式，一列列地加以合并。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paste [-s] [-d &lt;间隔字符&gt;] [--<span class="built_in">help</span>] [--version] [文件]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-d &lt;间隔字符&gt;</code>或<code>--delimiters=&lt;间隔字符&gt;</code>：用指定的间隔字符取代跳格字符。</li>
<li><code>-s</code>或<code>--serial</code>：串列进行而非平行处理。</li>
<li><code>--help</code>：在线帮助。</li>
<li><code>--version</code>：显示帮助信息。</li>
</ul>
<p>&emsp;&emsp;使用<code>paste</code>指令将文件<code>file</code>、<code>testfile</code>和<code>testfile1</code>进行合并。首先使用<code>cat</code>命令查看<code>3</code>个文件内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ cat file  <span class="comment"># file文件的内容</span></span><br><span class="line">xiongdan 200</span><br><span class="line">lihaihui 233</span><br><span class="line">lymlrl 231</span><br><span class="line">$ cat testfile  <span class="comment"># testfile文件的内容</span></span><br><span class="line">liangyuanm  ss</span><br><span class="line">$ cat testfile1  <span class="comment"># testfile1文件的内容</span></span><br><span class="line">huanggai 56</span><br><span class="line">zhixi 73</span><br></pre></td></tr></table></figure>
<p>当合并指令执行后，程序界面中将显示合并后的文件内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xiongdan 200</span><br><span class="line">lihaihui 233</span><br><span class="line">lymlrl 231</span><br><span class="line">liangyuanm  ss</span><br><span class="line">huanggai 56</span><br><span class="line">zhixi 73</span><br></pre></td></tr></table></figure>
<p>若使用<code>paste</code>指令的参数<code>-s</code>，则可以将一个文件中的多行数据合并为一行进行显示。例如，将文件<code>file</code>中的<code>3</code>行数据合并为一行数据进行显示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paste -s file  <span class="comment"># 合并指定文件的多行数据</span></span><br></pre></td></tr></table></figure>
<p>上面的命令执行后，显示的数据内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiongdan 200 lihaihui 233 lymlrl 231</span><br></pre></td></tr></table></figure>
<p>注意，参数<code>-s</code>只是将<code>testfile</code>文件的内容调整显示方式，并不会改变原文件的内容格式。</p>
<h3 id="join命令"><a href="#join命令" class="headerlink" title="join命令"></a>join命令</h3><p>&emsp;&emsp;join命令用于将两个文件中指定列位内容相同的行加以合并，再输出到标准输出设备：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">join [-i] [-a&lt;1或2&gt;] [-e &lt;字符串&gt;] [-o &lt;格式&gt;] [-t &lt;字符&gt;] [-v &lt;1或2&gt;] \</span><br><span class="line">     [-1 &lt;列位&gt;] [-2 &lt;列位&gt;] [--<span class="built_in">help</span>] [--version] [文件1] [文件2]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-a &lt;1或2&gt;</code>：除了显示原来的输出内容之外，还显示指令文件中没有相同栏位的行。</li>
<li><code>-e &lt;字符串&gt;</code>：若<code>文件1</code>与<code>文件2</code>中找不到指定的栏位，则在输出中填入选项中的字符串。</li>
<li><code>-i</code>或<code>--igore-case</code>：比较栏位内容时，忽略大小写的差异。</li>
<li><code>-o &lt;格式&gt;</code>：按照指定的格式来显示结果。</li>
<li><code>-t &lt;字符&gt;</code>：使用栏位的分隔字符。</li>
<li><code>-v &lt;1或2&gt;</code>：跟<code>-a</code>相同，但是只显示文件中没有相同栏位的行。</li>
<li><code>-1 &lt;列位&gt;</code>：连接<code>文件1</code>指定的栏位。</li>
<li><code>-2 &lt;列位&gt;</code>：连接<code>文件2</code>指定的栏位。</li>
<li><code>--help</code>：显示帮助。</li>
<li><code>--version</code>：显示版本信息。</li>
</ul>
<p>&emsp;&emsp;首先查看<code>testfile_1</code>、<code>testfile_2</code>中的文件内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile_1  <span class="comment"># testfile_1文件中的内容</span></span><br><span class="line">Hello 95  <span class="comment"># 例如，本例中第一列为姓名，第二列为数额</span></span><br><span class="line">Linux 85</span><br><span class="line"><span class="built_in">test</span> 30</span><br><span class="line">$ cat testfile_2  <span class="comment"># testfile_2文件中的内容</span></span><br><span class="line">Hello 2005  <span class="comment"># 例如，本例中第一列为姓名，第二列为年份</span></span><br><span class="line">Linux 2009</span><br><span class="line"><span class="built_in">test</span> 2006</span><br></pre></td></tr></table></figure>
<p>然后以默认的方式比较两个文件，将两个文件中指定字段的内容相同的行连接起来，在终端中输入命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_1 testfile_2  <span class="comment"># 连接testfile_1、testfile_2中的内容</span></span><br><span class="line">Hello 95 2005  <span class="comment"># 连接后显示的内容</span></span><br><span class="line">Linux 85 2009</span><br><span class="line"><span class="built_in">test</span> 30 2006</span><br></pre></td></tr></table></figure>
<p>文件<code>1</code>与文件<code>2</code>的位置对输出到标准输出的结果是有影响的。例如将命令中的两个文件互换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_2 testfile_1  <span class="comment"># 改变文件顺序连接两个文件</span></span><br><span class="line">Hello 2005 95  <span class="comment"># 连接后显示的内容</span></span><br><span class="line">Linux 2009 85</span><br><span class="line"><span class="built_in">test</span> 2006 30</span><br></pre></td></tr></table></figure>
<h3 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h3><p>&emsp;&emsp;通过使用<code>tr</code>，可以非常容易地实现<code>sed</code>许多最基本功能，可以将<code>tr</code>看作为<code>sed</code>的简化的变体：它可以用一个字符来替换另一个字符，或者可以完全除去一些字符，也可以用它来除去重复字符。<br>&emsp;&emsp;<code>tr</code>用来从标准输入中通过替换或删除操作进行字符转换，<code>tr</code>主要用于删除文件中控制字符或进行字符转换。使用<code>tr</code>时要转换两个字符串：字符串<code>1</code>用于查询，字符串<code>2</code>用于处理各种转换。<code>tr</code>刚执行时，字符串<code>1</code>中的字符被映射到字符串<code>2</code>中的字符，然后转换操作开始。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr -c -d -s [<span class="string">"string1_to_translate_from"</span>] [<span class="string">"string2_to_translate_to"</span>] &lt; input-file</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-c</code>：用字符串<code>1</code>中字符集的补集替换此字符集，要求字符集为<code>ASCII</code>。</li>
<li><code>-d</code>：删除字符串<code>1</code>中所有输入字符。</li>
<li><code>-s</code>：删除所有重复出现字符序列，只保留第一个；即将重复出现字符串压缩为一个字符串。</li>
<li><code>input-file</code>：它是转换文件名。</li>
</ul>
<p>&emsp;&emsp;指定字符串<code>1</code>或字符串<code>2</code>的内容时，只能使用单字符或字符串范围或列表。</p>
<ul>
<li><code>[a-z]</code>：<code>a</code>至<code>z</code>内的字符组成的字符串。</li>
<li><code>[A-Z]</code>：<code>A</code>至<code>Z</code>内的字符组成的字符串。</li>
<li><code>[0-9]</code>：数字串。</li>
<li><code>\octal</code>：一个三位的八进制数，对应有效的<code>ASCII</code>字符。</li>
<li><code>[O*n]</code>：表示字符<code>O</code>重复出现指定次数<code>n</code>，因此<code>[O*2]</code>匹配<code>OO</code>的字符串。</li>
</ul>
<p>&emsp;&emsp;1. 将文件<code>file</code>中出现的<code>abc</code>替换为<code>xyz</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr <span class="string">"abc"</span> <span class="string">"xyz"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>注意，这里凡是在<code>file</code>中出现的<code>a</code>都替换成<code>x</code>，<code>b</code>替换为<code>y</code>，<code>c</code>替换为<code>z</code>，而不是将字符串<code>abc</code>替换为字符串<code>xyz</code>。<br>&emsp;&emsp;2. 使用<code>tr</code>命令<code>统一</code>字母大小写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr [a-z] [A-Z] &gt; new_file  <span class="comment"># 小写 -&gt; 大写</span></span><br><span class="line">cat file | tr [A-Z] [a-z] &gt; new_file  <span class="comment"># 大写 -&gt; 小写</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;3. 把文件中的数字<code>0</code>至<code>9</code>替换为<code>a</code>至<code>j</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr [0-9] [a-j] &gt; new_file</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;4. 删除文件<code>file</code>中出现的<code>Snail</code>字符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -d <span class="string">"Snail"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>注意，这里凡是在<code>file</code>文件中出现的<code>S</code>、<code>n</code>、<code>a</code>、<code>i</code>和<code>l</code>字符都会被删除，而不是仅仅删除出现的<code>Snail</code>字符串。<br>&emsp;&emsp;5. 删除文件<code>file</code>中出现的换行<code>\n</code>、制表<code>\t</code>字符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -d <span class="string">"\n\t"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>不可见字符都得用转义字符来表示的，这个都是统一的。<br>&emsp;&emsp;6. 删除<code>连续的</code>重复字母，只保留第一个：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -s [a-zA-Z] &gt; new_file</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;7. 删除空行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -s <span class="string">"\n"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;8. 删除<code>Windows</code>文件造成的<code>^M</code>字符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -d <span class="string">"\r"</span> &gt; new_file</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">cat file | tr -s <span class="string">"\r"</span> <span class="string">"\n"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>注意，这里<code>-s</code>后面是两个参数<code>\r</code>和<code>\n</code>，用后者替换前者。<br>&emsp;&emsp;9. 用空格符<code>\040</code>替换制表符<code>\011</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -s <span class="string">"\011"</span> <span class="string">"\040"</span> &gt; new_file</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;10. 把路径变量中的冒号<code>:</code>替换成换行符<code>\n</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span> | tr -s <span class="string">":"</span> <span class="string">"\n"</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/22/Shell编程/Shell文件包含/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/22/Shell编程/Shell文件包含/" itemprop="url">Shell文件包含</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-22T08:22:03+08:00">
                2019-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>Shell</code>可以包含外部脚本，这样可以很方便地封装一些公用的代码。<code>Shell</code>文件包含的语法格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">. filename  <span class="comment"># 注意点号和文件名中间有一空格</span></span><br><span class="line"><span class="built_in">source</span> filename  <span class="comment"># 第二种写法</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;创建两个<code>shell</code>脚本文件，<code>test1.sh</code>代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">url=<span class="string">"http://www.runoob.com"</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>test2.sh</code>代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">. ./test1.sh  <span class="comment"># 第二种方法是“source ./test1.sh”</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"菜鸟教程官网地址：<span class="variable">$url</span>"</span></span><br></pre></td></tr></table></figure>
<p>接下来为<code>test2.sh</code>添加可执行权限并执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x test2.sh</span><br><span class="line">$ ./test2.sh</span><br><span class="line">菜鸟教程官网地址：http://www.runoob.com</span><br></pre></td></tr></table></figure>
<p>注意，被包含的文件<code>test1.sh</code>不需要可执行权限。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/21/Shell编程/grep命令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/21/Shell编程/grep命令/" itemprop="url">grep命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-21T19:02:28+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>&emsp;&emsp;<code>grep</code>是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。<br>&emsp;&emsp;<code>Unix</code>的<code>grep</code>家族包括<code>grep</code>、<code>egrep</code>和<code>fgrep</code>。<code>egrep</code>和<code>fgrep</code>的命令只跟<code>grep</code>有很小不同，<code>egrep</code>是<code>grep</code>的扩展，支持更多的<code>re</code>元字符，<code>fgrep</code>就是<code>fixed grep</code>或<code>fast grep</code>，它们把所有的字母都看作单词，也就是说正则表达式中的元字符表示回其自身的字面意义，不再特殊。<code>linux</code>使用<code>GNU</code>版本的<code>grep</code>。它功能更强，可以通过<code>-G</code>、<code>-E</code>、<code>-F</code>命令行选项来使用<code>egrep</code>和<code>fgrep</code>的功能。<br>&emsp;&emsp;<code>grep</code>用法如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [-acinv] [--color=auto] <span class="string">'搜寻字符串'</span> filename</span><br></pre></td></tr></table></figure>
<p>选项如下：</p>
<ul>
<li><code>-a</code>：将<code>binary</code>文件以<code>text</code>文件的方式搜寻数据。</li>
<li><code>-c</code>：计算找到<code>搜寻字符串</code>的次数。</li>
<li><code>-i</code>：忽略大小写的不同，所以大小写视为相同。</li>
<li><code>-n</code>：输出行号。</li>
<li><code>-v</code>：反向选择，亦即显示出没有<code>搜寻字符串</code>内容的那一行。</li>
<li><code>--color=auto</code>：可以将找到的关键词部分加上颜色的显示。</li>
</ul>
<p>&emsp;&emsp;将<code>/etc/passwd</code>中有<code>root</code>的行取出来：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep root /etc/passwd</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">cat /etc/passwd | grep root</span><br></pre></td></tr></table></figure>
<p>将<code>/etc/passwd</code>有<code>root</code>的行取出来，同时显示这些行在<code>/etc/passwd</code>的行号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grep -n root /etc/passwd</span><br><span class="line">1:root:x:0:0:root:/root:/bin/bash</span><br><span class="line">30:operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;将<code>/etc/passwd</code>没有出现<code>root</code>和<code>nologin</code>的行取出来：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v root /etc/passwd | grep -v nologin</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;用<code>dmesg</code>列出核心信息，再以<code>grep</code>找出内含<code>eth</code>那行，在关键字所在行的前两行与后三行也一起捉出来显示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ dmesg | grep -n -A3 -B2 --color=auto <span class="string">'eth'</span></span><br><span class="line">245-PCI: setting IRQ 10 as level-triggered</span><br><span class="line">246-ACPI: PCI Interrupt 0000:00:0e.0[A] -&gt; Link [LNKB] ...</span><br><span class="line">247:eth0: RealTek RTL8139 at 0xee846000, 00:90:cc:a6:34:84, IRQ 10</span><br><span class="line">248:eth0: Identified 8139 chip <span class="built_in">type</span> <span class="string">'RTL-8139C'</span></span><br><span class="line">249-input: PC Speaker as /class/input/input2</span><br><span class="line">250-ACPI: PCI Interrupt 0000:00:01.4[B] -&gt; Link [LNKB] ...</span><br><span class="line">251-hdb: ATAPI 48X DVD-ROM DVD-R-RAM CD-R/RW drive, 2048kB Cache, UDMA(66)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;根据文件内容递归查找目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在当前目录搜索带“energywise”行的文件</span></span><br><span class="line">$ grep <span class="string">'energywise'</span> *</span><br><span class="line"><span class="comment"># 在当前目录及其子目录下搜索“energywise”行的文件</span></span><br><span class="line">$ grep -r <span class="string">'energywise'</span> *  </span><br><span class="line"><span class="comment"># 在当前目录及其子目录下搜索“energywise”行的文件，但是不显示匹配的行，只显示匹配的文件</span></span><br><span class="line">$ grep -l -r <span class="string">'energywise'</span> *</span><br></pre></td></tr></table></figure>
<h3 id="grep与正规表达式"><a href="#grep与正规表达式" class="headerlink" title="grep与正规表达式"></a>grep与正规表达式</h3><p>&emsp;&emsp;字符类的搜索：如果我想要搜寻<code>test</code>或<code>taste</code>这两个单词时，可以发现到它们有共同的<code>t?st</code>。此时可以这样来搜寻：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grep -n <span class="string">'t[ae]st'</span> regular_express.txt</span><br><span class="line">8:I can<span class="string">'t finish the test.</span></span><br><span class="line"><span class="string">9:Oh! The soup taste good.</span></span><br></pre></td></tr></table></figure>
<p>其实<code>[]</code>里面不论有几个字节，它都仅代表某一个字节，所以上面的例子说明了，我需要的字串是<code>tast</code>或<code>test</code>两个字串而已。<br>&emsp;&emsp;字符类的反向选择<code>[^]</code>：如果想要搜索到有<code>oo</code>的行，但不想要<code>oo</code>前面有<code>g</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep -n <span class="string">'[^g]oo'</span> regular_express.txt</span><br><span class="line">2:apple is my favorite food.</span><br><span class="line">3:Football game is not use feet only.</span><br><span class="line">18:google is the best tools <span class="keyword">for</span> search keyword.</span><br></pre></td></tr></table></figure>
<p>第<code>2</code>和<code>3</code>行没有疑问，因为<code>foo</code>与<code>Foo</code>均可被接受；但是第<code>18</code>行却有<code>google</code>的<code>goo</code>，因为该行后面出现了<code>tool</code>的<code>too</code>，所以该行也被列出来。也就是说，第<code>18</code>行里面虽然出现了我们所不要的项目(<code>goo</code>)，但是由于有需要的项目(<code>too</code>)，因此是符合字串搜寻。<br>&emsp;&emsp;字符类的连续：假设在<code>oo</code>前面不想要有小写字节，可以这样写<code>[^abcd....z]oo</code>，但是这样似乎不怎么方便，由于小写字节的<code>ASCII</code>上编码的顺序是连续的，因此可以将之简化为如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'[^a-z]oo'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>也就是说，当我们在一组集合字节中，如果该字节组是连续的，例如大写英文/小写英文/数字等等，就可以使用<code>[a-z]</code>、<code>[A-Z]</code>、<code>[0-9]</code>等方式来书写。那么如果我们的要求字串是数字与英文，那就将它们全部写在一起，变成<code>[a-zA-Z0-9]</code>。我们要取得有数字的那一行，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'[0-9]'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;行首字符：如果我想要让<code>the</code>只在行首列出呢？这个时候就得要使用定位字节了！可以这样做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'^the'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果我想要开头是小写字节的那一行列出呢？可以这样做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'^[a-z]'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果我不想要开头是英文字母，则可以是这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'^[^a-zA-Z]'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p><code>^</code>在<code>[]</code>内代表<code>反向选择</code>，在<code>[]</code>之外则代表定位在行首的意义。<br>&emsp;&emsp;那如果我想要找出来行尾结束为小数点<code>.</code>的那一行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'\.$'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>特别注意到，因为小数点具有其他意义，所以必须要使用转义字符<code>\</code>来加以解除其特殊意义。<br>&emsp;&emsp;找出空白行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'^$'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>因为只有行首跟行尾<code>^$</code>，所以这样就可以找出空白行了。<br>&emsp;&emsp;任意一个字节<code>.</code>与重复字节<code>*</code>这两个符号在正则表达式的意义如下：</p>
<ul>
<li><code>.</code> (小数点)：代表<code>一定有一个任意字节</code>的意思。</li>
<li><code>*</code> (星号)：代表<code>重复前一个字符，0到无穷多次</code>的意思，为组合形态。</li>
</ul>
<p>&emsp;&emsp;假设需要找出<code>g??d</code>的字串，亦即共有四个字节，起头是<code>g</code>而结束是<code>d</code>，可以这样做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'g..d'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果想要列出有<code>oo</code>、<code>ooo</code>、<code>oooo</code>等等的数据，也就是说至少要有两个<code>o</code>，该怎么办？因为<code>*</code>代表的是<code>重复0个或多个前面的RE字符</code>的意义，因此<code>o*</code>代表的是<code>拥有空字节或一个“o”以上的字节</code>，因此<code>grep -n &#39;o*&#39; regular_express.txt</code>将会把所有的数据都列印出来终端上。当我们需要<code>至少两个“o”以上的字串</code>时，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'ooo*'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果想要字串开头与结尾都是<code>g</code>，但是两个<code>g</code>之间能存在至少一个<code>o</code>，亦即是<code>gog</code>、<code>goog</code>、<code>gooog...</code>等等，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'goo*g'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果想要找出<code>g</code>开头与<code>g</code>结尾的行，当中的字符可有可无：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'g.*g'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>这个<code>.*</code>的<code>RE</code>表示任意字符。<br>&emsp;&emsp;我们可以利用<code>.</code>与<code>RE</code>字符及<code>*</code>来配置<code>0</code>个到无限多个重复字节，那如果想要限制一个范围区间内的重复字节数呢？这时候就得要使用到限定范围的字符<code>{}</code>了。 但因为<code>{</code>与<code>}</code>的符号在<code>shell</code>是有特殊意义的，因此必须要使用字符<code>\</code>来让它失去特殊意义才行。<br>&emsp;&emsp;假设要找到两个<code>o</code>的字串，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'o\&#123;2\&#125;'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;假设要找出<code>g</code>后面接<code>2</code>到<code>5</code>个<code>o</code>，然后再接一个<code>g</code>的字串，可以是这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'go\&#123;2,5\&#125;g'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果想要的是<code>2</code>个<code>o</code>以上的<code>goooo....g</code>呢？除了可以是<code>gooo*g</code>，也可以是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'go\&#123;2,\&#125;g'</span> regular_express.txt</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/21/Shell编程/Shell脚本的特殊符号/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/21/Shell编程/Shell脚本的特殊符号/" itemprop="url">Shell脚本的特殊符号</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-21T16:37:52+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="井号"><a href="#井号" class="headerlink" title="井号"></a>井号</h3><p>&emsp;&emsp;除了第一行<code>#!/bin/bash</code>，井号也常出现在一行的开头，或者位于完整指令之后，这类情况表示符号后面的是注解文字，不会被执行。如果被用在指令中，被引号、双引号括住或者在倒斜线的后面，那么它就变成一般符号，不具上述的特殊功能。</p>
<h3 id="帐户的home目录"><a href="#帐户的home目录" class="headerlink" title="帐户的home目录"></a>帐户的home目录</h3><p>&emsp;&emsp;它算是个常见的符号，代表使用者的<code>home</code>目录，如<code>cd ~</code>；也可以直接在符号后加上某帐户的名称，如<code>cd ~user</code>；或者当成是路径的一部份，如<code>~/bin</code>。<br>&emsp;&emsp;<code>~+当前的工作目录</code>这个符号代表当前的工作目录，它和内建指令<code>pwd</code>的作用是相同的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo ~+/var/log</span></span><br></pre></td></tr></table></figure>
<p><code>~-上次的工作目录</code>这个符号代表上次的工作目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo ~-/etc/httpd/logs</span></span><br></pre></td></tr></table></figure>
<h3 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h3><p>&emsp;&emsp;在<code>shell</code>中，担任连续指令功能的符号就是分号，例如<code>cd ~/backup ; mkdir startup</code>。</p>
<h3 id="连续分号"><a href="#连续分号" class="headerlink" title="连续分号"></a>连续分号</h3><p>&emsp;&emsp;专用在<code>case</code>的选项，担任<code>Terminator</code>的角色：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> \<span class="string">"<span class="variable">$fop</span>\" inhelp)</span></span><br><span class="line"><span class="string">    echo \"Usage: Command -help -version filename\";;version)</span></span><br><span class="line"><span class="string">    echo \"version 0.1\"</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">esac</span></span><br></pre></td></tr></table></figure>
<h3 id="逗号"><a href="#逗号" class="headerlink" title="逗号"></a>逗号</h3><p>&emsp;&emsp;在<code>shell</code>中，一个<code>dot</code>代表当前目录，两个<code>dot</code>代表上层目录。如果档案名称以<code>dot</code>开头，该档案就属特殊档案，用<code>ls</code>指令必须加上<code>-a</code>选项才会显示。除此之外，在<code>regularexpression</code>中，一个<code>dot</code>代表匹配一个字元。</p>
<h3 id="单引号"><a href="#单引号" class="headerlink" title="单引号"></a>单引号</h3><p>&emsp;&emsp;被单引号用括住的内容将被视为单一字串。在引号内的代表变数的<code>$</code>符号没有作用，也就是说它被视为一般符号处理，防止任何变量替换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">heyyou=home</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'$heyyou'</span>  <span class="comment"># We get $heyyou</span></span><br></pre></td></tr></table></figure>
<h3 id="双引号"><a href="#双引号" class="headerlink" title="双引号"></a>双引号</h3><p>&emsp;&emsp;被双引号用括住的内容将被视为单一字串。它防止通配符扩展，但允许变量扩展，这点与单引数的处理方式不同：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">heyyou=home</span><br><span class="line"><span class="built_in">echo</span> \<span class="string">"<span class="variable">$heyyou</span>\"  # We get home</span></span><br></pre></td></tr></table></figure>
<h3 id="反引号"><a href="#反引号" class="headerlink" title="反引号"></a>反引号</h3><p>&emsp;&emsp;在前面的单双引号括住的是字串，但如果该字串是一列命令会怎样？答案是不会执行。要处理这种情况，需要用反引号来做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdv=`date +%F`</span><br><span class="line"><span class="built_in">echo</span> \<span class="string">"Today <span class="variable">$fdv</span>\"</span></span><br></pre></td></tr></table></figure>
<p>在反引号内的<code>date +%F</code>会被视为指令，执行的结果会带入<code>fdv</code>变数中。命令替换也可以使用语法<code>$(shell_command)</code>。</p>
<h3 id="逗点"><a href="#逗点" class="headerlink" title="逗点"></a>逗点</h3><p>&emsp;&emsp;这个符号常运用在运算当中当做间隔用途：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">let</span> \<span class="string">"t1 = ((a = 5 + 3, b = 7 - 1, c = 15 / 3))\"</span></span><br><span class="line"><span class="string">echo \"t1= <span class="variable">$t1</span>, a = <span class="variable">$a</span>, b = <span class="variable">$b</span>\"</span></span><br></pre></td></tr></table></figure>
<h3 id="斜线"><a href="#斜线" class="headerlink" title="斜线"></a>斜线</h3><p>&emsp;&emsp;在路径表示时，代表目录；通常单一的<code>/</code>代表<code>root</code>根目录；在四则运算中，代表除法的符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> \<span class="string">"num1 = ((a = 10 / 2, b = 25 / 5))\"</span></span><br></pre></td></tr></table></figure>
<h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><p>&emsp;&emsp;<code>pipeline</code>连接上个指令的标准输出，做为下个指令的标准输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who | wc -l</span><br></pre></td></tr></table></figure>
<h3 id="惊叹号"><a href="#惊叹号" class="headerlink" title="惊叹号"></a>惊叹号</h3><p>&emsp;&emsp;通常代表反逻辑的作用，例如用<code>!=</code>代表不等于：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ \<span class="string">"$?\" != 0 ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">    echo \"Executes error\"</span></span><br><span class="line"><span class="string">    exit 1</span></span><br><span class="line"><span class="string">fi</span></span><br></pre></td></tr></table></figure>
<p>在规则表达式中，它担任反逻辑的角色：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls a[!0-9]</span><br></pre></td></tr></table></figure>
<p>上例代表显示除<code>a0</code>、<code>a1</code>、<code>...</code>、<code>a9</code>这几个文件的其他文件。</p>
<h3 id="冒号"><a href="#冒号" class="headerlink" title="冒号"></a>冒号</h3><p>&emsp;&emsp;在bash中，这是一个内建指令，表示什么事都不干，但返回状态值0。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:</span><br><span class="line"><span class="built_in">echo</span> $?  <span class="comment"># 输出为0</span></span><br></pre></td></tr></table></figure>
<p>也有如下用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: &gt; f.$$</span><br></pre></td></tr></table></figure>
<p>上面这一行相当于<code>cat /dev/null &gt;f.$$</code>，不仅写法简短了，而且执行效率也好许多。有时也会出现以下这类的用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: <span class="variable">$&#123;HOSTNAME?&#125;</span> <span class="variable">$&#123;USER?&#125;</span> <span class="variable">$&#123;MAIL?&#125;</span></span><br></pre></td></tr></table></figure>
<p>这行的作用是检查这些环境变数是否已设置，没有设置的将会以标准错误显示错误讯息。像这种检查如果使用类似<code>test</code>或<code>if</code>这类的做法，基本上也可以处理，但都比不上上例的简洁与效率。</p>
<h3 id="问号"><a href="#问号" class="headerlink" title="问号"></a>问号</h3><p>&emsp;&emsp;在文件名扩展上扮演的角色是匹配一个任意的字元，但不包含<code>null</code>字元。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls a?a1</span><br></pre></td></tr></table></figure>
<p>善用这个特点，可以做比较精确的档名匹配。</p>
<h3 id="星号"><a href="#星号" class="headerlink" title="星号"></a>星号</h3><p>&emsp;&emsp;在文件名扩展上，它用来代表任何字元，包含<code>null</code>字元。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls a*a a1 access_log</span><br></pre></td></tr></table></figure>
<p>在运算时，它则代表乘法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> \<span class="string">"fmult=2*3\"</span></span><br></pre></td></tr></table></figure>
<p>除了内建指令<code>let</code>，还有一个关于运算的指令<code>expr</code>，星号在这里也担任乘法的角色。不过在使用上需要小心，它的前面必须加上<code>escape</code>字元。</p>
<h3 id="次方运算"><a href="#次方运算" class="headerlink" title="次方运算"></a>次方运算</h3><p>&emsp;&emsp;两个星号<code>**</code>在运算时代表次方的意思：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> \<span class="string">"sus=2**3\"</span></span><br><span class="line"><span class="string">echo \"sus = <span class="variable">$sus</span>\"  # 输出“sus = 8”</span></span><br></pre></td></tr></table></figure>
<h3 id="钱号"><a href="#钱号" class="headerlink" title="钱号"></a>钱号</h3><p>&emsp;&emsp;变量替换的代表符号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vrs=123</span><br><span class="line"><span class="built_in">echo</span> \<span class="string">"vrs = <span class="variable">$vrs</span>\"  # 输出“vrs = 123”</span></span><br></pre></td></tr></table></figure>
<p>另外，在<code>Regular Expressions</code>里被定义为<code>行</code>的最末端(<code>end-of-line</code>)。这个常用在<code>grep</code>、<code>sed</code>、<code>awk</code>以及<code>vim</code>当中。</p>
<h3 id="36"><a href="#36" class="headerlink" title="&#36;*"></a>&#36;*</h3><p>&emsp;&emsp;<code>$*</code>引用<code>script</code>的执行引用变量，引用参数的算法与一般指令相同，指令本身为<code>0</code>，其后为<code>1</code>，然后依此类推。引用变量的代表方式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$0</span>, <span class="variable">$1</span>, <span class="variable">$2</span>, <span class="variable">$3</span>, <span class="variable">$4</span>, <span class="variable">$5</span>, <span class="variable">$6</span>, <span class="variable">$7</span>, <span class="variable">$8</span>, <span class="variable">$9</span>, <span class="variable">$&#123;10&#125;</span>, <span class="variable">$&#123;11&#125;</span>...</span><br></pre></td></tr></table></figure>
<p>个位数的，可直接使用数字；但两位数以上，则必须使用<code>{}</code>符号来括住。<br>&emsp;&emsp;<code>$*</code>则是代表所有引用变量的符号，使用时需要视情况加上双引号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \<span class="string">"$*\"</span></span><br></pre></td></tr></table></figure>
<h3 id="36-1"><a href="#36-1" class="headerlink" title="&#36;@"></a>&#36;@</h3><p>&emsp;&emsp;<code>$@</code>与<code>$*</code>具有相同作用的符号，不过它们两者有一个不同点。<code>$*</code>将所有的引用变量视为一个整体，但<code>$@</code>则仍旧保留每个引用变量的区段观念。</p>
<h3> &#36;# </h3>

<p>&emsp;&emsp;这也是与引用变量相关的符号，它的作用是告诉你，引用变量的总数量是多少。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \<span class="string">"<span class="variable">$#</span>\"</span></span><br></pre></td></tr></table></figure>
<h3 id="36-状态值"><a href="#36-状态值" class="headerlink" title="&#36;?状态值"></a>&#36;?状态值</h3><p>&emsp;&emsp;一般来说，<code>UNIX</code>系统的进程以执行系统调用<code>exit</code>来结束的。这个函数的回传值就是<code>status</code>值，回传给父进程，用来检查子进程的执行状态。一般指令程序倘若执行成功，其回传值为<code>0</code>，失败则为<code>1</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar cvfz dfbackup.tar.gz /home/user &gt; /dev/nullecho\<span class="string">"$?\"$$</span></span><br></pre></td></tr></table></figure>
<p>由于进程的<code>ID</code>是唯一的，所以在同一个时间不可能有重复性的<code>PID</code>。有时，<code>script</code>会需要产生临时文件，用来存放必要的资料，而此<code>script</code>亦有可能在同一时间被使用者们使用。在这种情况下，固定文件名在写法上就显的不可靠，唯有产生动态文件名，才能符合需要。符号<code>$$</code>或许可以符合这种需求，它代表当前<code>shell</code>的<code>PID</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \<span class="string">"<span class="variable">$HOSTNAME</span>, <span class="variable">$USER</span>, <span class="variable">$MAIL</span>\" &gt; ftmp.$$</span></span><br></pre></td></tr></table></figure>
<p>使用它来作为文件名的一部份，可以避免在同一时间产生相同文件名的覆盖现象。<br>&emsp;&emsp;基本上，系统会回收执行完毕的<code>PID</code>，然后再次依需要分配使用。所以<code>script</code>即使临时文件是使用动态档名的写法，如果<code>script</code>执行完毕后仍不加以清除，会产生其他问题。</p>
<h3 id="指令群组"><a href="#指令群组" class="headerlink" title="()指令群组"></a>()指令群组</h3><p>&emsp;&emsp;用括号将一串连续指令括起来，这种用法称为指令群组：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">cd</span> ~ ; vcgh=`<span class="built_in">pwd</span>` ; <span class="built_in">echo</span> <span class="variable">$vcgh</span>)</span><br></pre></td></tr></table></figure>
<p>指令群组有一个特性，<code>shell</code>会以产生<code>subshell</code>来执行这组指令。因此在其中所定义的变数，仅作用于指令群组本身。<br>&emsp;&emsp;除了上述的指令群组，括号也用在<code>array</code>变数的定义上；另外也应用在其他可能需要加上<code>escape</code>字元才能使用的场合，如运算式。</p>
<h3 id=""><a href="#" class="headerlink" title="(())"></a>(())</h3><p>&emsp;&emsp;这组符号的作用与<code>let</code>指令相似，用在算数运算上，它是<code>bash</code>的内建功能。所以在执行效率上会比使用<code>let</code>指令要好许多。</p>
<h3 id="大括号"><a href="#大括号" class="headerlink" title="大括号"></a>大括号</h3><p>&emsp;&emsp;有时<code>script</code>当中会出现大括号中会夹着一段或几段以<code>分号</code>做结尾的指令或变数设定。这种用法与上面介绍的指令群组非常相似，但有个不同点，它在当前的<code>shell</code>执行，不会产生<code>subshell</code>。<br>&emsp;&emsp;大括号也被运用在函数的功能上，广义地说，单纯只使用大括号时，作用就像是个没有指定名称的函数一般。因此，这样写<code>script</code>也是相当好的一件事。尤其对输出输入的重导向上，这个做法可精简<code>script</code>的复杂度。此外，大括号还有另一种用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;xx, yy, zz, ...&#125;</span><br></pre></td></tr></table></figure>
<p>这种大括号的组合，常用在字串的组合上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#123;userA, userB, userC&#125;-&#123;home, bin, data&#125;</span><br></pre></td></tr></table></figure>
<p>我们得到<code>userA-home</code>、<code>userA-bin</code>、<code>userA-data</code>、<code>userB-home</code>、<code>userB-bin</code>、<code>userB-data</code>、<code>userC-home</code>、<code>userC-bin</code>、<code>userC-data</code>这几个目录。这组符号在适用性上相当广泛，能加以善用的话，回报是精简与效率。</p>
<h3 id="中括号"><a href="#中括号" class="headerlink" title="中括号"></a>中括号</h3><p>&emsp;&emsp;常出现在流程控制中，扮演括住判断式的作用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ \<span class="string">"$?\" != 0 ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">    echo \"Executes error\"</span></span><br><span class="line"><span class="string">    exit 1</span></span><br><span class="line"><span class="string">fi</span></span><br></pre></td></tr></table></figure>
<p>这个符号在正则表达式中担任类似<code>范围</code>或<code>集合</code>的角色：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r 200[1234]</span><br></pre></td></tr></table></figure>
<p>上例代表删除<code>2001</code>、<code>2002</code>、<code>2003</code>、<code>2004</code>等目录的意思。</p>
<h3 id="-1"><a href="#-1" class="headerlink" title="[[]]"></a>[[]]</h3><p>&emsp;&emsp;这组符号与先前的<code>[]</code>符号，基本上作用相同，但它允许在其中直接使用<code>||</code>与<code>&amp;&amp;</code>逻辑等符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> ak</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$ak</span> &gt; 5 || <span class="variable">$ak</span>&lt; 9 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$ak</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h3 id="逻辑符号"><a href="#逻辑符号" class="headerlink" title="||逻辑符号"></a>||逻辑符号</h3><p>&emsp;&emsp;代表<code>or</code>逻辑的符号。</p>
<h3 id="amp-amp-逻辑符号"><a href="#amp-amp-逻辑符号" class="headerlink" title="&amp;&amp;逻辑符号"></a>&amp;&amp;逻辑符号</h3><p>&emsp;&emsp;代表<code>and</code>逻辑的符号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 &amp;&amp; command2 [&amp;&amp; command3 ...]</span><br></pre></td></tr></table></figure>
<p><code>&amp;&amp;</code>左边的命令(命令<code>1</code>)返回真后，其右边的命令(命令<code>2</code>)才能够被执行。</p>
<h3 id="后台工作"><a href="#后台工作" class="headerlink" title="后台工作"></a>后台工作</h3><p>&emsp;&emsp;单一个<code>&amp;</code>符号，且放在完整指令列的最后端，即表示将该指令列放入后台中工作。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/50/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><span class="page-number current">51</span><a class="page-number" href="/page/52/">52</a><span class="space">&hellip;</span><a class="page-number" href="/page/96/">96</a><a class="extend next" rel="next" href="/page/52/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">955</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
