<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="泥腿子出身">
<meta property="og:url" content="http://fukangwei.gitee.io/page/5/index.html">
<meta property="og:site_name" content="泥腿子出身">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="泥腿子出身">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/5/">





  <title>泥腿子出身</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">泥腿子出身</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QListWidget/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QListWidget/" itemprop="url">Qt之QListWidget</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T20:00:33+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>QListWidget</code>可以显示一个清单，清单中的每个项目是<code>QListWidgetItem</code>的一个实例，每个项目可以通过<code>QListWidgetItem</code>来操作。可以通过<code>QListWidgetItem</code>来设置每个项目的图像与文字。<br>&emsp;&emsp;示例<code>1</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidgetItem&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">    QListWidget *listWidget = <span class="keyword">new</span> QListWidget;</span><br><span class="line">    QVBoxLayout *layout = <span class="keyword">new</span> QVBoxLayout;</span><br><span class="line">    QListWidgetItem *lst1 = <span class="keyword">new</span> QListWidgetItem ( <span class="string">"data"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst2 = <span class="keyword">new</span> QListWidgetItem ( <span class="string">"decision"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst3 = <span class="keyword">new</span> QListWidgetItem ( <span class="string">"document"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst4 = <span class="keyword">new</span> QListWidgetItem ( <span class="string">"process"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst5 = <span class="keyword">new</span> QListWidgetItem ( <span class="string">"printer"</span>, listWidget );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">1</span>, lst1 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">2</span>, lst2 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">3</span>, lst3 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">4</span>, lst4 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">5</span>, lst5 );</span><br><span class="line">    listWidget-&gt;show();</span><br><span class="line">    layout-&gt;addWidget ( listWidget );</span><br><span class="line">    widget-&gt;setLayout ( layout );</span><br><span class="line">    widget-&gt;show();</span><br><span class="line">    app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/1.png"></p>
<p>&emsp;&emsp;示例<code>2</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidgetItem&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">    QListWidget *listWidget = <span class="keyword">new</span> QListWidget;</span><br><span class="line">    QVBoxLayout *layout = <span class="keyword">new</span> QVBoxLayout;</span><br><span class="line">    QListWidgetItem *lst1 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/data.png"</span> ), <span class="string">"data"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst2 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/decision.png"</span> ), <span class="string">"decision"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst3 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/document.png"</span> ), <span class="string">"document"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst4 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/process.png"</span> ), <span class="string">"process"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst5 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/printer.png"</span> ), <span class="string">"printer"</span>, listWidget );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">1</span>, lst1 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">2</span>, lst2 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">3</span>, lst3 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">4</span>, lst4 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">5</span>, lst5 );</span><br><span class="line">    listWidget-&gt;show();</span><br><span class="line">    layout-&gt;addWidget ( listWidget );</span><br><span class="line">    widget-&gt;setLayout ( layout );</span><br><span class="line">    widget-&gt;show();</span><br><span class="line">    app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/2.png"></p>
<p>&emsp;&emsp;示例<code>3</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QHBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidgetItem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QLabel&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">    QListWidget *listWidget = <span class="keyword">new</span> QListWidget;</span><br><span class="line">    QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">    QLabel *label = <span class="keyword">new</span> QLabel;</span><br><span class="line">    label-&gt;setFixedWidth ( <span class="number">100</span> );</span><br><span class="line">    QListWidgetItem *lst1 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/data.png"</span> ), <span class="string">"data"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst2 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/decision.png"</span> ), <span class="string">"decision"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst3 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/document.png"</span> ), <span class="string">"document"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst4 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/process.png"</span> ), <span class="string">"process"</span>, listWidget );</span><br><span class="line">    QListWidgetItem *lst5 = <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">"images/printer.png"</span> ), <span class="string">"printer"</span>, listWidget );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">1</span>, lst1 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">2</span>, lst2 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">3</span>, lst3 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">4</span>, lst4 );</span><br><span class="line">    listWidget-&gt;insertItem ( <span class="number">5</span>, lst5 );</span><br><span class="line">    QObject::connect (</span><br><span class="line">        listWidget, SIGNAL ( currentTextChanged ( <span class="keyword">const</span> QString &amp; ) ),</span><br><span class="line">        label, SLOT ( setText ( <span class="keyword">const</span> QString &amp; ) ) );</span><br><span class="line">    listWidget-&gt;show();</span><br><span class="line">    layout-&gt;addWidget ( listWidget );</span><br><span class="line">    layout-&gt;addWidget ( label );</span><br><span class="line">    widget-&gt;setLayout ( layout );</span><br><span class="line">    widget-&gt;show();</span><br><span class="line">    app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/3.png"></p>
<hr>
<p>&emsp;&emsp;<code>QListWidget</code>为我们展示一个<code>List</code>列表的视图。<br>&emsp;&emsp;<code>listwidget.h</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LISTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LISTWIDGET_H</span></span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtGui&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListWidget</span> :</span> <span class="keyword">public</span> QWidget &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ListWidget();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QLabel *label;</span><br><span class="line">    QListWidget *<span class="built_in">list</span>;</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// LISTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>listwidget.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"listwidget.h"</span></span></span><br><span class="line">​</span><br><span class="line">ListWidget::ListWidget() &#123;</span><br><span class="line">    label = <span class="keyword">new</span> QLabel;</span><br><span class="line">    label-&gt;setFixedWidth ( <span class="number">70</span> );</span><br><span class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> QListWidget;</span><br><span class="line">    <span class="built_in">list</span>-&gt;addItem ( <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">":/images/line.PNG"</span> ), tr ( <span class="string">"Line"</span> ) ) );</span><br><span class="line">    <span class="built_in">list</span>-&gt;addItem ( <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">":/images/rect.PNG"</span> ), tr ( <span class="string">"Rectangle"</span> ) ) );</span><br><span class="line">    <span class="built_in">list</span>-&gt;addItem ( <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">":/images/oval.PNG"</span> ), tr ( <span class="string">"Oval"</span> ) ) );</span><br><span class="line">    <span class="built_in">list</span>-&gt;addItem ( <span class="keyword">new</span> QListWidgetItem ( QIcon ( <span class="string">":/images/tri.PNG"</span> ), tr ( <span class="string">"Triangle"</span> ) ) );</span><br><span class="line">    QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">    layout-&gt;addWidget ( label );</span><br><span class="line">    layout-&gt;addWidget ( <span class="built_in">list</span> );</span><br><span class="line">    setLayout ( layout );</span><br><span class="line">    connect ( <span class="built_in">list</span>, SIGNAL ( currentTextChanged ( QString ) ), label, SLOT ( setText ( QString ) ) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>main.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtGui&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"listwidget.h"</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    ListWidget lw;</span><br><span class="line">    lw.resize ( <span class="number">400</span>, <span class="number">200</span> );</span><br><span class="line">    lw.show();</span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ListWidget</code>类中包含一个<code>QLabel</code>对象和一个<code>QListWidget</code>对象。创建这个<code>QListWidget</code>对象很简单，只需要使用<code>new</code>运算符创建出来，然后调用<code>addItem</code>函数即可将<code>item</code>添加到这个对象中。我们添加的对象是<code>QListWidgetItem</code>的指针，<code>addItem</code>有四个重载的函数，我们使用的是其中的一个：它接受两个参数，第一个是<code>QIcon</code>引用类型，作为<code>item</code>的图标；第二个是<code>QString</code>类型，作为这个<code>item</code>后面的文字说明。当然也可以使用<code>insertItem</code>函数在特定的位置动态地增加<code>item</code>。最后将这个<code>QListWidget</code>的<code>currentTextChanged</code>信号同<code>QLabel</code>的<code>setText</code>连接起来，这样在点击<code>item</code>时，<code>label</code>的文字就可以改变了。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/4.png"></p>
<p>我们还可以设置<code>viewModel</code>这个参数，来使用不同的视图进行显示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>-&gt;setViewMode ( QListView::IconMode );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/5.png"></p>
<hr>
<h3 id="QListWidget控件的使用"><a href="#QListWidget控件的使用" class="headerlink" title="QListWidget控件的使用"></a>QListWidget控件的使用</h3><p>&emsp;&emsp;<code>Qt</code>提供了<code>QListWidget</code>类列表框控件，用来加载并显示多个列表项。<code>QListWidgetItem</code>类就是列表项类，一般列表框控件中的列表项有两种加载方式：一种是由用户手动添加的列表项，比如音乐播放器中加载音乐文件的文件列表，每一个音乐文件都是一个列表项。对于这种列表项，用户可以进行增加、删除、单击以及双击等操作。一种是由程序员事先编写好，写在程序中供用户选择的列表项，比如餐厅的电子菜单，每一道菜对应一个列表项。对于这种列表项，用户可以进行单机和双击操作(增加和删除操作也是可以进行的，但是一般的点菜系统会屏蔽掉这种功能)。<br>&emsp;&emsp;<code>QListWidget</code>类列表框控件支持两种列表项显示方式，即<code>QListView::IconMode</code>和<code>QListView::ListMode</code>。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/6.png" height="261" width="337"></p>
<p>&emsp;&emsp;<code>main.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtGui/QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTextCodec&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    <span class="comment">/* Qt文本的国际化显示 */</span></span><br><span class="line">    QTextCodec::setCodecForTr ( QTextCodec::codecForName ( <span class="string">"GB18030"</span> ) );</span><br><span class="line">    QTextCodec::setCodecForLocale ( QTextCodec::codecForName ( <span class="string">"GB18030"</span> ) );</span><br><span class="line">    QTextCodec::setCodecForCStrings ( QTextCodec::codecForName ( <span class="string">"GB18030"</span> ) );</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.show();</span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>mainwindow.h</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QListWidgetItem&gt; /* 列表框空间头文件 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFileDialog&gt; /* 文件对话框控件 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QStringList&gt; /* 字符串容器 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDir&gt; /* 目录类头文件 */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QString&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span>;</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span> :</span> <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">​</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span> <span class="params">( QWidget *parent = <span class="number">0</span> )</span></span>;</span><br><span class="line">    ~MainWindow();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addbtn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deletebtn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delallbtn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addallbtn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">singleclicked</span> <span class="params">( QListWidgetItem *item )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doubleclicked</span> <span class="params">( QListWidgetItem *item )</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>mainwindow.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_mainwindow.h"</span></span></span><br><span class="line">​</span><br><span class="line">MainWindow::MainWindow ( QWidget *parent ) : QMainWindow ( parent ), ui ( <span class="keyword">new</span> Ui::MainWindow ) &#123;</span><br><span class="line">    ui-&gt;setupUi ( <span class="keyword">this</span> );</span><br><span class="line">    <span class="keyword">this</span>-&gt;setWindowTitle ( tr ( <span class="string">"listWidget学习"</span> ) ); <span class="comment">/* 设置标题框文本 */</span></span><br><span class="line">    ui-&gt;listWidget-&gt;setViewMode ( QListView::IconMode ); <span class="comment">/* 设置显示模式为图标模式 */</span></span><br><span class="line">    <span class="comment">// ui-&gt;listWidget-&gt;setViewMode ( QListView::ListMode ); /* 设置显示模式为列表模式 */</span></span><br><span class="line">    QObject::connect ( ui-&gt;AddButton, SIGNAL ( clicked() ), <span class="keyword">this</span>, SLOT ( addbtn() ) );</span><br><span class="line">    QObject::connect ( ui-&gt;lineEdit, SIGNAL ( returnPressed() ), <span class="keyword">this</span>, SLOT ( addbtn() ) );</span><br><span class="line">    QObject::connect ( ui-&gt;DeleteButton, SIGNAL ( clicked() ), <span class="keyword">this</span>, SLOT ( deletebtn() ) );</span><br><span class="line">    QObject::connect ( ui-&gt;DelAllButton, SIGNAL ( clicked() ), <span class="keyword">this</span>, SLOT ( delallbtn() ) );</span><br><span class="line">    QObject::connect ( ui-&gt;ShowDirButton, SIGNAL ( clicked() ), <span class="keyword">this</span>, SLOT ( addallbtn() ) );</span><br><span class="line">    QObject::connect (</span><br><span class="line">        ui-&gt;listWidget, SIGNAL ( itemDoubleClicked ( QListWidgetItem * ) ),</span><br><span class="line">        <span class="keyword">this</span>, SLOT ( doubleclicked ( QListWidgetItem * ) ) );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">MainWindow::~MainWindow() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::addbtn() &#123; <span class="comment">/* 添加单个列表项 */</span></span><br><span class="line">    QString str = ui-&gt;lineEdit-&gt;text(); <span class="comment">/* 获取行编辑框文本 */</span></span><br><span class="line">    QListWidgetItem *item = <span class="keyword">new</span> QListWidgetItem;</span><br><span class="line">    item-&gt;setText ( str ); <span class="comment">/* 设置列表项的文本 */</span></span><br><span class="line">    ui-&gt;listWidget-&gt;addItem ( item ); <span class="comment">/* 加载列表项到列表框 */</span></span><br><span class="line">    <span class="comment">// delete item; /* 此处若解除注释，将无法添加到列表框 */</span></span><br><span class="line">    <span class="comment">// item = NULL;</span></span><br><span class="line">    ui-&gt;lineEdit-&gt;clear(); <span class="comment">/* 清空行编辑框 */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::deletebtn() &#123; <span class="comment">/* 删除单个列表项 */</span></span><br><span class="line">    <span class="comment">/* 获取列表项的指针 */</span></span><br><span class="line">    QListWidgetItem *item = ui-&gt;listWidget-&gt;takeItem ( ui-&gt;listWidget-&gt;currentRow() );</span><br><span class="line">    <span class="keyword">delete</span> item; <span class="comment">/* 释放指针所指向的列表项 */</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::delallbtn() &#123; <span class="comment">/* 删除多个列表项 */</span></span><br><span class="line">    <span class="keyword">int</span> num = ui-&gt;listWidget-&gt;count(); <span class="comment">/* 获取列表项的总数目 */</span></span><br><span class="line">    <span class="comment">/* 将光标设置到列表框上，若注释该语句，则删除时，要手动将焦点设置到列表框，即点击列表项 */</span></span><br><span class="line">    ui-&gt;listWidget-&gt;setFocus();</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++ ) &#123; <span class="comment">/* 逐个获取列表项的指针，并删除 */</span></span><br><span class="line">        QListWidgetItem *item = ui-&gt;listWidget-&gt;takeItem ( ui-&gt;listWidget-&gt;currentRow() );</span><br><span class="line">        <span class="keyword">delete</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::addallbtn() &#123; <span class="comment">/* 添加多个列表项 */</span></span><br><span class="line">    QStringList FileNames = QFileDialog::getOpenFileNames (</span><br><span class="line">        <span class="keyword">this</span>, <span class="string">"打开"</span>, QDir::currentPath(), <span class="string">"所有文件(*.*);;文本文档(*.txt)"</span> );</span><br><span class="line">    <span class="comment">//ui-&gt;listWidget-&gt;addItems ( FileNames ); /* 方法1：整体添加 */</span></span><br><span class="line">    <span class="comment">/* 方法2：逐个添加 */</span></span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>, count = <span class="number">0</span>;</span><br><span class="line">    count = FileNames.count(); <span class="comment">/* 获取打开文件的总数目 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="comment">// for(index = 0; index &lt; count; index++) /* 这样会报错，无法先取出栈底元素 */</span></span><br><span class="line">    <span class="keyword">for</span> ( index = count - <span class="number">1</span>; index &gt;= <span class="number">0</span>; index-- ) &#123; <span class="comment">/* QList&lt;QString&gt;的数据结构是栈，只能从栈顶取元素 */</span></span><br><span class="line">        QListWidgetItem *item = <span class="keyword">new</span> QListWidgetItem;</span><br><span class="line">        item-&gt;setText ( FileNames.takeAt ( index ) ); <span class="comment">/* 逐个设置列表项的文本 */</span></span><br><span class="line">        <span class="comment">// qDebug() &lt;&lt; FileNames.takeAt( index );</span></span><br><span class="line">        ui-&gt;listWidget-&gt;addItem ( item ); <span class="comment">/* 加载列表项到列表框 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::singleclicked ( QListWidgetItem *item ) &#123; <span class="comment">/* 列表项单击操作 */</span></span><br><span class="line">    QMessageBox::information ( <span class="keyword">this</span>, <span class="string">"单击消息"</span>, <span class="string">"单击"</span> + item-&gt;text() );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::doubleclicked ( QListWidgetItem *item ) &#123; <span class="comment">/* 列表项双击操作 */</span></span><br><span class="line">    QMessageBox::information ( <span class="keyword">this</span>, <span class="string">"双击消息"</span>, <span class="string">"双击"</span> + item-&gt;text() );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="添加操作"><a href="#添加操作" class="headerlink" title="添加操作"></a>添加操作</h3><p>&emsp;&emsp;添加操作又可以分为单列表项操作和多列表项操作。</p>
<ul>
<li><code>void QListWidget::addItems ( const QStringList &amp; labels )</code>：该函数用来将字符串列表中的全部字符串作为列表项添加到列表框中。</li>
<li><code>void QListWidget::addItem ( QListWidgetItem * item )</code>：该函数用来将一个列表项添加到列表框当中。注意，一个列表项只能被添加到列表框中一次，如果多次添加同一个列表项到列表框中，将导致不可预期的结果。</li>
<li><code>void QListWidget::addItem ( const QString &amp; label )</code>：重载函数，用来将参数<code>label</code>所引用的字符串作为一个列表项，添加到列表框中。</li>
<li><code>int QList::count ()const and int QList::size () const</code>：上述两个函数的功能等价，都是用来返回列表中存储的对象元素的个数。</li>
<li><code>T QList::takeAt ( int i )</code>：该函数按照参数i指定的索引位置，将存储在列表中对应的对象元素移除并返回。返回类型为模板类型，由存储的数据的类型决定。索引值的大小范围为<code>0 &lt;= i &lt;= size()</code>。</li>
</ul>
<p>注意，<code>QList&lt;QString&gt;</code>的数据结构是栈，只能从栈顶取元素。</p>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h3><p>&emsp;&emsp;删除操作又可以分为单文件操作和多文件操作。删除单个列表项(删除列表框中的单个列表项)：</p>
<ul>
<li><code>QListWidgetItem *QListWidget::takeItem ( int row )</code>：该函数用来将索引号为<code>row</code>的列表项从列表框移除，并返回该列表项的指针。</li>
<li><code>int currentRow() const</code>：该常成员函数用来获取当前列表项的索引号，并返回它。</li>
</ul>
<hr>
<p>&emsp;&emsp;The <code>QListWidget</code> class provides an <code>item-based</code> list widget.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QListWidget</code></td>
<td><code>QListView</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QListWidget(QWidget * parent = 0)</code></td>
</tr>
<tr>
<td></td>
<td><code>~QListWidget()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>addItem(const QString &amp; label)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>addItem(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>addItems(const QStringList &amp; labels)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>closePersistentEditor(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>count() const</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>currentItem() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>currentRow() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>editItem(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>QList&lt;QListWidgetItem *&gt;</code></td>
<td><code>findItems(const QString &amp; text, Qt::MatchFlags flags) const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>insertItem(int row, QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>insertItem(int row, const QString &amp; label)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>insertItems(int row, const QStringList &amp; labels)</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>isSortingEnabled() const</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>item(int row) const</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>itemAt(const QPoint &amp; p) const</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>itemAt(int x, int y) const</code></td>
</tr>
<tr>
<td><code>QWidget *</code></td>
<td><code>itemWidget(QListWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>openPersistentEditor(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>removeItemWidget(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>row(const QListWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>QList&lt;QListWidgetItem *&gt;</code></td>
<td><code>selectedItems() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentItem(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentItem(QListWidgetItem * item, QItemSelectionModel::SelectionFlags command)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentRow(int row)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentRow(int row, QItemSelectionModel::SelectionFlags command)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setItemWidget(QListWidgetItem * item, QWidget * widget)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setSortingEnabled(bool enable)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>sortItems(Qt::SortOrder order = Qt::AscendingOrder)</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>takeItem(int row)</code></td>
</tr>
<tr>
<td><code>QRect</code></td>
<td><code>visualItemRect(const QListWidgetItem * item) const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Reimplemented-Public-Functions"><a href="#Reimplemented-Public-Functions" class="headerlink" title="Reimplemented Public Functions"></a>Reimplemented Public Functions</h3><ul>
<li><code>virtual void dropEvent(QDropEvent * event)</code></li>
</ul>
<h3 id="Public-Slots"><a href="#Public-Slots" class="headerlink" title="Public Slots"></a>Public Slots</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><code>clear()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>scrollToItem(const QListWidgetItem * item, QAbstractItemView::ScrollHint hint = EnsureVisible)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><code>currentItemChanged(QListWidgetItem * current, QListWidgetItem * previous)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>currentRowChanged(int currentRow)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>currentTextChanged(const QString &amp; currentText)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemActivated(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemChanged(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemClicked(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemDoubleClicked(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemEntered(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemPressed(QListWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemSelectionChanged()</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Protected-Functions"><a href="#Protected-Functions" class="headerlink" title="Protected Functions"></a>Protected Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>virtual bool</code></td>
<td><code>dropMimeData(int index, const QMimeData * data, Qt::DropAction action)</code></td>
</tr>
<tr>
<td><code>QModelIndex</code></td>
<td><code>indexFromItem(QListWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>QListWidgetItem *</code></td>
<td><code>itemFromIndex(const QModelIndex &amp; index) const</code></td>
</tr>
<tr>
<td><code>QList&lt;QListWidgetItem *&gt;</code></td>
<td><code>items(const QMimeData * data) const</code></td>
</tr>
<tr>
<td><code>virtual QMimeData *</code></td>
<td><code>mimeData(const QList&lt;QListWidgetItem *&gt; items) const</code></td>
</tr>
<tr>
<td><code>virtual QStringList</code></td>
<td><code>mimeTypes() const</code></td>
</tr>
<tr>
<td><code>virtual Qt::DropActions</code></td>
<td><code>supportedDropActions() const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Reimplemented-Protected-Functions"><a href="#Reimplemented-Protected-Functions" class="headerlink" title="Reimplemented Protected Functions"></a>Reimplemented Protected Functions</h3><ul>
<li><code>virtual bool event(QEvent * e)</code></li>
</ul>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QListWidget</code> class provides an <code>item-based</code> list widget.<br>&emsp;&emsp;<code>QListWidget</code> is a convenience class that provides a list view similar to the one supplied by <code>QListView</code>, but with a classic <code>item-based</code> interface for adding and removing items. <code>QListWidget</code> uses an internal model to manage each <code>QListWidgetItem</code> in the list.<br>&emsp;&emsp;For a more flexible list view widget, use the <code>QListView</code> class with a standard model.<br>&emsp;&emsp;List widgets are constructed in the same way as other widgets:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QListWidget *listWidget = <span class="keyword">new</span> QListWidget ( <span class="keyword">this</span> );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;The <code>selectionMode()</code> of a list widget determines how many of the items in the list can be selected at the same time, and whether complex selections of items can be created. This can be set with the <code>setSelectionMode()</code> function.<br>&emsp;&emsp;There are two ways to add items to the list: they can be constructed with the list widget as their parent widget, or they can be constructed with no parent widget and added to the list later. If a list widget already exists when the items are constructed, the first method is easier to use:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> QListWidgetItem ( tr ( <span class="string">"Oak"</span> ), listWidget );</span><br><span class="line"><span class="keyword">new</span> QListWidgetItem ( tr ( <span class="string">"Fir"</span> ), listWidget );</span><br><span class="line"><span class="keyword">new</span> QListWidgetItem ( tr ( <span class="string">"Pine"</span> ), listWidget );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;If you need to insert a new item into the list at a particular position, then it should be constructed without a parent widget. The <code>insertItem()</code> function should then be used to place it within the list. The list widget will take ownership of the item.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QListWidgetItem *newItem = <span class="keyword">new</span> QListWidgetItem;</span><br><span class="line">newItem-&gt;setText ( itemText );</span><br><span class="line">listWidget-&gt;insertItem ( row, newItem );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;For multiple items, <code>insertItems()</code> can be used instead. The number of items in the list is found with the <code>count()</code> function. To remove items from the list, use <code>takeItem()</code>.<br>&emsp;&emsp;The current item in the list can be found with <code>currentItem()</code>, and changed with <code>setCurrentItem()</code>. The user can also change the current item by navigating with the keyboard or clicking on a different item. When the current item changes, the <code>currentItemChanged()</code> signal is emitted with the new current item and the item that was previously current.</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QListWidget/7.png"></p>
<h3 id="Property-Documentation"><a href="#Property-Documentation" class="headerlink" title="Property Documentation"></a>Property Documentation</h3><ul>
<li><code>count : const int</code>: This property holds the number of items in the list including any hidden items. Access functions:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> <span class="keyword">const</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>currentRow : int</code>: This property holds the row of the current item. Depending on the current selection mode, the row may also be selected. Access functions:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">currentRow</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCurrentRow</span> <span class="params">( <span class="keyword">int</span> row )</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCurrentRow</span> <span class="params">( <span class="keyword">int</span> row, QItemSelectionModel::SelectionFlags command )</span></span></span><br></pre></td></tr></table></figure>
<p>Notifier signal:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">currentRowChanged</span> <span class="params">( <span class="keyword">int</span> currentRow )</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>sortingEnabled : bool</code>: This property holds whether sorting is enabled. If this property is <code>true</code>, sorting is enabled for the list; if the property is <code>false</code>, sorting is not enabled. The default value is <code>false</code>. Access functions:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isSortingEnabled</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setSortingEnabled</span> <span class="params">( <span class="keyword">bool</span> enable )</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QListWidget::QListWidget(QWidget * parent = 0)</code>: Constructs an empty <code>QListWidget</code> with the given <code>parent</code>.</li>
<li><code>QListWidget::~QListWidget()</code>: Destroys the list widget and all its items.</li>
<li><code>void QListWidget::addItem(const QString &amp; label)</code>: Inserts an item with the text <code>label</code> at the end of the list widget.</li>
<li><code>void QListWidget::addItem(QListWidgetItem * item)</code>: Inserts the <code>item</code> at the end of the list widget. <strong>Warning</strong>: A <code>QListWidgetItem</code> can only be added to a <code>QListWidget</code> once. Adding the same <code>QListWidgetItem</code> multiple times to a <code>QListWidget</code> will result in undefined behavior.</li>
<li><code>void QListWidget::addItems(const QStringList &amp; labels)</code>: Inserts items with the text <code>labels</code> at the end of the list widget.</li>
<li><code>void QListWidget::clear() [slot]</code>: Removes all items and selections in the view. <strong>Warning</strong>: All items will be permanently deleted.</li>
<li><code>void QListWidget::closePersistentEditor(QListWidgetItem * item)</code>: Closes the persistent editor for the given <code>item</code>.</li>
<li><code>QListWidgetItem * QListWidget::currentItem() const</code>: Returns the current item.</li>
<li><code>void QListWidget::currentItemChanged(QListWidgetItem * current, QListWidgetItem * previous) [signal]</code>: This signal is emitted whenever the <code>current</code> item changes. <code>previous</code> is the item that previously had the focus; <code>current</code> is the new current item.</li>
<li><code>void QListWidget::currentTextChanged(const QString &amp; currentText) [signal]</code>: This signal is emitted whenever the current item changes. <code>currentText</code> is the text data in the current item. If there is no current item, the <code>currentText</code> is invalid.</li>
<li><code>void QListWidget::dropEvent(QDropEvent * event) [virtual]</code>: Reimplemented from <code>QWidget::dropEvent()</code>.</li>
<li><code>bool QListWidget::dropMimeData(int index, const QMimeData * data, Qt::DropAction action) [virtual protected]</code>: Handles <code>data</code> supplied by an external drag and drop operation that ended with the given <code>action</code> in the given <code>index</code>. Returns <code>true</code> if <code>data</code> and <code>action</code> can be handled by the model; otherwise returns <code>false</code>.</li>
<li><code>void QListWidget::editItem(QListWidgetItem * item)</code>: Starts editing the <code>item</code> if it is editable.</li>
<li><code>bool QListWidget::event(QEvent * e) [virtual protected]</code>: Reimplemented from <code>QObject::event()</code>.</li>
<li><code>QList&lt;QListWidgetItem *&gt; QListWidget::findItems(const QString &amp; text, Qt::MatchFlags flags) const</code>: Finds items with the <code>text</code> that matches the string text using the given <code>flags</code>.</li>
<li><code>QModelIndex QListWidget::indexFromItem(QListWidgetItem * item) const [protected]</code>: Returns the <code>QModelIndex</code> assocated with the given <code>item</code>.</li>
<li><code>void QListWidget::insertItem(int row, QListWidgetItem * item)</code>: Inserts the <code>item</code> at the position in the list given by <code>row</code>.</li>
<li><code>void QListWidget::insertItem(int row, const QString &amp; label)</code>: Inserts an item with the text <code>label</code> in the list widget at the position given by <code>row</code>.</li>
<li><code>void QListWidget::insertItems(int row, const QStringList &amp; labels)</code>: Inserts items from the list of <code>labels</code> into the list, starting at the given <code>row</code>.</li>
<li><code>QListWidgetItem * QListWidget::item(int row) const</code>: Returns the item that occupies the given <code>row</code> in the list if one has been set; otherwise returns <code>0</code>.</li>
<li><code>void QListWidget::itemActivated(QListWidgetItem * item) [signal]</code>: This signal is emitted when the <code>item</code> is activated. The item is activated when the user clicks or double clicks on it, depending on the system configuration. It is also activated when the user presses the activation key (on <code>Windows</code> and <code>X11</code> this is the <code>Return</code> key, on <code>Mac OS X</code> it is <code>Ctrl + 0</code>).</li>
<li><code>QListWidgetItem * QListWidget::itemAt(const QPoint &amp; p) const</code>: Returns a pointer to the item at the coordinates <code>p</code>. The coordinates are relative to the list widget’s <code>viewport()</code>.</li>
<li><code>QListWidgetItem * QListWidget::itemAt(int x, int y) const</code>: This is an overloaded function. Returns a pointer to the item at the coordinates <code>(x, y)</code>. The coordinates are relative to the list widget’s <code>viewport()</code>.</li>
<li><code>void QListWidget::itemChanged(QListWidgetItem * item) [signal]</code>: This signal is emitted whenever the data of <code>item</code> has changed.</li>
<li><code>void QListWidget::itemClicked(QListWidgetItem * item) [signal]</code>: This signal is emitted with the specified <code>item</code> when a mouse button is clicked on an item in the widget.</li>
<li><code>void QListWidget::itemDoubleClicked(QListWidgetItem * item) [signal]</code>: This signal is emitted with the specified <code>item</code> when a mouse button is double clicked on an item in the widget.</li>
<li><code>void QListWidget::itemEntered(QListWidgetItem * item) [signal]</code>: This signal is emitted when the mouse cursor enters an <code>item</code>. The <code>item</code> is the item entered. This signal is only emitted when <code>mouseTracking</code> is turned on, or when a mouse button is pressed while moving into an item.</li>
<li><code>QListWidgetItem * QListWidget::itemFromIndex(const QModelIndex &amp; index) const [protected]</code>: Returns a pointer to the <code>QListWidgetItem</code> assocated with the given <code>index</code>.</li>
<li><code>void QListWidget::itemPressed(QListWidgetItem * item) [signal]</code>: This signal is emitted with the specified <code>item</code> when a mouse button is pressed on an item in the widget.</li>
<li><code>void QListWidget::itemSelectionChanged() [signal]</code>: This signal is emitted whenever the selection changes.</li>
<li><code>QWidget * QListWidget::itemWidget(QListWidgetItem * item) const</code>: Returns the widget displayed in the given <code>item</code>.</li>
<li><code>QList&lt;QListWidgetItem *&gt; QListWidget::items(const QMimeData * data) const [protected]</code>: Returns a list of pointers to the items contained in the <code>data</code> object. If the object was not created by a <code>QListWidget</code> in the same process, the list is empty.</li>
<li><code>QMimeData * QListWidget::mimeData(const QList&lt;QListWidgetItem *&gt; items) const [virtual protected]</code>: Returns an object that contains a serialized description of the specified <code>items</code>. The format used to describe the items is obtained from the <code>mimeTypes()</code> function. If the list of <code>items</code> is empty, <code>0</code> is returned instead of a serialized empty list.</li>
<li><code>QStringList QListWidget::mimeTypes() const [virtual protected]</code>: Returns a list of <code>MIME</code> types that can be used to describe a list of listwidget items.</li>
<li><code>void QListWidget::openPersistentEditor(QListWidgetItem * item)</code>: Opens an editor for the given <code>item</code>. The editor remains open after editing.</li>
<li><code>void QListWidget::removeItemWidget(QListWidgetItem * item)</code>: Removes the widget set on the given <code>item</code>.</li>
<li><code>int QListWidget::row(const QListWidgetItem * item) const</code>: Returns the row containing the given <code>item</code>.</li>
<li><code>void QListWidget::scrollToItem(const QListWidgetItem * item, QAbstractItemView::ScrollHint hint = EnsureVisible) [slot]</code>: Scrolls the view if necessary to ensure that the <code>item</code> is visible. <code>hint</code> specifies where the item should be located after the operation.</li>
<li><code>QList&lt;QListWidgetItem *&gt; QListWidget::selectedItems() const</code>: Returns a list of all selected items in the list widget.</li>
<li><code>void QListWidget::setCurrentItem(QListWidgetItem * item)</code>: Sets the current item to <code>item</code>. Unless the selection mode is <code>NoSelection</code>, the <code>item</code> is also be selected.</li>
<li><code>void QListWidget::setCurrentItem(QListWidgetItem * item, QItemSelectionModel::SelectionFlags command)</code>: Set the current item to <code>item</code>, using the given <code>command</code>.</li>
<li><code>void QListWidget::setItemWidget(QListWidgetItem * item, QWidget * widget)</code>: Sets the <code>widget</code> to be displayed in the give <code>item</code>. This function should only be used to display static content in the place of a list widget item. If you want to display custom dynamic content or implement a custom editor widget, use <code>QListView</code> and subclass <code>QItemDelegate</code> instead.</li>
<li><code>void QListWidget::sortItems(Qt::SortOrder order = Qt::AscendingOrder)</code>: Sorts all the items in the list widget according to the specified <code>order</code>.</li>
<li><code>Qt::DropActions QListWidget::supportedDropActions() const [virtual protected]</code>: Returns the drop actions supported by this view.</li>
<li><code>QListWidgetItem * QListWidget::takeItem(int row)</code>: Removes and returns the item from the given <code>row</code> in the list widget; otherwise returns <code>0</code>. Items removed from a list widget will not be managed by <code>Qt</code>, and will need to be deleted manually.</li>
<li><code>QRect QListWidget::visualItemRect(const QListWidgetItem * item) const</code>: Returns the rectangle on the viewport occupied by the item at <code>item</code>.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QMessageBox/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QMessageBox/" itemprop="url">Qt之QMessageBox</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T19:44:36+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;先来看一下最熟悉的<code>QMessageBox::information</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::information ( <span class="literal">NULL</span>, <span class="string">"Title"</span>, <span class="string">"Content"</span>, QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/1.png"></p>
<p>&emsp;&emsp;函数原型如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> StandardButton QMessageBox::information (</span><br><span class="line">    QWidget *parent, <span class="keyword">const</span> QString &amp;title, <span class="keyword">const</span> QString &amp;text,</span><br><span class="line">    StandardButtons buttons = Ok, StandardButton defaultButton = NoButton );</span><br></pre></td></tr></table></figure>
<p>参数<code>parent</code>是说明它的父组件；参数<code>title</code>是对话框的标题；参数<code>text</code>是对话框显示的内容；参数<code>buttons</code>用于声明对话框放置的按钮，默认只放置一个<code>OK</code>按钮，这个参数可以使用或运算，例如我们希望有一个<code>Yes</code>和一个<code>No</code>的按钮，可以使用<code>QMessageBox::Yes | QMessageBox::No</code>。所有的按钮类型可以在<code>QMessageBox</code>的<code>StandarButton</code>枚举中找到；参数<code>defaultButton</code>就是默认选中的按钮，默认值是<code>NoButton</code>，也就是哪个按钮都不选中。<br>&emsp;&emsp;<code>Qt</code>提供了五个类似的接口，用于显示类似的窗口。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::critical ( <span class="literal">NULL</span>, <span class="string">"critical"</span>, <span class="string">"Content"</span>, QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/2.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::warning ( <span class="literal">NULL</span>, <span class="string">"warning"</span>, <span class="string">"Content"</span>, QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/3.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::question ( <span class="literal">NULL</span>, <span class="string">"question"</span>, <span class="string">"Content"</span>, QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/4.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::about ( <span class="literal">NULL</span>, <span class="string">"About"</span>, <span class="string">"About this application"</span> );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/5.png"></p>
<p>&emsp;&emsp;<code>QMessageBox</code>对话框的文本信息可以支持<code>HTML</code>标签：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::about ( <span class="literal">NULL</span>, <span class="string">"About"</span>, <span class="string">"About this &lt;font color='red'&gt;application&lt;/font&gt;"</span> );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/6.png"></p>
<p>&emsp;&emsp;如果想自定义图片的话，需要我们自定义一个<code>QMessagebox</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QMessageBox <span class="title">message</span> <span class="params">( QMessageBox::NoIcon, <span class="string">"Title"</span>, <span class="string">"Content with icon."</span> )</span></span>;</span><br><span class="line">message.setIconPixmap ( QPixmap ( <span class="string">"icon.png"</span> ) );</span><br><span class="line">message.exec();</span><br></pre></td></tr></table></figure>
<p>这里使用的是<code>exec</code>函数，而不是<code>show</code>，因为这是一个模态对话框，需要有它自己的事件循环，否则对话框会一闪而过。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QMessageBox/7.png"></p>
<p>&emsp;&emsp;还有一点要注意，我们使用的是<code>png</code>格式的图片，因为<code>Qt</code>内置的处理图片格式是<code>png</code>，所以这不会引起很大的麻烦。如果你要使用<code>jpeg</code>格式的图片，<code>Qt</code>是以插件的形式支持的。在开发时没有什么问题，不过如果要部署的话，需要注意这一点。<br>&emsp;&emsp;最后来说一下怎么处理对话框的交互。我们使用<code>QMessageBox</code>类的时候有两种方式，一是使用<code>static</code>函数，另外是使用构造函数。首先来说一下<code>static</code>函数的方式。注意，<code>static</code>函数都是要返回一个<code>StandardButton</code>，我们可以通过判断这个返回值来对用户的操作做出响应：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox::StandardButton rb = QMessageBox::question (</span><br><span class="line">    <span class="literal">NULL</span>, <span class="string">"Show Qt"</span>, <span class="string">"Do you want to show Qt dialog?"</span>,</span><br><span class="line">    QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( rb == QMessageBox::Yes ) &#123;</span><br><span class="line">    QMessageBox::aboutQt ( <span class="literal">NULL</span>, <span class="string">"About Qt"</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果要使用构造函数的方式，那么就要自己判断：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QMessageBox <span class="title">message</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    QMessageBox::NoIcon, <span class="string">"Show Qt"</span>, <span class="string">"Do you want to show Qt dialog?"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    QMessageBox::Yes | QMessageBox::No, <span class="literal">NULL</span> )</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( message.exec() == QMessageBox::Yes ) &#123;</span><br><span class="line">    QMessageBox::aboutQt ( <span class="literal">NULL</span>, <span class="string">"About Qt"</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际用法如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ret1 = QMessageBox::question ( <span class="comment">/* 问题对话框(参数：父窗口、标题栏、显示信息、拥有的按钮) */</span></span><br><span class="line">    <span class="keyword">this</span>, tr ( <span class="string">"问题对话框"</span> ), tr ( <span class="string">"你了解Qt吗？"</span> ),</span><br><span class="line">    QMessageBox::Yes, QMessageBox::No );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ret1 == QMessageBox::Yes ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"问题！"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">int</span> ret2 = QMessageBox::information ( <span class="comment">/* 提示对话框 */</span></span><br><span class="line">    <span class="keyword">this</span>, tr ( <span class="string">"提示对话框"</span> ), tr ( <span class="string">"这是Qt书籍！"</span> ), QMessageBox::Ok );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ret2 == QMessageBox::Ok ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"提示！"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">int</span> ret3 = QMessageBox::warning ( <span class="comment">/* 警告对话框 */</span></span><br><span class="line">    <span class="keyword">this</span>, tr ( <span class="string">"警告对话框"</span> ), tr ( <span class="string">"不能提前结束！"</span> ), QMessageBox::Abort );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ret3 == QMessageBox::Abort ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"警告！"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">int</span> ret4 = QMessageBox::critical ( <span class="comment">/* 错误对话框 */</span></span><br><span class="line">    <span class="keyword">this</span>, tr ( <span class="string">"严重错误对话框"</span> ),</span><br><span class="line">    tr ( <span class="string">"发现一个严重错误！现在要关闭所有文件！"</span> ), QMessageBox::YesAll );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( ret4 == QMessageBox::YesAll ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"错误"</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">QMessageBox::about ( <span class="comment">/* 关于对话框 */</span></span><br><span class="line">    <span class="keyword">this</span>, tr ( <span class="string">"关于对话框"</span> ),</span><br><span class="line">    tr ( <span class="string">"yafeilinux.com致力于Qt及Qt Creator的普及工作！"</span> ) );</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="QMessageBox典型用法"><a href="#QMessageBox典型用法" class="headerlink" title="QMessageBox典型用法"></a>QMessageBox典型用法</h3><p>&emsp;&emsp;弹出消息对话框在许多应用中是必需的。它可以提示用户，防止用户因为不小心而犯下错误。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox msgBox;</span><br><span class="line">msgBox.setText ( <span class="string">"The document has been modified."</span> );</span><br><span class="line">msgBox.setInformativeText ( <span class="string">"Do you want to save your changes?"</span> );</span><br><span class="line">msgBox.setStandardButtons ( QMessageBox::Save | QMessageBox::Discard | QMessageBox::Cancel );</span><br><span class="line">msgBox.setDefaultButton ( QMessageBox::Save );</span><br><span class="line"><span class="keyword">int</span> ret = msgBox.exec();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">switch</span> ( ret ) &#123;</span><br><span class="line">    <span class="keyword">case</span> QMessageBox::Save: <span class="comment">/* Save was clicked */</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">case</span> QMessageBox::Discard: <span class="comment">/* Don't Save was clicked */</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">case</span> QMessageBox::Cancel: <span class="comment">/* Cancel was clicked */</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">default</span>: <span class="comment">/* should never be reached */</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在<code>QMessageBox</code>中添加按钮，判断哪一个按钮被按下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">QMessageBox msgBox;</span><br><span class="line">QPushButton *connectButton = msgBox.addButton ( tr ( <span class="string">"Connect"</span> ), QMessageBox::ActionRole );</span><br><span class="line">QPushButton *abortButton = msgBox.addButton ( QMessageBox::Abort );</span><br><span class="line">​</span><br><span class="line">msgBox.exec();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( msgBox.clickedButton() == connectButton ) &#123;</span><br><span class="line">    <span class="comment">/* connect */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ( msgBox.clickedButton() == abortButton ) &#123;</span><br><span class="line">    <span class="comment">/* abort */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QTableWidget/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QTableWidget/" itemprop="url">Qt之QTableWidget</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T18:37:12+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTableWidget&gt;</span></span></span><br><span class="line"><span class="comment">/* 构造一个QTableWidget类的实体对象tableWidget */</span></span><br><span class="line">tableWidget = <span class="keyword">new</span> QTableWidget ( ui-&gt;textBrowser );</span><br><span class="line">tableWidget-&gt;setRowCount ( <span class="number">7</span> ); <span class="comment">/* 设置行数为7 */</span></span><br><span class="line">tableWidget-&gt;setColumnCount ( <span class="number">5</span> ); <span class="comment">/* 设置列数为5 */</span></span><br><span class="line">tableWidget-&gt;setGeometry ( QRect ( <span class="number">0</span>, <span class="number">0</span>, <span class="number">401</span>, <span class="number">241</span> ) ); <span class="comment">/* 设置tableWidget的大小 */</span></span><br><span class="line">tableWidget-&gt;setItem ( <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">new</span> QTableWidgetItem ( <span class="string">"abc"</span> ) ); <span class="comment">/* 第一行第一列的内容设置为“abc” */</span></span><br><span class="line">tableWidget-&gt;setItem ( <span class="number">1</span>, <span class="number">0</span>, <span class="keyword">new</span> QTableWidgetItem ( <span class="string">"def"</span> ) ); <span class="comment">/* 第二行第一列的内容设置为“abc” */</span></span><br><span class="line"><span class="comment">/* 40, 110, 100, 60, 85 */</span></span><br><span class="line">tableWidget-&gt;setColumnWidth ( <span class="number">0</span>, <span class="number">40</span> ); <span class="comment">/* 设置第一列的列宽 */</span></span><br><span class="line">tableWidget-&gt;setColumnWidth ( <span class="number">1</span>, <span class="number">110</span> ); <span class="comment">/* 设置第二列的列宽 */</span></span><br><span class="line">tableWidget-&gt;setColumnWidth ( <span class="number">2</span>, <span class="number">100</span> ); <span class="comment">/* 设置第三列的列宽 */</span></span><br><span class="line">tableWidget-&gt;setColumnWidth ( <span class="number">3</span>, <span class="number">60</span> ); <span class="comment">/* 设置第四列的列宽 */</span></span><br><span class="line">tableWidget-&gt;setColumnWidth ( <span class="number">4</span>, <span class="number">85</span> ); <span class="comment">/* 设置第五列的列宽 */</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 列表的标题为：车次、车牌、支付卡、金额、累计金额 */</span></span><br><span class="line">tableWidget-&gt;setHorizontalHeaderLabels (</span><br><span class="line">    QStringList() &lt;&lt; tr ( <span class="string">"车次"</span> ) &lt;&lt; tr ( <span class="string">"车牌"</span> ) \</span><br><span class="line">                  &lt;&lt; tr ( <span class="string">"支付卡"</span> ) &lt;&lt; tr ( <span class="string">"金额"</span> ) &lt;&lt; tr ( <span class="string">"累计金额"</span> ) );</span><br><span class="line">tableWidget-&gt;setFont ( QFont ( <span class="string">"wenquanyi"</span>, <span class="number">12</span>, <span class="number">3</span> ) ); <span class="comment">/* 设置字体 */</span></span><br><span class="line">QHeaderView *headerView = tableWidget-&gt;verticalHeader();</span><br><span class="line">headerView-&gt;setHidden ( <span class="literal">true</span> ); <span class="comment">/* 行名隐藏 */</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QTableWidget/1.png"></p>
<hr>
<p>&emsp;&emsp;表格是<code>GUI</code>中常用的控件，<code>Qt</code>中常用的表格类是<code>QTableWidget</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">QTableWidget *table = <span class="keyword">new</span> QTableWidget ( <span class="number">4</span>, <span class="number">2</span> ); <span class="comment">/* 新建一4行2列的表格 */</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 设置表格行标题 */</span></span><br><span class="line">QStringList headerLabels;</span><br><span class="line">headerLabels &lt;&lt; <span class="string">"C1"</span> &lt;&lt; <span class="string">"C2"</span>;</span><br><span class="line">table-&gt;setHorizontalHeaderLabels ( headerLabels );</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 设置表格行标题的对齐方式 */</span></span><br><span class="line">table-&gt;horizontalHeader()-&gt;setDefaultAlignment ( Qt::AlignLeft );</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 设置行表题 */</span></span><br><span class="line">QStringList rowLabels;</span><br><span class="line">rowLabels &lt;&lt; <span class="string">"Line1"</span> &lt;&lt; <span class="string">"Line2"</span> &lt;&lt; <span class="string">"Line3"</span> &lt;&lt; <span class="string">"Line4"</span>;</span><br><span class="line">table-&gt;setVerticalHeaderLabels ( rowLabels );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ ) &#123; <span class="comment">/* 设置每一行的高度 */</span></span><br><span class="line">    table-&gt;setRowHeight ( i, <span class="number">22</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 自动调整最后一列的宽度使它和表格的右边界对齐 */</span></span><br><span class="line">table-&gt;horizontalHeader()-&gt;setStretchLastSection ( <span class="literal">true</span> );</span><br><span class="line"><span class="comment">/* 设置表格的选择方式 */</span></span><br><span class="line">table-&gt;setSelectionBehavior ( QAbstractItemView::SelectItems );</span><br><span class="line"><span class="comment">/* 设置编辑方式 */</span></span><br><span class="line">table-&gt;setEditTriggers ( QAbstractItemView::DoubleClicked );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> row = <span class="number">0</span>; row &lt; <span class="number">4</span>; ++row ) &#123; <span class="comment">/* 设置表格的内容 */</span></span><br><span class="line">    QTableWidgetItem *item0, *item1;</span><br><span class="line">    item0 = <span class="keyword">new</span> QTableWidgetItem;</span><br><span class="line">    item1 = <span class="keyword">new</span> QTableWidgetItem;</span><br><span class="line">    QString txt = QString ( <span class="string">"%1"</span> ).arg ( row + <span class="number">1</span> );</span><br><span class="line">    item0-&gt;setText ( txt );</span><br><span class="line">    table-&gt;setItem ( row, <span class="number">0</span>, item0 );</span><br><span class="line">    txt = QString ( <span class="string">"%1"</span> ).arg ( ( row + <span class="number">1</span> ) * <span class="number">2</span> );</span><br><span class="line">    item1-&gt;setText ( txt );</span><br><span class="line">    table-&gt;setItem ( row, <span class="number">1</span>, item1 );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 增加一行 */</span></span><br><span class="line">table-&gt;setRowCount ( <span class="number">5</span> );</span><br><span class="line">QTableWidgetItem *vHeader5 = <span class="keyword">new</span> QTableWidgetItem ( <span class="string">"Line5"</span> );</span><br><span class="line">table-&gt;setVerticalHeaderItem ( <span class="number">4</span>, vHeader5 );</span><br><span class="line">QTableWidgetItem *item5_0, *item5_1;</span><br><span class="line">item5_0 = <span class="keyword">new</span> QTableWidgetItem;</span><br><span class="line">item5_1 = <span class="keyword">new</span> QTableWidgetItem;</span><br><span class="line">item5_0-&gt;setText ( QString ( <span class="string">"%1"</span> ).arg ( <span class="number">5</span> ) );</span><br><span class="line">item5_1-&gt;setText ( QString ( <span class="string">"%1"</span> ).arg ( <span class="number">5</span> * <span class="number">2</span> ) );</span><br><span class="line">table-&gt;setItem ( <span class="number">4</span>, <span class="number">0</span>, item5_0 );</span><br><span class="line">table-&gt;setItem ( <span class="number">4</span>, <span class="number">1</span>, item5_1 );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QTableWidget/2.png"></p>
<hr>
<p>&emsp;&emsp;The <code>QTableWidget</code> class provides an <code>item-based</code> table view with a default model.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Header</th>
<th>Inherits</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QTableWidget</code></td>
<td><code>QTableView</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Public-Functions"><a href="#Public-Functions" class="headerlink" title="Public Functions"></a>Public Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>QTableWidget(QWidget * parent = 0)</code></td>
</tr>
<tr>
<td></td>
<td><code>QTableWidget(int rows, int columns, QWidget * parent = 0)</code></td>
</tr>
<tr>
<td></td>
<td><code>~QTableWidget()</code></td>
</tr>
<tr>
<td><code>QWidget *</code></td>
<td><code>cellWidget(int row, int column) const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>closePersistentEditor(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>column(const QTableWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>columnCount() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>currentColumn() const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>currentItem() const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>currentRow() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>editItem(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>QList&lt;QTableWidgetItem *&gt;</code></td>
<td><code>findItems(const QString &amp; text, Qt::MatchFlags flags) const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>horizontalHeaderItem(int column) const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>item(int row, int column) const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>itemAt(const QPoint &amp; point) const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>itemAt(int ax, int ay) const</code></td>
</tr>
<tr>
<td><code>const QTableWidgetItem *</code></td>
<td><code>itemPrototype() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>openPersistentEditor(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>removeCellWidget(int row, int column)</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>row(const QTableWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>rowCount() const</code></td>
</tr>
<tr>
<td><code>QList&lt;QTableWidgetItem *&gt;</code></td>
<td><code>selectedItems()</code></td>
</tr>
<tr>
<td><code>QList&lt;QTableWidgetSelectionRange&gt;</code></td>
<td><code>selectedRanges() const</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCellWidget(int row, int column, QWidget * widget)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setColumnCount(int columns)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentCell(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentCell(int row, int column, QItemSelectionModel::SelectionFlags command)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentItem(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setCurrentItem(QTableWidgetItem * item, QItemSelectionModel::SelectionFlags command)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setHorizontalHeaderItem(int column, QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setHorizontalHeaderLabels(const QStringList &amp; labels)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setItem(int row, int column, QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setItemPrototype(const QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setRangeSelected(const QTableWidgetSelectionRange &amp; range, bool select)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setRowCount(int rows)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setVerticalHeaderItem(int row, QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>setVerticalHeaderLabels(const QStringList &amp; labels)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>sortItems(int column, Qt::SortOrder order = Qt::AscendingOrder)</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>takeHorizontalHeaderItem(int column)</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>takeItem(int row, int column)</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>stakeVerticalHeaderItem(int row)</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>verticalHeaderItem(int row) const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>visualColumn(int logicalColumn) const</code></td>
</tr>
<tr>
<td><code>QRect</code></td>
<td><code>visualItemRect(const QTableWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>visualRow(int logicalRow) const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Public-Slots"><a href="#Public-Slots" class="headerlink" title="Public Slots"></a>Public Slots</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><code>clear()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>clearContents()</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>insertColumn(int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>insertRow(int row)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>removeColumn(int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>removeRow(int row)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>scrollToItem(const QTableWidgetItem * item, QAbstractItemView::ScrollHint hint = EnsureVisible)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><code>cellActivated(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>cellChanged(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>cellClicked(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>cellDoubleClicked(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>cellEntered(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>cellPressed(int row, int column)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>currentCellChanged(int currentRow, int currentColumn, int previousRow, int previousColumn)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>currentItemChanged(QTableWidgetItem * current, QTableWidgetItem * previous)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemActivated(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemChanged(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemClicked(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemDoubleClicked(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemEntered(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemPressed(QTableWidgetItem * item)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>itemSelectionChanged()</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Protected-Functions"><a href="#Protected-Functions" class="headerlink" title="Protected Functions"></a>Protected Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>virtual bool</code></td>
<td><code>dropMimeData(int row, int column, const QMimeData * data, Qt::DropAction action)</code></td>
</tr>
<tr>
<td><code>QModelIndex</code></td>
<td><code>indexFromItem(QTableWidgetItem * item) const</code></td>
</tr>
<tr>
<td><code>QTableWidgetItem *</code></td>
<td><code>itemFromIndex(const QModelIndex &amp; index) const</code></td>
</tr>
<tr>
<td><code>QList&lt;QTableWidgetItem *&gt;</code></td>
<td><code>items(const QMimeData * data) const</code></td>
</tr>
<tr>
<td><code>virtual QMimeData *</code></td>
<td><code>mimeData(const QList&lt;QTableWidgetItem *&gt; items) const</code></td>
</tr>
<tr>
<td><code>virtual QStringList</code></td>
<td><code>mimeTypes() const</code></td>
</tr>
<tr>
<td><code>virtual Qt::DropActions</code></td>
<td><code>supportedDropActions() const</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Reimplemented-Protected-Functions"><a href="#Reimplemented-Protected-Functions" class="headerlink" title="Reimplemented Protected Functions"></a>Reimplemented Protected Functions</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Return</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>virtual void</code></td>
<td><code>dropEvent(QDropEvent * event)</code></td>
</tr>
<tr>
<td><code>virtual bool</code></td>
<td><code>event(QEvent * e)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Detailed-Description"><a href="#Detailed-Description" class="headerlink" title="Detailed Description"></a>Detailed Description</h3><p>&emsp;&emsp;The <code>QTableWidget</code> class provides an <code>item-based</code> table view with a default model.<br>&emsp;&emsp;Table widgets provide standard table display facilities for applications. The items in a <code>QTableWidget</code> are provided by <code>QTableWidgetItem</code>.<br>&emsp;&emsp;If you want a table that uses your own data model you should use <code>QTableView</code> rather than this class.<br>&emsp;&emsp;Table widgets can be constructed with the required numbers of rows and columns:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tableWidget = <span class="keyword">new</span> QTableWidget ( <span class="number">12</span>, <span class="number">3</span>, <span class="keyword">this</span> );</span><br></pre></td></tr></table></figure>
<p>Alternatively, tables can be constructed without a given size and resized later:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tableWidget = <span class="keyword">new</span> QTableWidget ( <span class="keyword">this</span> );</span><br><span class="line">tableWidget-&gt;setRowCount ( <span class="number">10</span> );</span><br><span class="line">tableWidget-&gt;setColumnCount ( <span class="number">5</span> );</span><br></pre></td></tr></table></figure>
<p>Items are created ouside the table (with no parent widget) and inserted into the table with <code>setItem()</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QTableWidgetItem *newItem = <span class="keyword">new</span> QTableWidgetItem ( tr ( <span class="string">"%1"</span> ).arg ( ( row + <span class="number">1</span> ) * ( column + <span class="number">1</span> ) ) );</span><br><span class="line">tableWidget-&gt;setItem ( row, column, newItem );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;If you want to enable sorting in your table widget, do so after you have populated it with items, otherwise sorting may interfere with the insertion order.<br>&emsp;&emsp;Tables can be given both horizontal and vertical headers. The simplest way to create the headers is to supply a list of strings to the <code>setHorizontalHeaderLabels()</code> and <code>setVerticalHeaderLabels()</code> functions. These will provide simple textual headers for the table’s columns and rows. More sophisticated headers can be created from existing table items that are usually constructed outside the table. For example, we can construct a table item with an icon and aligned text, and use it as the header for a particular column:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QTableWidgetItem *cubesHeaderItem = <span class="keyword">new</span> QTableWidgetItem ( tr ( <span class="string">"Cubes"</span> ) );</span><br><span class="line">cubesHeaderItem-&gt;setIcon ( QIcon ( QPixmap ( <span class="string">":/Images/cubed.png"</span> ) ) );</span><br><span class="line">cubesHeaderItem-&gt;setTextAlignment ( Qt::AlignVCenter );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;The number of rows in the table can be found with <code>rowCount()</code>, and the number of columns with <code>columnCount()</code>. The table can be cleared with the <code>clear()</code> function.</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QTableWidget/3.png"></p>
<h3 id="Property-Documentation"><a href="#Property-Documentation" class="headerlink" title="Property Documentation"></a>Property Documentation</h3><ul>
<li><code>columnCount : int</code>: This property holds the number of columns in the table. By default, for a table constructed without row and column counts, this property contains a value of <code>0</code>. Access functions:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">columnCount</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setColumnCount</span> <span class="params">( <span class="keyword">int</span> columns )</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>rowCount : int</code>: This property holds the number of rows in the table. By default, for a table constructed without row and column counts, this property contains a value of <code>0</code>. Access functions:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rowCount</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setRowCount</span> <span class="params">( <span class="keyword">int</span> rows )</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Member-Function-Documentation"><a href="#Member-Function-Documentation" class="headerlink" title="Member Function Documentation"></a>Member Function Documentation</h3><ul>
<li><code>QTableWidget::QTableWidget(QWidget * parent = 0)</code>: Creates a new table view with the given <code>parent</code>.</li>
<li><code>QTableWidget::QTableWidget(int rows, int columns, QWidget * parent = 0)</code>: Creates a new table view with the given <code>rows</code> and <code>columns</code>, and with the given <code>parent</code>.</li>
<li><code>QTableWidget::~QTableWidget()</code>: Destroys this QTableWidget.</li>
<li><code>void QTableWidget::cellActivated(int row, int column) [signal]</code>: This signal is emitted when the cell specified by <code>row</code> and <code>column</code> has been activated.</li>
<li><code>void QTableWidget::cellChanged(int row, int column) [signal]</code>: This signal is emitted whenever the data of the item in the cell specified by <code>row</code> and <code>column</code> has changed.</li>
<li><code>void QTableWidget::cellClicked(int row, int column) [signal]</code>: This signal is emitted whenever a cell in the table is clicked. The <code>row</code> and <code>column</code> specified is the cell that was clicked.</li>
<li><code>void QTableWidget::cellDoubleClicked(int row, int column) [signal]</code>: This signal is emitted whenever a cell in the table is double clicked. The <code>row</code> and <code>column</code> specified is the cell that was double clicked.</li>
<li><code>void QTableWidget::cellEntered(int row, int column) [signal]</code>: This signal is emitted when the mouse cursor enters a cell. The cell is specified by <code>row</code> and <code>column</code>. This signal is only emitted when mouseTracking is turned on, or when a mouse button is pressed while moving into an item.</li>
<li><code>void QTableWidget::cellPressed(int row, int column) [signal]</code>: This signal is emitted whenever a cell in the table is pressed. The <code>row</code> and <code>column</code> specified is the cell that was pressed.</li>
<li><code>QWidget * QTableWidget::cellWidget(int row, int column) const</code>: Returns the widget displayed in the cell in the given <code>row</code> and <code>column</code>. <strong>Note</strong>: The table takes ownership of the widget.</li>
<li><code>void QTableWidget::clear() [slot]</code>: Removes all items in the view. This will also remove all selections. The table dimensions stay the same.</li>
<li><code>void QTableWidget::clearContents() [slot]</code>: Removes all items not in the headers from the view. This will also remove all selections. The table dimensions stay the same.</li>
<li><code>void QTableWidget::closePersistentEditor(QTableWidgetItem * item)</code>: Closes the persistent editor for <code>item</code>.</li>
<li><code>int QTableWidget::column(const QTableWidgetItem * item) const</code>: Returns the column for the <code>item</code>.</li>
<li><code>void QTableWidget::currentCellChanged(int currentRow, int currentColumn, int previousRow, int previousColumn) [signal]</code>: This signal is emitted whenever the current cell changes. The cell specified by <code>previousRow</code> and <code>previousColumn</code> is the cell that previously had the focus, the cell specified by <code>currentRow</code> and <code>currentColumn</code> is the new current cell.</li>
<li><code>int QTableWidget::currentColumn() const</code>: Returns the column of the current item.</li>
<li><code>QTableWidgetItem * QTableWidget::currentItem() const</code>: Returns the current item.</li>
<li><code>void QTableWidget::currentItemChanged(QTableWidgetItem * current, QTableWidgetItem * previous) [signal]</code>: This signal is emitted whenever the <code>current</code> item changes. The <code>previous</code> item is the item that previously had the focus, <code>current</code> is the new current item.</li>
<li><code>int QTableWidget::currentRow() const</code>: Returns the row of the current item.</li>
<li><code>void QTableWidget::dropEvent(QDropEvent * event) [virtual protected]</code>: Reimplemented from <code>QWidget::dropEvent()</code>.</li>
<li><code>bool QTableWidget::dropMimeData(int row, int column, const QMimeData * data, Qt::DropAction action) [virtual protected]</code>: Handles the <code>data</code> supplied by a drag and drop operation that ended with the given <code>action</code> in the given <code>row</code> and <code>column</code>. Returns <code>true</code> if the <code>data</code> and <code>action</code> can be handled by the model; otherwise returns <code>false</code>.</li>
<li><code>void QTableWidget::editItem(QTableWidgetItem * item)</code>: Starts editing the <code>item</code> if it is editable.</li>
<li><code>bool QTableWidget::event(QEvent * e) [virtual protected]</code>: Reimplemented from <code>QObject::event()</code>.</li>
<li><code>QList&lt;QTableWidgetItem *&gt; QTableWidget::findItems(const QString &amp; text, Qt::MatchFlags flags) const</code>: Finds items that matches the <code>text</code> using the given <code>flags</code>.</li>
<li><code>QTableWidgetItem * QTableWidget::horizontalHeaderItem(int column) const</code>: Returns the horizontal header item for <code>column</code>, if one has been set; otherwise returns <code>0</code>.</li>
<li><code>QModelIndex QTableWidget::indexFromItem(QTableWidgetItem * item) const [protected]</code>: Returns the <code>QModelIndex</code> assocated with the given <code>item</code>.</li>
<li><code>void QTableWidget::insertColumn(int column) [slot]</code>: Inserts an empty column into the table at <code>column</code>.</li>
<li><code>void QTableWidget::insertRow(int row) [slot]</code>: Inserts an empty row into the table at <code>row</code>.</li>
<li><code>QTableWidgetItem * QTableWidget::item(int row, int column) const</code>: Returns the item for the given <code>row</code> and <code>column</code> if one has been set; otherwise returns <code>0</code>.</li>
<li><code>void QTableWidget::itemActivated(QTableWidgetItem * item) [signal]</code>: This signal is emitted when the specified <code>item</code> has been activated.</li>
<li><code>QTableWidgetItem * QTableWidget::itemAt(const QPoint &amp; point) const</code>: Returns a pointer to the item at the given <code>point</code>, or returns <code>0</code> if <code>point</code> is not covered by an item in the table widget.</li>
<li><code>QTableWidgetItem * QTableWidget::itemAt(int ax, int ay) const</code>: Returns the item at the position equivalent to <code>QPoint(ax, ay)</code> in the table widget’s coordinate system, or returns <code>0</code> if the specified point is not covered by an item in the table widget.</li>
<li><code>void QTableWidget::itemChanged(QTableWidgetItem * item) [signal]</code>: This signal is emitted whenever the data of <code>item</code> has changed.</li>
<li><code>void QTableWidget::itemClicked(QTableWidgetItem * item) [signal]</code>: This signal is emitted whenever an item in the table is clicked. The <code>item</code> specified is the item that was clicked.</li>
<li><code>void QTableWidget::itemDoubleClicked(QTableWidgetItem * item) [signal]</code>: This signal is emitted whenever an item in the table is double clicked. The <code>item</code> specified is the item that was double clicked.</li>
<li><code>void QTableWidget::itemEntered(QTableWidgetItem * item) [signal]</code>: This signal is emitted when the mouse cursor enters an item. The <code>item</code> is the item entered. This signal is only emitted when <code>mouseTracking</code> is turned on, or when a mouse button is pressed while moving into an item.</li>
<li><code>QTableWidgetItem * QTableWidget::itemFromIndex(const QModelIndex &amp; index) const [protected]</code>: Returns a pointer to the QTableWidgetItem assocated with the given <code>index</code>.</li>
<li><code>void QTableWidget::itemPressed(QTableWidgetItem * item) [signal]</code>: This signal is emitted whenever an item in the table is pressed. The <code>item</code> specified is the item that was pressed.</li>
<li><code>const QTableWidgetItem * QTableWidget::itemPrototype() const</code>: Returns the item prototype used by the table.</li>
<li><code>void QTableWidget::itemSelectionChanged() [signal]</code>: This signal is emitted whenever the selection changes.</li>
<li><code>QList&lt;QTableWidgetItem *&gt; QTableWidget::items(const QMimeData * data) const [protected]</code>: Returns a list of pointers to the items contained in the <code>data</code> object. If the object was not created by a <code>QTreeWidget</code> in the same process, the list is empty.</li>
<li><code>QMimeData * QTableWidget::mimeData(const QList&lt;QTableWidgetItem *&gt; items) const [virtual protected]</code>: Returns an object that contains a serialized description of the specified <code>items</code>. The format used to describe the <code>items</code> is obtained from the <code>mimeTypes()</code> function. If the list of <code>items</code> is empty, <code>0</code> is returned rather than a serialized empty list.</li>
<li><code>QStringList QTableWidget::mimeTypes() const [virtual protected]</code>: Returns a list of <code>MIME</code> types that can be used to describe a list of tablewidget items.</li>
<li><code>void QTableWidget::openPersistentEditor(QTableWidgetItem * item)</code>: Opens an editor for the give <code>item</code>. The editor remains open after editing.</li>
<li><code>void QTableWidget::removeCellWidget(int row, int column)</code>: Removes the widget set on the cell indicated by <code>row</code> and <code>column</code>.</li>
<li><code>void QTableWidget::removeColumn(int column) [slot]</code>: Removes the <code>column</code> and all its items from the table.</li>
<li><code>void QTableWidget::removeRow(int row) [slot]</code>: Removes the <code>row</code> and all its items from the table.</li>
<li><code>int QTableWidget::row(const QTableWidgetItem * item) const</code>: Returns the row for the <code>item</code>.</li>
<li><code>void QTableWidget::scrollToItem(const QTableWidgetItem * item, QAbstractItemView::ScrollHint hint = EnsureVisible) [slot]</code>: Scrolls the view if necessary to ensure that the <code>item</code> is visible. The <code>hint</code> parameter specifies more precisely where the <code>item</code> should be located after the operation.</li>
<li><code>QList&lt;QTableWidgetItem *&gt; QTableWidget::selectedItems()</code>: Returns a list of all selected items. This function returns a list of pointers to the contents of the selected cells. Use the <code>selectedIndexes()</code> function to retrieve the complete selection including empty cells.</li>
<li><code>QList&lt;QTableWidgetSelectionRange&gt; QTableWidget::selectedRanges() const</code>: Returns a list of all selected ranges.</li>
<li><code>void QTableWidget::setCellWidget(int row, int column, QWidget * widget)</code>: Sets the given <code>widget</code> to be displayed in the cell in the given <code>row</code> and <code>column</code>, passing the ownership of the widget to the table. If <code>cell widget A</code> is replaced with <code>cell widget B</code>, <code>cell widget A</code> will be deleted. For example, in the code snippet below, the <code>QLineEdit</code> object will be deleted.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setCellWidget ( index, <span class="keyword">new</span> QLineEdit );</span><br><span class="line">...</span><br><span class="line">setCellWidget ( index, <span class="keyword">new</span> QTextEdit );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>void QTableWidget::setCurrentCell(int row, int column)</code>: Sets the current cell to be the cell at position <code>(row, column)</code>. Depending on the current selection mode, the cell may also be selected.</li>
<li><code>void QTableWidget::setCurrentCell(int row, int column, QItemSelectionModel::SelectionFlags command)</code>: Sets the current cell to be the cell at position <code>(row, column)</code>, using the given <code>command</code>.</li>
<li><code>void QTableWidget::setCurrentItem(QTableWidgetItem * item)</code>: Sets the current item to <code>item</code>. Unless the selection mode is <code>NoSelection</code>, the <code>item</code> is also be selected.</li>
<li><code>void QTableWidget::setCurrentItem(QTableWidgetItem * item, QItemSelectionModel::SelectionFlags command)</code>: Sets the current item to be <code>item</code>, using the given <code>command</code>.</li>
<li><code>void QTableWidget::setHorizontalHeaderItem(int column, QTableWidgetItem * item)</code>: Sets the horizontal header item for <code>column</code> to <code>item</code>.</li>
<li><code>void QTableWidget::setHorizontalHeaderLabels(const QStringList &amp; labels)</code>: Sets the horizontal header labels using <code>labels</code>.</li>
<li><code>void QTableWidget::setItem(int row, int column, QTableWidgetItem * item)</code>: Sets the item for the given <code>row</code> and <code>column</code> to <code>item</code>. The table takes ownership of the item. Note that if sorting is enabled and <code>column</code> is the current sort column, the <code>row</code> will be moved to the sorted position determined by <code>item</code>. If you want to set several items of a particular <code>row</code> (say, by calling <code>setItem()</code> in a loop), you may want to turn off sorting before doing so, and turn it back on afterwards; this will allow you to use the same <code>row</code> argument for all items in the same <code>row</code> (i.e. <code>setItem()</code> will not move the <code>row</code>).</li>
<li><code>void QTableWidget::setItemPrototype(const QTableWidgetItem * item)</code>: Sets the item prototype for the table to the specified <code>item</code>. The table widget will use the item prototype clone function when it needs to create a new table item. For example when the user is editing in an empty cell. This is useful when you have a <code>QTableWidgetItem</code> subclass and want to make sure that <code>QTableWidget</code> creates instances of your subclass. The table takes ownership of the prototype.</li>
<li><code>void QTableWidget::setRangeSelected(const QTableWidgetSelectionRange &amp; range, bool select)</code>: Selects or deselects the <code>range</code> depending on <code>select</code>.</li>
<li><code>void QTableWidget::setVerticalHeaderItem(int row, QTableWidgetItem * item)</code>: Sets the vertical header item for <code>row</code> to <code>item</code>.</li>
<li><code>void QTableWidget::setVerticalHeaderLabels(const QStringList &amp; labels)</code>: Sets the vertical header labels using <code>labels</code>.</li>
<li><code>void QTableWidget::sortItems(int column, Qt::SortOrder order = Qt::AscendingOrder)</code>: Sorts all the rows in the table widget based on <code>column</code> and <code>order</code>.</li>
<li><code>Qt::DropActions QTableWidget::supportedDropActions() const [virtual protected]</code>: Returns the drop actions supported by this view.</li>
<li><code>QTableWidgetItem * QTableWidget::takeHorizontalHeaderItem(int column)</code>: Removes the horizontal header item at <code>column</code> from the header without deleting it.</li>
<li><code>QTableWidgetItem * QTableWidget::takeItem(int row, int column)</code>: Removes the item at <code>row</code> and <code>column</code> from the table without deleting it.</li>
<li><code>QTableWidgetItem * QTableWidget::takeVerticalHeaderItem(int row)</code>: Removes the vertical header item at <code>row</code> from the header without deleting it.</li>
<li><code>QTableWidgetItem * QTableWidget::verticalHeaderItem(int row) const</code>: Returns the vertical header item for <code>row</code>.</li>
<li><code>int QTableWidget::visualColumn(int logicalColumn) const</code>: Returns the visual column of the given <code>logicalColumn</code>.</li>
<li><code>QRect QTableWidget::visualItemRect(const QTableWidgetItem * item) const</code>: Returns the rectangle on the viewport occupied by the item at <code>item</code>.</li>
<li><code>int QTableWidget::visualRow(int logicalRow) const</code>: Returns the visual row of the given <code>logicalRow</code>.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QFile/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QFile/" itemprop="url">Qt之QFile</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T18:04:17+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;基础代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtCore/QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFileInfo&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTextCodec&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QStringList&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDateTime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    QTextCodec::setCodecForTr ( QTextCodec::codecForLocale() );</span><br><span class="line">    <span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"myfile.txt"</span> )</span></span>; <span class="comment">/* 以只写方式打开，如果文件不存在，那么会创建该文件 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( !file.open ( QIODevice::WriteOnly  | QIODevice::Text ) ) &#123;</span><br><span class="line">        qDebug() &lt;&lt; file.errorString();</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    file.write ( <span class="string">"helloQt!\nyafeilinux"</span> );</span><br><span class="line">    file.close();</span><br><span class="line">    <span class="function">QFileInfo <span class="title">info</span> <span class="params">( file )</span></span>; <span class="comment">/* 获取文件信息 */</span></span><br><span class="line">    qDebug() &lt;&lt; QObject::tr ( <span class="string">"绝对路径："</span> ) &lt;&lt; info.absoluteFilePath() &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"文件名："</span> ) &lt;&lt; info.fileName() &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"基本名称："</span> ) &lt;&lt; info.baseName() &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"后缀："</span> ) &lt;&lt; info.suffix() &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"创建时间："</span> ) &lt;&lt; info.created() &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"大小："</span> ) &lt;&lt; info.size();</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( !file.open ( QIODevice::ReadOnly | QIODevice::Text ) ) &#123; <span class="comment">/* 以只读方式打开 */</span></span><br><span class="line">        qDebug() &lt;&lt; file.errorString();</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    qDebug() &lt;&lt; QObject::tr ( <span class="string">"文件内容："</span> ) &lt;&lt; <span class="built_in">endl</span> &lt;&lt; file.readAll();</span><br><span class="line">    qDebug() &lt;&lt; QObject::tr ( <span class="string">"当前位置："</span> ) &lt;&lt; file.pos();</span><br><span class="line">    file.seek ( <span class="number">0</span> );</span><br><span class="line">    QByteArray <span class="built_in">array</span>;</span><br><span class="line">    <span class="built_in">array</span> = file.read ( <span class="number">5</span> );</span><br><span class="line">    qDebug() &lt;&lt; QObject::tr ( <span class="string">"前5个字符："</span> ) &lt;&lt; <span class="built_in">array</span></span><br><span class="line">             &lt;&lt; QObject::tr ( <span class="string">"当前位置："</span> ) &lt;&lt; file.pos();</span><br><span class="line">    file.seek ( <span class="number">15</span> );</span><br><span class="line">    <span class="built_in">array</span> = file.read ( <span class="number">5</span> );</span><br><span class="line">    qDebug() &lt;&lt; QObject::tr ( <span class="string">"第16-20个字符："</span> ) &lt;&lt; <span class="built_in">array</span>;</span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>&emsp;&emsp;<code>Qt</code>作为一个通用开发库，提供了跨平台的文件操作能力。<code>Qt</code>通过<code>QIODevice</code>提供了对<code>I/O</code>设备的抽象，这些设备具有读写字节块的能力。下面是<code>I/O</code>设备的类图(左图为<code>Qt4</code>的，右图为<code>Qt5</code>的)：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QFile/1.png"></p>
<p>&emsp;&emsp;从上面的类图可以看出，<code>Qt4</code>和<code>Qt5</code>在<code>I/O</code>设备部分大同小异，只不过<code>Qt5</code>新增加了一个<code>QFileDevice</code>类。图中所涉及的类及其用途如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>类名</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QIODevice</code></td>
<td>所有<code>I/O</code>设备类的父类，提供了字节块读写的通用操作以及基本接口</td>
</tr>
<tr>
<td><code>QFlie</code></td>
<td>访问本地文件或者嵌入资源</td>
</tr>
<tr>
<td><code>QTemporaryFile</code></td>
<td>创建和访问本地文件系统的临时文件</td>
</tr>
<tr>
<td><code>QBuffer</code></td>
<td>读写<code>QByteArray</code></td>
</tr>
<tr>
<td><code>QProcess</code></td>
<td>运行外部程序，处理进程间通讯</td>
</tr>
<tr>
<td><code>QAbstractSocket</code></td>
<td>所有套接字类的父类</td>
</tr>
<tr>
<td><code>QTcpSocket</code></td>
<td><code>TCP</code>协议网络数据传输</td>
</tr>
<tr>
<td><code>QUdpSocket</code></td>
<td>传输<code>UDP</code>报文</td>
</tr>
<tr>
<td><code>QSslSocket</code></td>
<td>使用<code>SSL/TLS</code>传输数据</td>
</tr>
<tr>
<td><code>QFileDevice</code></td>
<td><code>Qt5</code>新增加的类，提供了有关文件操作的通用实现</td>
</tr>
</tbody>
</table>
</div>
<p><code>QProcess</code>、<code>QTcpSocket</code>、<code>QUdpSoctet</code>和<code>QSslSocket</code>是顺序访问设备。所谓<code>顺序访问</code>，是指它们的数据只能访问一遍：从头走到尾，从第一个字节开始访问，直到最后一个字节，中途不能返回去读取上一个字节；<code>QFile</code>、<code>QTemporaryFile</code>和<code>QBuffer</code>是随机访问设备，可以访问任意位置任意次数，还可以使用<code>QIODevice::seek</code>函数来重新定位文件访问位置指针。<br>&emsp;&emsp;在所有的<code>I/O</code>设备中，文件<code>I/O</code>是最重要的部分之一，因为大多数的程序依旧需要首先访问本地文件。<code>QFile</code>提供了从文件中读取和写入数据的能力，<code>Qt5</code>新加入的<code>QFileDevice</code>类，则将这部分公共操作放到了这个单独的类中。显然这部分代码在<code>Qt4</code>中位于<code>QFile</code>类。这样看来，<code>Qt5</code>的代码结构更为清晰，层次更好。<br>&emsp;&emsp;通常会将文件路径作为参数传给<code>QFile</code>的构造函数，不过也可以在创建好对象之后，使用<code>setFileName</code>来修改。<code>QFile</code>需要使用<code>/</code>作为文件分隔符，不过它会自动将其转换成操作系统所需要的形式。例如<code>C:/windows</code>这样的路径在<code>Windows</code>平台下同样是可以的。<br>&emsp;&emsp;<code>QFile</code>主要提供了有关文件的各种操作，比如打开文件、关闭文件、刷新文件等。可以使用<code>QDataStream</code>或<code>QTextStream</code>类来读写文件，也可以使用<code>QIODevice</code>类提供的<code>read</code>、<code>readLine</code>、<code>readAll</code>以及<code>write</code>这样的函数。值得注意的是，有关文件本身的信息，比如文件名、文件所在目录的名字等，则是通过<code>QFileInfo</code>获取。下面使用一段代码来看看<code>QFile</code>的有关操作：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[] )</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span> <span class="params">( argc, argv )</span></span>;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"in.txt"</span> )</span></span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( !file.open ( QIODevice::ReadOnly | QIODevice::Text ) ) &#123;</span><br><span class="line">        qDebug() &lt;&lt; <span class="string">"Open file failed."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> ( !file.atEnd() ) &#123;</span><br><span class="line">            qDebug() &lt;&lt; file.readLine();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="function">QFileInfo <span class="title">info</span> <span class="params">( file )</span></span>;</span><br><span class="line">    qDebug() &lt;&lt; info.isDir();</span><br><span class="line">    qDebug() &lt;&lt; info.isExecutable();</span><br><span class="line">    qDebug() &lt;&lt; info.baseName();</span><br><span class="line">    qDebug() &lt;&lt; info.completeBaseName();</span><br><span class="line">    qDebug() &lt;&lt; info.suffix();</span><br><span class="line">    qDebug() &lt;&lt; info.completeSuffix();</span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Qt学习之二进制文件读写"><a href="#Qt学习之二进制文件读写" class="headerlink" title="Qt学习之二进制文件读写"></a>Qt学习之二进制文件读写</h3><p>&emsp;&emsp;<code>Qt</code>还提供了更高一级的操作：用于二进制的流<code>QDataStream</code>和用于文本流的<code>QTextStream</code>。<br>&emsp;&emsp;<code>QDataStream</code>提供了基于<code>QIODevice</code>的二进制数据的序列化。数据流是一种二进制流，这种流完全不依赖于底层操作系统、<code>CPU</code>或者字节顺序(大端或小端)。例如，在安装了<code>Windows</code>平台的<code>PC</code>上面写入的一个数据流，可以不经过任何处理，直接拿到运行了<code>Solaris</code>的<code>SPARC</code>机器上读取。由于数据流就是二进制流，因此也可以直接读写没有编码的二进制数据，例如图像、视频、音频等。<code>QDataStream</code>既能够存取<code>C++</code>基本类型，如<code>int</code>、<code>char</code>、<code>short</code>等，也可以存取复杂的数据类型，例如自定义的类。实际上，<code>QDataStream</code>对于类的存储，是将复杂的类分割为很多基本单元实现的。<br>&emsp;&emsp;结合<code>QIODevice</code>，<code>QDataStream</code>可以很方便地对文件、网络套接字等进行读写操作。我们从代码开始看起：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.dat"</span> )</span></span>;</span><br><span class="line">file.open ( QIODevice::WriteOnly );</span><br><span class="line"><span class="function">QDataStream <span class="title">out</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">out &lt;&lt; QString ( <span class="string">"the answer is"</span> );</span><br><span class="line">out &lt;&lt; ( qint32 ) <span class="number">42</span>;</span><br></pre></td></tr></table></figure>
<p>在这段代码中，我们首先打开一个名为<code>file.dat</code>的文件(注意，我们为简单起见，并没有检查文件打开是否成功，这在正式程序中是不允许的)。然后，我们将刚刚创建的<code>file</code>对象的指针传递给一个<code>QDataStream</code>实例<code>out</code>。类似于<code>std::cout</code>标准输出流，<code>QDataStream</code>也重载了输出重定向<code>&lt;&lt;</code>运算符。后面的代码就很简单了：将<code>the answer is</code>和数字<code>42</code>输出到数据流。由于我们的<code>out</code>对象建立在<code>file</code>之上，因此相当于将答案写入<code>file</code>。<br>&emsp;&emsp;需要指出一点，最好使用<code>Qt</code>整型来进行读写，比如程序中的<code>qint32</code>，这保证了在任意平台和任意编译器都能够有相同的行为。<br>&emsp;&emsp;我们通过一个例子来看看<code>Qt</code>是如何存储数据的。例如<code>char *</code>字符串在存储时，会首先存储该字符串包括<code>\0</code>结束符的长度(<code>32</code>位整型)，然后是字符串的内容以及结束符<code>\0</code>。在读取时，先以<code>32</code>位整型读出整个的长度，然后按照这个长度取出整个字符串的内容。但是，如果你直接运行这段代码，你会得到一个空白的<code>file.dat</code>，并没有写入任何数据，这是因为我们的<code>file</code>没有正常关闭。为性能起见，数据只有在文件关闭时才会真正写入。因此，我们必须在最后添加一行代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.close(); <span class="comment">/* 如果不想关闭文件，可以使用file.flush */</span></span><br></pre></td></tr></table></figure>
<p>重新运行一下程序，就可以了。下面要将这个答案读取出来：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.dat"</span> )</span></span>;</span><br><span class="line">file.open ( QIODevice::ReadOnly );</span><br><span class="line"><span class="function">QDataStream <span class="title">in</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">QString str;</span><br><span class="line">qint32 a;</span><br><span class="line">in &gt;&gt; str &gt;&gt; a;</span><br></pre></td></tr></table></figure>
<p>这段代码没什么好说的。唯一需要注意的是，你必须按照写入的顺序将数据读取出来。也就是说，程序数据写入的顺序必须预先定义好。在这个例子中，我们首先写入字符串，然后写入数字，那么就首先读出来的就是字符串，然后才是数字。顺序颠倒的话，程序行为是不确定的，严重时会直接造成程序崩溃。<br>&emsp;&emsp;由于二进制流是纯粹的字节数据，带来的问题是，如果程序不同版本之间按照不同的方式读取(前面说过，<code>Qt</code>保证读写内容的一致，但是并不能保证不同<code>Qt</code>版本之间的一致)，数据就会出现错误。因此，我们必须提供一种机制来确保不同版本之间的一致性。通常，我们会使用如下的代码写入：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.dat"</span> )</span></span>;</span><br><span class="line">file.open ( QIODevice::WriteOnly );</span><br><span class="line"><span class="function">QDataStream <span class="title">out</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 写入魔术数字和版本 */</span></span><br><span class="line">out &lt;&lt; ( quint32 ) <span class="number">0xA0B0C0D0</span>;</span><br><span class="line">out &lt;&lt; ( qint32 ) <span class="number">123</span>;</span><br><span class="line">​</span><br><span class="line">out.setVersion ( QDataStream::Qt_4_0 );</span><br><span class="line">out &lt;&lt; lots_of_interesting_data; <span class="comment">/* 写入数据 */</span></span><br></pre></td></tr></table></figure>
<p>这里增加了如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out &lt;&lt; ( quint32 ) <span class="number">0xA0B0C0D0</span>;</span><br></pre></td></tr></table></figure>
<p>用于写入魔术数字。所谓魔术数字，是二进制输出中经常使用的一种技术。二进制格式是人不可读的，并且通常具有相同的后缀名(比如<code>dat</code>之类)，因此我们没有办法区分两个二进制文件哪个是合法的。所以，我们定义的二进制格式通常具有一个魔术数字，用于标识文件的合法性。在本例中，我们在文件最开始写入<code>0xA0B0C0D0</code>，在读取的时候首先检查这个数字是不是<code>0xA0B0C0D0</code>。如果不是的话，说明这个文件不是可识别格式，因此根本不需要去继续读取。一般二进制文件都会有这么一个魔术数字，例如<code>Java</code>的<code>class</code>文件的魔术数字就是<code>0xCAFEBABE</code>，使用二进制查看器就可以查看。魔术数字是一个<code>32</code>位的无符号整型，因此我们使用<code>quint32</code>来得到一个平台无关的<code>32</code>位无符号整型。接下来的一行：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out &lt;&lt; ( qint32 ) <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<p>是标识文件的版本。我们用魔术数字标识文件的类型，从而判断文件是不是合法的。但是，文件的不同版本之间也可能存在差异：我们可能在第一版保存整型，第二版可能保存字符串。为了标识不同的版本，我们只能将版本写入文件。比如，现在我们的版本是<code>123</code>。下面一行还是有关版本的：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out.setVersion ( QDataStream::Qt_4_8 );</span><br></pre></td></tr></table></figure>
<p>上面一句是文件的版本号，但是<code>Qt</code>不同版本之间的读取方式可能也不一样。这样，我们就需要指定<code>Qt</code>按照哪个版本去读。在这里我们指定以<code>Qt 4.8</code>格式去读取内容。<br>&emsp;&emsp;当我们这样写入文件之后，我们在读取的时候就需要增加一系列的判断：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.dat"</span> )</span></span>;</span><br><span class="line">file.open ( QIODevice::ReadOnly );</span><br><span class="line"><span class="function">QDataStream <span class="title">in</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 检查魔术数字 */</span></span><br><span class="line">quint32 magic;</span><br><span class="line">in &gt;&gt; magic;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( magic != <span class="number">0xA0B0C0D0</span> ) &#123;</span><br><span class="line">    <span class="keyword">return</span> BAD_FILE_FORMAT;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 检查版本 */</span></span><br><span class="line">qint32 version;</span><br><span class="line">in &gt;&gt; version;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( version &lt; <span class="number">100</span> ) &#123;</span><br><span class="line">    <span class="keyword">return</span> BAD_FILE_TOO_OLD;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( version &gt; <span class="number">123</span> ) &#123;</span><br><span class="line">    <span class="keyword">return</span> BAD_FILE_TOO_NEW;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( version &lt;= <span class="number">110</span> ) &#123;</span><br><span class="line">    in.setVersion ( QDataStream::Qt_3_2 );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    in.setVersion ( QDataStream::Qt_4_0 );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 读取数据 */</span></span><br><span class="line">in &gt;&gt; lots_of_interesting_data;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( version &gt;= <span class="number">120</span> ) &#123;</span><br><span class="line">    in &gt;&gt; data_new_in_version_1_2;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">in &gt;&gt; other_interesting_data;</span><br></pre></td></tr></table></figure>
<p>这段代码就是按照前面的解释进行的。首先读取魔术数字，检查文件是否合法。如果合法，读取文件版本：小于<code>100</code>或者大于<code>123</code>都是不支持的。如果在支持的版本范围内(<code>100 &lt;= version &lt;= 123</code>)，则当小于等于<code>110</code>的时候，按照<code>Qt_3_2</code>的格式读取，否则按照<code>Qt_4_0</code>的格式读取。当设置完这些参数之后，开始读取数据。<br>&emsp;&emsp;至此，我们介绍了有关<code>QDataStream</code>的相关内容。那么，既然<code>QIODevice</code>提供了<code>read</code>、<code>readLine</code>之类的函数，为什么还要有<code>QDataStream</code>呢？<code>QDataStream</code>同<code>QIODevice</code>有什么区别？区别在于，<code>QDataStream</code>提供流的形式，性能上一般比直接调用原始<code>API</code>更好一些。我们通过下面一段代码看看什么是流的形式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.dat"</span> )</span></span>;</span><br><span class="line">file.open ( QIODevice::ReadWrite );</span><br><span class="line">​</span><br><span class="line"><span class="function">QDataStream <span class="title">stream</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">QString str = <span class="string">"the answer is 42"</span>;</span><br><span class="line">QString strout;</span><br><span class="line">​</span><br><span class="line">stream &lt;&lt; str;</span><br><span class="line">file.flush();</span><br><span class="line">stream &gt;&gt; strout;</span><br></pre></td></tr></table></figure>
<p>在这段代码中，我们首先向文件中写入数据，紧接着把数据读出来。有什么问题吗？运行之后你会发现，<code>strout</code>实际是空的。为什么没有读取出来？我们不是已经添加了<code>file.flush();</code>语句吗？原因并不在于文件有没有写入，而是在于我们使用的是<code>流</code>。所谓流，就像水流一样，它的游标会随着输出向后移动。当使用<code>&lt;&lt;</code>操作符输出之后，流的游标已经到了最后，此时你再去读，当然什么也读不到了。所以你需要在输出之后重新把游标设置为<code>0</code>的位置才能够继续读取。具体代码片段如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stream &lt;&lt; str;</span><br><span class="line">stream.device()-&gt;seek ( <span class="number">0</span> );</span><br><span class="line">stream &gt;&gt; strout;</span><br></pre></td></tr></table></figure>
<h3 id="QT学习之文本文件读写"><a href="#QT学习之文本文件读写" class="headerlink" title="QT学习之文本文件读写"></a>QT学习之文本文件读写</h3><p>&emsp;&emsp;二进制文件比较小巧，却不是人可读的格式。而文本文件是一种人可读的文件。为了操作这种文件，我们需要使用<code>QTextStream</code>类。<code>QTextStream</code>和<code>QDataStream</code>的使用类似，只不过它是操作纯文本文件的。另外，像<code>XML</code>、<code>HTML</code>这种，虽然也是文本文件，可以由<code>QTextStream</code>生成，但<code>Qt</code>提供了更方便的<code>XML</code>操作类，这里就不包括这部分内容了。<br>&emsp;&emsp;<code>QTextStream</code>会自动将<code>Unicode</code>编码同操作系统的编码进行转换，这一操作对开发人员是透明的。它也会将换行符进行转换，同样不需要自己处理。<code>QTextStream</code>使用<code>16</code>位的<code>QChar</code>作为基础的数据存储单位，同样，它也支持<code>C++</code>标准类型，如<code>int</code>等。实际上，这是将这种标准类型与字符串进行了相互转换。<br>&emsp;&emsp;<code>QTextStream</code>同<code>QDataStream</code>的使用基本一致，例如下面的代码将把<code>The answer is 42</code>写入到<code>file.txt</code>文件中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">data</span> <span class="params">( <span class="string">"file.txt"</span> )</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( data.open ( QFile::WriteOnly | QIODevice::Truncate ) ) &#123;</span><br><span class="line">    <span class="function">QTextStream <span class="title">out</span> <span class="params">( &amp;data )</span></span>;</span><br><span class="line">    out &lt;&lt; <span class="string">"The answer is "</span> &lt;&lt; <span class="number">42</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码在<code>open</code>函数中增加了<code>QIODevice::Truncate</code>打开方式，可以从下表看到这些打开方式的区别：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>枚举值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QIODevice::NotOpen</code></td>
<td>未打开</td>
</tr>
<tr>
<td><code>QIODevice::ReadOnly</code></td>
<td>以只读方式打开</td>
</tr>
<tr>
<td><code>QIODevice::WriteOnly</code></td>
<td>以只写方式打开</td>
</tr>
<tr>
<td><code>QIODevice::ReadWrite</code></td>
<td>以读写方式打开</td>
</tr>
<tr>
<td><code>QIODevice::Append</code></td>
<td>以追加的方式打开，新增加的内容将被追加到文件末尾</td>
</tr>
<tr>
<td><code>QIODevice::Truncate</code></td>
<td>以重写的方式打开，在写入新的数</td>
</tr>
<tr>
<td><code>QIODevice::Text</code></td>
<td>在读取时，将行结束符转换成<code>\n</code>；在写入时，将行结束符转换成本地格式，例如<code>Win32</code>平台上是<code>\r\n</code></td>
</tr>
<tr>
<td><code>QIODevice::Unbuffered</code></td>
<td>忽略缓存</td>
</tr>
</tbody>
</table>
</div>
<p>在这里使用了<code>QFile::WriteOnly | QIODevice::Truncate</code>，也就是以只写并且覆盖已有内容的形式操作文件。注意，<code>QIODevice::Truncate</code>会直接将文件内容清空。</p>
<hr>
<h3 id="QTextStream读取文件内容"><a href="#QTextStream读取文件内容" class="headerlink" title="QTextStream读取文件内容"></a>QTextStream读取文件内容</h3><p>&emsp;&emsp;基础代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFile <span class="title">file</span> <span class="params">( <span class="string">"file.txt"</span> )</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( !file.open ( QIODevice::ReadOnly | QIODevice::Text ) ) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function">QTextStream <span class="title">in</span> <span class="params">( &amp;file )</span></span>;</span><br><span class="line">QString QTextStream::read ( qint64 maxlen ) -- 读取txt文件maxlen个字符：</span><br><span class="line">QString line1 = in.read ( <span class="number">1</span> ); <span class="comment">/* 读取一个字符 */</span></span><br><span class="line">QString line2 = in.read ( <span class="number">1</span> ); <span class="comment">/* 自动读取下一个字符 */</span></span><br><span class="line">QString line1 = in.read ( <span class="number">20</span> ); <span class="comment">/* 读取20个字符，归为一个字符串 */</span></span><br><span class="line">QString QTextStream::readLine ( qint64 maxlen = <span class="number">0</span> )：</span><br><span class="line">QString line1 = in.readLine ( <span class="number">0</span> ); <span class="comment">/* 读取第0行文档 */</span></span><br><span class="line">QString line2 = in.readLine ( <span class="number">5</span> ); <span class="comment">/* 读取第0行5个文档 */</span></span><br><span class="line">QString line1 = in.readLine(); <span class="comment">/* 读取第0行文档 */</span></span><br><span class="line">QString line2 = in.readLine(); <span class="comment">/* 自动读取第1行文档 */</span></span><br><span class="line">QString QTextStream::readAll ()：</span><br><span class="line">QString line1 = in.readAll(); <span class="comment">/* 读取全部txt文档，并归为一个字符串 */</span></span><br><span class="line"><span class="keyword">bool</span> QTextStream::seek ( qint64 pos )：</span><br><span class="line"><span class="keyword">bool</span> a = in.seek ( <span class="number">6</span> ); <span class="comment">/* 定位文本中的第6个位置 */</span></span><br><span class="line">QString line2 = in.read ( <span class="number">1</span> ) ; <span class="comment">/* 读取该位的1字符 */</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;读取<code>txt</code>文本全部内容的方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 两种方法读取txt文档 */</span></span><br><span class="line"><span class="keyword">while</span> ( !in.atEnd() ) &#123;</span><br><span class="line">    QString line = in.readLine();</span><br><span class="line">    qDebug() &lt;&lt; line;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*-------------------------------*/</span></span><br><span class="line">QString line3 = in.readLine();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> ( !line3.isNull() ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; line3;</span><br><span class="line">    line3 = in.readLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="QFileInfo的简单用法"><a href="#QFileInfo的简单用法" class="headerlink" title="QFileInfo的简单用法"></a>QFileInfo的简单用法</h3><p>&emsp;&emsp;<code>QFileInfo</code>的几个构造函数：</p>
<ul>
<li><code>QFileInfo();</code></li>
<li><code>QFileInfo( const QString &amp; file );</code></li>
<li><code>QFileInfo( const QFile &amp; file );</code></li>
<li><code>QFileInfo( const QDir &amp; dir, const QString &amp; file );</code></li>
<li><code>QFileInfo( const QFileInfo &amp; fileinfo );</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFileInfo <span class="title">fileInfo</span> <span class="params">( path )</span></span>;</span><br><span class="line"><span class="comment">/* or */</span></span><br><span class="line">QFileInfo fileInfo;</span><br><span class="line">fileInfo.setFile ( path );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>bool exists();</code>：判断文件是否存在，若存在返回<code>true</code>。</li>
<li><code>qint64 size();</code>：获取文件大小，返回<code>bytes</code>。</li>
</ul>
<p>&emsp;&emsp;路径和文件名相关：</p>
<ul>
<li><code>QString path();</code>：返回文件路径，不包含文件名。</li>
<li><code>QString filePath();</code>：返回文件路径，包含文件名。</li>
<li><code>QString fileName();</code>：返回文件名称。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QFileInfo <span class="title">fileInfo</span> <span class="params">( <span class="string">"/home/dipper/xyz.tar.gz"</span> )</span></span>;</span><br><span class="line">fileInfo.path();             <span class="comment">/* returns "/home/dipper" */</span></span><br><span class="line">fileInfo.fileName();         <span class="comment">/* returns "xyz.tar.gz" */</span></span><br><span class="line">fileInfo.baseName();         <span class="comment">/* returns "xyz" */</span></span><br><span class="line">fileInfo.completeBaseName(); <span class="comment">/* returns "xyz.tar" */</span></span><br><span class="line">fileInfo.suffix();           <span class="comment">/* returns "gz" */</span></span><br><span class="line">fileInfo.completeSuffix();   <span class="comment">/* returns "tar.gz" */</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;类型：</p>
<ul>
<li><code>bool isFile();</code>：判断是否为文件。</li>
<li><code>bool isDir();</code>：判断是否为路径。</li>
<li><code>bool isSymLink();</code>：判断是否为符号链接。<code>symLinkTarget</code>返回符号链接的文件。</li>
</ul>
<p>&emsp;&emsp;日期相关：</p>
<ul>
<li><code>QDateTime created();</code>：创建时间。</li>
<li><code>QDateTime lastModified();</code>：最近修改时间。</li>
<li><code>QDateTime lastRead();</code>：最近读时间。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/" itemprop="url">Qt之QBoxLayout、QHBoxLayout和QVBoxLayout</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T17:43:03+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>&emsp;&emsp;<code>QBoxLayout</code>可以在水平方向或垂直方向上排列控件，由<code>QHBoxLayout</code>、<code>QVBoxLayout</code>所继承。</p>
<ul>
<li><code>QHBoxLayout</code>：水平布局，在水平方向上排列控件，即左右排列。</li>
<li><code>QVBoxLayout</code>：垂直布局，在垂直方向上排列控件，即上下排列。</li>
</ul>
<p>&emsp;&emsp;通过查看源码可以发现，水平布局、垂直布局除了构造时的方向(<code>LeftToRight</code>、<code>TopToBottom</code>)不同外，其它均相同。下面以<code>QHBoxLayout</code>为例，来讲解<code>QBoxLayout</code>的常用功能。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>&emsp;&emsp;下面介绍下水平布局的基本使用。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/1.png"></p>
<p>&emsp;&emsp;下面创建<code>5</code>个按钮，然后添加至水平不居中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">QPushButton *pButton1 = <span class="keyword">new</span> QPushButton ( <span class="string">"One"</span> );</span><br><span class="line">QPushButton *pButton2 = <span class="keyword">new</span> QPushButton ( <span class="string">"Two"</span> );</span><br><span class="line">QPushButton *pButton3 = <span class="keyword">new</span> QPushButton ( <span class="string">"Three"</span> );</span><br><span class="line">QPushButton *pButton4 = <span class="keyword">new</span> QPushButton ( <span class="string">"Four"</span> );</span><br><span class="line">QPushButton *pButton5 = <span class="keyword">new</span> QPushButton ( <span class="string">"Five"</span> );</span><br><span class="line">​</span><br><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton1 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton4 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5 );</span><br><span class="line">​</span><br><span class="line">setLayout ( pHLayout );</span><br></pre></td></tr></table></figure>
<h3 id="常用接口"><a href="#常用接口" class="headerlink" title="常用接口"></a>常用接口</h3><p>&emsp;&emsp;默认的外边距为<code>0</code>，为了美观性，可以设置<code>Margin</code>：</p>
<ul>
<li><code>setMargin(int);</code></li>
<li><code>setContentsMargins(int left, int top, int right, int bottom);</code></li>
<li><code>setContentsMargins(const QMargins &amp;margins);</code></li>
</ul>
<p>&emsp;&emsp;<code>setMargin</code>可以设置左、上、右、下的外边距，设置之后，它们的外边距是相同的。<code>setContentsMargins</code>与其功能相同，但是可以将左、上、右、下的外边距设置为不同的值。这里我使用<code>setMargin(10)</code>将外边距设置为<code>10</code>：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/2.png"></p>
<p>&emsp;&emsp;<code>setSpacing(int)</code>的作用是设置间距。一般情况下，界面会有一个默认间距值。为了保持所有布局的统一性或者需要一个更合适的间距值，则需要手动设置。这里使用<code>setSpacing(0)</code>将间距设置为<code>0</code>：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/3.png"></p>
<p>&emsp;&emsp;<code>addStretch</code>的作用是添加了一个伸缩空间(<code>QSpacerItem</code>)。居右效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/4.png"></p>
<p>&emsp;&emsp;在第一个控件之前添加伸缩，这样所有的控件就会居右显示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addStretch(); <span class="comment">/* 添加伸缩 */</span></span><br><span class="line">pHLayout-&gt;addWidget ( pButton1 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton4 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5 );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;居左效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/5.png"></p>
<p>&emsp;&emsp;在最后一个控件之后添加伸缩，这样所有的控件就会居左显示。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton1 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton4 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5 );</span><br><span class="line">pHLayout-&gt;addStretch(); <span class="comment">/* 添加伸缩 */</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;居中效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/6.png"></p>
<p>&emsp;&emsp;在第一个控件之前、最后一个控件之后添加伸缩，这样所有的控件就会居中显示。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addStretch(); <span class="comment">/* 第一个控件之前添加伸缩 */</span></span><br><span class="line">pHLayout-&gt;addWidget ( pButton1 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton4 );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5 );</span><br><span class="line">pHLayout-&gt;addStretch(); <span class="comment">/* 最后一个控件之后添加伸缩 */</span></span><br><span class="line">pHLayout-&gt;setSpacing ( <span class="number">10</span> );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;均分效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/7.png"></p>
<p>&emsp;&emsp;在每一个控件之间都添加伸缩，这样所有的控件之间的间距都会相同。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton1 );</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2 );</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton4 );</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5 );</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line">pHLayout-&gt;setSpacing ( <span class="number">0</span> );</span><br></pre></td></tr></table></figure>
<p><code>addWidget</code>的作用是添加控件，其函数原型如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addWidget ( QWidget *, <span class="keyword">int</span> stretch = <span class="number">0</span>, Qt::Alignment alignment = <span class="number">0</span> );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;默认情况下，我们添加控件至水平布局中，默认都是垂直方向居中对齐的：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/8.png"></p>
<p>&emsp;&emsp;当存在控件大小不相同的时候，就会看得很明显了。如果需要将其中的某些控件居上、居下显示，那么可以使用对齐方式<code>Qt::Alignment</code>。下面使用向上、向下对齐来设置其它控件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QHBoxLayout *pHLayout = <span class="keyword">new</span> QHBoxLayout();</span><br><span class="line">pHLayout-&gt;addStretch();</span><br><span class="line"><span class="comment">/* 水平居左，垂直居上 */</span></span><br><span class="line">pHLayout-&gt;addWidget ( pButton1, <span class="number">0</span> , Qt::AlignLeft | Qt::AlignTop );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton2, <span class="number">0</span> , Qt::AlignLeft | Qt::AlignTop );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton3 );</span><br><span class="line"><span class="comment">/* 水平居左，垂直居下 */</span></span><br><span class="line">pHLayout-&gt;addWidget ( pButton4, <span class="number">0</span> , Qt::AlignLeft | Qt::AlignBottom );</span><br><span class="line">pHLayout-&gt;addWidget ( pButton5, <span class="number">0</span> , Qt::AlignLeft | Qt::AlignBottom );</span><br><span class="line">pHLayout-&gt;setSpacing ( <span class="number">10</span> );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/9.png"></p>
<p>&emsp;&emsp;<code>setDirection(Direction)</code>的作用是设置布局方向，可以设置从左到右、从右到左、从上到下、从下到上等。<br>&emsp;&emsp;<code>setDirection(QBoxLayout::RightToLeft)</code>的效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/10.png"></p>
<p>&emsp;&emsp;<code>setDirection(QBoxLayout::TopToBottom)</code>的效果如下：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/11.png"></p>
<p>&emsp;&emsp;既然使用了<code>QHBoxLayout</code>，一般就不建议使用<code>TopToBottom</code>或者<code>BottomToTop</code>，如果实在确定不了方向，或者方向可以随意变化，那么建议使用<code>QBoxLayout</code>。<br>&emsp;&emsp;<code>setStretchFactor</code>可以用来设置控件、布局的拉伸系数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setStretchFactor( QWidget *w, <span class="keyword">int</span> stretch );</span><br><span class="line">setStretchFactor( QLayout *l, <span class="keyword">int</span> stretch );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;当窗体大小变化时，控件会根据拉伸系数来做相应的调整：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setStretchFactor ( pButton1, <span class="number">1</span> );</span><br><span class="line">setStretchFactor ( pButton2, <span class="number">2</span> );</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之QBoxLayout、QHBoxLayout和QVBoxLayout/12.png"></p>
<p>设置<code>pButton1</code>的拉伸系数为<code>1</code>，<code>pButton2</code>拉伸系数为<code>2</code>，当窗体变大时，会优先将<code>pButton2</code>进行拉伸；当达到一定程度时，再拉伸<code>pButton1</code>，<code>pButton1</code>与<code>pButton2</code>的宽度比例为<code>1:2</code>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/" itemprop="url">Qt之QDateTimeEdit、QDateEdit和QTimeEdit</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T11:31:58+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>&emsp;&emsp;<code>QDateTime</code>类提供了一个部件，用于编辑日期和时间。<code>QDateTimeEdit</code>允许用户编辑日期，通过使用键盘或箭头键来增加和减少日期和时间值。箭头键可以在<code>QDateTimeEdit</code>内进行部分移动，日期和时间的格式按照<code>setDisplayFormat</code>设置的显示。</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>&emsp;&emsp;<code>QDateTimeEdit</code>有多个构造函数，分别看看它们是如何使用的。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/1.png"></p>
<p>&emsp;&emsp;默认情况下，如果<code>QDateTimeEdit</code>构造时不指定日期时间，系统会为其设置一个和本地相同的日期时间格式(右下角可更改本地日期时间格式)，并且值为<code>2000年1月1日0时0分0秒</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateTimeEdit = <span class="keyword">new</span> QDateTimeEdit ( <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *dateTimeEdit2 = <span class="keyword">new</span> QDateTimeEdit ( QDateTime::currentDateTime(), <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *timeEdit = <span class="keyword">new</span> QDateTimeEdit ( QTime::currentTime(), <span class="keyword">this</span> );</span><br></pre></td></tr></table></figure>
<h3 id="日期时间格式"><a href="#日期时间格式" class="headerlink" title="日期时间格式"></a>日期时间格式</h3><p>&emsp;&emsp;如果不想要系统默认的格式，可以通过<code>setDisplayFormat</code>来自定设置。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/2.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateTimeEdit = <span class="keyword">new</span> QDateTimeEdit ( <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *dateTimeEdit2 = <span class="keyword">new</span> QDateTimeEdit ( QDateTime::currentDateTime(), <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">QDateTimeEdit *timeEdit = <span class="keyword">new</span> QDateTimeEdit ( QTime::currentTime(), <span class="keyword">this</span> );</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 设置日期时间格式 */</span></span><br><span class="line">dateTimeEdit-&gt;setDisplayFormat ( <span class="string">"yyyy-MM-dd HH:mm:ss"</span> );</span><br><span class="line">dateTimeEdit2-&gt;setDisplayFormat ( <span class="string">"yyyy/MM/dd HH-mm-ss"</span> );</span><br><span class="line">dateEdit-&gt;setDisplayFormat ( <span class="string">"yyyy.M.d"</span> );</span><br><span class="line">timeEdit-&gt;setDisplayFormat ( <span class="string">"H:mm"</span> );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>yyyy</code>：年，用<code>4</code>个数表示。</li>
<li><code>MM</code>：月，<code>01</code>至<code>12</code>。</li>
<li><code>dd</code>：日，<code>01</code>至<code>31</code>。</li>
<li><code>HH</code>：时，<code>00</code>至<code>23</code>。</li>
<li><code>mm</code>：分，<code>00</code>至<code>59</code>。</li>
<li><code>ss</code>：秒，<code>00</code>至<code>59</code>。</li>
</ul>
<h3 id="日期时间范围"><a href="#日期时间范围" class="headerlink" title="日期时间范围"></a>日期时间范围</h3><p>&emsp;&emsp;创建了<code>QDateTimeEdit</code>对象，并设置其日期时间为今天(<code>currentDate</code>)，同时限制有效日期的范围，例如距离今天<code>±365</code>天。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/3.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">dateEdit-&gt;setMinimumDate ( QDate::currentDate().addDays ( <span class="number">-365</span> ) ); <span class="comment">/* -365天 */</span></span><br><span class="line">dateEdit-&gt;setMaximumDate ( QDate::currentDate().addDays ( <span class="number">365</span> ) ); <span class="comment">/* +365天 */</span></span><br></pre></td></tr></table></figure>
<p>其他同功能的有用函数：<code>setDateTimeRange</code>、<code>setDateRange</code>、<code>setTimeRange</code>、<code>setMaximumDateTime</code>和<code>setMinimumDateTime</code>、<code>setMinimumTime</code>和<code>setMaximumTime</code>。</p>
<h3 id="显示日历"><a href="#显示日历" class="headerlink" title="显示日历"></a>显示日历</h3><p>&emsp;&emsp;默认情况下只能通过鼠标点击上下箭头来改变日期时间，如果要弹出日期控件，只需调用<code>setCalendarPopup(true)</code>即可。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/4.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">dateEdit-&gt;setMinimumDate ( QDate::currentDate().addDays ( <span class="number">-365</span> ) ); <span class="comment">/* -365天 */</span></span><br><span class="line">dateEdit-&gt;setMaximumDate ( QDate::currentDate().addDays ( <span class="number">365</span> ) ); <span class="comment">/* +365天 */</span></span><br><span class="line">dateEdit-&gt;setCalendarPopup ( <span class="literal">true</span> ); <span class="comment">/* 日历弹出 */</span></span><br></pre></td></tr></table></figure>
<p>这时的上/下箭头就变为下拉箭头了。当点击下拉箭头之后，就会弹出日历控件，由于我们设置了日期范围，所以不在范围内的日期是无法选择的(<code>disabled</code>)。</p>
<h3 id="获取日期时间"><a href="#获取日期时间" class="headerlink" title="获取日期时间"></a>获取日期时间</h3><p>&emsp;&emsp;可以通过<code>date</code>、<code>dateTime</code>等接口来获取日期时间对象，如果要获取年、月、日等信息，可以调用例如<code>QDate</code>的<code>year</code>、<code>month</code>、<code>day</code>等函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">dateEdit-&gt;setMinimumDate ( QDate::currentDate().addDays ( <span class="number">-365</span> ) ); <span class="comment">/* -365天 */</span></span><br><span class="line">dateEdit-&gt;setMaximumDate ( QDate::currentDate().addDays ( <span class="number">365</span> ) ); <span class="comment">/* +365天 */</span></span><br><span class="line">​</span><br><span class="line">QDate date = dateEdit-&gt;date(); <span class="comment">/* 日期 */</span></span><br><span class="line">QDateTime dateTime = dateEdit-&gt;dateTime(); <span class="comment">/* 日期时间 */</span></span><br><span class="line">QDate maxDate = dateEdit-&gt;maximumDate(); <span class="comment">/* 最大日期 */</span></span><br><span class="line">QDateTime maxDateTime = dateEdit-&gt;maximumDateTime(); <span class="comment">/* 最大日期时间 */</span></span><br><span class="line">QTime maxTime = dateEdit-&gt;maximumTime(); <span class="comment">/* 最大时间 */</span></span><br><span class="line">QDate minDate = dateEdit-&gt;minimumDate(); <span class="comment">/* 最小日期 */</span></span><br><span class="line">QDateTime minDateTime = dateEdit-&gt;minimumDateTime(); <span class="comment">/* 最小日期时间 */</span></span><br><span class="line">QTime minTime = dateEdit-&gt;minimumTime(); <span class="comment">/* 最小时间 */</span></span><br><span class="line">​</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Date : "</span> &lt;&lt; date;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"DateTime : "</span> &lt;&lt; dateTime;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MaxDate : "</span> &lt;&lt; maxDate;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MaxDateTime : "</span> &lt;&lt; maxDateTime;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MaxTime : "</span> &lt;&lt; maxTime;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MinDate : "</span> &lt;&lt; minDate;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MinDateTime : "</span> &lt;&lt; minDateTime;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MinTime : "</span> &lt;&lt; minTime;</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Date : QDate(“<span class="number">2016</span><span class="number">-09</span><span class="number">-01</span>”)</span><br><span class="line">DateTime : QDateTime(<span class="number">2016</span><span class="number">-09</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.000</span> 中国标准时间 Qt::TimeSpec(LocalTime))</span><br><span class="line">MaxDate : QDate(“<span class="number">2017</span><span class="number">-09</span><span class="number">-01</span>”)</span><br><span class="line">MaxDateTime : QDateTime(<span class="number">2017</span><span class="number">-09</span><span class="number">-01</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59.999</span> 中国标准时间 Qt::TimeSpec(LocalTime))</span><br><span class="line">MaxTime : QTime(“<span class="number">23</span>:<span class="number">59</span>:<span class="number">59.999</span>”)</span><br><span class="line">MinDate : QDate(“<span class="number">2015</span><span class="number">-09</span><span class="number">-02</span>”)</span><br><span class="line">MinDateTime : QDateTime(<span class="number">2015</span><span class="number">-09</span><span class="number">-02</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.000</span> 中国标准时间 Qt::TimeSpec(LocalTime))</span><br><span class="line">MinTime : QTime(“<span class="number">00</span>:<span class="number">00</span>:<span class="number">00.000</span>”)</span><br></pre></td></tr></table></figure>
<h3 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h3><p>&emsp;&emsp;常用的三个信号是<code>dateChanged</code>、<code>dateTimeChanged</code>、<code>timeChanged</code>，当日期、日期时间、时间改变时发射。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateTimeEdit = <span class="keyword">new</span> QDateTimeEdit ( QDateTime::currentDateTime(), <span class="keyword">this</span> );</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 连接信号和槽 */</span></span><br><span class="line">connect ( dateTimeEdit, SIGNAL ( dateChanged ( QDate ) ), <span class="keyword">this</span>, SLOT ( onDateChanged ( QDate ) ) );</span><br><span class="line">connect ( dateTimeEdit, SIGNAL ( dateTimeChanged ( QDateTime ) ), \</span><br><span class="line">          <span class="keyword">this</span>, SLOT ( onDateTimeChanged ( QDateTime ) ) );</span><br><span class="line">connect ( dateTimeEdit, SIGNAL ( timeChanged ( QTime ) ), <span class="keyword">this</span>, SLOT ( onTimeChanged ( QTime ) ) );</span><br></pre></td></tr></table></figure>
<p>槽函数如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 日期发生改变时执行 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onDateChanged</span> <span class="params">( <span class="keyword">const</span> QDate &amp;date )</span> </span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"QDate : "</span> &lt;&lt; date;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 无论日期还是时间发生改变，都会执行 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onDateTimeChanged</span> <span class="params">( <span class="keyword">const</span> QDateTime &amp;dateTime )</span> </span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"QDateTime : "</span> &lt;&lt; dateTime;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 时间发生改变时执行 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onTimeChanged</span> <span class="params">( <span class="keyword">const</span> QTime &amp;time )</span> </span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"QTime : "</span> &lt;&lt; time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="日期时间部分"><a href="#日期时间部分" class="headerlink" title="日期时间部分"></a>日期时间部分</h3><p>&emsp;&emsp;枚举为<code>QDateTimeEdit::Section</code>，标识为<code>QDateTimeEdit::Sections</code>。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>常量</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QDateTimeEdit::NoSection</code></td>
<td><code>0x0000</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::AmPmSection</code></td>
<td><code>0x0001</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::MSecSection</code></td>
<td><code>0x0002</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::SecondSection</code></td>
<td><code>0x0004</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::MinuteSection</code></td>
<td><code>0x0008</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::HourSection</code></td>
<td><code>0x0010</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::DaySection</code></td>
<td><code>0x0100</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::MonthSection</code></td>
<td><code>0x0200</code></td>
</tr>
<tr>
<td><code>QDateTimeEdit::YearSection</code></td>
<td><code>0x0400</code></td>
</tr>
</tbody>
</table>
</div>
<p>常用的日期时间格式为<code>yyyy/MM/dd HH:mm:ss</code>，包含<code>6</code>部分，分别是年月日时分秒，可以通过<code>sectionCount</code>来获取数量。通过调用<code>setSelectedSection</code>可以设置当前选择的部分，如果需要获取某部分的值，可以调用<code>sectionText</code>；通过<code>sectionAt</code>来获取下标对应的部分。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateEdit = <span class="keyword">new</span> QDateTimeEdit ( QDateTime::currentDateTime(), <span class="keyword">this</span> );</span><br><span class="line">dateEdit-&gt;setDisplayFormat ( <span class="string">"yyyy/MM/dd HH:mm:ss"</span> ); <span class="comment">/* 设置显示格式 */</span></span><br><span class="line">dateEdit-&gt;setSelectedSection ( QDateTimeEdit::DaySection ); <span class="comment">/* 设置所选部分 */</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">int</span> nCount = dateEdit-&gt;sectionCount(); <span class="comment">/* 部分数量 */</span></span><br><span class="line">QDateTimeEdit::Section monthSection = dateEdit-&gt;sectionAt ( <span class="number">1</span> ); <span class="comment">/* 下标为1对应的部分 */</span></span><br><span class="line">QDateTimeEdit::Section section = dateEdit-&gt;currentSection(); <span class="comment">/* 当前部分 */</span></span><br><span class="line"><span class="keyword">int</span> nIndex = dateEdit-&gt;currentSectionIndex(); <span class="comment">/* 当前部分下标 */</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 各部分对应的值 */</span></span><br><span class="line">QString strYear = dateEdit-&gt;sectionText ( QDateTimeEdit::YearSection );</span><br><span class="line">QString strMonth = dateEdit-&gt;sectionText ( QDateTimeEdit::MonthSection );</span><br><span class="line">QString strDay = dateEdit-&gt;sectionText ( QDateTimeEdit::DaySection );</span><br><span class="line">QString strHour = dateEdit-&gt;sectionText ( QDateTimeEdit::HourSection );</span><br><span class="line">QString strMinute = dateEdit-&gt;sectionText ( QDateTimeEdit::MinuteSection );</span><br><span class="line">QString strSecond = dateEdit-&gt;sectionText ( QDateTimeEdit::SecondSection );</span><br><span class="line">​</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"SectionCount : "</span> &lt;&lt; nCount;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"MonthSection : "</span> &lt;&lt; monthSection;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"CurrentSection : "</span> &lt;&lt; section;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"CurrentSectionIndex : "</span> &lt;&lt; nIndex;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Year : "</span> &lt;&lt; strYear;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Month : "</span> &lt;&lt; strMonth;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Day : "</span> &lt;&lt; strDay;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Hour : "</span> &lt;&lt; strHour;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Minute : "</span> &lt;&lt; strMinute;</span><br><span class="line">qDebug() &lt;&lt; <span class="string">"Second : "</span> &lt;&lt; strSecond;</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SectionCount : <span class="number">6</span></span><br><span class="line">MonthSection : QDateTimeEdit::Section(MonthSection)</span><br><span class="line">CurrentSection : QDateTimeEdit::Section(DaySection)</span><br><span class="line">CurrentSectionIndex : <span class="number">2</span></span><br><span class="line">Year : <span class="string">"2016"</span></span><br><span class="line">Month : <span class="string">"09"</span></span><br><span class="line">Day : <span class="string">"01"</span></span><br><span class="line">Hour : <span class="string">"14"</span></span><br><span class="line">Minute : <span class="string">"50"</span></span><br><span class="line">Second : <span class="string">"29"</span></span><br></pre></td></tr></table></figure>
<p>如果格式为<code>yyyy/MM/dd</code>，那么<code>sectionCount</code>将会返回<code>3</code>。<code>sectionAt(0)</code>将会返回<code>YearSection</code>；<code>sectionAt(1)</code>返回<code>MonthSection</code>；<code>sectionAt(2)</code>返回<code>YearSection</code>。<br>&emsp;&emsp;<strong>补充说明</strong>：<code>text</code>函数返回<code>QDateTimeEdit</code>的内容。</p>
<hr>
<h3 id="Qt之QDateEdit和QTimeEdit"><a href="#Qt之QDateEdit和QTimeEdit" class="headerlink" title="Qt之QDateEdit和QTimeEdit"></a>Qt之QDateEdit和QTimeEdit</h3><p>&emsp;&emsp;<code>QDateEdit</code>类提供了一个部件，用于编辑日期；<code>QTimeEdit</code>类提供了一个部件，用于编辑时间。<code>QDateEdit</code>和<code>QTimeEdit</code>均继承自<code>QDateTimeEdit</code>，许多特性和功能都由<code>QDateTimeEdit</code>提供。<br>&emsp;&emsp;<code>QDateEdit</code>：</p>
<ul>
<li><code>date</code>：保存了部件的显示日期。</li>
<li><code>minimumDate</code>：定义了用户可以设置的最小日期。</li>
<li><code>maximumDate</code>：定义了用户可以设置的最大日期。</li>
<li><code>displayFormat</code>：包含了一个字符串用于格式化日期。</li>
</ul>
<p>&emsp;&emsp;<code>QTimeEdit</code>：</p>
<ul>
<li><code>time</code>：保存了部件的显示时间。</li>
<li><code>minimumTime</code>：定义了用户可以设置的最小时间。</li>
<li><code>maximumTime</code>：定义了用户可以设置的最大时间。</li>
<li><code>displayFormat</code>：包含了一个字符串用于格式化时间。</li>
</ul>
<p>&emsp;&emsp;使用<code>QDateEdit</code>时，如果不设置日期，则系统会为其指定一个默认的日期，即<code>2000</code>年<code>1</code>月<code>1</code>日。使用<code>QTimeEdit</code>时，如果不设置时间，则系统会为其指定一个默认的时间，即<code>0</code>时<code>0</code>分<code>0</code>秒。所以一般都会指定一个合适的日期和时间(当前日期时间)：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/5.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QDateEdit *dateEdit = <span class="keyword">new</span> QDateEdit ( QDate::currentDate(), <span class="keyword">this</span> );</span><br><span class="line">QTimeEdit *timeEdit = <span class="keyword">new</span> QTimeEdit ( QTime::currentTime(), <span class="keyword">this</span> );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>QDateEdit</code>用于编辑日期，而<code>QTimeEdit</code>用于编辑时间。所以不要用<code>QDateEdit</code>来设置或获取时间，也不要用<code>QTimeEdit</code>来设置或获取日期。如果要同时操作日期时间，请使用<code>QDateTimeEdit</code>。</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之QDateTimeEdit、QDateEdit和QTimeEdit/6.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QDateEdit *dateEdit = <span class="keyword">new</span> QDateEdit ( <span class="keyword">this</span> );</span><br><span class="line">QTimeEdit *timeEdit = <span class="keyword">new</span> QTimeEdit ( <span class="keyword">this</span> );</span><br><span class="line">dateEdit-&gt;setDisplayFormat ( <span class="string">"yyyy/MM/dd"</span> );</span><br><span class="line">timeEdit-&gt;setDisplayFormat ( <span class="string">"HH:mm:ss"</span> );</span><br><span class="line">dateEdit-&gt;setDateTime ( QDateTime::currentDateTime() );</span><br><span class="line">timeEdit-&gt;setDateTime ( QDateTime::currentDateTime() );</span><br></pre></td></tr></table></figure>
<p>当点击<code>QDateEdit</code>的上下箭头时，只能改变日期，而改变不了时间。同理，当点击<code>QTimeEdit</code>的上下箭头时，只能改变时间，而改变不了日期。所以即使语法正确，也不建议把<code>QDateEdit</code>和<code>QTimeEdit</code>当做<code>QDateTimeEdit</code>来用。注意，即使是设置显示格式，对于<code>QDateEdit</code>来说，只需要设置年月日即可，例如<code>yyyy/MM/dd</code>；对于<code>QTimeEdit</code>，只需要设置时分秒，例如<code>HH:mm:ss</code>。<br>&emsp;&emsp;在<code>QDateTimeEdit</code>使用过程中，分享了如何显示日历。而日历是对应的是<code>QDate</code>，而非<code>QTime</code>。所以<code>QDateEdit</code>、<code>QDateTimeEdit</code>可以使用，而<code>QTimeEdit</code>并不能使用。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QDateTimeEdit *dateTimeEdit = <span class="keyword">new</span> QDateTimeEdit ( <span class="keyword">this</span> );</span><br><span class="line">QDateEdit *dateEdit = <span class="keyword">new</span> QDateEdit ( <span class="keyword">this</span> );</span><br><span class="line">QTimeEdit *timeEdit = <span class="keyword">new</span> QTimeEdit ( <span class="keyword">this</span> );</span><br><span class="line">dateTimeEdit-&gt;setCalendarPopup ( <span class="literal">true</span> ); <span class="comment">/* 正确 */</span></span><br><span class="line">dateEdit-&gt;setCalendarPopup ( <span class="literal">true</span> ); <span class="comment">/* 正确 */</span></span><br><span class="line">timeEdit-&gt;setCalendarPopup ( <span class="literal">true</span> ); <span class="comment">/* 语法正确但实际上是错误的 */</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/17/Qt语法详解/Qt之进度条/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/17/Qt语法详解/Qt之进度条/" itemprop="url">Qt之进度条</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-17T10:33:10+08:00">
                2019-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>Qt</code>可以用<code>QProgressBar</code>或着<code>QProgressDialog</code>来实现进度条。</p>
<h3 id="QProgressBar"><a href="#QProgressBar" class="headerlink" title="QProgressBar"></a>QProgressBar</h3><p>&emsp;&emsp;首先在<code>Qt Designer</code>中拖一个按钮和进度条部件，按照下面的方法进行初始化：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;progressBar-&gt;setRange ( <span class="number">0</span>, <span class="number">50000</span> - <span class="number">1</span> );</span><br><span class="line">ui-&gt;progressBar-&gt;setValue ( <span class="number">0</span> );</span><br></pre></td></tr></table></figure>
<p>按钮的事件处理：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MainWindow::on_pushButton_clicked() &#123;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">20000</span>; j++ ); <span class="comment">/* 延时作用 */</span></span><br><span class="line">​</span><br><span class="line">        ui-&gt;progressBar-&gt;setValue ( i );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就可以显示进度条了，并自动计算和显示百分比：</p>
<p><img src="/2019/03/17/Qt语法详解/Qt之进度条/1.png"></p>
<h3 id="QProgressDialog"><a href="#QProgressDialog" class="headerlink" title="QProgressDialog"></a>QProgressDialog</h3><p>&emsp;&emsp;<code>QProcessDialog</code>也是类似的，只不过这是以对话框形式显示；并且它还提供了一个取消按钮，用来取消操作。<code>QProcessDialog</code>会自动计算并显示百分比：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MainWindow::on_pushButton_clicked() &#123;</span><br><span class="line">    <span class="function">QProgressDialog <span class="title">process</span> <span class="params">( <span class="keyword">this</span> )</span></span>;</span><br><span class="line">    process.setLabelText ( tr ( <span class="string">"processing..."</span> ) );</span><br><span class="line">    process.setRange ( <span class="number">0</span>, <span class="number">50000</span> );</span><br><span class="line">    process.setModal ( <span class="literal">true</span> );</span><br><span class="line">    process.setCancelButtonText ( tr ( <span class="string">"cancel"</span> ) );</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">20000</span>; j++ );</span><br><span class="line">​</span><br><span class="line">        process.setValue ( i );</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( process.wasCanceled() ) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/17/Qt语法详解/Qt之进度条/2.png"></p>
<p>或者如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 对话框标签内容、取消按钮的显示文本、最小值、最大值、父窗口 */</span></span><br><span class="line"><span class="function">QProgressDialog <span class="title">dialog</span> <span class="params">( tr ( <span class="string">"文件复制进度"</span> ), tr ( <span class="string">"取消"</span> ), <span class="number">0</span>, <span class="number">50000</span>, <span class="keyword">this</span> )</span></span>;</span><br><span class="line">dialog.setWindowTitle ( tr ( <span class="string">"进度对话框"</span> ) ); <span class="comment">/* 设置窗口标题 */</span></span><br><span class="line">dialog.setWindowModality ( Qt::WindowModal ); <span class="comment">/* 将对话框设置为模态 */</span></span><br><span class="line">dialog.show();</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++ ) &#123; <span class="comment">/* 演示复制进度 */</span></span><br><span class="line">    dialog.setValue ( i ); <span class="comment">/* 设置进度条的当前值 */</span></span><br><span class="line">    QCoreApplication::processEvents(); <span class="comment">/* 避免界面冻结 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( dialog.wasCanceled() ) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">/* 按下取消按钮则中断 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 这样才能显示100%，因为for循环中少加了一个数 */</span></span><br><span class="line">dialog.setValue ( <span class="number">50000</span> );</span><br><span class="line">qDebug() &lt;&lt; tr ( <span class="string">"复制结束！"</span> );</span><br></pre></td></tr></table></figure>
<p>可以使用<code>setMinimum(int)</code>和<code>setMaximum(int)</code>函数来设置进度条范围的最小值与最大值。<br>&emsp;&emsp;当进行数据或者文件传输时，进度条的设置类似于下面的方式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">connect ( ftp, SIGNAL ( dataTransferProgress ( qint64, qint64 ) ), \</span><br><span class="line">          <span class="keyword">this</span>, SLOT ( updateDataTransferProgress ( qint64, qint64 ) ) );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MainWindow::updateDataTransferProgress ( qint64 readBytes, qint64 totalBytes ) &#123;</span><br><span class="line">    ui-&gt;progressBar-&gt;setMaximum ( totalBytes );</span><br><span class="line">    ui-&gt;progressBar-&gt;setValue ( readBytes );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>hide：实现<code>QProgressBar</code>进度条的隐藏。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/16/Qt语法详解/Qt之键盘事件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/16/Qt语法详解/Qt之键盘事件/" itemprop="url">Qt之键盘事件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-16T18:57:05+08:00">
                2019-03-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;在<code>Qt</code>中，可以使用<code>void QWidget::keyPressEvent ( QKeyEvent * event )</code>来进行键盘响应：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Widget::keyPressEvent ( QKeyEvent *event ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_A ) &#123;</span><br><span class="line">        <span class="comment">/* 当按下按键“A”时，do something */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_D ) &#123;</span><br><span class="line">        <span class="comment">/* 当按下按键“D”时，do something */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_W ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;state() == Qt::ShiftButton ) &#123;</span><br><span class="line">            <span class="comment">/* 当按下“Shift+W”时，do something */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>mylineedit.h</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MYLINEEDIT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MYLINEEDIT_H</span></span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QLineEdit&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLineEdit</span> :</span> <span class="keyword">public</span> QLineEdit &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MyLineEdit</span> <span class="params">( QWidget *parent = <span class="number">0</span> )</span></span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">keyPressEvent</span> <span class="params">( QKeyEvent *event )</span></span>;</span><br><span class="line">signals:</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MYLINEEDIT_H</span></span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>widget.h</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WIDGET_H</span></span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Widget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLineEdit</span>;</span></span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> :</span> <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span> <span class="params">( QWidget *parent = <span class="number">0</span> )</span></span>;</span><br><span class="line">    ~Widget();</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">keyPressEvent</span> <span class="params">( QKeyEvent *event )</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">    MyLineEdit *lineEdit;</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>widget.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"widget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_widget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mylineedit.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line">​</span><br><span class="line">Widget::Widget ( QWidget *parent ) : QWidget ( parent ),</span><br><span class="line">    ui ( <span class="keyword">new</span> Ui::Widget ) &#123;</span><br><span class="line">    ui-&gt;setupUi ( <span class="keyword">this</span> );</span><br><span class="line">    lineEdit = <span class="keyword">new</span> MyLineEdit ( <span class="keyword">this</span> );</span><br><span class="line">    lineEdit-&gt;move ( <span class="number">100</span>, <span class="number">100</span> );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">Widget::~Widget() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> Widget::keyPressEvent ( QKeyEvent *event ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"Widget键盘按下事件"</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>mylineedit.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mylineedit.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line">​</span><br><span class="line">MyLineEdit::MyLineEdit ( QWidget *parent ) : QLineEdit ( parent ) &#123;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> MyLineEdit::keyPressEvent ( QKeyEvent *event ) &#123; <span class="comment">/* 键盘按下事件 */</span></span><br><span class="line">    qDebug() &lt;&lt; tr ( <span class="string">"MyLineEdit键盘按下事件"</span> );</span><br><span class="line">    QLineEdit::keyPressEvent ( event ); <span class="comment">/* 执行QLineEdit类的默认事件处理 */</span></span><br><span class="line">    event-&gt;ignore(); <span class="comment">/* 忽略该事件 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>增加代码<code>QLineEdit::keyPressEvent(event);</code>是为了让行编辑器能够正常工作，即显示字符。事件是先传递给指定窗口部件的，这里确切地说应该是先传递给获得焦点的窗口部件的。但是如果该部件忽略掉该事件，那么这个事件就会传递给这个部件的父部件。在重新实现事件处理函数时，一般要调用父类的相应事件处理函数来实现默认操作。</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之键盘事件/1.png"></p>
<p>&emsp;&emsp;关于<code>Qt</code>中的方向键，代码如下：<br>&emsp;&emsp;<code>widget.h</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WIDGET_H</span></span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Widget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> :</span> <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">​</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span> <span class="params">( QWidget *parent = <span class="number">0</span> )</span></span>;</span><br><span class="line">    ~Widget();</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">keyPressEvent</span> <span class="params">( QKeyEvent *event )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">keyReleaseEvent</span> <span class="params">( QKeyEvent *event )</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">    <span class="keyword">bool</span> keyUp; <span class="comment">/* 向上方向键按下的标志 */</span></span><br><span class="line">    <span class="keyword">bool</span> keyLeft; <span class="comment">/* 向左方向键按下的标志 */</span></span><br><span class="line">    <span class="keyword">bool</span> move; <span class="comment">/* 是否完成了一次移动 */</span></span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>widget.cpp</code>如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"widget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_widget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line">​</span><br><span class="line">Widget::Widget ( QWidget *parent ) : QWidget ( parent ), ui ( <span class="keyword">new</span> Ui::Widget ) &#123;</span><br><span class="line">    ui-&gt;setupUi ( <span class="keyword">this</span> );</span><br><span class="line">    setFocus(); <span class="comment">/* 使主界面获得焦点 */</span></span><br><span class="line">    <span class="comment">/* 初始化变量 */</span></span><br><span class="line">    keyUp = <span class="literal">false</span>;</span><br><span class="line">    keyLeft = <span class="literal">false</span>;</span><br><span class="line">    move = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">Widget::~Widget() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 键盘按下事件 */</span></span><br><span class="line"><span class="keyword">void</span> Widget::keyPressEvent ( QKeyEvent *event ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_Up ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;isAutoRepeat() ) &#123; <span class="comment">/* 按键重复时不做处理 */</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        keyUp = <span class="literal">true</span>; <span class="comment">/* 标记向上方向键已经按下 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_Left ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;isAutoRepeat() ) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        keyLeft = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/* 按键释放事件 */</span></span><br><span class="line"><span class="keyword">void</span> Widget::keyReleaseEvent ( QKeyEvent *event ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_Up ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;isAutoRepeat() ) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        keyUp = <span class="literal">false</span>; <span class="comment">/* 释放按键后将标志设置为false */</span></span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( move ) &#123; <span class="comment">/* 如果已经完成了移动 */</span></span><br><span class="line">            move = <span class="literal">false</span>; <span class="comment">/* 设置标志为false */</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( keyLeft ) &#123; <span class="comment">/* 如果向左方向键已经按下且没有释放 */</span></span><br><span class="line">            ui-&gt;pushButton-&gt;move ( <span class="number">30</span>, <span class="number">80</span> ); <span class="comment">/* 斜移 */</span></span><br><span class="line">            move = <span class="literal">true</span>; <span class="comment">/* 标记已经移动 */</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;move ( <span class="number">120</span>, <span class="number">80</span> ); <span class="comment">/* 否则直接上移 */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_Left ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;isAutoRepeat() ) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        keyLeft = <span class="literal">false</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( move ) &#123;</span><br><span class="line">            move = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( keyUp ) &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;move ( <span class="number">30</span>, <span class="number">80</span> );</span><br><span class="line">            move = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;move ( <span class="number">30</span>, <span class="number">120</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_Down ) &#123; <span class="comment">/* 使用向下方向键来还原按钮的位置 */</span></span><br><span class="line">        ui-&gt;pushButton-&gt;move ( <span class="number">120</span>, <span class="number">120</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里先在键盘按下事件处理函数中对向上方向键和向左方向键是否按下做了标记，并且当它们自动重复时不做任何处理。然后在按键释放事件处理函数中分别对这两个按键的释放做了处理。大致过程是这样的：当按下向左方向键时，在键盘按下事件处理函数中便会标记<code>keyLeft</code>为真，此时若又按下向上方向键，那么<code>keyUp</code>也标记为真。先放开向上方向键，在按键释放事件处理函数中会标记<code>keyUp</code>为假，因为此时<code>keyLeft</code>为真，所以进行斜移，并且将已经移动标志<code>move</code>标志为真。此时再释放向左方向键，在按键释放事件处理函数中会标记<code>keyLeft</code>为假，因为已经进行了斜移操作，<code>move</code>此时为真，所以这里不再进行操作，将<code>move</code>标记为假。这样就完成了整个斜移操作，而且所有的标志又恢复了操作前的状态。这个程序只是提供一种思路，并不是实现这种操作的最好办法，因为这里按键重复功能被忽略了。</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之键盘事件/2.png" height="270" width="312"></p>
<p>&emsp;&emsp;如果想要实现按下<code>Ctrl + M</code>来实现窗口的最大化，把代码进行如下修改：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Widget::keyPressEvent ( QKeyEvent *event ) &#123; <span class="comment">/* 键盘按下事件 */</span></span><br><span class="line">    <span class="keyword">if</span> ( event-&gt;modifiers() == Qt::ControlModifier ) &#123; <span class="comment">/* 是否按下Ctrl键 */</span></span><br><span class="line">        <span class="keyword">if</span> ( event-&gt;key() == Qt::Key_M ) &#123; <span class="comment">/* 是否按下M键 */</span></span><br><span class="line">            setWindowState ( Qt::WindowMaximized ); <span class="comment">/* 窗口最大化 */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        QWidget::keyPressEvent ( event );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">void</span> Widget::keyReleaseEvent ( QKeyEvent *event ) &#123; <span class="comment">/* 按键释放事件 */</span></span><br><span class="line">    <span class="comment">/* 其他操作 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/" itemprop="url">Qt之QSpinBox和QDoubleSpinBox</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-16T17:08:43+08:00">
                2019-03-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt语法详解/" itemprop="url" rel="index">
                    <span itemprop="name">Qt语法详解</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>&emsp;&emsp;<code>QSpinBox</code>和<code>QDoubleSpinBox</code>均派生自<code>QAbstractSpinBox</code>。<code>QSpinBox</code>旨在处理整数和离散值(例如月份名称)，<code>QDoubleSpinBox</code>则用于处理浮点值。它们之间的区别就是处理数据的类型不同，其他功能都基本相同。<code>QDoubleSpinBox</code>的默认的精度是<code>2</code>位小数，但可以通过<code>setDecimals</code>来改变。</p>
<h3 id="详细描述"><a href="#详细描述" class="headerlink" title="详细描述"></a>详细描述</h3><p>&emsp;&emsp;<code>QSpinBox</code>类提供了一个微调框部件。<code>QSpinBox</code>允许用户选择一个值，通过单击<code>向上/向下</code>按钮或按下键盘的<code>上/下</code>箭头来增加或减少当前显示的值，用户也可以输入值。微调框支持整数值，但可以被扩展为不同的字符串，使用<code>validate</code>、<code>textFromValue</code>和<code>valueFromText</code>。<br>&emsp;&emsp;当<code>QSpinBox</code>的值发生改变时，会发射两个<code>valueChanged</code>信号，其中一个提供<code>int</code>类型，另一个则是<code>QString</code>类型，该<code>QString</code>提供了<code>prefix</code>和<code>suffix</code>。当前值可以用<code>value</code>来读取，<code>setValue</code>来设置。<br>&emsp;&emsp;单击<code>向上/向下</code>按钮或按下键盘的<code>上/下</code>箭头时，将以<code>singleStep</code>为步长增加或减少当前值。如果想改变这种行为，可以重载虚函数<code>stepBy</code>。最小值、最大值和步长可以使用其中的一个构造函数来设置，以后可以用<code>setMinimum</code>、<code>setMaximum</code>和<code>setSingleStep</code>来修改。<br>&emsp;&emsp;大多数微调框是定向的，但也可以设置为循环的。例如如果取值范围是<code>0</code>至<code>99</code>，当前值是<code>99</code>时，如果<code>wrapping</code>被设置为<code>true</code>，点击<code>向上</code>按钮值会变为<code>0</code>。如果你想要一个循环微调框，可以使用<code>setWrapping</code>函数。显示的值可以和任意的字符串进行附加，使用<code>setPrefix</code>和<code>setSuffix</code>分别可以设置前缀和后缀，例如货币或计量单位。微调框中的文本可以用<code>text</code>函数(包括任何前缀和后缀)或者通过<code>cleanText</code>函数(没有前缀、没有后缀、无前导或结尾空白)来获取。<br>&emsp;&emsp;除了数值的范围，通常需要使用<code>setSpecialValueText</code>给用户一个特殊(默认)的选择。</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>&emsp;&emsp;构建一个<code>QSpinBox</code>，范围是<code>20</code>至<code>200</code>，步长为<code>10</code>，开启循环。</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/1.png"></p>
<p>&emsp;&emsp;设置步长为<code>10</code>以后，当值发生改变时，就会在当前值的基础上<code>±10</code>(相当于一个等差数列，公差为<code>10</code>)。开启循环后，当前值达到最大或者最小时，就会循环(类似于听歌的列表循环)。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QSpinBox&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span> :</span> <span class="keyword">public</span> CustomWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">​</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    explicit MainWindow ( QWidget *parent = 0 ) : CustomWindow ( parent ) &#123;</span><br><span class="line">        QSpinBox *pSpinBox = <span class="keyword">new</span> QSpinBox ( <span class="keyword">this</span> );</span><br><span class="line">        pSpinBox-&gt;setRange ( <span class="number">20</span>, <span class="number">200</span> ); <span class="comment">/* 范围 */</span></span><br><span class="line">        pSpinBox-&gt;setSingleStep ( <span class="number">10</span> ); <span class="comment">/* 步长 */</span></span><br><span class="line">        pSpinBox-&gt;setValue ( <span class="number">150</span> ); <span class="comment">/* 当前值 */</span></span><br><span class="line">        pSpinBox-&gt;setPrefix ( <span class="string">"$ "</span> ); <span class="comment">/* 前缀 */</span></span><br><span class="line">        pSpinBox-&gt;setSuffix ( <span class="string">" %"</span> ); <span class="comment">/* 后缀 */</span></span><br><span class="line">        pSpinBox-&gt;setWrapping ( <span class="literal">true</span> ); <span class="comment">/* 开启循环 */</span></span><br><span class="line">        connect ( pSpinBox, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QSpinBox::* ) ( <span class="keyword">int</span> ) &gt; \</span><br><span class="line">            ( &amp;QSpinBox::valueChanged ), [ = ] ( <span class="keyword">int</span> value ) &#123;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"Value : "</span>  &lt;&lt; value;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"Text : "</span>  &lt;&lt; pSpinBox-&gt;text();</span><br><span class="line">        &#125; );</span><br><span class="line">        connect ( pSpinBox, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QSpinBox::* ) ( <span class="keyword">const</span> QString &amp; ) &gt; \</span><br><span class="line">            ( &amp;QSpinBox::valueChanged ), [ = ] ( <span class="keyword">const</span> QString &amp; text ) &#123;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"Text Value : "</span>  &lt;&lt; text;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"Clean Text : "</span> &lt;&lt; pSpinBox-&gt;cleanText();</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这里使用了<code>Qt5</code>的信号与槽语法，由于<code>valueChanged</code>是一个重载信号，所以需要进行参数类别区分。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Text Value : <span class="string">"$ 170 %"</span></span><br><span class="line">Clean Text : <span class="string">"170"</span></span><br><span class="line">Value : <span class="number">170</span></span><br><span class="line">Text : <span class="string">"$ 170 %"</span></span><br></pre></td></tr></table></figure>
<h3 id="特殊文本值"><a href="#特殊文本值" class="headerlink" title="特殊文本值"></a>特殊文本值</h3><p>&emsp;&emsp;如果设置了<code>specialValueText</code>，只要当前值等于微调框的最小值时，将显示该文本，而不是一个数值。典型的用途是表明此选择具有特殊(默认)的意思。</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/2.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QSpinBox *zoomSpinBox = <span class="keyword">new</span> QSpinBox ( <span class="keyword">this</span> );</span><br><span class="line">zoomSpinBox-&gt;setRange ( <span class="number">0</span>, <span class="number">1000</span> ); <span class="comment">/* 范围 */</span></span><br><span class="line">zoomSpinBox-&gt;setSingleStep ( <span class="number">10</span> ); <span class="comment">/* 步长 */</span></span><br><span class="line">zoomSpinBox-&gt;setSuffix ( <span class="string">"%"</span> ); <span class="comment">/* 前缀 */</span></span><br><span class="line">zoomSpinBox-&gt;setSpecialValueText ( tr ( <span class="string">"Automatic"</span> ) ); <span class="comment">/* 特殊文本值 */</span></span><br><span class="line">zoomSpinBox-&gt;setValue ( <span class="number">100</span> ); <span class="comment">/* 当前值 */</span></span><br></pre></td></tr></table></figure>
<p>一旦当前值变为最小值时，显示的就是<code>Automatic</code>。</p>
<h3 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h3><p>&emsp;&emsp;如果使用<code>prefix</code>、<code>suffix</code>和<code>specialValueText</code>没有提供足够的控制，可以子类化<code>QSpinBox</code>，重写<code>valueFromText</code>和<code>textFromValue</code>。例如自定义一个微调框，允许用户输入图标大小(例如<code>32 * 32</code>)：</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/3.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QSpinBox&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IconSizeSpinBox</span> :</span> <span class="keyword">public</span> QSpinBox &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">​</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">IconSizeSpinBox</span> <span class="params">( QWidget *parent = <span class="number">0</span> )</span> </span>&#123;&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">/* 将输入的文本解读为适当的值 */</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">valueFromText</span> <span class="params">( <span class="keyword">const</span> QString &amp;text )</span> <span class="keyword">const</span> Q_DECL_OVERRIDE </span>&#123;</span><br><span class="line">        <span class="function">QRegExp <span class="title">regExp</span> <span class="params">( tr ( <span class="string">"(\\d+)(\\s*[xx]\\s*\\d+)?"</span> ) )</span></span>;</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( regExp.exactMatch ( text ) ) &#123;</span><br><span class="line">            <span class="keyword">return</span> regExp.cap ( <span class="number">1</span> ).toInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">/* 根据输入的值返回文本 */</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> QString <span class="title">textFromValue</span> <span class="params">( <span class="keyword">int</span> value )</span> <span class="keyword">const</span> Q_DECL_OVERRIDE </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tr ( <span class="string">"%1 x %1"</span> ).arg ( value );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="QDoubleSpinBox"><a href="#QDoubleSpinBox" class="headerlink" title="QDoubleSpinBox"></a>QDoubleSpinBox</h3><p>&emsp;&emsp;上面的所有功能对于<code>QDoubleSpinBox</code>同样适用。一般使用<code>setDecimals</code>设置精度，然后利用<code>setSingleStep</code>来设置步长。</p>
<p><img src="/2019/03/16/Qt语法详解/Qt之QSpinBox和QDoubleSpinBox/4.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">QDoubleSpinBox *pSpinBox = <span class="keyword">new</span> QDoubleSpinBox ( <span class="keyword">this</span> );</span><br><span class="line">pSpinBox-&gt;setRange ( <span class="number">0</span>, <span class="number">20</span> ); <span class="comment">/* 范围 */</span></span><br><span class="line">pSpinBox-&gt;setDecimals ( <span class="number">3</span> ); <span class="comment">/* 精度 */</span></span><br><span class="line">pSpinBox-&gt;setSingleStep ( <span class="number">0.005</span> ); <span class="comment">/* 步长 */</span></span><br><span class="line"></span><br><span class="line">connect ( pSpinBox, <span class="keyword">static_cast</span>&lt;<span class="keyword">void</span> ( QDoubleSpinBox::* ) ( <span class="keyword">const</span> QString &amp; ) &gt; \</span><br><span class="line">    ( &amp;QDoubleSpinBox::valueChanged ), [ = ] ( <span class="keyword">const</span> QString &amp;text ) &#123;</span><br><span class="line">    qDebug() &lt;&lt; text;</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/03/16/Qt应用示例/Qt添加资源文件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泥腿子出身">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/16/Qt应用示例/Qt添加资源文件/" itemprop="url">Qt添加资源文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-16T16:51:49+08:00">
                2019-03-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt应用示例/" itemprop="url" rel="index">
                    <span itemprop="name">Qt应用示例</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;编写<code>gui</code>时，可能需要一些额外的资源(比如贴图用的图片)，可以使用<code>Qt</code>的资源文件进行统一管理。<br>&emsp;&emsp;1. 右击项目文件夹，选择添加新文件，然后选择<code>Qt</code>，最后是<code>Qt resource file</code>。</p>
<p><img src="/2019/03/16/Qt应用示例/Qt添加资源文件/1.png" height="250" width="433"></p>
<p>&emsp;&emsp;2. 填写好<code>name</code>后点下一步，最终完成资源文件的创建。然后右击项目中生成的<code>.qrc</code>文件，点击<code>添加前缀</code>。</p>
<p><img src="/2019/03/16/Qt应用示例/Qt添加资源文件/2.png"></p>
<p>&emsp;&emsp;3. 添加好前缀之后就可以添加图片文件了。选择需要添加的文件，然后保存，这样就可以在资源浏览器中看到那些添加的图片资源，也就能在代码中引用了。</p>
<p><img src="/2019/03/16/Qt应用示例/Qt添加资源文件/3.png" height="260" width="284"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/95/">95</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">949</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
