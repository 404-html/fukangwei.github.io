<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="暴徒">
<meta property="og:url" content="http://fukangwei.gitee.io/page/58/index.html">
<meta property="og:site_name" content="暴徒">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="暴徒">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '561O3H1PZB',
      apiKey: '7631d3cf19ac49bd39ada7163ec937a7',
      indexName: 'fuxinzi',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://fukangwei.gitee.io/page/58/">





  <title>暴徒</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">暴徒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/11/Python语法/os模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/11/Python语法/os模块/" itemprop="url">os模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-11T09:54:42+08:00">
                2019-01-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>os</code>模块提供了很多方法用来处理文件和目录。</p>
<h3 id="os-chdir"><a href="#os-chdir" class="headerlink" title="os.chdir"></a>os.chdir</h3><p>&emsp;&emsp;<code>os.chdir</code>用于改变当前工作目录到指定的路径。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是要切换到的新路径。如果该路径允许访问，则返回<code>True</code>，否则返回<code>False</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">path = <span class="string">"/tmp"</span></span><br><span class="line">retval = os.getcwd()</span><br><span class="line">print(<span class="string">"当前工作目录为 %s"</span> % retval)  <span class="comment"># 输出“当前工作目录为 /www”</span></span><br><span class="line">os.chdir(path)</span><br><span class="line">retval = os.getcwd()</span><br><span class="line">print(<span class="string">"目录修改成功 %s"</span> % retval)  <span class="comment"># 输出“目录修改成功 /tmp”</span></span><br></pre></td></tr></table></figure>
<h3 id="os-close"><a href="#os-close" class="headerlink" title="os.close"></a>os.close</h3><p>&emsp;&emsp;<code>os.close</code>关闭指定的文件描述符<code>fd</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">b"This is test"</span>)  <span class="comment"># 写入字符串</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-closerange"><a href="#os-closerange" class="headerlink" title="os.closerange"></a>os.closerange</h3><p>&emsp;&emsp;<code>os.closerange</code>方法用于关闭所有文件描述符<code>fd</code>，从<code>fd_low</code>(包含)到<code>fd_high</code>(不包含)，错误会忽略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.closerange(fd_low, fd_high)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fd_low</code>：最小文件描述符。</li>
<li><code>fd_high</code>：最大文件描述符。</li>
</ul>
<p>该方法类似于：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> fd <span class="keyword">in</span> range(fd_low, fd_high):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        os.close(fd)</span><br><span class="line">    <span class="keyword">except</span> OSError:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">b"This is test"</span>)</span><br><span class="line">os.closerange(fd, fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-dup"><a href="#os-dup" class="headerlink" title="os.dup"></a>os.dup</h3><p>&emsp;&emsp;<code>os.dup</code>用于复制文件描述符<code>fd</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.dup(fd)</span><br></pre></td></tr></table></figure>
<p>参数<code>fd</code>是文件描述符。该方法返回复制的文件描述符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">d_fd = os.dup(fd)  <span class="comment"># 复制文件描述符</span></span><br><span class="line">os.write(d_fd, <span class="string">b"This is test"</span>)  <span class="comment"># 使用复制的文件描述符写入文件</span></span><br><span class="line">os.closerange(fd, d_fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-dup2"><a href="#os-dup2" class="headerlink" title="os.dup2"></a>os.dup2</h3><p>&emsp;&emsp;<code>os.dup2</code>用于将一个文件描述符<code>fd</code>复制到<code>fd2</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.dup2(fd, fd2)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fd</code>：要被复制的文件描述符。</li>
<li><code>fd2</code>：复制的文件描述符。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test"</span>.encode())</span><br><span class="line">fd2 = <span class="number">1000</span>  <span class="comment"># 文件描述符为1000</span></span><br><span class="line">os.dup2(fd, fd2)</span><br><span class="line"><span class="comment"># 在新的文件描述符上插入数据</span></span><br><span class="line">os.lseek(fd2, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">str = os.read(fd2, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">"读取的字符串是:"</span>, str.decode())  <span class="comment"># 输出“读取的字符串是: This is test”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-fchdir"><a href="#os-fchdir" class="headerlink" title="os.fchdir"></a>os.fchdir</h3><p>&emsp;&emsp;<code>os.fchdir</code>通过文件描述符改变当前工作目录。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.fchdir(fd)</span><br></pre></td></tr></table></figure>
<p>参数<code>fd</code>是文件描述符。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">os.chdir(<span class="string">"/var/www/html"</span>)  <span class="comment"># 首先到目录“/var/www/html”</span></span><br><span class="line">print(<span class="string">"当前工作目录为: %s"</span> % os.getcwd())  <span class="comment"># 输出“当前工作目录为: /var/www/html”</span></span><br><span class="line">fd = os.open(<span class="string">"/tmp"</span>, os.O_RDONLY)  <span class="comment"># 打开新目录“/tmp”</span></span><br><span class="line">os.fchdir(fd)  <span class="comment"># 使用os.fchdir方法修改到新目录</span></span><br><span class="line">print(<span class="string">"当前工作目录为: %s"</span> % os.getcwd())  <span class="comment"># 输出“当前工作目录为: /tmp”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-fdatasync"><a href="#os-fdatasync" class="headerlink" title="os.fdatasync"></a>os.fdatasync</h3><p>&emsp;&emsp;<code>os.fdatasync</code>强制将文件写入磁盘，但是不强制更新文件的状态信息。如果你需要刷新缓冲区，可以使用该方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.fdatasync(fd)</span><br></pre></td></tr></table></figure>
<p>参数<code>fd</code>是文件描述符。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test"</span>.encode())  <span class="comment"># 写入字符串</span></span><br><span class="line">os.fdatasync(fd)  <span class="comment"># 使用fdatasync方法</span></span><br><span class="line">os.lseek(fd, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">str = os.read(fd, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">"读取的字符是:"</span>, str.decode())  <span class="comment"># 输出“读取的字符是: This is test”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-fdopen"><a href="#os-fdopen" class="headerlink" title="os.fdopen"></a>os.fdopen</h3><p>&emsp;&emsp;<code>os.fdopen</code>通过文件描述符<code>fd</code>创建一个文件对象，并返回这个文件对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.fdopen(fd, [, mode[, bufsize]])</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fd</code>：文件描述符。</li>
<li><code>mode</code>：可选项。和<code>Python</code>内建的<code>open</code>函数一样，<code>mode</code>参数可以指定为<code>r</code>、<code>w</code>、<code>a</code>、<code>r+</code>、<code>w+</code>、<code>a+</code>、<code>b</code>等。</li>
<li><code>bufsize</code>：可选项，指定返回的文件对象是否带缓冲。如果这个参数没有指定，则使用系统默认的缓冲设定。</li>
</ul>
<ol>
<li><code>bufsize = 0</code>表示没有带缓冲。</li>
<li><code>bufsize = 1</code>表示该文件对象是行缓冲的。</li>
<li><code>bufsize = 正数</code>表示使用一个指定大小的缓冲，单位为<code>byte</code>，但是这个大小不是精确的。</li>
<li><code>bufsize = 负数</code>表示使用一个系统默认大小的缓冲。对于<code>tty</code>等字符设备，一般是行缓冲；而对于其他文件，一般是全缓冲。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">fo = os.fdopen(fd, <span class="string">"w+"</span>)  <span class="comment"># 获取以上文件的对象</span></span><br><span class="line">print(<span class="string">"Current I/O pointer position: %d"</span> % fo.tell())  <span class="comment"># 获取当前位置</span></span><br><span class="line">fo.write(<span class="string">"Python is a great language.\nYeah its great!"</span>)  <span class="comment"># 写入字符串</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">str = os.read(fd, <span class="number">100</span>)  <span class="comment"># 读取内容</span></span><br><span class="line">print(<span class="string">"Read String is:"</span>, str.decode())</span><br><span class="line">print(<span class="string">"Current I/O pointer position: %d"</span> % fo.tell())  <span class="comment"># 获取当前位置</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Current I/O pointer position: <span class="number">0</span></span><br><span class="line">Read String <span class="keyword">is</span>: Python <span class="keyword">is</span> a great language.</span><br><span class="line">Yeah its great!</span><br><span class="line">Current I/O pointer position: <span class="number">44</span></span><br></pre></td></tr></table></figure>
<h3 id="os-fstat"><a href="#os-fstat" class="headerlink" title="os.fstat"></a>os.fstat</h3><p>&emsp;&emsp;<code>os.fstat</code>返回文件描述符<code>fd</code>的状态，类似于<code>stat</code>。<code>fstat</code>返回的结构如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>结构成员</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>st_dev</code></td>
<td>设备信息</td>
</tr>
<tr>
<td><code>st_ino</code></td>
<td>文件的<code>i_node</code>值</td>
</tr>
<tr>
<td><code>st_mode</code></td>
<td>文件信息的掩码，包含了文件的权限信息、类型信息(是普通文件还是管道文件，或者其他类型的文件)</td>
</tr>
<tr>
<td><code>st_nlink</code></td>
<td>硬连接数</td>
</tr>
<tr>
<td><code>st_uid</code></td>
<td>用户<code>ID</code></td>
</tr>
<tr>
<td><code>st_gid</code></td>
<td>用户组<code>ID</code></td>
</tr>
<tr>
<td><code>st_rdev</code></td>
<td>设备<code>ID</code></td>
</tr>
<tr>
<td><code>st_size</code></td>
<td>文件大小，以<code>byte</code>为单位</td>
</tr>
<tr>
<td><code>st_blksize</code></td>
<td>系统<code>I/O</code>块大小</td>
</tr>
<tr>
<td><code>st_blocks</code></td>
<td>文件的是由多少个<code>512 byte</code>块构成的</td>
</tr>
<tr>
<td><code>st_atime</code></td>
<td>文件最近的访问时间</td>
</tr>
<tr>
<td><code>st_mtime</code></td>
<td>文件最近的修改时间</td>
</tr>
<tr>
<td><code>st_ctime</code></td>
<td>文件状态信息的修改时间(不是文件内容的修改时间)</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;<code>os.fstat</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.fstat(fd)</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">info = os.fstat(fd)  <span class="comment"># 获取元组</span></span><br><span class="line">print(<span class="string">"文件信息:"</span>, info)</span><br><span class="line">print(<span class="string">"文件UID: %d"</span> % info.st_uid)  <span class="comment"># 获取文件uid</span></span><br><span class="line">print(<span class="string">"文件GID: %d"</span> % info.st_gid)  <span class="comment"># 获取文件gid</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">文件信息: os.stat_result(st_mode=<span class="number">33206</span>, st_ino=<span class="number">39406496739494228</span>, \</span><br><span class="line">    st_dev=<span class="number">853940426</span>, st_nlink=<span class="number">1</span>, st_uid=<span class="number">0</span>, st_gid=<span class="number">0</span>, \</span><br><span class="line">    st_size=<span class="number">44</span>, st_atime=<span class="number">1509690521</span>, st_mtime=<span class="number">1509690819</span>, st_ctime=<span class="number">1509682525</span>)</span><br><span class="line">文件UID: <span class="number">0</span></span><br><span class="line">文件GID: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h3 id="os-fsync"><a href="#os-fsync" class="headerlink" title="os.fsync"></a>os.fsync</h3><p>&emsp;&emsp;<code>os.fsync</code>方法强制将文件描述符为<code>fd</code>的文件写入硬盘。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.fsync(fd)</span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test"</span>.encode())  <span class="comment"># 写入字符串</span></span><br><span class="line">os.fsync(fd)  <span class="comment"># 使用fsync方法</span></span><br><span class="line">os.lseek(fd, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">str = os.read(fd, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">"读取的字符串为:"</span>, str.decode())  <span class="comment"># 输出“读取的字符串为: This is test”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-ftruncate"><a href="#os-ftruncate" class="headerlink" title="os.ftruncate"></a>os.ftruncate</h3><p>&emsp;&emsp;<code>os.ftruncate</code>裁剪文件描述符<code>fd</code>对应的文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.ftruncate(fd, length)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fd</code>：文件的描述符。</li>
<li><code>length</code>：需要裁剪的大小，其值不能超过文件大小。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test - This is test"</span>.encode())  <span class="comment"># 写入字符串</span></span><br><span class="line">os.ftruncate(fd, <span class="number">10</span>)  <span class="comment"># 使用ftruncate方法</span></span><br><span class="line">os.lseek(fd, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">str = os.read(fd, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">"读取的字符串是:"</span>, str.decode())  <span class="comment"># 输出“读取的字符串是: This is te”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-getcwd"><a href="#os-getcwd" class="headerlink" title="os.getcwd"></a>os.getcwd</h3><p>&emsp;&emsp;<code>os.getcwd</code>返回当前工作目录。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">os.chdir(<span class="string">"/var/www/html"</span>)  <span class="comment"># 切换到“/var/www/html”目录</span></span><br><span class="line">print(<span class="string">"当前工作目录: %s"</span> % os.getcwd())  <span class="comment"># 输出“当前工作目录: /var/www/html”</span></span><br><span class="line">fd = os.open(<span class="string">"/tmp"</span>, os.O_RDONLY)  <span class="comment"># 打开“/tmp”</span></span><br><span class="line">os.fchdir(fd)  <span class="comment"># 使用os.fchdir方法修改目录</span></span><br><span class="line">print(<span class="string">"当前工作目录: %s"</span> % os.getcwd())  <span class="comment"># 输出“当前工作目录: /tmp”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-listdir"><a href="#os-listdir" class="headerlink" title="os.listdir"></a>os.listdir</h3><p>&emsp;&emsp;<code>os.listdir</code>返回指定路径包含的文件和文件夹列表，这个列表是按照字母顺序排列，并且不包括<code>.</code>和<code>..</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是指定路径。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">path = <span class="string">"./"</span></span><br><span class="line">dirs = os.listdir(path)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> dirs:  <span class="comment"># 输出所有文件和文件夹</span></span><br><span class="line">    print(file)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.idea</span><br><span class="line">foo.txt</span><br><span class="line">hello.py</span><br></pre></td></tr></table></figure>
<h3 id="os-lseek"><a href="#os-lseek" class="headerlink" title="os.lseek"></a>os.lseek</h3><p>&emsp;&emsp;<code>os.lseek</code>设置文件描述符<code>fd</code>的当前位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.lseek(fd, pos, how)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fd</code>：文件描述符。</li>
<li><code>pos</code>：这是相对于参数<code>how</code>的位置。</li>
<li><code>how</code>：文件内部的参考位置：</li>
</ul>
<ol>
<li><code>SEEK_SET</code>(或者<code>0</code>)设置从文件开始的计算的<code>pos</code>。</li>
<li><code>SEEK_CUR</code>(或者<code>1</code>)从当前位置计算。</li>
<li><code>SEEK_END</code>(或者<code>2</code>)从文件尾部开始。</li>
</ol>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test"</span>.encode())</span><br><span class="line">os.fsync(fd)</span><br><span class="line">os.lseek(fd, <span class="number">0</span>, os.SEEK_SET)</span><br><span class="line">str = os.read(fd, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">"Read String is:"</span>, str.decode())  <span class="comment"># 输出“Read String is: This is test”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-mkdir"><a href="#os-mkdir" class="headerlink" title="os.mkdir"></a>os.mkdir</h3><p>&emsp;&emsp;<code>os.mkdir</code>使用数字权限创建目录，默认的模式为<code>0777</code>(八进制)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(path [, mode])</span><br></pre></td></tr></table></figure>
<ul>
<li><code>path</code>：创建的目录。</li>
<li><code>mode</code>：为目录设置的权限。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">path = <span class="string">"./tmp/monthly"</span></span><br><span class="line">os.mkdir(path, <span class="number">0o755</span>)</span><br></pre></td></tr></table></figure>
<h3 id="os-makedirs"><a href="#os-makedirs" class="headerlink" title="os.makedirs"></a>os.makedirs</h3><p>&emsp;&emsp;<code>os.makedirs</code>递归地创建目录。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.makedirs(path, mode=<span class="number">0o777</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>path</code>：需要递归创建的目录。</li>
<li><code>mode</code>：权限模式。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">path = <span class="string">"./tmp/daily"</span>  <span class="comment"># 创建的目录</span></span><br><span class="line">os.makedirs(path, <span class="number">0o755</span>)</span><br></pre></td></tr></table></figure>
<h3 id="os-open"><a href="#os-open" class="headerlink" title="os.open"></a>os.open</h3><p>&emsp;&emsp;<code>os.open</code>打开一个文件，并且设置打开选项。参数<code>mode</code>是可选的，默认为<code>0777</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.open(file, flags [, mode])</span><br></pre></td></tr></table></figure>
<ul>
<li><code>file</code>：要打开的文件。</li>
<li><code>flags</code>：该参数有以下选项，多个则使用<code>|</code>隔开：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>os.O_RDONLY</code></td>
<td>以只读的方式打开</td>
</tr>
<tr>
<td><code>os.O_WRONLY</code></td>
<td>以只写的方式打开</td>
</tr>
<tr>
<td><code>os.O_RDWR</code></td>
<td>以读写的方式打开</td>
</tr>
<tr>
<td><code>os.O_NONBLOCK</code></td>
<td>打开时不阻塞</td>
</tr>
<tr>
<td><code>os.O_APPEND</code></td>
<td>以追加的方式打开</td>
</tr>
<tr>
<td><code>os.O_CREAT</code></td>
<td>创建并打开一个新文件</td>
</tr>
<tr>
<td><code>os.O_TRUNC</code></td>
<td>打开一个文件，并截断它的长度为零(必须有写权限)</td>
</tr>
<tr>
<td><code>os.O_EXCL</code></td>
<td>如果指定的文件存在，就返回错误</td>
</tr>
<tr>
<td><code>os.O_SHLOCK</code></td>
<td>自动获取共享锁</td>
</tr>
<tr>
<td><code>os.O_EXLOCK</code></td>
<td>自动获取独立锁</td>
</tr>
<tr>
<td><code>os.O_DIRECT</code></td>
<td>消除或减少缓存效果</td>
</tr>
<tr>
<td><code>os.O_FSYNC</code></td>
<td>同步写入</td>
</tr>
<tr>
<td><code>os.O_NOFOLLOW</code></td>
<td>不追踪软链接</td>
</tr>
</tbody>
</table>
</div>
<p>该方法返回新打开的文件描述符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">os.write(fd, <span class="string">"This is test"</span>.encode())  <span class="comment"># 写入字符串</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-read"><a href="#os-read" class="headerlink" title="os.read"></a>os.read</h3><p>&emsp;&emsp;<code>os.read</code>从文件描述符<code>fd</code>中读取最多<code>n</code>个字节，并返回包含读取字节的字符串。如果文件指针达到文件尾，则返回一个空字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.read(fd, n)</span><br></pre></td></tr></table></figure>
<p>参数<code>fd</code>是文件描述符，<code>n</code>是读取的字节。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"foo.txt"</span>, os.O_RDWR)</span><br><span class="line">ret = os.read(fd, <span class="number">12</span>)</span><br><span class="line">print(ret.decode())  <span class="comment"># 输出“This is test”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-remove"><a href="#os-remove" class="headerlink" title="os.remove"></a>os.remove</h3><p>&emsp;&emsp;<code>os.remove</code>删除指定路径的文件。如果指定路径是一个目录，将抛出<code>OSError</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是文件路径。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.remove(<span class="string">"foo.txt"</span>)  <span class="comment"># 移除</span></span><br><span class="line">print(<span class="string">"移除后: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录为: [<span class="string">'.idea'</span>, <span class="string">'foo.txt'</span>, <span class="string">'hello.py'</span>]</span><br><span class="line">移除后: [<span class="string">'.idea'</span>, <span class="string">'hello.py'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="os-removedirs"><a href="#os-removedirs" class="headerlink" title="os.removedirs"></a>os.removedirs</h3><p>&emsp;&emsp;<code>os.removedirs</code>递归删除目录。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.removedirs(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是目录路径。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.removedirs(<span class="string">"./test"</span>)</span><br><span class="line">print(<span class="string">"移除后目录为: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'test'</span> ]</span><br><span class="line">移除后目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="os-rename"><a href="#os-rename" class="headerlink" title="os.rename"></a>os.rename</h3><p>&emsp;&emsp;<code>os.rename</code>重命名文件或目录，从<code>src</code>到<code>dst</code>。如果<code>dst</code>是一个存在的目录，将抛出<code>OSError</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rename(src, dst)</span><br></pre></td></tr></table></figure>
<p>参数<code>src</code>是要修改的目录名，<code>dst</code>是修改后的目录名。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.rename(<span class="string">"test"</span>, <span class="string">"test2"</span>)  <span class="comment"># 重命名</span></span><br><span class="line">print(<span class="string">"重命名成功。"</span>)</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'test'</span> ]</span><br><span class="line">重命名成功。</span><br><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'test2'</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="os-renames"><a href="#os-renames" class="headerlink" title="os.renames"></a>os.renames</h3><p>&emsp;&emsp;<code>os.renames</code>递归地重命名目录或文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.renames(old, new)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>old</code>：要重命名的目录</li>
<li><code>new</code>：文件或目录的新名字，甚至可以是包含在目录中的文件，或者完整的目录树。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"当前目录为: %s"</span> % os.getcwd())</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.renames(<span class="string">"aa1.txt"</span>, <span class="string">"newdir/aanew.txt"</span>)  <span class="comment"># 重命名为“aa1.txt”</span></span><br><span class="line">print(<span class="string">"重命名成功。"</span>)</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">当前目录为: /tmp</span><br><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'aa1.txt'</span>,<span class="string">'Administrator'</span>,<span class="string">'amrood.admin'</span> ]</span><br><span class="line">重命名成功。</span><br><span class="line">目录为:[ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'Administrator'</span>,<span class="string">'amrood.admin'</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="os-rmdir"><a href="#os-rmdir" class="headerlink" title="os.rmdir"></a>os.rmdir</h3><p>&emsp;&emsp;<code>os.rmdir</code>删除指定路径的目录，条件是这文件夹为空的，否则抛出<code>OSError</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是目录路径。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.rmdir(<span class="string">"mydir"</span>)  <span class="comment"># 删除路径</span></span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span>,<span class="string">'mydir'</span> ]</span><br><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span>,<span class="string">'a3.py'</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="os-unlink"><a href="#os-unlink" class="headerlink" title="os.unlink"></a>os.unlink</h3><p>&emsp;&emsp;<code>os.unlink</code>删除文件，如果文件是一个目录，则返回一个错误。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.unlink(path)</span><br></pre></td></tr></table></figure>
<p>参数<code>path</code>是文件路径。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">print(<span class="string">"目录为: %s"</span> % os.listdir(os.getcwd()))</span><br><span class="line">os.unlink(<span class="string">"aa.txt"</span>)</span><br><span class="line">print(<span class="string">"删除后的目录为: %s"</span> % os.listdir(os.getcwd()))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'aa.txt'</span>,<span class="string">'resume.doc'</span> ]</span><br><span class="line">删除后的目录为: [ <span class="string">'a1.txt'</span>,<span class="string">'resume.doc'</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="os-walk"><a href="#os-walk" class="headerlink" title="os.walk"></a>os.walk</h3><p>&emsp;&emsp;<code>os.walk</code>通过在目录树中游走，输出目录中的文件名(包含设置的根目录<code>top</code>)。该函数将产生<code>3</code>元组<code>(dirpath, dirnames, filenames)</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.walk(top[, topdown=<span class="keyword">True</span> [, onerror=<span class="keyword">None</span> [, followlinks=<span class="keyword">False</span>]]])</span><br></pre></td></tr></table></figure>
<ul>
<li><code>top</code>：设置的根目录。</li>
<li><code>topdown</code>：可选项，如果为<code>True</code>或者没有指定，一个目录的<code>3</code>元组将比它的任何子文件夹的<code>3</code>元组先产生(即目录<code>自上而下</code>)；如果<code>topdown</code>为<code>False</code>，一个目录的<code>3</code>元组将比它的任何子文件夹的<code>3</code>元组后产生(即目录<code>自下而上</code>)。</li>
<li><code>onerror</code>：可选项，它是一个函数，一般不设置。</li>
<li><code>followlinks</code>：如果设置为<code>True</code>，则通过软链接访问目录。</li>
</ul>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">"."</span>, topdown=<span class="keyword">False</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">        print(os.path.join(root, name))</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> dirs:</span><br><span class="line">        print(os.path.join(root, name))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.\.idea\scopes\scope_settings.xml</span><br><span class="line">.\.idea\.name</span><br><span class="line">.\.idea\encodings.xml</span><br><span class="line">.\.idea\misc.xml</span><br><span class="line">.\.idea\modules.xml</span><br><span class="line">.\.idea\untitled1.iml</span><br><span class="line">.\.idea\vcs.xml</span><br><span class="line">.\.idea\workspace.xml</span><br><span class="line">.\.idea\scopes</span><br><span class="line">.\hello.py</span><br><span class="line">.\.idea</span><br></pre></td></tr></table></figure>
<h3 id="os-write"><a href="#os-write" class="headerlink" title="os.write"></a>os.write</h3><p>&emsp;&emsp;<code>os.write</code>写入字符串到文件描述符<code>fd</code>中，返回实际写入的字符串长度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.write(fd, str)</span><br></pre></td></tr></table></figure>
<p>参数<code>fd</code>是文件描述符，<code>str</code>是写入的字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">fd = os.open(<span class="string">"f1.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line">str = <span class="string">"This is runoob.com site"</span></span><br><span class="line">ret = os.write(fd, str.encode())</span><br><span class="line">print(<span class="string">"写入的位数为:"</span>, ret)  <span class="comment"># 输出“写入的位数为: 23”</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>
<h3 id="os-urandom"><a href="#os-urandom" class="headerlink" title="os.urandom"></a>os.urandom</h3><p>&emsp;&emsp;随机产生<code>n</code>个字节(<code>0-255</code>)的字符串，可以作为随机加密<code>key</code>使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.urandom(<span class="number">2</span>)</span><br><span class="line"><span class="string">b'5\xcb'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.urandom(<span class="number">2</span>)</span><br><span class="line"><span class="string">b'2\\'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.urandom(<span class="number">2</span>)</span><br><span class="line"><span class="string">b'\xbe2'</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>&emsp;&emsp;获取所有环境变量的名字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> os.environ.keys():</span><br><span class="line">    print(key)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;获取指定名字的环境变量对应的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line"><span class="comment"># 参数“path”可以换成任意存在的环境变量名。如果不存在，则输出None</span></span><br><span class="line">dir = os.environ.get(<span class="string">'path'</span>)</span><br><span class="line">print(dir)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;设置环境变量(注意，当前设置的环境变量只是在本程序中生效，并不是永久更新)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">dir = <span class="string">"D:\LearnTool"</span></span><br><span class="line">os.environ[<span class="string">'datapath'</span>] = dir</span><br><span class="line">print(os.environ.get(<span class="string">'datapath'</span>))</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="os模块中的常量"><a href="#os模块中的常量" class="headerlink" title="os模块中的常量"></a>os模块中的常量</h3><p>&emsp;&emsp;如下所示：</p>
<ul>
<li><code>os.curdir</code>：指代当前目录(<code>.</code>)。</li>
<li><code>os.pardir</code>：指代上一级目录(<code>..</code>)。</li>
<li><code>os.sep</code>：输出操作系统特定的路径分隔符(<code>Win</code>下为<code>\\</code>，<code>Linux</code>下为<code>/</code>)。</li>
<li><code>os.linesep</code>：当前平台使用的行终止符(<code>Win</code>下为<code>\r\n</code>，<code>Linux</code>下为<code>\n</code>)。</li>
<li><code>os.name</code>：指代当前使用的操作系统(包括<code>posix</code>、<code>nt</code>、<code>mac</code>、<code>java</code>)。</li>
</ul>
<hr>
<h3 id="os-path模块"><a href="#os-path模块" class="headerlink" title="os.path模块"></a>os.path模块</h3><p>&emsp;&emsp;相关函数如下：</p>
<ul>
<li><code>os.path.abspath(path)</code>：返回绝对路径。</li>
<li><code>os.path.basename(path)</code>：返回文件名。</li>
<li><code>os.path.commonprefix(list)</code>：返回<code>list</code>(多个路径)中，所有<code>path</code>共有的最长路径。</li>
<li><code>os.path.dirname(path)</code>：返回文件路径。</li>
<li><code>os.path.exists(path)</code>：路径存在则返回<code>True</code>，路径损坏返回<code>False</code>。</li>
<li><code>os.path.expanduser(path)</code>：把<code>path</code>中包含的<code>~</code>转换成用户目录。</li>
<li><code>os.path.expandvars(path)</code>：根据环境变量的值替换<code>path</code>中包含的<code>$name</code>和<code>${name}</code>。</li>
<li><code>os.path.getatime(path)</code>：返回最后一次进入此<code>path</code>的时间。</li>
<li><code>os.path.getmtime(path)</code>：返回在此<code>path</code>下最后一次修改的时间。</li>
<li><code>os.path.getsize(path)</code>：返回文件大小，如果文件不存在，就返回错误。</li>
<li><code>os.path.isabs(path)</code>：判断是否为绝对路径。</li>
<li><code>os.path.isfile(path)</code>：判断路径是否为文件。</li>
<li><code>os.path.isdir(path)</code>：判断路径是否为目录。</li>
<li><code>os.path.islink(path)</code>：判断路径是否为链接。</li>
<li><code>os.path.ismount(path)</code>：判断路径是否为挂载点。</li>
<li><code>os.path.join(path1[, path2[, ...]])</code>：把目录和文件名合成一个路径。</li>
<li><code>os.path.normcase(path)</code>：转换<code>path</code>的大小写和斜杠。</li>
<li><code>os.path.normpath(path)</code>：规范<code>path</code>字符串形式。</li>
<li><code>os.path.realpath(path)</code>：返回<code>path</code>的真实路径。</li>
<li><code>os.path.relpath(path[, start])</code>：从<code>start</code>开始计算相对路径。</li>
<li><code>os.path.samefile(path1, path2)</code>：判断目录或文件是否相同。</li>
<li><code>os.path.sameopenfile(fp1, fp2)</code>：判断<code>fp1</code>和<code>fp2</code>是否指向同一文件</li>
<li><code>os.path.samestat(stat1, stat2)</code>：判断<code>stat1</code>和<code>stat2</code>是否指向同一个文件。</li>
<li><code>os.path.split(path)</code>：把路径分割成<code>dirname</code>和<code>basename</code>，返回一个元组。</li>
<li><code>os.path.splitdrive(path)</code>：一般用在<code>Windows</code>下，返回驱动器名和路径组成的元组。</li>
<li><code>os.path.splitext(path)</code>：分割路径，返回路径名和文件扩展名的元组。</li>
<li><code>os.path.splitunc(path)</code>：把路径分割为加载点与文件。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/软件与硬件问题/Python问题总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/软件与硬件问题/Python问题总结/" itemprop="url">Python问题总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T16:01:38+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="HTTP-Error-403-Forbidden"><a href="#HTTP-Error-403-Forbidden" class="headerlink" title="HTTP Error 403: Forbidden"></a>HTTP Error 403: Forbidden</h3><p>&emsp;&emsp;<code>urllib.request.urlopen</code>经常会被用来打开一个网页的源代码，然后会去分析这个页面源代码。但是对于有的网站使用这种方法时，会抛出<code>HTTP Error 403: Forbidden</code>异常。例如执行下面的语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">urllib.request.urlopen(<span class="string">"http://blog.csdn.net/eric_sunah/article/details/11099295"</span>)</span><br></pre></td></tr></table></figure>
<p>会出现以下异常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"D:\Python\lib\urllib\request.py"</span>, <span class="keyword">in</span> open response = meth(req, response)</span><br><span class="line"><span class="string">"D:\Python\lib\urllib\request.py"</span>, <span class="keyword">in</span> http_response <span class="string">'http'</span>, request, response, code, msg, hdrs)</span><br><span class="line"><span class="string">"D:\Python\lib\urllib\request.py"</span>, <span class="keyword">in</span> error <span class="keyword">return</span> self._call_chain(*args)</span><br><span class="line"><span class="string">"D:\Python\lib\urllib\request.py"</span>, <span class="keyword">in</span> _call_chain result = func(*args)</span><br><span class="line"><span class="string">"D:\Python\lib\urllib\request.py"</span>, <span class="keyword">in</span> http_error_default <span class="keyword">raise</span> HTTPError(req.full_url, code, msg, hdrs, fp)</span><br><span class="line">urllib.error.HTTPError: HTTP Error <span class="number">403</span>: Forbidden</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;之所以出现上面的异常，是因为如果用<code>urllib.request.urlopen</code>方式打开一个<code>URL</code>，服务器端只会收到一个单纯的对于该页面访问的请求，但是服务器并不知道发送这个请求使用的浏览器、操作系统、硬件平台等信息，而缺失这些信息的请求往往都是非正常的访问，例如爬虫。有些网站为了防止这种非正常的访问，会验证请求信息中的<code>UserAgent</code>(它的信息包括硬件平台、系统软件、应用软件和用户个人偏好)。如果<code>UserAgent</code>存在异常或者是不存在，那么这次请求将会被拒绝(例如上面的错误信息所示)，所以可以尝试在请求中加入<code>UserAgent</code>的信息。<br>&emsp;&emsp;对于<code>Python 3</code>来说，在请求中添加<code>UserAgent</code>的信息非常简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果不加上下面的这行，出现会出现“urllib2.HTTPError: HTTP Error 403: Forbidden”错误</span></span><br><span class="line"><span class="comment"># 主要是由于该网站禁止爬虫导致的，可以在请求加上头信息，伪装成浏览器访问“User-Agent”，</span></span><br><span class="line"><span class="comment"># 具体的信息可以通过火狐的FireBug插件查询</span></span><br><span class="line">headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:23.0) Gecko/20100101 Firefox/23.0'</span>&#125;</span><br><span class="line">req = urllib.request.Request(url=chaper_url, headers=headers)</span><br><span class="line">urllib.request.urlopen(req).read()</span><br></pre></td></tr></table></figure>
<p>将<code>urllib.request.urlopen.read</code>替换成上面的代码后，对于出现问题的页面就可以就正常访问。如果加上这个<code>UserAgent</code>还是不行的话，那就换一个<code>UserAgent</code>吧。</p>
<h3 id="serial-serialutil-SerialException-could-not-open-port"><a href="#serial-serialutil-SerialException-could-not-open-port" class="headerlink" title="serial.serialutil.SerialException: could not open port"></a>serial.serialutil.SerialException: could not open port</h3><p>&emsp;&emsp;<code>Question</code>：I tried to communicate <code>Python</code> and <code>Arduino</code> with <code>pyserial</code> on Win8, but it had error like this：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">"C:\Users\Fon\Desktop\x.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt; ser.open() <span class="comment"># open serial port</span></span><br><span class="line">File <span class="string">"C:\Python27\lib\site-packages\serial\serialwin32.py"</span>, line <span class="number">66</span>, \</span><br><span class="line"><span class="keyword">in</span> open <span class="keyword">raise</span> SerialException(<span class="string">"could not open port %r: %r"</span> % (self.portstr, ctypes.WinError())) \</span><br><span class="line">serial.serialutil.SerialException: could <span class="keyword">not</span> open port <span class="string">'COM4'</span>: \</span><br><span class="line">WindowsError(<span class="number">2</span>, <span class="string">'The system cannot find the file specified.'</span>)</span><br></pre></td></tr></table></figure>
<p>this is my code：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> serial</span><br><span class="line">​</span><br><span class="line">ser = serial.Serial()</span><br><span class="line">ser.port = <span class="number">3</span>  <span class="comment"># serial port</span></span><br><span class="line">ser.baudrate = <span class="number">115200</span>  <span class="comment"># set baudrate 115200</span></span><br><span class="line">ser.timeout = <span class="number">60</span>  <span class="comment"># timeout 60 second</span></span><br><span class="line">ser.open()  <span class="comment"># open serial port</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    ser.write(<span class="string">'l'</span>)  <span class="comment"># send '1' to port to get light</span></span><br><span class="line">    light = ser.read(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"light"</span>, light</span><br></pre></td></tr></table></figure>
<p>in this code，I tried to open port <code>COM4</code>，I already check this port is available and I already tried another port but it not worked any port. Am I using wrong port？or something？<br>&emsp;&emsp;<code>Answer</code>：Does the port even exist? Maybe there is something already connected to it. If you ran the program before and the serial port didn’t close correctly that old program may still be connected to it. If it doesn’t exist then you will have to use a program to create a virtual serial port.</p>
<h3 id="TypeError-a-bytes-like-object-is-required-not-str"><a href="#TypeError-a-bytes-like-object-is-required-not-str" class="headerlink" title="TypeError: a bytes-like object is required, not str"></a>TypeError: a bytes-like object is required, not str</h3><p>&emsp;&emsp;解决方法将字符串通过<code>encode</code>方法转换为<code>bytes</code>。如果从网络或磁盘上读取了字节流，那么读到的数据就是<code>bytes</code>，要把<code>bytes</code>变为<code>str</code>，就需要用<code>decode</code>方法。<br>&emsp;&emsp;有时是在处理文件中发生该错误，例如使用<code>open</code>函数打开文本文件时，使用了<code>rb</code>属性。解决方法是在<code>open</code>函数中使用<code>r</code>属性，即文本方式读取，而不是<code>rb</code>以二进制文件方式读取。</p>
<h3 id="color-cpp-7456-error-215-scn-3-scn-4-in-function-cv-ipp-cvtColor"><a href="#color-cpp-7456-error-215-scn-3-scn-4-in-function-cv-ipp-cvtColor" class="headerlink" title="color.cpp:7456: error: (-215) scn == 3 || scn == 4 in function cv::ipp_cvtColor"></a>color.cpp:7456: error: (-215) scn == 3 || scn == 4 in function cv::ipp_cvtColor</h3><p>&emsp;&emsp;原因是代码中没有对视频是否处理完成做判断，解决方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (cap.isOpened()):</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ret:  <span class="comment"># 如果不能抓取到一帧，说明我们到了视频的结尾</span></span><br><span class="line">        print(<span class="string">"over!"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cv2.imshow(<span class="string">'frame'</span>, frame)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == <span class="number">27</span>:  <span class="comment"># 按下ESC键则退出</span></span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<h3 id="dict-object-has-no-attribute-iteritems"><a href="#dict-object-has-no-attribute-iteritems" class="headerlink" title="dict object has no attribute iteritems"></a>dict object has no attribute iteritems</h3><p>&emsp;&emsp;在<code>Python 3.5</code>以后，<code>iteritems</code>变为<code>items</code>。</p>
<h3 id="使用pickle读取文件提示TypeError或者UnicodeDecodeError"><a href="#使用pickle读取文件提示TypeError或者UnicodeDecodeError" class="headerlink" title="使用pickle读取文件提示TypeError或者UnicodeDecodeError"></a>使用pickle读取文件提示TypeError或者UnicodeDecodeError</h3><p>&emsp;&emsp;使用<code>python 3</code>读取<code>pkl</code>文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">train, test, dicts = pickle.load(open(<span class="string">"./dataset/atis.pkl"</span>))</span><br></pre></td></tr></table></figure>
<p>执行该代码，出现如下错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UnicodeDecodeError: <span class="string">'ascii'</span> codec can<span class="string">'t decode byte 0xe8 in position 0: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<p>我们需要告诉<code>pickle</code>：<code>how to convert Python bytestring data to Python 3 strings, The default is to try and decode all string data as ASCII</code>，所以代码改为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">train, test, dicts = pickle.load(open(<span class="string">"./dataset/atis.pkl"</span>, <span class="string">"rb"</span>), encoding=<span class="string">'iso-8859-1'</span>)</span><br></pre></td></tr></table></figure>
<p><code>utf-8</code>编码出现错误也可以使用该方法进行解决。<br>&emsp;&emsp;或者使用<code>ignore</code>对该错误进行忽略：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train, test, dicts = pickle.load(open(<span class="string">"./dataset/atis.pkl"</span>, <span class="string">"rb"</span>), encoding=<span class="string">'iso-8859-1'</span>, errors=<span class="string">'ignore'</span>)</span><br></pre></td></tr></table></figure>
<p>如果这些方法还是解决不了，则考虑修改系统的默认文件编码。<code>Windows</code>系统修改文件默认编码的方法：在<code>设置</code>中输入<code>Region</code>，点击<code>管理语言设置</code> -&gt; <code>更改系统区域设置</code>，勾选<code>Beta版：使用Unicode UTF-8提供全球语言支持</code>。</p>
<h3 id="AttributeError-csv-reader-object-has-no-attribute-next"><a href="#AttributeError-csv-reader-object-has-no-attribute-next" class="headerlink" title="AttributeError: _csv.reader object has no attribute next"></a>AttributeError: _csv.reader object has no attribute next</h3><p>&emsp;&emsp;原来的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allElectronicsData = open(<span class="string">'test.csv'</span>, <span class="string">'rb'</span>)</span><br><span class="line">reader = csv.reader(allElectronicsData)</span><br><span class="line">headers = reader.next()</span><br></pre></td></tr></table></figure>
<p>运行代码就会出现该错误。原因是<code>python 3</code>中的<code>reader</code>没有了<code>next</code>属性，修改如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allElectronicsData = open(<span class="string">r'AllElectronics.csv'</span>, <span class="string">'rb'</span>)</span><br><span class="line">reader = csv.reader(allElectronicsData)</span><br><span class="line">headers = next(reader)</span><br></pre></td></tr></table></figure>
<p>但运行该代码就会出现<code>iterator should return strings, not bytes (did you open the file in text mode?)</code>的错误，解决方法是把<code>rb</code>换为<code>rt</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allElectronicsData = open(<span class="string">r'test.csv'</span>, <span class="string">'rt'</span>)</span><br><span class="line">reader = csv.reader(allElectronicsData)</span><br><span class="line">headers = next(reader)</span><br></pre></td></tr></table></figure>
<h3 id="ValueError-Expected-2D-array-got-1D-array-instead"><a href="#ValueError-Expected-2D-array-got-1D-array-instead" class="headerlink" title="ValueError: Expected 2D array, got 1D array instead"></a>ValueError: Expected 2D array, got 1D array instead</h3><p>&emsp;&emsp;主要是由工具包版本更新造成的，找出出错的两行代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_train = ss_y.fit_transform(y_train)</span><br><span class="line">y_test = ss_y.transform(y_test)</span><br></pre></td></tr></table></figure>
<p>如果数据格式为<code>[1, 2, 3, 4]</code>，就会出错；如果把这些数据转换成<code>[[1], [2], [3], [4]]</code>，就不会出错了。修改后的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_train = ss_y.fit_transform(y_train.reshape(<span class="number">1</span>, <span class="number">-1</span>))</span><br><span class="line">y_test = ss_y.transform(y_test.reshape(<span class="number">1</span>, <span class="number">-1</span>))</span><br></pre></td></tr></table></figure>
<p>如果上述方法出现警告，则采用如下的解决方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y_test = ss_y.transform(numpy.array(y_test).reshape(<span class="number">1</span>, <span class="number">-1</span>))</span><br></pre></td></tr></table></figure>
<h3 id="AttributeError或者DeprecationWarning-This-module-was-deprecated"><a href="#AttributeError或者DeprecationWarning-This-module-was-deprecated" class="headerlink" title="AttributeError或者DeprecationWarning: This module was deprecated"></a>AttributeError或者DeprecationWarning: This module was deprecated</h3><p>&emsp;&emsp;在使用<code>Python</code>的<code>sklearn</code>库时，发现<code>sklearn</code>的<code>cross_validation</code>不能使用。运行如下程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line">X, Xt, y, yt = sklearn.cross_validation.train_test_split(X, y)</span><br></pre></td></tr></table></figure>
<p>报出如下错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: <span class="string">'module'</span> object has no attribute <span class="string">'cross_validation'</span></span><br></pre></td></tr></table></figure>
<p>这里尝试修改为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cross_validation <span class="keyword">import</span> train_test_split</span><br><span class="line">X, Xt, y, yt = train_test_split(X, y)</span><br></pre></td></tr></table></figure>
<p>发现不再报错，而是提示警告信息：<code>DeprecationWarning</code>: This module was deprecated in version <code>0.18</code> in favor of the <code>model_selection</code> module into which all the refactored classes and functions are moved. Also note that the interface of the new <code>CV</code> iterators are different from that of this module. This module will be removed in <code>0.20</code>。注意看提示信息，实际上是说<code>cross_validation</code>模块被弃用了，改为支持<code>model_selection</code>这个模块，因此将程序改为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line">X, Xt, y, yt = train_test_split(X, y)</span><br></pre></td></tr></table></figure>
<h3 id="打印array全部元素"><a href="#打印array全部元素" class="headerlink" title="打印array全部元素"></a>打印array全部元素</h3><p>&emsp;&emsp;方法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.set_printoptions(threshold=np.inf)</span><br></pre></td></tr></table></figure>
<h3 id="TypeError-object-of-type-zip-has-no-len"><a href="#TypeError-object-of-type-zip-has-no-len" class="headerlink" title="TypeError: object of type zip has no len()"></a>TypeError: object of type zip has no len()</h3><p>&emsp;&emsp;解决方法是：Try using <code>list(zip(...))</code> where you have <code>zip(...)</code>。</p>
<h3 id="AttributeError-module-cv2-has-no-attribute-SIFT"><a href="#AttributeError-module-cv2-has-no-attribute-SIFT" class="headerlink" title="AttributeError: module cv2 has no attribute SIFT"></a>AttributeError: module cv2 has no attribute SIFT</h3><p>&emsp;&emsp;出错的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sift = cv2.SIFT()</span><br></pre></td></tr></table></figure>
<p>原因是<code>opencv</code>将<code>SIFT</code>等算法整合到<code>xfeatures2d</code>里面了，代码修改如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br></pre></td></tr></table></figure>
<p>同时要注意，安装的<code>whl</code>包是<code>opencv+contrib</code>。</p>
<h3 id="Retrying-Retry-total-2-connect-None-read-None-redirect-None"><a href="#Retrying-Retry-total-2-connect-None-read-None-redirect-None" class="headerlink" title="Retrying (Retry(total=2, connect=None, read=None, redirect=None))"></a>Retrying (Retry(total=2, connect=None, read=None, redirect=None))</h3><p>&emsp;&emsp;通过<code>pip</code>安装<code>scipy</code>、<code>scikit-learn</code>等<code>python</code>库时，可能会报出上面的错误，原因是<code>pip</code>客户端长时间连接不到<code>pip</code>服务器。解决方法是需要将<code>pip</code>客户端连接到国内的服务器，以下载<code>pandas</code>为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pandas --index https://pypi.mirrors.ustc.edu.cn/simple/</span><br></pre></td></tr></table></figure>
<p>注意，<code>--index</code>后面也可以换成别的镜像，比如<code>http://mirrors.sohu.com/python/</code>。</p>
<h3 id="Your-CPU-supports-instructions-that-this-TensorFlow…"><a href="#Your-CPU-supports-instructions-that-this-TensorFlow…" class="headerlink" title="Your CPU supports instructions that this TensorFlow…"></a>Your CPU supports instructions that this TensorFlow…</h3><p>&emsp;&emsp;解决方法是加入下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">'TF_CPP_MIN_LOG_LEVEL'</span>] = <span class="string">'2'</span></span><br></pre></td></tr></table></figure>
<h3 id="No-module-named-tkinter"><a href="#No-module-named-tkinter" class="headerlink" title="No module named _tkinter"></a>No module named _tkinter</h3><p>&emsp;&emsp;解决方法是使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-tk</span><br></pre></td></tr></table></figure>
<h3 id="pandas的read-csv报错“IOError-Initializing-from-file-failed”"><a href="#pandas的read-csv报错“IOError-Initializing-from-file-failed”" class="headerlink" title="pandas的read_csv报错“IOError: Initializing from file failed”"></a>pandas的read_csv报错“IOError: Initializing from file failed”</h3><p>&emsp;&emsp;在<code>python 3</code>中使用<code>read_csv</code>的时候，如果传入的参数不是文件名而是文件的路径，就会报这个错。解决方法是：先切换到这个目录，然后传文件名作为参数。<br>&emsp;&emsp;出错代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">​</span><br><span class="line">trainFile = <span class="string">"F:/Projects/Python/coursera/train.csv"</span></span><br><span class="line">trainData = pd.read_csv(trainFile)</span><br></pre></td></tr></table></figure>
<p>改进的代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">​</span><br><span class="line">trainFile = <span class="string">"F:/Projects/Python/coursera/train.csv"</span></span><br><span class="line">​</span><br><span class="line">pwd = os.getcwd()</span><br><span class="line">os.chdir(os.path.dirname(trainFile))</span><br><span class="line">trainData = pd.read_csv(os.path.basename(trainFile))</span><br><span class="line">os.chdir(pwd)</span><br></pre></td></tr></table></figure>
<h3 id="AttributeError-module-object-has-no-attribute-imread"><a href="#AttributeError-module-object-has-no-attribute-imread" class="headerlink" title="AttributeError: module object has no attribute imread"></a>AttributeError: module object has no attribute imread</h3><p>&emsp;&emsp;解决方法如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install --upgrade Pillow</span><br></pre></td></tr></table></figure>
<h3 id="No-module-named-apt-pkg"><a href="#No-module-named-apt-pkg" class="headerlink" title="No module named apt_pkg"></a>No module named apt_pkg</h3><p>&emsp;&emsp;解决方法如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --purge python-apt</span><br><span class="line">sudo apt-get install python-apt -f</span><br><span class="line">sudo find / -name <span class="string">"apt_pkg.cpython-35m-x86_64-linux-gnu.so"</span></span><br><span class="line"><span class="built_in">cd</span> /usr/lib/python3/dist-packages/</span><br><span class="line">sudo cp apt_pkg.cpython-35m-x86_64-linux-gnu.so apt_pkg.cpython-36m-x86_64-linux-gnu.so</span><br></pre></td></tr></table></figure>
<h3 id="XXX-missing-X-required-positional-argument-self"><a href="#XXX-missing-X-required-positional-argument-self" class="headerlink" title="XXX missing X required positional argument: self"></a>XXX missing X required positional argument: self</h3><p>&emsp;&emsp;在<code>Python</code>中，类应该先实例化，然后再使用类中的成员。</p>
<h3 id="Fatal-error-in-launcher-Unable-to-create-process-using"><a href="#Fatal-error-in-launcher-Unable-to-create-process-using" class="headerlink" title="Fatal error in launcher: Unable to create process using"></a>Fatal error in launcher: Unable to create process using</h3><p>&emsp;&emsp;更新<code>pip</code>至最新版本即可解决问题：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>
<h3 id="OSError-WinError-XXX-找不到指定的模块-Could-not-find-cudart64-90-dll"><a href="#OSError-WinError-XXX-找不到指定的模块-Could-not-find-cudart64-90-dll" class="headerlink" title="OSError: [WinError XXX] 找不到指定的模块/Could not find cudart64_90.dll"></a>OSError: [WinError XXX] 找不到指定的模块/Could not find cudart64_90.dll</h3><p>&emsp;&emsp;这是因为安装的<code>TensorFlow</code>版本和<code>CUDA</code>是不是配套的，需要重新安装配套的<code>TensorFlow</code>。</p>
<h3 id="struct-error-argument-for-XX-must-be-a-bytes-object"><a href="#struct-error-argument-for-XX-must-be-a-bytes-object" class="headerlink" title="struct.error: argument for XX must be a bytes object"></a>struct.error: argument for XX must be a bytes object</h3><p>&emsp;&emsp;格式化字符串的值在<code>Python</code>中的类型是<code>bytes</code>，所以在<code>bytes</code>类型前面加上一个<code>b</code>就可以解决这个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> struct</span><br><span class="line">​</span><br><span class="line">a = struct.pack(<span class="string">"2I3sI"</span>, <span class="number">12</span>, <span class="number">34</span>, <span class="string">b"abc"</span>, <span class="number">56</span>)</span><br><span class="line">b = struct.unpack(<span class="string">"2I3sI"</span>, a)</span><br><span class="line">print(b)  <span class="comment"># 结果为(12, 34, b'abc', 56)</span></span><br></pre></td></tr></table></figure>
<h3 id="TypeError-must-be-str-not-bytes"><a href="#TypeError-must-be-str-not-bytes" class="headerlink" title="TypeError: must be str, not bytes"></a>TypeError: must be str, not bytes</h3><p>&emsp;&emsp;写文件的代码<code>open(filename, &#39;w&#39;).write</code>应该写为<code>open(filename, &#39;wb&#39;).write</code>。</p>
<h3 id="pycocotools的安装"><a href="#pycocotools的安装" class="headerlink" title="pycocotools的安装"></a>pycocotools的安装</h3><p>&emsp;&emsp;<code>Windows</code>使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install git+https://github.com/philferriere/cocoapi.git<span class="comment">#subdirectory=PythonAPI</span></span><br></pre></td></tr></table></figure>
<p><code>linux</code>使用如下命令：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install <span class="string">"git+https://github.com/philferriere/cocoapi.git#egg=pycocotools&amp;subdirectory=PythonAPI"</span></span><br></pre></td></tr></table></figure>
<p>然后使用如下命令进行测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pycocotools.coco <span class="keyword">import</span> COCO</span><br></pre></td></tr></table></figure>
<h3 id="IndexError-list-index-out-of-range"><a href="#IndexError-list-index-out-of-range" class="headerlink" title="IndexError: list index out of range"></a>IndexError: list index out of range</h3><p>&emsp;&emsp;这个错误的出现可能有两种情况：</p>
<ul>
<li><code>list[index]</code>的<code>index</code>超出范围。</li>
<li><code>list</code>是空的，访问<code>list[0]</code>就会出现该错误。</li>
</ul>
<h3 id="libcudnn-so-6-cannot-open-shared-object-file-no-such-file-or-directory"><a href="#libcudnn-so-6-cannot-open-shared-object-file-no-such-file-or-directory" class="headerlink" title="libcudnn.so.6 cannot open shared object file no such file or directory"></a>libcudnn.so.6 cannot open shared object file no such file or directory</h3><p>&emsp;&emsp;使用如下命令即可解决：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="string">"<span class="variable">$LD_LIBRARY_PATH</span>:/usr/local/cuda/lib64"</span></span><br></pre></td></tr></table></figure>
<h3 id="Data-loss-not-an-sstable-bad-magic-number-perhaps-your-file-is-in-a-different-file"><a href="#Data-loss-not-an-sstable-bad-magic-number-perhaps-your-file-is-in-a-different-file" class="headerlink" title="Data loss: not an sstable (bad magic number): perhaps your file is in a different file"></a>Data loss: not an sstable (bad magic number): perhaps your file is in a different file</h3><p>&emsp;&emsp;旧版本的<code>TensorFlow</code>在加载模型时，<code>restore</code>使用的是模型的路径名，而新版本的<code>restore</code>采用的是模型所在的文件夹名称。</p>
<h3 id="Invalid-DISPLAY-variable"><a href="#Invalid-DISPLAY-variable" class="headerlink" title="Invalid DISPLAY variable"></a>Invalid DISPLAY variable</h3><p>&emsp;&emsp;I had the same problem and I solved it by adding <code>plt.switch_backend(&#39;agg&#39;)</code> after <code>import matplotlib.pyplot as plt</code>.</p>
<h3 id="Need-ffmpeg-exe-NeedDownloadError-Need-ffmpeg-exe"><a href="#Need-ffmpeg-exe-NeedDownloadError-Need-ffmpeg-exe" class="headerlink" title="Need ffmpeg exe, NeedDownloadError: Need ffmpeg exe"></a>Need ffmpeg exe, NeedDownloadError: Need ffmpeg exe</h3><p>&emsp;&emsp;First, pip install <code>imageio</code>, if necessary; then <code>import imageio</code> and <code>imageio.plugins.ffmpeg.download()</code>.</p>
<h3 id="from-torch-C-import-ImportError-DLL-load-failed-The-specified-module-could-not-be-found"><a href="#from-torch-C-import-ImportError-DLL-load-failed-The-specified-module-could-not-be-found" class="headerlink" title="from torch._C import * (ImportError: DLL load failed: The specified module could not be found)"></a>from torch._C import * (ImportError: DLL load failed: The specified module could not be found)</h3><p>&emsp;&emsp;I solved this problem by follow step:</p>
<ul>
<li>pip3 uninstall <code>numpy</code></li>
<li>pip3 install <code>numpy-1.14.3+mkl-cp36-cp36m-win_amd64.whl</code> (download from <code>http://www.lfd.uci.edu/~gohlke/pythonlibs</code>)</li>
</ul>
<h3 id="TypeError-slice-indices-must-be-integers-or-None-or-have-an-index-method"><a href="#TypeError-slice-indices-must-be-integers-or-None-or-have-an-index-method" class="headerlink" title="TypeError: slice indices must be integers or None or have an _index_ method"></a>TypeError: slice indices must be integers or None or have an _index_ method</h3><p>&emsp;&emsp;<code>python 3</code>除号<code>/</code>的结果是浮点型，而<code>//</code>的结果是整型，这一点和<code>python 2</code>不一样。</p>
<h3 id="float-object-cannot-be-interpreted-as-an-integer"><a href="#float-object-cannot-be-interpreted-as-an-integer" class="headerlink" title="float object cannot be interpreted as an integer"></a>float object cannot be interpreted as an integer</h3><p>解决方法同<code>TypeError: slice indices must be integers or None or have an index method</code>。</p>
<h3 id="module-object-has-no-attribute-xfeatures2d"><a href="#module-object-has-no-attribute-xfeatures2d" class="headerlink" title="module object has no attribute xfeatures2d"></a>module object has no attribute xfeatures2d</h3><p>&emsp;&emsp;使用如下命令解决：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-contrib-python</span><br></pre></td></tr></table></figure>
<h3 id="TypeError-unsupported-operand-type-s-for-map-and-int"><a href="#TypeError-unsupported-operand-type-s-for-map-and-int" class="headerlink" title="TypeError: unsupported operand type(s) for /: map and int"></a>TypeError: unsupported operand type(s) for /: map and int</h3><p>&emsp;&emsp;<code>python 2</code>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datArr = [map(float, line) <span class="keyword">for</span> line <span class="keyword">in</span> stringArr]</span><br></pre></td></tr></table></figure>
<p>改为<code>python 3</code>版本：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datArr = [list(map(float, line)) <span class="keyword">for</span> line <span class="keyword">in</span> stringArr]</span><br></pre></td></tr></table></figure>
<h3 id="OSError-WinError-10048-通常每个套接字地址-协议-网络地址-端口-只允许使用一次"><a href="#OSError-WinError-10048-通常每个套接字地址-协议-网络地址-端口-只允许使用一次" class="headerlink" title="OSError: [WinError 10048] 通常每个套接字地址(协议/网络地址/端口)只允许使用一次"></a>OSError: [WinError 10048] 通常每个套接字地址(协议/网络地址/端口)只允许使用一次</h3><p>&emsp;&emsp;在使用<code>socket</code>模块进行服务端和客户端之间的连接时，经常出现如上错误。这是因为进程实际上还未结束，它还占用一个网络端口。解决方法是使用资源管理器将该进程<code>kill</code>。</p>
<h3 id="TypeError-str-object-is-not-callable"><a href="#TypeError-str-object-is-not-callable" class="headerlink" title="TypeError: str object is not callable"></a>TypeError: str object is not callable</h3><p>&emsp;&emsp;<code>str</code>是系统自带的函数，你不能在使用它的同时，定义一个叫做<code>str</code>的变量，这样就会冲突。</p>
<h3 id="AttributeError-module-pandas-has-no-attribute-Factor"><a href="#AttributeError-module-pandas-has-no-attribute-Factor" class="headerlink" title="AttributeError: module pandas has no attribute Factor"></a>AttributeError: module pandas has no attribute Factor</h3><p>&emsp;&emsp;In newer versions of pandas, the <code>Factor</code> is called <code>Categorical</code> instead. Change your line to:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'species'</span>] = pd.Categorical.from_codes(iris.target, iris.target_names)</span><br></pre></td></tr></table></figure>
<h3 id="Python-h：No-such-file-or-directory"><a href="#Python-h：No-such-file-or-directory" class="headerlink" title="Python.h：No such file or directory"></a>Python.h：No such file or directory</h3><p>&emsp;&emsp;如果使用的是<code>python 3</code>，输入如下命令即可解决：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-dev</span><br></pre></td></tr></table></figure>
<h3 id="ImportError-No-module-named-ConfigParser"><a href="#ImportError-No-module-named-ConfigParser" class="headerlink" title="ImportError: No module named ConfigParser"></a>ImportError: No module named ConfigParser</h3><p>&emsp;&emsp;I found the problem. I had manually installed a newer version of python (version <code>3.2</code> but the version installed through packages is <code>2.7</code>) and I just redirected <code>/usr/bin/python</code> to <code>python3.2</code>. Apparently in <code>3.2</code> some syntax used in <code>/usr/bin/pyclean</code> is not valid anymore. Restoring the original link of <code>/usr/bin/python</code> to <code>/usr/bin/python2</code> solved the problem. Now the scripts could be run without any issues.</p>
<h3 id="unexpected-keyword-argument-keepdims"><a href="#unexpected-keyword-argument-keepdims" class="headerlink" title="unexpected keyword argument keepdims"></a>unexpected keyword argument keepdims</h3><p>&emsp;&emsp;I got the same error, and I found that according to the TensorFlow docs, the option has to be <code>keep_dims</code> instead of <code>keepdims</code> in the latest version, and Tensorflow <code>1.4.1</code> also.</p>
<h3 id="unexpected-keyword-argument-serialized-options"><a href="#unexpected-keyword-argument-serialized-options" class="headerlink" title="unexpected keyword argument serialized_options"></a>unexpected keyword argument serialized_options</h3><p>&emsp;&emsp;使用如下命令即可解决：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U protobuf</span><br></pre></td></tr></table></figure>
<h3 id="关于“axis-1”"><a href="#关于“axis-1”" class="headerlink" title="关于“axis = -1”"></a>关于“axis = -1”</h3><p>&emsp;&emsp;The <code>axis = -1</code> in numpy corresponds to the last dimension:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A = np.array([[[<span class="number">1</span>, <span class="number">56</span>, <span class="number">0</span>, <span class="number">6</span>], [<span class="number">5</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">3</span>], [<span class="number">50</span>, <span class="number">51</span>, <span class="number">59</span>, <span class="number">64</span>]],</span><br><span class="line">                  [[<span class="number">2</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">3</span>], [<span class="number">10</span>, <span class="number">80</span>, <span class="number">53</span>, <span class="number">6</span>], [<span class="number">12</span>, <span class="number">5</span>, <span class="number">36</span>, <span class="number">15</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = A.argmin(axis = <span class="number">-1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B</span><br><span class="line">array([[<span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>]], dtype=int64)</span><br></pre></td></tr></table></figure>
<h3 id="got-an-unexpected-keyword-argument-include-top"><a href="#got-an-unexpected-keyword-argument-include-top" class="headerlink" title="got an unexpected keyword argument include_top"></a>got an unexpected keyword argument include_top</h3><p>&emsp;&emsp;Change <code>include_top</code> to <code>require_flatten</code>, and the issue will be resolved.</p>
<h3 id="TypeError-softmax-got-an-unexpected-keyword-argument-axis"><a href="#TypeError-softmax-got-an-unexpected-keyword-argument-axis" class="headerlink" title="TypeError: softmax() got an unexpected keyword argument axis"></a>TypeError: softmax() got an unexpected keyword argument axis</h3><p>&emsp;&emsp;将<code>keras</code>的版本改为<code>2.1.3</code>即可，使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install keras==2.1.3</span><br></pre></td></tr></table></figure>
<p>或者修改文件<code>anaconda3/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py</code>，将<code>return tf.nn.softmax(x, axis=axis)</code>改为<code>return tf.nn.softmax(x)</code>。</p>
<h3 id="tensorboard之“ImportError-cannot-import-name-main”"><a href="#tensorboard之“ImportError-cannot-import-name-main”" class="headerlink" title="tensorboard之“ImportError: cannot import name main”"></a>tensorboard之“ImportError: cannot import name main”</h3><p>&emsp;&emsp;使用<code>tensorboard</code>的时候，可能会出现<code>ImportError: cannot import name &#39;main&#39;</code>的错误，解决方法是将<code>tensorboard</code>进行更新。</p>
<h3 id="dict-object-has-no-attribute-has-key"><a href="#dict-object-has-no-attribute-has-key" class="headerlink" title="dict object has no attribute has_key"></a>dict object has no attribute has_key</h3><p>&emsp;&emsp;将代码<code>adict.has_key(key):</code>改为<code>key in adict:</code>。</p>
<h3 id="运行Pytorch代码时报错“BrokenPipeError-Errno-32-Broken-pipe”"><a href="#运行Pytorch代码时报错“BrokenPipeError-Errno-32-Broken-pipe”" class="headerlink" title="运行Pytorch代码时报错“BrokenPipeError: [Errno 32] Broken pipe”"></a>运行Pytorch代码时报错“BrokenPipeError: [Errno 32] Broken pipe”</h3><p>&emsp;&emsp;该问题的产生是由于<code>Windows</code>下的多线程问题，和<code>DataLoader</code>类有关。解决方案是修改调用<code>torch.utils.data.DataLoader</code>函数时的<code>num_workers</code>参数，它是指在进行数据集加载时，启用的线程数目。将其修改为<code>0</code>，表示只启用一个主进程加载数据集。</p>
<h3 id="UserWarning-invalid-index-of-a-0-dim-tensor-This-will-be-an-error-in-PyTorch-0-5"><a href="#UserWarning-invalid-index-of-a-0-dim-tensor-This-will-be-an-error-in-PyTorch-0-5" class="headerlink" title="UserWarning: invalid index of a 0-dim tensor, This will be an error in PyTorch 0.5"></a>UserWarning: invalid index of a 0-dim tensor, This will be an error in PyTorch 0.5</h3><p>&emsp;&emsp;使用<code>pytorch</code>进行训练时会出现上述问题，解决方法是将<code>.data[0]</code>换成<code>.item()</code>，例如将<code>train_loss += loss.data[0]</code>变成<code>train_loss += loss.item()</code>。</p>
<h3 id="UserWarning-volatile-was-removed-and-now-has-no-effect-Use-with-torch-no-grad-instead"><a href="#UserWarning-volatile-was-removed-and-now-has-no-effect-Use-with-torch-no-grad-instead" class="headerlink" title="UserWarning: volatile was removed and now has no effect. Use with torch.no_grad() instead"></a>UserWarning: volatile was removed and now has no effect. Use with torch.no_grad() instead</h3><p>&emsp;&emsp;解决方法是去掉<code>Variable</code>函数中的<code>volatile=True</code>，例如将<code>label = Variable(label.cuda(), volatile=True)</code>变为<code>label = Variable(label.cuda())</code>。</p>
<h3 id="locale-Error-unsupported-locale-setting"><a href="#locale-Error-unsupported-locale-setting" class="headerlink" title="locale.Error: unsupported locale setting"></a>locale.Error: unsupported locale setting</h3><p>&emsp;&emsp;在使用<code>tensorboard</code>时，可能会出现上述错误，解决方法是在终端输入如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LANGUAGE=en_US.UTF-8</span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br></pre></td></tr></table></figure>
<h3 id="LookupError-unknown-encoding-cp65001"><a href="#LookupError-unknown-encoding-cp65001" class="headerlink" title="LookupError: unknown encoding: cp65001"></a>LookupError: unknown encoding: cp65001</h3><p>&emsp;&emsp;在使用<code>Conda</code>时可能会碰到上述错误，解决方法是使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> PYTHONIOENCODING=UTF-8</span><br></pre></td></tr></table></figure>
<h3 id="UnicodeEncodeError-ascii-codec-can’t-encode-characters-in-ordinal-not-in-range-128"><a href="#UnicodeEncodeError-ascii-codec-can’t-encode-characters-in-ordinal-not-in-range-128" class="headerlink" title="UnicodeEncodeError: ascii codec can’t encode characters in ordinal not in range(128)"></a>UnicodeEncodeError: ascii codec can’t encode characters in ordinal not in range(128)</h3><p>&emsp;&emsp;解决方法是设置环境变量<code>LANG</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=<span class="string">"en_US.UTF-8"</span></span><br></pre></td></tr></table></figure>
<h3 id="Implicit-dimension-choice-for-softmax-has-been-deprecated-Change-the-call-to-include-dim-X"><a href="#Implicit-dimension-choice-for-softmax-has-been-deprecated-Change-the-call-to-include-dim-X" class="headerlink" title="Implicit dimension choice for softmax has been deprecated. Change the call to include dim=X"></a>Implicit dimension choice for softmax has been deprecated. Change the call to include dim=X</h3><p>&emsp;&emsp;原始代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">softmax = F.softmax(enout_att.squeeze(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>需要进行如下修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">softmax = F.softmax(enout_att.squeeze(<span class="number">2</span>), dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="避免KeyError的几种方法"><a href="#避免KeyError的几种方法" class="headerlink" title="避免KeyError的几种方法"></a>避免KeyError的几种方法</h3><p>&emsp;&emsp;在读取<code>dict</code>的<code>key</code>和<code>value</code>时，如果<code>key</code>不存在，就会触发<code>KeyError</code>错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">'a'</span>: <span class="string">'1'</span>, <span class="string">'b'</span>: <span class="string">'2'</span>, <span class="string">'c'</span>: <span class="string">'3'</span> &#125;</span><br><span class="line">print(t[<span class="string">'d'</span>])</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;第一种解决方法：首先测试<code>key</code>是否存在，然后才进行下一步操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">'a'</span>: <span class="string">'1'</span>, <span class="string">'b'</span>: <span class="string">'2'</span>, <span class="string">'c'</span>: <span class="string">'3'</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">'d'</span> <span class="keyword">in</span> t:</span><br><span class="line">    print(t[<span class="string">'d'</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'not exist'</span>)  <span class="comment"># 输出“not exist”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;第二种解决方法：利用<code>dict</code>内置的<code>get(key[, default])</code>方法，如果<code>key</code>存在，返回其<code>value</code>，否则返回<code>default</code>。使用这个方法永远不会触发<code>KeyError</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">'a'</span>: <span class="string">'1'</span>, <span class="string">'b'</span>: <span class="string">'2'</span>, <span class="string">'c'</span>: <span class="string">'3'</span>&#125;</span><br><span class="line">print(t.get(<span class="string">'d'</span>, <span class="string">'not exist'</span>))  <span class="comment"># 输出“not exist”</span></span><br><span class="line">print(t)  <span class="comment"># 输出“&#123;'a': '1', 'b': '2', 'c': '3'&#125;”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;第三种解决方法：利用<code>dict</code>内置的<code>setdefault(key[, default])</code>方法，如果<code>key</code>存在，返回其<code>value</code>，否则插入此<code>key</code>，其<code>value</code>为<code>default</code>，并返回<code>default</code>。使用这个方法也永远不会触发<code>KeyError</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">'a'</span>: <span class="string">'1'</span>, <span class="string">'b'</span>: <span class="string">'2'</span>, <span class="string">'c'</span>: <span class="string">'3'</span>&#125;</span><br><span class="line">print(t.setdefault(<span class="string">'d'</span>))  <span class="comment"># 输出“None”</span></span><br><span class="line">print(t)  <span class="comment"># 输出“&#123;'a': '1', 'b': '2', 'c': '3', 'd': None&#125;”</span></span><br></pre></td></tr></table></figure>
<h3 id="ValueError-The-truth-value-of-an-array-with-more-than-one-element-is-ambiguous-Use-a-any-or-a-all"><a href="#ValueError-The-truth-value-of-an-array-with-more-than-one-element-is-ambiguous-Use-a-any-or-a-all" class="headerlink" title="ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()"></a>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()</h3><p>&emsp;&emsp;原来的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">​</span><br><span class="line">a = np.zeros(<span class="number">3</span>)</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">a[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="number">2</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> a == [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</span><br><span class="line">    print(<span class="string">"OK"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"NOT OK"</span>)</span><br></pre></td></tr></table></figure>
<p><code>Numpy</code>可以认为等号两边两个式子是数值不相等，返回<code>False</code>；也可以认为等号两边两个式子是逻辑相等，返回<code>True</code>。它觉得这是模棱两可的，因此放弃做判断。最好统一用<code>any</code>进行<code>或比较</code>，或者用<code>all</code>进行<code>与比较</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">​</span><br><span class="line">a = np.zeros(<span class="number">3</span>)</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">a[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="number">2</span></span><br><span class="line">print((a == [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]).any())  <span class="comment"># True</span></span><br><span class="line">print((a == [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]).all())  <span class="comment"># True</span></span><br><span class="line">print((a == [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]).any())  <span class="comment"># False</span></span><br><span class="line">print((a == [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]).all())  <span class="comment"># False</span></span><br><span class="line">print((a == [<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]).any())  <span class="comment"># True</span></span><br><span class="line">print((a == [<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]).all())  <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h3 id="添加PYTHONPATH"><a href="#添加PYTHONPATH" class="headerlink" title="添加PYTHONPATH"></a>添加PYTHONPATH</h3><p>&emsp;&emsp;<code>Linux</code>或<code>Mac</code>系统添加<code>PYTHONPATH</code>的方法：在<code>.bashrc</code>(或<code>.bash_profile</code>)中添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYTHONPATH=<span class="string">"待加入路径:&#123;<span class="variable">$PYTHONPATH</span>&#125;"</span></span><br></pre></td></tr></table></figure>
<p>然后使用命令<code>source .bashrc</code>。</p>
<h3 id="Default-value-of-block-norm-L1-is-deprecated-and-will-be-changed-to-L2-Hys-in-v0-15"><a href="#Default-value-of-block-norm-L1-is-deprecated-and-will-be-changed-to-L2-Hys-in-v0-15" class="headerlink" title="Default value of block_norm == L1 is deprecated and will be changed to L2-Hys in v0.15"></a>Default value of block_norm == L1 is deprecated and will be changed to L2-Hys in v0.15</h3><p>&emsp;&emsp;需要对代码进行如下修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hog(..., block_norm=<span class="string">'L2-Hys'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="ValueError-Selected-block-normalization-method-is-invalid"><a href="#ValueError-Selected-block-normalization-method-is-invalid" class="headerlink" title="ValueError: Selected block normalization method is invalid"></a>ValueError: Selected block normalization method is invalid</h3><p>&emsp;&emsp;The definition of function hog is as follows:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hog</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    image, orientations=<span class="number">9</span>, pixels_per_cell=<span class="params">(<span class="number">8</span>, <span class="number">8</span>)</span>, cells_per_block=<span class="params">(<span class="number">3</span>, <span class="number">3</span>)</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    block_norm=<span class="string">'L1'</span>, visualise=False, transform_sqrt=False,</span></span></span><br><span class="line"><span class="function"><span class="params">    feature_vector=True, normalise=None)</span></span></span><br></pre></td></tr></table></figure>
<p>so removing <code>normalize</code> and <code>visualise</code> will works.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/文件操作/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/文件操作/" itemprop="url">文件操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T15:12:50+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><p>&emsp;&emsp;文件打开模式如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>打开模式</th>
<th>执行操作</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r</code></td>
<td>以只读方式打开文件(默认)</td>
</tr>
<tr>
<td><code>w</code></td>
<td>以写入的方式打开文件，会覆盖已存在的文件</td>
</tr>
<tr>
<td><code>x</code></td>
<td>如果文件已经存在，使用此模式打开将引发异常</td>
</tr>
<tr>
<td><code>a</code></td>
<td>以写入模式打开，如果文件存在，则在末尾追加写入</td>
</tr>
<tr>
<td><code>b</code></td>
<td>以二进制模式打开文件</td>
</tr>
<tr>
<td><code>t</code></td>
<td>以文本模式打开(默认)</td>
</tr>
<tr>
<td><code>+</code></td>
<td>可读写模式(可添加到其他模式中使用)</td>
</tr>
<tr>
<td><code>U</code></td>
<td>通用换行符支持</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;文件对象方法如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>文件对象方法</th>
<th>执行操作</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>f.close()</code></td>
<td>关闭文件</td>
</tr>
<tr>
<td><code>f.read([size=-1])</code></td>
<td>从文件中读取<code>size</code>个字符，当未给定<code>size</code>或给定负值时，读取剩余的所有字符，然后作为字符串返回</td>
</tr>
<tr>
<td><code>f.readline([size=-1])</code></td>
<td>从文件中读取并返回一行(包括行结束符)，如果<code>size</code>有定义，则返回<code>size</code>个字符</td>
</tr>
<tr>
<td><code>f.write(str)</code></td>
<td>将字符串<code>str</code>写入文件</td>
</tr>
<tr>
<td><code>f.writelines(seq)</code></td>
<td>向文件写入字符串序列<code>seq</code>，<code>seq</code>应该是一个返回字符串的可迭代对象</td>
</tr>
<tr>
<td><code>f.seek(offset, from)</code></td>
<td>在文件中移动文件指针，从<code>from</code>(<code>0</code>代表文件起始位置，<code>1</code>代表当前位置，<code>2</code>代表文件末尾)偏移<code>offset</code>个字节</td>
</tr>
<tr>
<td><code>f.tell()</code></td>
<td>返回当前文件指针在文件中的位置</td>
</tr>
<tr>
<td><code>f.truncate([size=file.tell()])</code></td>
<td>截取文件到<code>size</code>个字节，默认是截取到文件指针当前位置</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;在<code>C</code>盘下有一个文件<code>test.txt</code>，其内容为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0123456789</span></span><br><span class="line">abcdefghij</span><br><span class="line">ABCDEFGHIJ</span><br></pre></td></tr></table></figure>
<p>在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">"C:\\test.txt"</span>)</span><br><span class="line">f  <span class="comment"># 结果为&lt;_io.TextIOWrapper name='C:\\test.txt' mode='r' encoding='cp936'&gt;</span></span><br><span class="line">f.read()  <span class="comment"># 结果为“0123456789\nabcdefghij\nABCDEFGHIJ\n”</span></span><br><span class="line">f.read()  <span class="comment"># 结果为“”</span></span><br><span class="line">f.close()  <span class="comment"># 关闭文件</span></span><br><span class="line"><span class="comment">#-----------------------</span></span><br><span class="line">f = open(<span class="string">"C:\\test.txt"</span>)</span><br><span class="line">f.read(<span class="number">5</span>)  <span class="comment"># 结果为“01234”</span></span><br><span class="line">f.tell()  <span class="comment"># 结果为5</span></span><br><span class="line">f.seek(<span class="number">8</span>, <span class="number">0</span>)  <span class="comment"># 结果为8</span></span><br><span class="line">f.readline()  <span class="comment"># 结果为“89\n”</span></span><br><span class="line">list(f)  <span class="comment"># 结果为['abcdefghij\n', 'ABCDEFGHIJ\n']</span></span><br><span class="line">f.seek(<span class="number">0</span>, <span class="number">0</span>)  <span class="comment"># 结果为0</span></span><br><span class="line">lines = list(f)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> each_line <span class="keyword">in</span> lines:  <span class="comment"># 效率低的打印文本每一行文本的程序</span></span><br><span class="line">    print(each_line)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">for</span> each_line <span class="keyword">in</span> f:  <span class="comment"># 效率高的打印文本每一行的语句</span></span><br><span class="line">    print(each_line)</span><br><span class="line">​</span><br><span class="line">f.close()</span><br><span class="line">​</span><br><span class="line">f = open(<span class="string">"C:\\test_1.txt"</span>, <span class="string">"w"</span>)  <span class="comment"># 创建并向文件中写入数据</span></span><br><span class="line">f.write(<span class="string">"I love xinzi"</span>)  <span class="comment"># 结果为12</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="close"><a href="#close" class="headerlink" title="close"></a>close</h3><p>&emsp;&emsp;<code>close</code>方法用于关闭一个已打开的文件。关闭后的文件不能再进行读写操作，否则会触发<code>ValueError</code>错误。<code>close</code>方法允许调用多次。<br>&emsp;&emsp;当<code>file</code>对象被引用到操作另外一个文件时，<code>Python</code>会自动关闭之前的<code>file</code>对象。使用<code>close</code>方法关闭文件是一个好的习惯。<code>close</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.close()</span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"runoob.txt"</span>, <span class="string">"wb"</span>)</span><br><span class="line">print(<span class="string">"文件名为:"</span>, fo.name)</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h3 id="flush"><a href="#flush" class="headerlink" title="flush"></a>flush</h3><p>&emsp;&emsp;<code>flush</code>方法用来刷新缓冲区，就是将缓冲区中的数据立刻写入文件，同时清空缓冲区。一般情况下，文件关闭后会自动刷新缓冲区，但有时需要在关闭前刷新它，这时就可以使用<code>flush</code>方法。<code>flush</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.flush()</span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"runoob.txt"</span>, <span class="string">"wb"</span>)</span><br><span class="line">print(<span class="string">"文件名为:"</span>, fo.name)</span><br><span class="line">fo.flush()  <span class="comment"># 刷新缓冲区</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h3 id="fileno"><a href="#fileno" class="headerlink" title="fileno"></a>fileno</h3><p>&emsp;&emsp;<code>fileno</code>方法返回一个整型的文件描述符，可用于底层操作系统的<code>I/O</code>操作。<code>fileno</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.fileno()</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"runoob.txt"</span>, <span class="string">"wb"</span>)</span><br><span class="line">fd = fo.fileno()</span><br><span class="line">print(<span class="string">"文件描述符为:"</span>, fd)  <span class="comment"># 输出“文件描述符为: 3”</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h3 id="isatty"><a href="#isatty" class="headerlink" title="isatty"></a>isatty</h3><p>&emsp;&emsp;<code>isatty</code>方法检测文件是否连接到一个终端设备，如果是则返回<code>True</code>，否则返回<code>False</code>。<code>isatty</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.isatty()</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"runoob.txt"</span>, <span class="string">"wb"</span>)</span><br><span class="line">ret = fo.isatty()</span><br><span class="line">print(<span class="string">"返回值:"</span>, ret)  <span class="comment"># 输出“返回值: False”</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h3 id="truncate"><a href="#truncate" class="headerlink" title="truncate"></a>truncate</h3><p>&emsp;&emsp;<code>truncate</code>方法用于从文件的首行首字符开始截断，截断文件为<code>size</code>个字符。<code>truncate</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.truncate([size])</span><br></pre></td></tr></table></figure>
<p>该方法没有返回值。假设文件<code>runoob.txt</code>的内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>:www.runoob.com</span><br><span class="line"><span class="number">2</span>:www.runoob.com</span><br></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"runoob.txt"</span>, <span class="string">"r+"</span>)</span><br><span class="line">fo.truncate(<span class="number">10</span>)  <span class="comment"># 截取10个字节</span></span><br><span class="line">str = fo.read()</span><br><span class="line">print(<span class="string">"读取数据: %s"</span> % str)  <span class="comment"># 输出“读取数据: 1:www.runo”</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h3 id="writelines"><a href="#writelines" class="headerlink" title="writelines"></a>writelines</h3><p>&emsp;&emsp;<code>writelines</code>方法用于向文件中写入一序列的字符串，这一序列字符串可以是由迭代对象产生的，例如一个字符串列表。如果需要换行，则加上换行符<code>\n</code>。<code>writelines</code>语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.writelines([str])</span><br></pre></td></tr></table></figure>
<p>参数<code>str</code>是要写入文件的字符串序列。该方法没有返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"test.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line">seq = [<span class="string">"first line\n"</span>, <span class="string">"second line"</span>]</span><br><span class="line">fo.writelines(seq)</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<p>执行上述代码，文件<code>test.txt</code>的内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">first line</span><br><span class="line">second line</span><br></pre></td></tr></table></figure>
<h3 id="pickle"><a href="#pickle" class="headerlink" title="pickle"></a>pickle</h3><p>&emsp;&emsp;<code>Python</code>提供了一种更简便的方法来存储列表和对象，名为<code>pickle</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">​</span><br><span class="line">my_list = [<span class="number">123</span>, <span class="number">3.14</span>, <span class="string">"小甲鱼"</span>, [<span class="string">"another list"</span>]]</span><br><span class="line">​</span><br><span class="line">pickle_file = open(<span class="string">"my_list.pkl"</span>, <span class="string">"wb"</span>)</span><br><span class="line">pickle.dump(my_list, pickle_file)  <span class="comment"># 将数据放进“pickle_file”中</span></span><br><span class="line">pickle_file.close()</span><br><span class="line">​</span><br><span class="line">pickle_file = open(<span class="string">"my_list.pkl"</span>, <span class="string">"rb"</span>)</span><br><span class="line">my_list2 = pickle.load(pickle_file)  <span class="comment"># 将数据从“pickle_file”中取出</span></span><br><span class="line">print(my_list2)</span><br></pre></td></tr></table></figure>
<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p>&emsp;&emsp;一些对象定义了标准的清理行为，一旦不需要该对象了，那么就需要执行这个标准的清理行为。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">"myfile.txt"</span>):</span><br><span class="line">    print(line, end=<span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p>以上这段代码的问题是，当执行完毕后，文件会保持打开状态，并没有被关闭。关键词<code>with</code>就可以保证诸如文件之类的对象在使用完之后，一定会正确地执行它的清理方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"myfile.txt"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        print(line, end=<span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p>以上代码执行完毕后，文件<code>f</code>总是会关闭。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/opencv和图像处理/播放视频文件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/opencv和图像处理/播放视频文件/" itemprop="url">播放视频文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T14:09:26+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/opencv和图像处理/" itemprop="url" rel="index">
                    <span itemprop="name">opencv和图像处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;我们知道视频是由一系列图像构成的，这些构成视频的图像称为<code>帧</code>(<code>frame</code>)。此外，在视频文件里还有个参数叫做<code>帧率</code>(<code>frame rate</code>)，用来表示两帧之间的间隔时间，帧率的单位是<code>帧/秒</code>。这个参数只和视频的播放速度有关，对于单独的一帧图像来说没有任何用途。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;highgui.h&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    <span class="function">VideoCapture <span class="title">capture</span> <span class="params">( <span class="string">"mm4_op.avi"</span> )</span></span>; <span class="comment">/* 打开视频文件 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( !capture.isOpened() ) &#123; <span class="comment">/* isOpened判断视频是否打开成功 */</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Movie open Error"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">double</span> rate = capture.get ( CV_CAP_PROP_FPS ); <span class="comment">/* 获取视频帧频 */</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"帧率为: "</span> &lt;&lt; rate &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"总帧数为: "</span> &lt;&lt; capture.get ( CV_CAP_PROP_FRAME_COUNT ) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">/* 输出帧总数 */</span></span><br><span class="line">    Mat frame;</span><br><span class="line">    <span class="keyword">double</span> position = <span class="number">0.0</span>;</span><br><span class="line">    capture.<span class="built_in">set</span> ( CV_CAP_PROP_POS_FRAMES, position ); <span class="comment">/* 视频播放的位置，这里设置为第0帧 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( !capture.read ( frame ) ) &#123; <span class="comment">/* 读取视频帧 */</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        imshow ( <span class="string">"Movie Player"</span>, frame );</span><br><span class="line">        <span class="keyword">char</span> c = waitKey ( <span class="number">33</span> ); <span class="comment">/* 获取按键值 */</span></span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( c == <span class="number">27</span> ) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    capture.release();</span><br><span class="line">    destroyWindow ( <span class="string">"Movie Player"</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;1. 打开和读取视频流<code>VideoCapture</code><br>&emsp;&emsp;视频捕获需要的所有函数都集成在<code>VideoCapture</code>这个类里面。虽然它底层依赖另一个<code>FFmpeg</code>开源库，但是它已经被集成在<code>opencv</code>里。既然<code>VideoCapture</code>是一个类，那么在使用时候，需要先定义一个<code>VideoCapture</code>类的对象来打开和读取视频流。有两种方法，一种如上述代码所示，另一种可通过<code>open</code>函数来完成：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VideoCapture capture;</span><br><span class="line">capture.open ( <span class="string">"mm4_op.avi"</span> );</span><br></pre></td></tr></table></figure>
<p>从<code>OpenCV</code>源码中可以查看<code>VideoCapture</code>的定义，在它的构造函数中，如果使用整型数当参数的话，就可以将这个对象绑定到一个摄像机，将系统指派的<code>ID</code>号当作参数传入即可。例如可以传入<code>0</code>来打开第一个摄像机，传入<code>1</code>打开第二个摄像机，以此类推。如果使用字符串当做参数，就会打开由这个字符串(文件名)指定的视频文件。<br>&emsp;&emsp;2. 是否成功打开视频<code>isOpened</code>、视频关闭<code>release</code>以及视频解码<code>read</code><br>&emsp;&emsp;<code>isOpened</code>的函数原型如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bool VideoCapture::isOpened();</span><br></pre></td></tr></table></figure>
<p>当析构函数调用时，会自动关闭视频。如果希望提前关闭的话，可以调用<code>release</code>函数，例如<code>capture.release</code>。视频的每一帧都是一幅普通的图像，因此仅仅需要从<code>VideoCapture</code>对象里释放出每一帧图像，并保存成<code>Mat</code>格式。<br>&emsp;&emsp;<code>read</code>的函数原型如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> VideoCapture::read ( Mat &amp;image );</span><br></pre></td></tr></table></figure>
<p>读取视频帧的时候也会自动进行解码操作，其实这个方法包含了<code>VideoCapture::grab</code>和<code>VideoCapture::retrieve</code>两个操作。<code>read</code>方法很方便，当获取不到视频帧时，就返回<code>false</code>。<br>&emsp;&emsp;3. 获取视频属性<code>get</code>和设置属性<code>set</code><br>&emsp;&emsp;<code>get</code>函数返回特定的视频属性：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> VideoCapture::get ( <span class="keyword">int</span> propId );</span><br></pre></td></tr></table></figure>
<p><code>get</code>函数返回一个<code>double</code>(<code>8</code>个字节)类型的数据来表示这些属性。然后你可以使用位操作符来操作这个返回值，从而得到想要的整型数据。这个函数有一个参数<code>propId</code>，代表着试图查询的属性<code>ID</code>。参数的值可以有很多种，这里只用到了两种，分别是<code>CV_CAP_PROP_FPS</code>和<code>CV_CAP_PROP_FRAME_COUNT</code>，它们分别表示要返回的值为帧速率和视频文件的总帧数。还有其他的数值可以查看<code>highgui_c.h</code>。当需要设置这些值的时候，可以调用<code>set</code>函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> VideoCapture::<span class="built_in">set</span> ( <span class="keyword">int</span> propId, <span class="keyword">double</span> value );</span><br></pre></td></tr></table></figure>
<p>函数的第一个参数是需要设置的属性<code>ID</code>，第二个参数是需要设定的值，如果返回<code>true</code>，就表示成功设定，否则就是<code>false</code>。代码使用<code>set</code>函数设置了视频播放的位置，其实不用设置也可以，<code>opencv</code>会默认从开始<code>0</code>位置开始执行。<br>&emsp;&emsp;再看下面的代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> c = waitKey ( <span class="number">33</span> );</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( c == <span class="number">27</span> ) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是当帧被显示后，系统会等待<code>33</code>毫秒，如果用户这时候触发了一个按键，<code>c</code>就会被设置成这个按键的<code>ASCII</code>码，否则<code>c</code>会被设置成<code>-1</code>；如果触发了<code>ESC</code>键(<code>ASCII</code>码为<code>27</code>)，则退出循环。<br>&emsp;&emsp;下面讲解如何在<code>OpenCV</code>中用<code>createTrackbar</code>函数创建和使用轨迹条，以视频进度的调整。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;highgui.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onTrackbarSlide</span> <span class="params">( <span class="keyword">int</span> pos, <span class="keyword">void</span> *capture )</span> </span>&#123; <span class="comment">/* 进度条控制 */</span></span><br><span class="line">    ( * ( ( VideoCapture * ) capture ) ).<span class="built_in">set</span> ( CV_CAP_PROP_POS_FRAMES, pos );</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span> </span>&#123;</span><br><span class="line">    <span class="function">VideoCapture <span class="title">capture</span> <span class="params">( <span class="string">"mm4_op.avi"</span> )</span></span>; <span class="comment">/* 打开视频文件 */</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( !capture.isOpened() ) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Movie open Error"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">double</span> rate = capture.get ( CV_CAP_PROP_FPS ); <span class="comment">/* 获取视频帧频 */</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"帧率为:"</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; rate &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> total_rate = capture.get ( CV_CAP_PROP_FRAME_COUNT ); <span class="comment">/* 获取总帧数 */</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"总帧数为:"</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; total_rate &lt;&lt; <span class="built_in">endl</span>; <span class="comment">/* 输出帧总数 */</span></span><br><span class="line">    Mat frame;</span><br><span class="line">    namedWindow ( <span class="string">"Movie Player"</span> );</span><br><span class="line">    <span class="keyword">int</span> slider_position = <span class="number">0</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> ( total_rate != <span class="number">0</span> ) &#123; <span class="comment">/* 创建进度条 */</span></span><br><span class="line">        createTrackbar (</span><br><span class="line">            <span class="string">"position"</span>, <span class="string">"Movie Player"</span>, &amp;slider_position,</span><br><span class="line">            total_rate, onTrackbarSlide, &amp;capture );</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">while</span> ( <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( !capture.read ( frame ) ) &#123; <span class="comment">/* 读取视频帧 */</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">        imshow ( <span class="string">"Movie Player"</span>, frame );</span><br><span class="line">        <span class="keyword">char</span> c = waitKey ( <span class="number">33</span> ); <span class="comment">/* 获取按键值 */</span></span><br><span class="line">​</span><br><span class="line">        <span class="keyword">if</span> ( c == <span class="number">27</span> ) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    capture.release();</span><br><span class="line">    destroyWindow ( <span class="string">"Movie Player"</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新界面比原来的增加了一个进度条，通过进度条可以调节播放的的进度。先看看<code>createTrackbar</code>函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">createTrackbar</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="built_in">string</span> &amp;trackbarname, <span class="keyword">const</span> <span class="built_in">string</span> &amp;winname, <span class="keyword">int</span> *value,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> count, TrackbarCallback onChange = <span class="number">0</span>, <span class="keyword">void</span> *userdata = <span class="number">0</span> )</span></span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>trackbarname</code>：进度条的名字，用来代表创建的轨迹条。</li>
<li><code>winname</code>：窗口的名字，表示这个进度条会依附到哪个窗口上，即对应<code>namedWindow</code>创建窗口时填的那个窗口名，滑动条不会遮挡图像。</li>
<li><code>value</code>：滑块的位置，在创建时滑块的初始位置就是该变量当前的值，当滑动条被拖动时，<code>OpenCV</code>会自动将进度条当前位置所代表的值传给指针指向的整数。</li>
<li><code>count</code>：滑块可以达到的最大位置的值，注意滑块最小的位置的值始终为<code>0</code>。</li>
<li><code>onChange</code>是一个指向回调函数的指针，每次滑块位置改变时，这个函数都会进行回调，并且这个函数的原型必须为<code>void XXXX(int, void*);</code>，其中第一个参数是轨迹条的位置，第二个参数是用户数据(看下面的参数)，如果回调是<code>NULL</code>指针，表示没有回调函数的调用，仅第三个参数<code>value</code>有变化。</li>
<li><code>userdata</code>是用户传给回调函数的数据，用来处理进度条事件，上述代码就是使用该参数传递一个<code>VideoCapture</code>变量，以至于进度条能控制视频帧。</li>
</ul>
<p>&emsp;&emsp;<code>createTrackbar</code>函数为我们创建一个具有特定名称和范围的进度条，并且指定一个和进度条位置同步的变量，而且要指定回调函数<code>onChange</code>，在轨迹条位置改变的时候来调用这个回调函数。可能有些朋友看完上述解释还是有点模糊，还是搞不懂进度条怎么和视频联系到一块呢？首先是进度条通过窗口的名字(第二个参数)绑定到了指定的窗口上，再通过一个整形变量(第三个参数)记录进度条所滑动到达的位置。当进度条滑动时候，会触发回调函数(第五个参数)，而第六个参数是正是回调函数的一个参数。回调函数<code>onTrackbarSlide(int pos,void* capture)</code>的作用就是当进度条被触发时候，设置读取视频帧的位置。<br>&emsp;&emsp;但是当移动进度条时，该进度条总是定位不准，比如想滑动进度条到<code>500</code>帧，结果很难滑到该帧处的，会出现跳跃的现象。我用的是<code>opencv 2.0</code>版本，同样的代码在<code>opencv 1.0</code>里完全没错，可是这是为什么？原因在于<code>opencv 2.0</code>以后采用<code>ffmpeg</code>采集视频，而<code>opencv 1.0</code>采用<code>vfw</code>采集视频。当<code>opencv</code>在定位时，调用了<code>ffmpeg</code>的<code>av_seek_frame</code>函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">av_seek_frame</span> <span class="params">( AVFormatContext *s, <span class="keyword">int</span> stream_index, <span class="keyword">int64_t</span> timestamp, <span class="keyword">int</span> flags )</span></span>;</span><br></pre></td></tr></table></figure>
<p>参数<code>flags</code>有如下选项：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AVSEEK_FLAG_BACKWARD = <span class="number">1</span>;</span><br><span class="line">AVSEEK_FLAG_BYTE = <span class="number">2</span>;</span><br><span class="line">AVSEEK_FLAG_ANY = <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p><code>ffmpeg</code>默认的是选取关键帧(这个概念需要具体定义)，<code>opencv</code>里面这个函数的参数<code>flags</code>是<code>0</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ret = av_seek_frame ( ic, video_stream, timestamp, <span class="number">0</span> );</span><br></pre></td></tr></table></figure>
<p>也就是按照默认的读取关键帧，因此视频跳跃就出现了。解决这个问题方法是将<code>0</code>改为<code>AVSEEK_FLAG_ANY</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ret = av_seek_frame ( ic, video_stream, timestamp, AVSEEK_FLAG_ANY );</span><br></pre></td></tr></table></figure>
<p>之后重新编译<code>opencv</code>库，就可以了。<br>&emsp;&emsp;还有几个函数也是经常用到的，例如获取当前进度条的位置<code>getTrackbarPos</code>函数，以及设置当前进度条的位置<code>setTrackbarPos</code>函数等，这些函数都定义在<code>opencv2/highgui/highgui.hpp</code>文件中。</p>
<hr>
<p>&emsp;&emsp;<code>python</code>播放视频代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">​</span><br><span class="line">cap = cv2.VideoCapture(<span class="string">'mm4_op.avi'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> (cap.isOpened()):</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">    cv2.imshow(<span class="string">'frame'</span>, frame)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">​</span><br><span class="line">cap.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<p><code>cap.read</code>函数返回一个二元组，元组的第一个值是<code>ret</code>，表明是否成功从缓冲中读取了<code>frame</code>；元组的第二个值<code>frame</code>就是视频本身。</p>
<hr>
<h3 id="滑动条的使用"><a href="#滑动条的使用" class="headerlink" title="滑动条的使用"></a>滑动条的使用</h3><p>&emsp;&emsp;首先需要创建一个滑动条，例如<code>cv2.createTrackbar(&#39;R&#39;, &#39;image&#39;, 0, 255, call_back)</code>，其中参数<code>R</code>是滑动条的名称，<code>image</code>是所在窗口的名称，<code>0</code>是当前的值，<code>255</code>是最大值，<code>call_back</code>是回调函数名称，回调函数默认有一个表示当前值的参数。<br>&emsp;&emsp;创建好之后，可以在回调函数中获取滑动条的值，也可以用<code>cv2.getTrackbarPos</code>得到，其中<code>参数一</code>是滑动条的名称，<code>参数二</code>是窗口的名称。下面实现一个<code>RGB</code>的调色板：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nothing</span><span class="params">(x)</span>:</span>  <span class="comment"># 回调函数，“x”表示滑块的位置，本例暂不使用</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">​</span><br><span class="line">img = np.zeros((<span class="number">300</span>, <span class="number">512</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">cv2.namedWindow(<span class="string">'image'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="comment"># 创建RGB三个滑动条</span></span><br><span class="line">cv2.createTrackbar(<span class="string">'R'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv2.createTrackbar(<span class="string">'G'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv2.createTrackbar(<span class="string">'B'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">True</span>):</span><br><span class="line">    cv2.imshow(<span class="string">'image'</span>, img)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># 获取滑块的值</span></span><br><span class="line">    r = cv2.getTrackbarPos(<span class="string">'R'</span>, <span class="string">'image'</span>)</span><br><span class="line">    g = cv2.getTrackbarPos(<span class="string">'G'</span>, <span class="string">'image'</span>)</span><br><span class="line">    b = cv2.getTrackbarPos(<span class="string">'B'</span>, <span class="string">'image'</span>)</span><br><span class="line">    img[:] = [b, g, r]  <span class="comment"># 设定img的颜色</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/01/10/opencv和图像处理/播放视频文件/1.png" height="278" width="385"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/列表/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/列表/" itemprop="url">列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T12:48:07+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>Python</code>的列表比<code>C</code>语言的数组更加强大。</p>
<h3 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h3><p>&emsp;&emsp;创建<code>普通列表</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>]</span><br></pre></td></tr></table></figure>
<p>创建<code>混合列表</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mix = [<span class="number">1</span>, <span class="string">'hello'</span>, <span class="number">3.14</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br></pre></td></tr></table></figure>
<p>创建<code>空列表</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">empty = []</span><br></pre></td></tr></table></figure>
<p>创建<code>嵌套列表</code>：嵌套列表是在列表里创建其它列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">n = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">x = [a, n]</span><br><span class="line">x  <span class="comment"># 结果为[['a', 'b', 'c'], [1, 2, 3]]</span></span><br><span class="line">x[<span class="number">0</span>]  <span class="comment"># 结果为['a', 'b', 'c']</span></span><br><span class="line">x[<span class="number">0</span>][<span class="number">1</span>]  <span class="comment"># 结果为“b”</span></span><br></pre></td></tr></table></figure>
<h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><p>&emsp;&emsp;向列表添加元素，使用<code>append</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.append(<span class="string">'five'</span>)  <span class="comment"># 结果为['one', 'two', 'three', 'four', 'five']</span></span><br></pre></td></tr></table></figure>
<p><code>append</code>是对象<code>member</code>的一个方法，它不能同时添加两个元素到列表中，例如<code>member.append(&#39;six&#39;, &#39;seven&#39;)</code>。如果想同时添加两个元素到列表中，需要用到<code>extend</code>方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结果为['one', 'two', 'three', 'four', 'five', 'six', 'seven']</span></span><br><span class="line">member.extend([<span class="string">'six'</span>, <span class="string">'seven'</span>])</span><br></pre></td></tr></table></figure>
<p><code>append</code>和<code>extend</code>都是默认把元素添加到列表的末尾。要想把元素插到列表的指定位置，需要<code>insert</code>方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把“zero”插到列表的第0位，结果为['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven']</span></span><br><span class="line">member.insert(<span class="number">0</span>, <span class="string">'zero'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="获取元素"><a href="#获取元素" class="headerlink" title="获取元素"></a>获取元素</h3><p>&emsp;&emsp;和数组一样，我们可以通过元素的索引值(<code>index</code>)从列表获取单个元素，注意列表索引值是从`0开始的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">member[<span class="number">0</span>]  <span class="comment"># 结果为“zero”</span></span><br><span class="line">member[<span class="number">1</span>]  <span class="comment"># 结果为“one”</span></span><br><span class="line"><span class="comment"># 数组元素交换</span></span><br><span class="line">temp = member[<span class="number">0</span>]</span><br><span class="line">member[<span class="number">0</span>] = member[<span class="number">1</span>]</span><br><span class="line">member[<span class="number">1</span>] = temp</span><br><span class="line">member  <span class="comment"># 结果为['one', 'zero', 'two', 'three', 'four', 'five', 'six', 'seven']</span></span><br></pre></td></tr></table></figure>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><p>&emsp;&emsp;从列表中删除元素，使用<code>remove</code>方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.remove(<span class="string">'zero'</span>)  <span class="comment"># 结果为['one', 'two', 'three', 'four', 'five', 'six', 'seven']</span></span><br></pre></td></tr></table></figure>
<p>或者使用<code>del</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> member[<span class="number">0</span>]  <span class="comment"># 删除列表的第0个元素</span></span><br><span class="line"><span class="keyword">del</span> member[<span class="number">1</span>]  <span class="comment"># 删除列表的第1个元素</span></span><br><span class="line"><span class="keyword">del</span> member  <span class="comment"># 删除整个列表</span></span><br></pre></td></tr></table></figure>
<p>或者使用<code>pop</code>，该方法可以从列表尾弹出一个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">member = [<span class="string">'zero'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>, <span class="string">'six'</span>, <span class="string">'seven'</span>]</span><br><span class="line">member.pop()  <span class="comment"># 把“seven”从列表中弹出</span></span><br><span class="line">name = member.pop()  <span class="comment"># 把“six”从列表中弹出，并赋值给name</span></span><br><span class="line">member.pop(<span class="number">1</span>)  <span class="comment"># 把member列表中第1个元素即“one”从列表中弹出</span></span><br><span class="line">member  <span class="comment"># 结果为['zero', 'two', 'three', 'four', 'five']</span></span><br></pre></td></tr></table></figure>
<h3 id="列表分片"><a href="#列表分片" class="headerlink" title="列表分片"></a>列表分片</h3><p>&emsp;&emsp;如果一次性需要从列表中获取多个元素，可以利用列表分片：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">member  <span class="comment"># 结果为['zero', 'two', 'three', 'four', 'five']</span></span><br><span class="line">member[<span class="number">1</span>:<span class="number">3</span>]  <span class="comment"># 结果为['two', 'three']</span></span><br><span class="line">member[:<span class="number">3</span>]  <span class="comment"># 结果为['zero', 'two', 'three']</span></span><br><span class="line">member[<span class="number">1</span>:]  <span class="comment"># 结果为['two', 'three', 'four', 'five']</span></span><br><span class="line">member[:]  <span class="comment"># 结果为['zero', 'two', 'three', 'four', 'five']</span></span><br><span class="line">member2 = member[:]</span><br><span class="line">member2  <span class="comment"># 结果为['zero', 'two', 'three', 'four', 'five']</span></span><br></pre></td></tr></table></figure>
<p>注意，<code>list[1:3]</code>其实只输出两个变量，即<code>list</code>中第二个元素到第三个元素，并不是第<code>1</code>、第<code>2</code>和第<code>3</code>三个元素。</p>
<h3 id="列表操作符"><a href="#列表操作符" class="headerlink" title="列表操作符"></a>列表操作符</h3><p>&emsp;&emsp;列表的一些常用操作符：比较操作符、逻辑操作符、连接操作符、重复操作符、成员关系操作符。具体应用如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">123</span>]</span><br><span class="line">list2 = [<span class="number">234</span>]</span><br><span class="line">list1 &gt; list2  <span class="comment"># 结果为False</span></span><br><span class="line">list1 = [<span class="number">123</span>, <span class="number">456</span>]</span><br><span class="line">list2 = [<span class="number">234</span>, <span class="number">123</span>]</span><br><span class="line">list1 &gt; list2  <span class="comment"># 结果为False。我们发现，比较是从第0个元素开始的</span></span><br><span class="line">list3 = [<span class="number">123</span>, <span class="number">456</span>]</span><br><span class="line">(list1 &lt; list2) <span class="keyword">and</span> (list1 == list3)  <span class="comment"># 结果为True</span></span><br><span class="line">list4 = list1 + list2</span><br><span class="line">list4  <span class="comment"># 结果为[123, 456, 234, 123]</span></span><br><span class="line">list1 + <span class="string">'hello'</span>  <span class="comment"># 结果为“出错”</span></span><br><span class="line">list3  <span class="comment"># 结果为[123, 456]</span></span><br><span class="line">list3 * <span class="number">3</span>  <span class="comment"># 结果为[123, 456, 123, 456, 123, 456]，list3并未改变</span></span><br><span class="line">list3 *= <span class="number">3</span></span><br><span class="line">list3  <span class="comment"># 结果为[123, 456, 123, 456, 123, 456]，list3被改变</span></span><br></pre></td></tr></table></figure>
<p>注意，向列表中添加元素不推荐使用<code>+</code>号！<br>&emsp;&emsp;成员关系操作符的应用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list3  <span class="comment"># 结果为[123, 456, 123, 456, 123, 456]</span></span><br><span class="line"><span class="number">123</span> <span class="keyword">in</span> list3  <span class="comment"># 结果为True</span></span><br><span class="line"><span class="string">"hello"</span> <span class="keyword">in</span> list3  <span class="comment"># 结果为False</span></span><br><span class="line"><span class="number">123</span> <span class="keyword">not</span> <span class="keyword">in</span> list3  <span class="comment"># 结果为False</span></span><br><span class="line">list5 = [<span class="number">123</span>, [<span class="string">"one"</span>, <span class="string">"two"</span>], <span class="number">456</span>]</span><br><span class="line"><span class="string">"one"</span> <span class="keyword">in</span> list5  <span class="comment"># 结果为False</span></span><br><span class="line"><span class="string">"one"</span> <span class="keyword">in</span> list5[<span class="number">1</span>]  <span class="comment"># 结果为True</span></span><br><span class="line">list5[<span class="number">1</span>][<span class="number">1</span>]  <span class="comment"># 结果为“two”，列表中的列表可以与C语言的二维数组联系起来</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">list3  <span class="comment"># 得到[123, 456, 123, 456, 123, 456]</span></span><br><span class="line">list3.count(<span class="number">123</span>)  <span class="comment"># 得到3，作用为找出123在列表中的数目</span></span><br><span class="line">list3.index(<span class="number">123</span>)  <span class="comment"># 得到0，作用为找到123在列表中的第1个索引</span></span><br><span class="line">list3.index(<span class="number">123</span>, <span class="number">3</span>, <span class="number">7</span>)  <span class="comment"># 得到4，作用为找到123在列表中范围是4到7的索引</span></span><br><span class="line">list3.reverse()  <span class="comment"># 列表反序，结果为[456, 123, 456, 123, 456, 123]</span></span><br><span class="line">list4 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>]</span><br><span class="line">list4.sort()  <span class="comment"># 对列表按默认的顺序(从小到大)进行排序</span></span><br><span class="line">list4  <span class="comment"># 得到[0, 1, 3, 4, 5, 7, 8, 9]</span></span><br><span class="line">list4.sort(reverse=<span class="keyword">True</span>)  <span class="comment"># 对列表按反序进行排序</span></span><br><span class="line">list4  <span class="comment"># 结果为[9, 8, 7, 5, 4, 3, 1, 0]</span></span><br><span class="line"><span class="comment"># ------------------------------</span></span><br><span class="line">list4 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>]</span><br><span class="line">list4  <span class="comment"># 得到[4, 5, 7, 1, 3, 8, 9, 0]</span></span><br><span class="line">list5 = list4[:]</span><br><span class="line">list5.sort()  <span class="comment"># 对list5正向排序</span></span><br><span class="line">list5  <span class="comment"># 得到[0, 1, 3, 4, 5, 7, 8, 9]</span></span><br><span class="line">list6 = list4</span><br><span class="line">list6  <span class="comment"># 得到[4, 5, 7, 1, 3, 8, 9, 0]</span></span><br><span class="line">list4.sort(reverse=<span class="keyword">True</span>)  <span class="comment"># 对list4反序排序</span></span><br><span class="line">list4  <span class="comment"># 得到[9, 8, 7, 5, 4, 3, 1, 0]</span></span><br><span class="line">list6  <span class="comment"># 得到[9, 8, 7, 5, 4, 3, 1, 0]</span></span><br></pre></td></tr></table></figure>
<p><code>list5</code>是对<code>list4</code>的复制；<code>list6</code>是指向<code>list4</code>，与<code>list4</code>共享数据。<br>&emsp;&emsp;如果列表中的元素是元祖，则排序可以使用<code>key</code>关键字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [(<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'c'</span>, <span class="number">0</span>)]</span><br><span class="line">b = sorted(a, key=<span class="keyword">lambda</span> a_tuple: a_tuple[<span class="number">0</span>])</span><br><span class="line">c = sorted(a, key=<span class="keyword">lambda</span> a_tuple: a_tuple[<span class="number">1</span>])</span><br><span class="line">print(b)  <span class="comment"># 结果为[('a', 1), ('b', 2), ('c', 0)]</span></span><br><span class="line">print(c)  <span class="comment"># 结果为[('c', 0), ('a', 1), ('b', 2)]</span></span><br></pre></td></tr></table></figure>
<h3 id="Python列表函数和方法"><a href="#Python列表函数和方法" class="headerlink" title="Python列表函数和方法"></a>Python列表函数和方法</h3><p>&emsp;&emsp;针对列表，可以使用如下<code>Python</code>内置函数进行处理：</p>
<ul>
<li><code>len(list)</code>：列表元素个数。</li>
<li><code>max(list)</code>：返回列表元素最大值。</li>
<li><code>min(list)</code>：返回列表元素最小值。</li>
<li><code>list(seq)</code>：将元组转换为列表。</li>
</ul>
<p><code>list</code>包含以下方法：</p>
<ul>
<li><code>list.append(obj)</code>：在列表末尾添加新的对象。</li>
<li><code>list.count(obj)</code>：统计某个元素在列表中出现的次数。</li>
<li><code>list.extend(seq)</code>：在列表末尾一次性追加另一个序列中的多个值(用新列表扩展原来的列表)。</li>
<li><code>list.index(obj)</code>：从列表中找出某个值第一个匹配项的索引位置。</li>
<li><code>list.insert(index, obj)</code>：将对象插入列表。</li>
<li><code>list.pop(obj=list[-1])</code>：移除列表中的一个元素(默认最后一个元素)，并且返回该元素的值。</li>
<li><code>list.remove(obj)</code>：移除列表中某个值的第一个匹配项。</li>
<li><code>list.reverse()</code>：反转列表中元素。</li>
<li><code>list.sort([func])</code>：对原列表进行排序。</li>
<li><code>list.clear()</code>：清空列表。</li>
<li><code>list.copy()</code>：复制列表。</li>
</ul>
<h3 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h3><p>&emsp;&emsp;列表推导式提供了从序列创建列表的简单途径。通常应用程序将一些操作应用于某个序列的每个元素，用其获得的结果作为生成新列表的元素，或者根据确定的判定条件创建子序列。<br>&emsp;&emsp;每个列表推导式都在<code>for</code>之后跟一个表达式，然后有零至多个<code>for</code>或<code>if</code>子句。返回结果是一个根据表达从其后的<code>for</code>和<code>if</code>上下文环境中生成出来的列表。如果希望表达式推导出一个元组，就必须使用括号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vec = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">[<span class="number">3</span> * x <span class="keyword">for</span> x <span class="keyword">in</span> vec]  <span class="comment"># 结果为[6, 12, 18]</span></span><br><span class="line">[[x, x ** <span class="number">2</span>] <span class="keyword">for</span> x <span class="keyword">in</span> vec]  <span class="comment"># 结果为[[2, 4], [4, 16], [6, 36]]</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;下列是对序列里每一个元素逐个调用某种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">freshfruit = [<span class="string">'  banana'</span>, <span class="string">'  loganberry '</span>, <span class="string">'passion fruit  '</span>]</span><br><span class="line"><span class="comment"># 结果为['banana', 'loganberry', 'passion fruit']</span></span><br><span class="line">[weapon.strip() <span class="keyword">for</span> weapon <span class="keyword">in</span> freshfruit]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以用<code>if</code>子句作为过滤器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span> * x <span class="keyword">for</span> x <span class="keyword">in</span> vec <span class="keyword">if</span> x &gt; <span class="number">3</span>]  <span class="comment"># 结果为[12, 18]</span></span><br><span class="line">[<span class="number">3</span> * x <span class="keyword">for</span> x <span class="keyword">in</span> vec <span class="keyword">if</span> x &lt; <span class="number">2</span>]  <span class="comment"># 结果为[]</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;以下是一些关于循环和其它技巧的演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vec1 = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">vec2 = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">-9</span>]</span><br><span class="line">[x * y <span class="keyword">for</span> x <span class="keyword">in</span> vec1 <span class="keyword">for</span> y <span class="keyword">in</span> vec2]  <span class="comment"># 结果为[8, 6, -18, 16, 12, -36, 24, 18, -54]</span></span><br><span class="line">[x + y <span class="keyword">for</span> x <span class="keyword">in</span> vec1 <span class="keyword">for</span> y <span class="keyword">in</span> vec2]  <span class="comment"># 结果为[6, 5, -7, 8, 7, -5, 10, 9, -3]</span></span><br><span class="line">[vec1[i] * vec2[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(len(vec1))]  <span class="comment"># 结果为[8, 12, -54]</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;列表推导式可以使用复杂表达式或嵌套函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结果为['3.1', '3.14', '3.142', '3.1416', '3.14159']</span></span><br><span class="line">[str(round(<span class="number">355</span> / <span class="number">113</span>, i)) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>)]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;列表推导式的执行顺序：各语句之间是嵌套关系，左边第二个语句是最外层，依次往右进一层，左边第一条语句是最后一层。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x * y <span class="keyword">for</span> x <span class="keyword">in</span> range[<span class="number">1</span>, <span class="number">5</span>] <span class="keyword">if</span> x &gt; <span class="number">2</span> <span class="keyword">for</span> y <span class="keyword">in</span> range[<span class="number">1</span>, <span class="number">4</span>] <span class="keyword">if</span> x &lt; <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>它的执行顺序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range[<span class="number">1</span>, <span class="number">5</span>]:</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> range[<span class="number">1</span>, <span class="number">4</span>]:</span><br><span class="line">            <span class="keyword">if</span> x &lt; <span class="number">3</span>:</span><br><span class="line">                x * y</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="嵌套列表解析"><a href="#嵌套列表解析" class="headerlink" title="嵌套列表解析"></a>嵌套列表解析</h3><p>&emsp;&emsp;以下实例展示了<code>3 * 4</code>的矩阵列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">matrix = [</span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>以下实例将<code>3 * 4</code>的矩阵列表转换为<code>4 * 3</code>列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]</span></span><br><span class="line">[[row[i] <span class="keyword">for</span> row <span class="keyword">in</span> matrix] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>)]</span><br></pre></td></tr></table></figure>
<p>也可以使用以下方法来实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">transposed = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    transposed.append([row[i] <span class="keyword">for</span> row <span class="keyword">in</span> matrix])</span><br><span class="line"></span><br><span class="line">transposed  <span class="comment"># 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]</span></span><br></pre></td></tr></table></figure>
<p>另外一种实现方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">transposed = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    <span class="comment"># the following 3 lines implement the nested listcomp</span></span><br><span class="line">    transposed_row = []</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> matrix:</span><br><span class="line">        transposed_row.append(row[i])</span><br><span class="line">    transposed.append(transposed_row)</span><br><span class="line">​</span><br><span class="line">transposed  <span class="comment"># 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/序列/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/序列/" itemprop="url">序列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T10:16:23+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="关于序列"><a href="#关于序列" class="headerlink" title="关于序列"></a>关于序列</h3><p>&emsp;&emsp;<code>list</code>、<code>tuple</code>和<code>str</code>都可以称之为<code>序列</code>。<code>list([iterable])</code>把可迭代对象<code>iterable</code>转换为列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = list()</span><br><span class="line">a  <span class="comment"># 得到[]</span></span><br><span class="line">b = <span class="string">"hello"</span></span><br><span class="line">b = list(b)</span><br><span class="line">b  <span class="comment"># 得到['h', 'e', 'l', 'l', 'o']</span></span><br><span class="line">c = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>)</span><br><span class="line">c = list(c)</span><br><span class="line">c  <span class="comment"># 得到[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]</span></span><br></pre></td></tr></table></figure>
<p><code>tuple([iterable])</code>把可迭代对象<code>iterable</code>转换为元组；<code>str(obj)</code>把<code>obj</code>对象转换为字符串。</p>
<p>&emsp;&emsp;列表、元组和字符串的共同点：</p>
<ul>
<li>都可以通过索引得到每一个元素。</li>
<li>默认索引值总是从<code>0</code>开始。</li>
<li>可以通过分片的方法得到一个范围内的元素的集合。</li>
<li>有很多共同的操作符：</li>
</ul>
<p>&emsp;&emsp;1. <code>max</code>返回序列或者参数集合中的最大值，<code>min</code>则返回最小值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">max(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)  <span class="comment"># 结果为“5”</span></span><br><span class="line">b = [<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>]</span><br><span class="line">max(b)  <span class="comment"># 结果为“o”</span></span><br><span class="line">member = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">max(member)  <span class="comment"># 结果为“5”</span></span><br><span class="line">min(member)  <span class="comment"># 结果为“1”</span></span><br><span class="line">chars = <span class="string">"1234567890"</span></span><br><span class="line">min(chars)  <span class="comment"># 结果为“0”</span></span><br><span class="line">tuple1 = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">max(tuple1)  <span class="comment"># 结果为“4”</span></span><br><span class="line">member.append(<span class="string">'a'</span>)</span><br><span class="line">member  <span class="comment"># 结果为“[1, 2, 3, 4, 5, 'a']”</span></span><br><span class="line">max(member)  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;2. 在序列中遍历时，索引位置和对应值可以使用<code>enumerate</code>函数同时得到。<br>&emsp;&emsp;3. <code>sum(iterable[, start=0])</code>返回序列<code>iterable</code>和可选参数<code>start</code>的总和(该方法适用于<code>list</code>和<code>tuple</code>，对于<code>str</code>会出错)：<br>&emsp;&emsp;4. 使用<code>sorted</code>函数对序列进行排序，使用<code>reversed</code>对序列进行翻转：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tuple1 = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">sum(tuple1)  <span class="comment"># 结果为“10”</span></span><br><span class="line">tuple2 = (<span class="number">1.2</span>, <span class="number">2.4</span>, <span class="number">3.6</span>)</span><br><span class="line">sum(tuple2)  <span class="comment"># 结果为“7.199999999999999”</span></span><br><span class="line">tuple2 = (<span class="number">1.5</span>, <span class="number">1.6</span>, <span class="number">1.7</span>)</span><br><span class="line">sum(tuple2)  <span class="comment"># 结果为“4.8”</span></span><br><span class="line">sum(tuple2, <span class="number">1</span>)  <span class="comment"># 结果为“5.8”</span></span><br><span class="line">chars = <span class="string">"hello"</span></span><br><span class="line">sum(chars)  <span class="comment"># 结果为“出错”</span></span><br><span class="line">sorted(tuple2)  <span class="comment"># 结果为“[1.5, 1.6, 1.7]”</span></span><br><span class="line">reversed(tuple2)  <span class="comment"># 结果为“&lt;reversed object at 0x0265D9F0&gt;”</span></span><br><span class="line">list(reversed(tuple2))  <span class="comment"># 结果为“[1.7, 1.6, 1.5]”</span></span><br><span class="line">enumerate(tuple2)  <span class="comment"># 结果为“&lt;enumerate object at 0x02670238&gt;”</span></span><br><span class="line">list(enumerate(tuple2))  <span class="comment"># 结果为“[(0, 1.5), (1, 1.6), (2, 1.7)]”</span></span><br></pre></td></tr></table></figure>
<h3 id="同时遍历"><a href="#同时遍历" class="headerlink" title="同时遍历"></a>同时遍历</h3><p>&emsp;&emsp;同时遍历两个或更多的序列，可以使用<code>zip</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">questions = [<span class="string">'name'</span>, <span class="string">'quest'</span>, <span class="string">'favorite color'</span>]</span><br><span class="line">answers = [<span class="string">'qinshihuang'</span>, <span class="string">'the holy'</span>, <span class="string">'blue'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> q, a <span class="keyword">in</span> zip(questions, answers):</span><br><span class="line">    print(<span class="string">'what is your %s? it is %s'</span> % (q, a))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">what is your name? it is qinshihuang</span><br><span class="line">what is your quest? it is the holy</span><br><span class="line">what is your favorite color? it is blue</span><br></pre></td></tr></table></figure>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>&emsp;&emsp;切片的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list[start:end:step]</span><br></pre></td></tr></table></figure>
<p><code>list</code>表示需要取子集的列表变量，<code>[start:end:step]</code>表示从第<code>start</code>个索引位置开始到第<code>end</code>个索引之间(但不包括第<code>end</code>个索引)截取子集，截取的步长是<code>step</code>(默认为<code>1</code>)。注意<code>step</code>的符号：</p>
<ul>
<li><code>step &gt; 0</code>：序列是从<code>start</code>开始由左向右看。</li>
<li><code>step &lt; 0</code>：序列是从<code>start</code>开始由右向左看。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">print(a[<span class="number">1</span>:<span class="number">3</span>])  <span class="comment"># 输出“[1, 2]”</span></span><br><span class="line">print(a[<span class="number">1</span>::<span class="number">2</span>])  <span class="comment"># 输出“[1, 3, 5, 7, 9]”</span></span><br><span class="line">print(a[:<span class="number">9</span>:<span class="number">2</span>])  <span class="comment"># 输出“[0, 2, 4, 6, 8]”</span></span><br><span class="line">print(a[:<span class="number">5</span>:<span class="number">-1</span>])  <span class="comment"># 输出“[9, 8, 7, 6]”</span></span><br><span class="line">print(a[<span class="number">0</span>:<span class="number">5</span>:<span class="number">-1</span>])  <span class="comment"># 输出“[]”</span></span><br><span class="line">print(a[<span class="number">1</span>::<span class="number">-1</span>])  <span class="comment"># 输出“[1, 0]”</span></span><br><span class="line">print(a[:<span class="number">-1</span>])  <span class="comment"># 输出“[0, 1, 2, 3, 4, 5, 6, 7, 8]”</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/10/Python语法/python基础语法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/10/Python语法/python基础语法/" itemprop="url">python基础语法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T08:54:28+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p>&emsp;&emsp;默认情况下，<code>Python 3</code>源码文件以<code>UTF-8</code>编码保存，所有的字符串都是<code>unicode</code>字符串。当然你也可以为源码文件指定不同的编码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: cp-1252 -*-</span></span><br></pre></td></tr></table></figure>
<h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><ul>
<li>第一个字符必须是英文字母表中的<code>字母</code>或<code>_</code>。</li>
<li>标识符的其他的部分可以是<code>字母</code>、<code>数字</code>或<code>_</code>。</li>
<li>标识符对大小写敏感。</li>
<li>在<code>Python 3</code>中，非<code>ASCII</code>标识符也是允许的。</li>
</ul>
<h3 id="python保留字"><a href="#python保留字" class="headerlink" title="python保留字"></a>python保留字</h3><p>&emsp;&emsp;保留字即关键字，我们不能把它们用作任何标识符名称。<code>Python</code>的标准库提供了<code>keyword</code>模块，可以输出当前版本的所有关键字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> keyword</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keyword.kwlist</span><br><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>,</span><br><span class="line"><span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>,</span><br><span class="line"><span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>&emsp;&emsp;<code>Python</code>中单行注释以<code>#</code>开头：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line">print(<span class="string">"Hello, Python!"</span>)  <span class="comment"># 第二个注释</span></span><br></pre></td></tr></table></figure>
<p>多行注释可以用多个<code>#</code>号：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line"><span class="comment"># 第二个注释</span></span><br><span class="line">print(<span class="string">"Hello, Python!"</span>)</span><br></pre></td></tr></table></figure>
<p>关于注释，也可以使用<code>&#39;&#39;&#39; &#39;&#39;&#39;</code>(或<code>&quot;&quot;&quot; &quot;&quot;&quot;</code>)的格式在三引号之间书写较长的注释。该方法还可以用于在函数首部，对函数进行一个说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">example</span><span class="params">(anything)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    形参为任意类型的对象，这个示例函数会将其原样返回</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> anything</span><br></pre></td></tr></table></figure>
<h3 id="行与缩进"><a href="#行与缩进" class="headerlink" title="行与缩进"></a>行与缩进</h3><p>&emsp;&emsp;<code>python</code>的特色就是使用缩进来表示代码块，不需要使用大括号<code>{}</code>。缩进的空格数是可变的，但是属于同一个代码块的语句必须使用相同的缩进空格数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure>
<p>以下代码最后一行语句缩进数的空格数不一致，会导致运行错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    print(<span class="string">"Answer"</span>)</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"Answer"</span>)</span><br><span class="line">  print(<span class="string">"False"</span>)  <span class="comment"># 缩进不一致，会导致运行错误</span></span><br></pre></td></tr></table></figure>
<h3 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h3><p>&emsp;&emsp;<code>Python</code>通常是一行写完一条语句，但如果语句很长，我们可以使用反斜杠<code>\</code>来实现多行语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">total = item_one + \</span><br><span class="line">        item_two + \</span><br><span class="line">        item_three</span><br></pre></td></tr></table></figure>
<p>在<code>[]</code>、<code>{}</code>或<code>()</code>中的多行语句，不需要使用反斜杠<code>\</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">total = [<span class="string">'item_one'</span>, <span class="string">'item_two'</span>, <span class="string">'item_three'</span>,</span><br><span class="line">        <span class="string">'item_four'</span>, <span class="string">'item_five'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><p>&emsp;&emsp;函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。<br>&emsp;&emsp;空行与代码缩进不同，空行并不是<code>Python</code>语法的一部分。书写时不插入空行，<code>Python</code>解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。记住，空行也是程序代码的一部分。</p>
<h3 id="等待用户输入"><a href="#等待用户输入" class="headerlink" title="等待用户输入"></a>等待用户输入</h3><p>&emsp;&emsp;执行下面的程序，显示<code>按下enter键后退出</code>后会等待用户输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">input(<span class="string">"按下enter键后退出"</span>)</span><br></pre></td></tr></table></figure>
<p>一旦用户按下回车键，程序将退出。</p>
<h3 id="同一行显示多条语句"><a href="#同一行显示多条语句" class="headerlink" title="同一行显示多条语句"></a>同一行显示多条语句</h3><p>&emsp;&emsp;<code>Python</code>可以在同一行中使用多条语句，语句之间使用分号<code>;</code>分割：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys; x = <span class="string">'runoob'</span>; sys.stdout.write(x + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="多个语句构成代码组"><a href="#多个语句构成代码组" class="headerlink" title="多个语句构成代码组"></a>多个语句构成代码组</h3><p>&emsp;&emsp;缩进相同的一组语句构成一个代码块，我们称之为<code>代码组</code>。像<code>if</code>、<code>while</code>、<code>def</code>和<code>class</code>这样的复合语句，首行以关键字开始，以冒号<code>:</code>结束，该行之后的一行或多行代码构成代码组。我们将首行以及后面的代码组称为一个<code>子句</code>(<code>clause</code>)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression:</span><br><span class="line">    suite</span><br><span class="line"><span class="keyword">elif</span> expression:</span><br><span class="line">    suite</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    suite</span><br></pre></td></tr></table></figure>
<h3 id="Print输出"><a href="#Print输出" class="headerlink" title="Print输出"></a>Print输出</h3><p>&emsp;&emsp;print默认输出是换行的，如果要实现不换行，需要在<code>print</code>中加上<code>end=&quot; &quot;</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">"a"</span></span><br><span class="line">y = <span class="string">"b"</span></span><br><span class="line"><span class="comment"># 换行输出</span></span><br><span class="line">print(x)</span><br><span class="line">print(y)</span><br><span class="line">print(<span class="string">'---------'</span>)</span><br><span class="line"><span class="comment"># 不换行输出</span></span><br><span class="line">print(x, end=<span class="string">" "</span>)</span><br><span class="line">print(y, end=<span class="string">" "</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">b</span><br><span class="line">---------</span><br><span class="line">a b</span><br></pre></td></tr></table></figure>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>&emsp;&emsp;<code>python</code>的变量不需要声明变量类型，变量的类型由赋予它的值来决定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>  <span class="comment"># 整型</span></span><br><span class="line">a = <span class="number">1.001</span>  <span class="comment"># 浮点数</span></span><br><span class="line">a = <span class="string">"python"</span>  <span class="comment"># 字符串</span></span><br><span class="line">print(a)  <span class="comment"># 结果为“python”。print输出时只保留了最后一次的赋值</span></span><br></pre></td></tr></table></figure>
<h3 id="import与“from…import”"><a href="#import与“from…import”" class="headerlink" title="import与“from…import”"></a>import与“from…import”</h3><p>&emsp;&emsp;<code>python</code>用<code>import</code>或<code>from...import</code>来导入相应的模块。</p>
<ul>
<li>将整个模块(<code>somemodule</code>)导入，格式为<code>import somemodule</code>。</li>
<li>从某个模块中导入某个函数，格式为<code>from somemodule import somefunction</code>。</li>
<li>从某个模块中导入多个函数，格式为<code>from somemodule import firstfunc, secondfunc, thirdfunc</code>。</li>
<li>将某个模块中的全部函数导入，格式为<code>from somemodule import *</code>。</li>
</ul>
<p>&emsp;&emsp;导入<code>sys</code>模块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">​</span><br><span class="line">print(<span class="string">'命令行参数为:'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> sys.argv:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'\npython路径为'</span>, sys.path)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;导入<code>sys</code>模块的<code>argv</code>和<code>path</code>函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv, path  <span class="comment"># 导入特定的成员</span></span><br><span class="line">​</span><br><span class="line">print(<span class="string">'path:'</span>, path)  <span class="comment"># 因为已经导入path成员，所以此处引用时不需要加“sys.path”</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/字符串/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/字符串/" itemprop="url">字符串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T20:29:46+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;字符串有如下特性：</p>
<ul>
<li><code>python</code>中单引号和双引号使用完全相同。</li>
<li>使用三引号(<code>&#39;&#39;&#39;</code>或<code>&quot;&quot;&quot;</code>)可以指定一个多行字符串。</li>
<li>转义符是<code>\</code>。</li>
<li>自然字符串是通过在字符串前加<code>r</code>或<code>R</code>，例如<code>r&quot;this is a line with\n&quot;</code>，则<code>\n</code>会显示，并不是换行。</li>
<li><code>python</code>可以处理<code>unicode</code>字符串，需要加上前缀<code>u</code>或<code>U</code>，例如<code>u&quot;this is an unicode string&quot;</code>。</li>
<li>字符串是不可变的。</li>
<li>按字面意义级联字符串，例如<code>&quot;this &quot; &quot;is &quot; &quot;string&quot;</code>会被自动转换为<code>this is string</code>。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">'字符串'</span></span><br><span class="line">sentence = <span class="string">"这是一个句子"</span></span><br><span class="line">paragraph = <span class="string">"""这是一个段落，</span></span><br><span class="line"><span class="string">可以由多行组成"""</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串的截取的语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量[头下标:尾下标]</span><br></pre></td></tr></table></figure>
<p>索引值以<code>0</code>为开始值，<code>-1</code>为从末尾的开始位置，<code>str[0:-1]</code>表示第一个到倒数第二个的所有字符。加号<code>+</code>是字符串的连接符，星号<code>*</code>表示复制当前字符串，紧跟的数字为复制的次数。<br>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">"Good morning"</span></span><br><span class="line">str1 * <span class="number">2</span>  <span class="comment"># 结果为“Good morningGood morning”</span></span><br><span class="line">str1[:<span class="number">6</span>]  <span class="comment"># 结果为“Good m”</span></span><br><span class="line">str1[<span class="number">6</span>]  <span class="comment"># 结果为“o”</span></span><br><span class="line">str1[:<span class="number">6</span>] + <span class="string">"Happy"</span> + str1[<span class="number">6</span>:]  <span class="comment"># 结果为“Good mHappyorning”</span></span><br><span class="line">str1  <span class="comment"># 结果为“Good morning”，str1并未改变</span></span><br><span class="line">str1 = str1[:<span class="number">6</span>] + <span class="string">"Happy"</span> + str1[<span class="number">6</span>:]</span><br><span class="line">str1  <span class="comment"># 结果为“Good mHappyorning”，str1已经被改变</span></span><br></pre></td></tr></table></figure>
<p>常见的字符串方法：</p>
<ul>
<li><code>capitalize</code>：把字符串的第一个字符改为大写。</li>
<li><code>casefold</code>：把整个字符串的所有字符改为小写。</li>
<li><code>center(width)</code>：将字符串居中，并使用空格填充至长度<code>width</code>的新字符串。</li>
<li><code>count(sub[, start[, end]])</code>：返回<code>sub</code>在字符串里边出现的次数，<code>start</code>和<code>end</code>是可选的，表示范围。</li>
<li><code>encode(encoding=&#39;utf-8&#39;, errors=&#39;strict&#39;)</code>：<code>以encoding</code>指定的编码格式对字符串进行编码。</li>
<li><code>endswith(sub[, start[, end]])</code>：检查字符串是否以<code>sub</code>子字符串结束，如果是返回<code>True</code>，否则返回<code>False</code>。start和end是可选的，表示范围。</li>
<li><code>expandtabs([tabsize=8])</code>：把字符串中的<code>tab</code>符号转换为空格，如果不指定参数，默认的空格数是<code>tabsize = 8</code>。</li>
<li><code>find(sub[, start[, end]])</code>：检测<code>sub</code>是否包含在字符串中，如果有则返回索引值，否则返回<code>-1</code>。<code>start</code>和<code>end</code>是可选的，表示范围。</li>
<li><code>index(sub[, start[, end]])</code>：和<code>find</code>方法一样，但如果<code>sub</code>不在<code>string</code>中，则会产生一个异常。</li>
<li><code>isalnum</code>：如果字符串至少有一个字符，并且所有字符都是字母或数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isalpha</code>：如果字符串至少有一个字符，并且所有字符都是字母，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isdecimal</code>：如果字符串只包含十进制数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isdigit</code>：如果字符串只包含数字，就返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>islower</code>：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是小写，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isnumeric</code>：如果字符串中只包含数字字符，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isspace</code>：如果字符串中只包含空格，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>istitle</code>：如果字符串是标题化(所有的单词都是以大写开始，其余字母均小写)，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>isupper</code>：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是大写，则返回<code>True</code>，否则返回<code>False</code>。</li>
<li><code>join(sub)</code>：以字符串作为分隔符，插入到<code>sub</code>中所有的字符之间。</li>
<li><code>ljust(width)</code>：返回一个左对齐的字符串，并使用空格填充至长度为<code>width</code>的新字符串。</li>
<li><code>lower</code>：转换字符串中所有大写字符为小写。</li>
<li><code>lstrip</code>：去掉字符串左边的所有空格。</li>
<li><code>partition(sub)</code>：找到子字符串<code>sub</code>，把字符串分成一个<code>3</code>元组<code>(pre_sub, sub, fol_sub)</code>，如果字符串中不包含<code>sub</code>则返回<code>(&#39;原字符串&#39;, &#39;&#39;, &#39;&#39;)</code>。</li>
<li><code>replace(old, new[, count])</code>：把字符串中的<code>old</code>子字符串替换成<code>new</code>子字符串，如果<code>count</code>指定，则替换不超过<code>count</code>次。</li>
<li><code>rfind(sub[, start[, end]])</code>：类似于<code>find</code>方法，不过是从右边开始查找。</li>
<li><code>rindex(sub[, start[, end]])</code>：类似于<code>index</code>方法，不过是从右边开始。</li>
<li><code>rjust(width)</code>：返回一个右对齐的字符串，并使用空格填充至长度为<code>width</code>的新字符串。</li>
<li><code>rpartition(sub)</code>：类似于<code>partition</code>方法，不过是从右边开始查找。</li>
<li><code>rstrip</code>：删除字符串末尾的空格或换行符。</li>
<li><code>split(sep=None, maxsplit=-1)</code>：不带参数默认是以空格为分隔符切片字符串，如果<code>maxsplit</code>参数有设置，则仅分隔<code>maxsplit</code>个子字符串，返回切片后的子字符串拼接的列表。</li>
<li><code>splitlines(([keepends]))</code>：按照<code>\n</code>分隔，返回一个包含各行作为元素的列表，如果<code>keepends</code>参数指定，则返回前<code>keepends</code>行。</li>
<li><code>startswith(prefix[, start[, end]])</code>：检查字符串是否以<code>prefix</code>开头，是则返回<code>True</code>，否则返回<code>False</code>。<code>start</code>和<code>end</code>是可选的，指定检查范围。</li>
<li><code>strip([chars])</code>：删除字符串前边和后边所有的空格，<code>chars</code>参数可以定制删除的字符。</li>
<li><code>swapcase</code>：翻转字符串中的大小写。</li>
<li><code>title</code>：返回标题化(所有的单词都是以大写开始，其余字母均小写)的字符串。</li>
<li><code>translate(table)</code>：根据<code>table</code>的规则(可以由<code>str.maketrans(&#39;a&#39;, &#39;b&#39;)</code>定制)转换字符串中的字符。</li>
<li><code>upper</code>：转换字符串中的所有小写字符为大写。</li>
<li><code>zfill(width)</code>：返回长度为<code>width</code>的字符串，原字符串右对齐，前边用<code>0</code>填充。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str2 = <span class="string">"xiaoxie"</span></span><br><span class="line">str2.capitalize()  <span class="comment"># 结果为“Xiaoxie”</span></span><br><span class="line">str2  <span class="comment"># 结果为“xiaoxie”，注意这些方法并不改变字符串</span></span><br><span class="line">str2.count(<span class="string">"xi"</span>)  <span class="comment"># 结果为“2”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串格式化符号含义：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%c</code></td>
<td>格式化字符及其<code>ASCII</code>码</td>
</tr>
<tr>
<td><code>%s</code></td>
<td>格式化字符串</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>格式化整数</td>
</tr>
<tr>
<td><code>%o</code></td>
<td>格式化无符号八进制数</td>
</tr>
<tr>
<td><code>%x</code></td>
<td>格式化无符号十六进制数</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>格式化无符号十六进制数(大写)</td>
</tr>
<tr>
<td><code>%f</code></td>
<td>格式化定点数，可指定小数点后的精度</td>
</tr>
<tr>
<td><code>%e</code></td>
<td>用科学计数法格式化定点数</td>
</tr>
<tr>
<td><code>%E</code></td>
<td>作用同<code>%e</code>，用科学计数法格式化定点数</td>
</tr>
<tr>
<td><code>%g</code></td>
<td>根据值的大小决定使用<code>%f</code>或<code>%e</code></td>
</tr>
<tr>
<td><code>%G</code></td>
<td>作用同<code>%g</code>，根据值的大小决定使用<code>%f</code>或者<code>%E</code></td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;格式化操作符辅助指令：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>m.n</code></td>
<td><code>m</code>是显示的最小总宽度，<code>n</code>是小数点后的位数</td>
</tr>
<tr>
<td><code>-</code></td>
<td>用于左对齐</td>
</tr>
<tr>
<td><code>+</code></td>
<td>在正数前面显示加号<code>+</code></td>
</tr>
<tr>
<td><code>#</code></td>
<td>在八进制数前面显示<code>0o</code>，在十六进制数前面显示<code>0x</code>或<code>0X</code></td>
</tr>
<tr>
<td><code>0</code></td>
<td>显示的数字前面填充<code>0</code>取代空格</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;字符串转义字符含义：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\&#39;</code></td>
<td>单引号</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号</td>
</tr>
<tr>
<td><code>\a</code></td>
<td>发出系统响铃声</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>退格符</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行符</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>横向制表符(<code>TAB</code>)</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>纵向制表符</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车符</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>换页符</td>
</tr>
<tr>
<td><code>\o</code></td>
<td>八进制数代表的字符</td>
</tr>
<tr>
<td><code>\x</code></td>
<td>十六进制数代表的字符</td>
</tr>
<tr>
<td><code>\0</code></td>
<td>表示一个空字符</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜杠</td>
</tr>
</tbody>
</table>
</div>
<p>&emsp;&emsp;在终端输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'\ta'</span>  <span class="comment"># 结果为“\ta”</span></span><br><span class="line">print(<span class="string">'\ta'</span>)  <span class="comment"># 结果为“    a”</span></span><br><span class="line">print(<span class="string">'\\'</span>)  <span class="comment"># 结果为“\”</span></span><br><span class="line"><span class="string">"&#123;&#123;0&#125;&#125;"</span>.format(<span class="string">"不打印"</span>)  <span class="comment"># 结果为“&#123;0&#125;”</span></span><br><span class="line"><span class="string">"&#123;0:.1f&#125;&#123;1&#125;"</span>.format(<span class="number">27.658</span>, <span class="string">"GB"</span>)  <span class="comment"># 结果为“27.7GB”</span></span><br><span class="line"><span class="string">"%c"</span> % <span class="number">97</span>  <span class="comment"># 结果为“a”</span></span><br><span class="line"><span class="string">"%c %c %c"</span> % (<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>)  <span class="comment"># 结果为“a b c”</span></span><br><span class="line"><span class="string">"%s"</span> % <span class="string">"I love you"</span>  <span class="comment"># 结果为“I love you”</span></span><br><span class="line"><span class="string">"%d + %d = %d"</span> % (<span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span> + <span class="number">5</span>)  <span class="comment"># 结果为“4 + 5 = 9”</span></span><br><span class="line"><span class="string">"%o"</span> % <span class="number">10</span>  <span class="comment"># 结果为“12”</span></span><br><span class="line"><span class="string">"%x"</span> % <span class="number">10</span>  <span class="comment"># 结果为“a”</span></span><br><span class="line"><span class="string">"%X"</span> % <span class="number">10</span>  <span class="comment"># 结果为“A”</span></span><br><span class="line"><span class="string">"%f"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“27.658000”</span></span><br><span class="line"><span class="string">"%e"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.765800e+01”</span></span><br><span class="line"><span class="string">"%E"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.765800E+01”</span></span><br><span class="line"><span class="string">"%g"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“27.658”</span></span><br><span class="line"><span class="string">"%5.1f"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“ 27.7”</span></span><br><span class="line"><span class="string">"%.2e"</span> % <span class="number">27.658</span>  <span class="comment"># 结果为“2.77e+01”</span></span><br><span class="line"><span class="string">"%10d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“         5”</span></span><br><span class="line"><span class="string">"%-10d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“5         ”</span></span><br><span class="line"><span class="string">"%+d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“+5”</span></span><br><span class="line"><span class="string">"%#o"</span> % <span class="number">10</span>  <span class="comment"># 结果为“0o12”</span></span><br><span class="line"><span class="string">"%#X"</span> % <span class="number">10</span>  <span class="comment"># 结果为“0XA”</span></span><br><span class="line"><span class="string">"%+d"</span> % <span class="number">-5</span>  <span class="comment"># 结果为“-5”</span></span><br><span class="line"><span class="string">"%#d"</span> % <span class="number">10</span>  <span class="comment"># 结果为“10”</span></span><br><span class="line"><span class="string">"%010d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“0000000005”</span></span><br><span class="line"><span class="string">"%-010d"</span> % <span class="number">5</span>  <span class="comment"># 结果为“5         ”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>format</code>格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;&#125; love &#123;&#125; &#123;&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 得到“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;0&#125; love &#123;1&#125; &#123;2&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 得到“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 结果为“出错”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"you"</span>, c=<span class="string">"xinzi"</span>)  <span class="comment"># 结果为“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;0&#125; love &#123;b&#125; &#123;c&#125;"</span>.format(<span class="string">"I"</span>, b=<span class="string">"you"</span>, c=<span class="string">"xinzi"</span>)  <span class="comment"># 结果为“I love you xinzi”</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125; &#123;0&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"you"</span>, <span class="string">"xinzi"</span>)  <span class="comment"># 结果为“出错”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;分割字符串如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'a,b,c,d'</span></span><br><span class="line">strlist = str.split(<span class="string">','</span>)  <span class="comment"># 用逗号分割str字符串，并保存到列表</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> strlist:  <span class="comment"># 循环输出列表值</span></span><br><span class="line">    print(value, end=<span class="string">" "</span>)  <span class="comment"># 输出“a b c d”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>join</code>方法用于将序列中的元素以指定的字符连接生成一个新的字符串：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.join(sequence)</span><br></pre></td></tr></table></figure>
<p>参数<code>sequence</code>是要连接的元素序列。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">"-"</span></span><br><span class="line">s2 = <span class="string">""</span></span><br><span class="line">seq = (<span class="string">"r"</span>, <span class="string">"u"</span>, <span class="string">"n"</span>, <span class="string">"o"</span>, <span class="string">"o"</span>, <span class="string">"b"</span>)  <span class="comment"># 字符串序列</span></span><br><span class="line">print(s1.join(seq))  <span class="comment"># 输出“r-u-n-o-o-b”</span></span><br><span class="line">print(s2.join(seq))  <span class="comment"># 输出“runoob”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>maketrans</code>方法用于给<code>translate</code>方法创建字符映射转换表。一般情况下，<code>maketrans</code>方法需要配合<code>translate</code>方法一起使用。<br>&emsp;&emsp;该方法可以只接受一个参数，此时这个参数是个字典类型；对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串，表示转换的目标，两个字符串的长度必须相同，为一一对应的关系；在<code>Python 3</code>中可以有第三个参数，表示要删除的字符，也是字符串。<br>&emsp;&emsp;<code>Python 3.4</code>以后已经不需要从外部<code>string</code>模块中来调用<code>maketrans</code>方法了，取而代之的是内建函数，即<code>bytearray.maketrans</code>、<code>bytes.maketrans</code>和<code>str.maketrans</code>。<br>&emsp;&emsp;<code>Python 3</code>中的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.maketrans(intab, outtab[, delchars])</span><br></pre></td></tr></table></figure>
<p><code>Python 2</code>中的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line">string.maketrans(intab, outtab)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>intab</code>：需要转换的字符组成的字符串。</li>
<li><code>outtab</code>：转换的目标字符组成的字符串。</li>
<li><code>delchars</code>：可选参数，表示要删除的字符组成的字符串。</li>
</ul>
<p>该方法返回一个字符映射转换表，以供<code>translate</code>方法调用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">intab = <span class="string">"aeiou"</span></span><br><span class="line">outtab = <span class="string">"12345"</span></span><br><span class="line">deltab = <span class="string">"thw"</span></span><br><span class="line">​</span><br><span class="line">trantab1 = str.maketrans(intab, outtab)  <span class="comment"># 创建字符映射转换表</span></span><br><span class="line">trantab2 = str.maketrans(intab, outtab, deltab)  <span class="comment"># 创建字符映射转换表，并删除指定字符</span></span><br><span class="line">test = <span class="string">"this is string example....wow!!!"</span></span><br><span class="line">print(test.translate(trantab1))</span><br><span class="line">print(test.translate(trantab2))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">th3s <span class="number">3</span>s str3ng <span class="number">2</span>x1mpl2....w4w!!!</span><br><span class="line"><span class="number">3</span>s <span class="number">3</span>s sr3ng <span class="number">2</span>x1mpl2...<span class="number">.4</span>!!!</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串反转函数如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> s[::<span class="number">-1</span>]</span><br><span class="line">​</span><br><span class="line">print(reverse(<span class="string">"hello"</span>))  <span class="comment"># 输出“olleh”</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;关于字符串的比较：先比较两个对象的第<code>0</code>个元素，大小关系即为对象的大小关系。如果相等则继续比较后续元素，先终止迭代的则认为是小的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/Python语法/Python运算符/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Python语法/Python运算符/" itemprop="url">Python运算符</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T18:33:38+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python语法/" itemprop="url" rel="index">
                    <span itemprop="name">Python语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Python算术运算符"><a href="#Python算术运算符" class="headerlink" title="Python算术运算符"></a>Python算术运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>21</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加</td>
<td><code>a + b</code>结果为<code>31</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>减</td>
<td><code>a - b</code>结果为<code>-11</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘</td>
<td><code>a * b</code>结果为<code>210</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除</td>
<td><code>b / a</code>结果为<code>2.1</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td>取模</td>
<td><code>b % a</code>结果为<code>1</code></td>
</tr>
<tr>
<td><code>**</code></td>
<td>幂</td>
<td><code>a ** b</code>结果为<code>10</code>的<code>21</code>次方</td>
</tr>
<tr>
<td><code>//</code></td>
<td>取整除</td>
<td><code>9//2</code>结果为<code>4</code>，<code>9.0//2.0</code>结果为<code>4.0</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python比较运算符"><a href="#Python比较运算符" class="headerlink" title="Python比较运算符"></a>Python比较运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>==</code></td>
<td>等于</td>
<td><code>a == b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
<td><code>a != b</code>返回<code>True</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
<td><code>a &gt; b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
<td><code>a &lt; b</code>返回<code>True</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于</td>
<td><code>a &gt;= b</code>返回<code>False</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于等于</td>
<td><code>a &lt;= b</code>返回<code>True</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python赋值运算符"><a href="#Python赋值运算符" class="headerlink" title="Python赋值运算符"></a>Python赋值运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，变量<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>简单的赋值</td>
<td><code>c = a + b</code>将<code>a + b</code>的运算结果赋值为<code>c</code></td>
</tr>
<tr>
<td><code>+=</code></td>
<td>加法赋值</td>
<td><code>c += a</code>等效于<code>c = c + a</code></td>
</tr>
<tr>
<td><code>-=</code></td>
<td>减法赋值</td>
<td><code>c -= a</code>等效于<code>c = c - a</code></td>
</tr>
<tr>
<td><code>*=</code></td>
<td>乘法赋值</td>
<td><code>c *= a</code>等效于<code>c = c * a</code></td>
</tr>
<tr>
<td><code>/=</code></td>
<td>除法赋值</td>
<td><code>c /= a</code>等效于<code>c = c / a</code></td>
</tr>
<tr>
<td><code>%=</code></td>
<td>取模赋值</td>
<td><code>c %= a</code>等效于<code>c = c % a</code></td>
</tr>
<tr>
<td><code>**=</code></td>
<td>幂赋值</td>
<td><code>c **= a</code>等效于<code>c = c ** a</code></td>
</tr>
<tr>
<td><code>//=</code></td>
<td>取整除赋值</td>
<td><code>c //= a</code>等效于<code>c = c // a</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python位运算符"><a href="#Python位运算符" class="headerlink" title="Python位运算符"></a>Python位运算符</h3><p>&emsp;&emsp;按位运算符是把数字看作二进制来进行计算的。<code>Python</code>中的按位运算法则如下(假设<code>a</code>为<code>60</code>，<code>b</code>为<code>13</code>)：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;</code></td>
<td>按位与</td>
<td><code>a &amp; b</code>结果为<code>12</code>，二进制为<code>0000 1100</code></td>
</tr>
<tr>
<td><code>&#124;</code></td>
<td>按位或</td>
<td><code>a &#124; b</code>结果为<code>61</code>，二进制为<code>0011 1101</code></td>
</tr>
<tr>
<td><code>^</code></td>
<td>按位异或</td>
<td><code>a ^ b</code>结果为<code>49</code>，二进制为<code>0011 0001</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>按位取反</td>
<td><code>~x</code>类似于<code>-x - 1</code>，<code>~a</code>结果为<code>-61</code>，二进制为<code>1100 0011</code></td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左移</td>
<td><code>a &lt;&lt; 2</code>结果为<code>240</code>，二进制为<code>1111 0000</code></td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右移</td>
<td><code>a &gt;&gt; 2</code>结果为<code>15</code>，二进制为<code>0000 1111</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python逻辑运算符"><a href="#Python逻辑运算符" class="headerlink" title="Python逻辑运算符"></a>Python逻辑运算符</h3><p>&emsp;&emsp;以下假设变量<code>a</code>为<code>10</code>，<code>b</code>为<code>20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>逻辑表达式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>and</code></td>
<td><code>x and y</code></td>
<td>如果<code>x</code>为<code>False</code>，<code>x and y</code>返回<code>False</code>，否则它返回<code>y</code>的计算值</td>
<td><code>a and b</code>返回<code>20</code></td>
</tr>
<tr>
<td><code>or</code></td>
<td><code>x or y</code></td>
<td>如果<code>x</code>是<code>True</code>，它返回<code>x</code>的值，否则它返回<code>y</code>的计算值</td>
<td><code>a or b</code>返回<code>10</code></td>
</tr>
<tr>
<td><code>not</code></td>
<td><code>not x</code></td>
<td>如果<code>x</code>为<code>True</code>，返回<code>False</code>；如果<code>x</code>为<code>False</code>，它返回<code>True</code></td>
<td><code>not(a and b)</code>返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Python成员运算符"><a href="#Python成员运算符" class="headerlink" title="Python成员运算符"></a>Python成员运算符</h3><p>&emsp;&emsp;除了以上的一些运算符之外，<code>Python</code>还支持成员运算符，测试实例中包含了一系列的成员，包括字符串、列表或元组。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in</code></td>
<td>如果在指定的序列中找到值，返回<code>True</code>，否则返回<code>False</code></td>
</tr>
<tr>
<td><code>not in</code></td>
<td>如果在指定的序列中没有找到值，返回<code>True</code>，否则返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"1 - 变量a在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"1 - 变量a不在给定的列表中list中"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( b <span class="keyword">not</span> <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"2 - 变量b不在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"2 - 变量b在给定的列表中list中"</span>)</span><br><span class="line">​</span><br><span class="line">a = <span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</span><br><span class="line">    print(<span class="string">"3 - 变量a在给定的列表中list中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"3 - 变量a不在给定的列表中list中"</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> - 变量a不在给定的列表中list中</span><br><span class="line"><span class="number">2</span> - 变量b不在给定的列表中list中</span><br><span class="line"><span class="number">3</span> - 变量a在给定的列表中list中</span><br></pre></td></tr></table></figure>
<h3 id="Python身份运算符"><a href="#Python身份运算符" class="headerlink" title="Python身份运算符"></a>Python身份运算符</h3><p>&emsp;&emsp;身份运算符用于比较两个对象的存储单元。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is</code></td>
<td><code>x is y</code>类似于<code>id(x) == id(y)</code>。如果引用的是同一个对象，则返回<code>True</code>，否则返回<code>False</code></td>
</tr>
<tr>
<td><code>is not</code></td>
<td><code>x is not y</code>类似于<code>id(a) != id(b)</code>。如果引用的不是同一个对象，则返回结果<code>True</code>，否则返回<code>False</code></td>
</tr>
</tbody>
</table>
</div>
<p><code>id</code>函数用于获取对象内存地址：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">20</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</span><br><span class="line">    print(<span class="string">"1 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"1 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( id(a) == id(b) ):</span><br><span class="line">    print(<span class="string">"2 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"2 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line">b = <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</span><br><span class="line">    print(<span class="string">"3 - a和b有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"3 - a和b没有相同的标识"</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> <span class="keyword">not</span> b ):</span><br><span class="line">    print(<span class="string">"4 - a和b没有相同的标识"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"4 - a和b有相同的标识"</span>)</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> - a和b有相同的标识</span><br><span class="line"><span class="number">2</span> - a和b有相同的标识</span><br><span class="line"><span class="number">3</span> - a和b没有相同的标识</span><br><span class="line"><span class="number">4</span> - a和b没有相同的标识</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>is</code>与<code>==</code>的区别：<code>is</code>用于判断两个变量引用对象是否为同一个，<code>==</code>用于判断引用变量的值是否相等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = a</span><br><span class="line">b <span class="keyword">is</span> a  <span class="comment"># 结果为True</span></span><br><span class="line">b == a  <span class="comment"># 结果为True</span></span><br><span class="line">b = a[:]</span><br><span class="line">b <span class="keyword">is</span> a  <span class="comment"># 结果为False</span></span><br><span class="line">b == a  <span class="comment"># 结果为True</span></span><br></pre></td></tr></table></figure>
<h3 id="Python运算符优先级"><a href="#Python运算符优先级" class="headerlink" title="Python运算符优先级"></a>Python运算符优先级</h3><p>&emsp;&emsp;以下表格列出了从最高到最低优先级的所有运算符：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>**</code></td>
<td>指数(最高优先级)</td>
</tr>
<tr>
<td><code>~ + -</code></td>
<td>按位翻转、一元加号和减号(最后两个的方法名为<code>+@</code>和<code>-@</code>)</td>
</tr>
<tr>
<td><code>* / % //</code></td>
<td>乘、除、取模和取整除</td>
</tr>
<tr>
<td><code>+ -</code></td>
<td>加法、减法</td>
</tr>
<tr>
<td><code>&gt;&gt; &lt;&lt;</code></td>
<td>右移、左移</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>按位与</td>
</tr>
<tr>
<td><code>^ &#124;</code></td>
<td>按位异或、按位或</td>
</tr>
<tr>
<td><code>&lt;= &lt; &gt; &gt;=</code></td>
<td>比较运算符</td>
</tr>
<tr>
<td><code>== !=</code></td>
<td>等于运算符</td>
</tr>
<tr>
<td><code>= %= /= //= -= += *= **=</code></td>
<td>赋值运算符</td>
</tr>
<tr>
<td><code>is</code>、<code>is not</code></td>
<td>身份运算符</td>
</tr>
<tr>
<td><code>in</code>、<code>not in</code></td>
<td>成员运算符</td>
</tr>
<tr>
<td><code>not or and</code></td>
<td>逻辑运算符</td>
</tr>
</tbody>
</table>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fukangwei.gitee.io/2019/01/09/深度学习/Pytorch模型可视化/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付康为">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="暴徒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/深度学习/Pytorch模型可视化/" itemprop="url">Pytorch模型可视化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T17:04:20+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;<code>torchsummary</code>可以用于模型的可视化，它会输出模型各层的详细参数以及输出尺寸。其安装方法如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install torchsummary</span><br></pre></td></tr></table></figure>
<p>使用<code>torchsummary</code>直接调用<code>summary</code>即可，参数分别为<code>model</code>和输入<code>tensor</code>的尺寸：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">summary(your_model, input_size=(channels, H, W))</span><br></pre></td></tr></table></figure>
<p>简单的例子如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line"><span class="keyword">from</span> torchvision.models <span class="keyword">import</span> vgg11</span><br><span class="line">​</span><br><span class="line">model = vgg11(pretrained=<span class="keyword">False</span>)</span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    model = model.cuda()</span><br><span class="line">​</span><br><span class="line">summary(model, (<span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">224</span>, <span class="number">224</span>]           <span class="number">1</span>,<span class="number">792</span></span><br><span class="line">              ReLU<span class="number">-2</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">224</span>, <span class="number">224</span>]               <span class="number">0</span></span><br><span class="line">         MaxPool2d<span class="number">-3</span>         [<span class="number">-1</span>, <span class="number">64</span>, <span class="number">112</span>, <span class="number">112</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-4</span>        [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">112</span>, <span class="number">112</span>]          <span class="number">73</span>,<span class="number">856</span></span><br><span class="line">              ReLU<span class="number">-5</span>        [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">112</span>, <span class="number">112</span>]               <span class="number">0</span></span><br><span class="line">         MaxPool2d<span class="number">-6</span>          [<span class="number">-1</span>, <span class="number">128</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-7</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]         <span class="number">295</span>,<span class="number">168</span></span><br><span class="line">              ReLU<span class="number">-8</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-9</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]         <span class="number">590</span>,<span class="number">080</span></span><br><span class="line">             ReLU<span class="number">-10</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">56</span>, <span class="number">56</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-11</span>          [<span class="number">-1</span>, <span class="number">256</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-12</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]       <span class="number">1</span>,<span class="number">180</span>,<span class="number">160</span></span><br><span class="line">             ReLU<span class="number">-13</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-14</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-15</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-16</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-17</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-18</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">           Conv2d<span class="number">-19</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]       <span class="number">2</span>,<span class="number">359</span>,<span class="number">808</span></span><br><span class="line">             ReLU<span class="number">-20</span>          [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">14</span>, <span class="number">14</span>]               <span class="number">0</span></span><br><span class="line">        MaxPool2d<span class="number">-21</span>            [<span class="number">-1</span>, <span class="number">512</span>, <span class="number">7</span>, <span class="number">7</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-22</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]     <span class="number">102</span>,<span class="number">764</span>,<span class="number">544</span></span><br><span class="line">             ReLU<span class="number">-23</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">          Dropout<span class="number">-24</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-25</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]      <span class="number">16</span>,<span class="number">781</span>,<span class="number">312</span></span><br><span class="line">             ReLU<span class="number">-26</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">          Dropout<span class="number">-27</span>                 [<span class="number">-1</span>, <span class="number">4096</span>]               <span class="number">0</span></span><br><span class="line">           Linear<span class="number">-28</span>                 [<span class="number">-1</span>, <span class="number">1000</span>]       <span class="number">4</span>,<span class="number">097</span>,<span class="number">000</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">132</span>,<span class="number">863</span>,<span class="number">336</span></span><br><span class="line">Trainable params: <span class="number">132</span>,<span class="number">863</span>,<span class="number">336</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.57</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">125.18</span></span><br><span class="line">Params size (MB): <span class="number">506.83</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">632.59</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;代码实例二如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">1</span>, <span class="number">10</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">10</span>, <span class="number">20</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.conv2_drop = nn.Dropout2d()</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">320</span>, <span class="number">50</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">50</span>, <span class="number">10</span>)</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = F.relu(F.max_pool2d(self.conv1(x), <span class="number">2</span>))</span><br><span class="line">        x = F.relu(F.max_pool2d(self.conv2_drop(self.conv2(x)), <span class="number">2</span>))</span><br><span class="line">        x = x.view(<span class="number">-1</span>, <span class="number">320</span>)</span><br><span class="line">        x = F.relu(self.fc1(x))</span><br><span class="line">        x = F.dropout(x, training=self.training)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        <span class="keyword">return</span> F.log_softmax(x, dim=<span class="number">1</span>)</span><br><span class="line">​</span><br><span class="line">model = Net()</span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    model = model.cuda()</span><br><span class="line">​</span><br><span class="line">summary(model, (<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>           [<span class="number">-1</span>, <span class="number">10</span>, <span class="number">24</span>, <span class="number">24</span>]             <span class="number">260</span></span><br><span class="line">            Conv2d<span class="number">-2</span>             [<span class="number">-1</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">8</span>]           <span class="number">5</span>,<span class="number">020</span></span><br><span class="line">         Dropout2d<span class="number">-3</span>             [<span class="number">-1</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">8</span>]               <span class="number">0</span></span><br><span class="line">            Linear<span class="number">-4</span>                   [<span class="number">-1</span>, <span class="number">50</span>]          <span class="number">16</span>,<span class="number">050</span></span><br><span class="line">            Linear<span class="number">-5</span>                   [<span class="number">-1</span>, <span class="number">10</span>]             <span class="number">510</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">21</span>,<span class="number">840</span></span><br><span class="line">Trainable params: <span class="number">21</span>,<span class="number">840</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.00</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">0.06</span></span><br><span class="line">Params size (MB): <span class="number">0.08</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">0.15</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;多输入代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line">​</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleConv</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(SimpleConv, self).__init__()</span><br><span class="line">        self.features = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br><span class="line">​</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        x1 = self.features(x)</span><br><span class="line">        x2 = self.features(y)</span><br><span class="line">        <span class="keyword">return</span> x1, x2</span><br><span class="line">​</span><br><span class="line">device = torch.device(<span class="string">"cuda"</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">"cpu"</span>)</span><br><span class="line">model = SimpleConv().to(device)</span><br><span class="line">summary(model, [(<span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>), (<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)])</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="number">-1</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>]              <span class="number">10</span></span><br><span class="line">              ReLU<span class="number">-2</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>]               <span class="number">0</span></span><br><span class="line">            Conv2d<span class="number">-3</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>]              <span class="number">10</span></span><br><span class="line">              ReLU<span class="number">-4</span>            [<span class="number">-1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>]               <span class="number">0</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">20</span></span><br><span class="line">Trainable params: <span class="number">20</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.77</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">0.02</span></span><br><span class="line">Params size (MB): <span class="number">0.00</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">0.78</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/57/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/">57</a><span class="page-number current">58</span><a class="page-number" href="/page/59/">59</a><span class="space">&hellip;</span><a class="page-number" href="/page/94/">94</a><a class="extend next" rel="next" href="/page/59/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付康为</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">934</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付康为</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
